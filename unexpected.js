/*!
 * Copyright (c) 2013 Sune Simonsen <sune@we-knowhow.dk>
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the 'Software'), to deal in the Software without
 * restriction, including without limitation the rights to use, copy,
 * modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t.weknowhow=t.weknowhow||{},t.weknowhow.expect=e())}(this,function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=Math.ceil,o=Math.floor,i=function(t){return isNaN(t=+t)?0:(t>0?o:r)(t)},s=Object.freeze({default:i,__moduleExports:i}),a=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},u=Object.freeze({default:a,__moduleExports:a}),c=s&&i||s,f=u&&a||u,l=function(t){return function(e,n){var r,o,i=String(f(e)),s=c(n),a=i.length;return s<0||s>=a?t?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):r:t?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}},p=Object.freeze({default:l,__moduleExports:l}),h=!0,d=Object.freeze({default:h,__moduleExports:h}),y=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=Object.freeze({default:y,__moduleExports:y}),v=n(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),m=v.version,_=Object.freeze({default:v,__moduleExports:v,version:m}),b=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},w=Object.freeze({default:b,__moduleExports:b}),E=w&&b||w,x=function(t,e,n){if(E(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},A=Object.freeze({default:x,__moduleExports:x}),j=function(t){return"object"==typeof t?null!==t:"function"==typeof t},F=Object.freeze({default:j,__moduleExports:j}),O=F&&j||F,k=function(t){if(!O(t))throw TypeError(t+" is not an object!");return t},C=Object.freeze({default:k,__moduleExports:k}),T=function(t){try{return!!t()}catch(t){return!0}},S=Object.freeze({default:T,__moduleExports:T}),P=S&&T||S,M=!P(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),D=Object.freeze({default:M,__moduleExports:M}),R=g&&y||g,I=R.document,B=O(I)&&O(I.createElement),z=function(t){return B?I.createElement(t):{}},L=Object.freeze({default:z,__moduleExports:z}),N=D&&M||D,U=L&&z||L,q=!N&&!P(function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a}),K=Object.freeze({default:q,__moduleExports:q}),H=function(t,e){if(!O(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!O(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!O(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!O(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},W=Object.freeze({default:H,__moduleExports:H}),Y=C&&k||C,$=K&&q||K,V=W&&H||W,J=Object.defineProperty,Q=N?Object.defineProperty:function(t,e,n){if(Y(t),e=V(e,!0),Y(n),$)try{return J(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},G={f:Q},X=Object.freeze({default:G,__moduleExports:G,f:Q}),Z=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},tt=Object.freeze({default:Z,__moduleExports:Z}),et=X&&G||X,nt=tt&&Z||tt,rt=N?function(t,e,n){return et.f(t,e,nt(1,n))}:function(t,e,n){return t[e]=n,t},ot=Object.freeze({default:rt,__moduleExports:rt}),it=_&&v||_,st=A&&x||A,at=ot&&rt||ot,ut="prototype",ct=function(t,e,n){var r,o,i,s=t&ct.F,a=t&ct.G,u=t&ct.S,c=t&ct.P,f=t&ct.B,l=t&ct.W,p=a?it:it[e]||(it[e]={}),h=p[ut],d=a?R:u?R[e]:(R[e]||{})[ut];a&&(n=e);for(r in n)(o=!s&&d&&void 0!==d[r])&&r in p||(i=o?d[r]:n[r],p[r]=a&&"function"!=typeof d[r]?n[r]:f&&o?st(i,R):l&&d[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[ut]=t[ut],e}(i):c&&"function"==typeof i?st(Function.call,i):i,c&&((p.virtual||(p.virtual={}))[r]=i,t&ct.R&&h&&!h[r]&&at(h,r,i)))};ct.F=1,ct.G=2,ct.S=4,ct.P=8,ct.B=16,ct.W=32,ct.U=64,ct.R=128;var ft=ct,lt=Object.freeze({default:ft,__moduleExports:ft}),pt=at,ht=Object.freeze({default:pt,__moduleExports:pt}),dt={}.hasOwnProperty,yt=function(t,e){return dt.call(t,e)},gt=Object.freeze({default:yt,__moduleExports:yt}),vt={},mt=Object.freeze({default:vt,__moduleExports:vt}),_t={}.toString,bt=function(t){return _t.call(t).slice(8,-1)},wt=Object.freeze({default:bt,__moduleExports:bt}),Et=wt&&bt||wt,xt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Et(t)?t.split(""):Object(t)},At=Object.freeze({default:xt,__moduleExports:xt}),jt=At&&xt||At,Ft=function(t){return jt(f(t))},Ot=Object.freeze({default:Ft,__moduleExports:Ft}),kt=Math.min,Ct=function(t){return t>0?kt(c(t),9007199254740991):0},Tt=Object.freeze({default:Ct,__moduleExports:Ct}),St=Math.max,Pt=Math.min,Mt=function(t,e){return(t=c(t))<0?St(t+e,0):Pt(t,e)},Dt=Object.freeze({default:Mt,__moduleExports:Mt}),Rt=Ot&&Ft||Ot,It=Tt&&Ct||Tt,Bt=Dt&&Mt||Dt,zt=function(t){return function(e,n,r){var o,i=Rt(e),s=It(i.length),a=Bt(r,s);if(t&&n!=n){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Lt=Object.freeze({default:zt,__moduleExports:zt}),Nt="__core-js_shared__",Ut=R[Nt]||(R[Nt]={}),qt=function(t){return Ut[t]||(Ut[t]={})},Kt=Object.freeze({default:qt,__moduleExports:qt}),Ht=0,Wt=Math.random(),Yt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Ht+Wt).toString(36))},$t=Object.freeze({default:Yt,__moduleExports:Yt}),Vt=Kt&&qt||Kt,Jt=$t&&Yt||$t,Qt=Vt("keys"),Gt=function(t){return Qt[t]||(Qt[t]=Jt(t))},Xt=Object.freeze({default:Gt,__moduleExports:Gt}),Zt=gt&&yt||gt,te=Lt&&zt||Lt,ee=Xt&&Gt||Xt,ne=te(!1),re=ee("IE_PROTO"),oe=function(t,e){var n,r=Rt(t),o=0,i=[];for(n in r)n!=re&&Zt(r,n)&&i.push(n);for(;e.length>o;)Zt(r,n=e[o++])&&(~ne(i,n)||i.push(n));return i},ie=Object.freeze({default:oe,__moduleExports:oe}),se="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ae=Object.freeze({default:se,__moduleExports:se}),ue=ie&&oe||ie,ce=ae&&se||ae,fe=Object.keys||function(t){return ue(t,ce)},le=Object.freeze({default:fe,__moduleExports:fe}),pe=le&&fe||le,he=N?Object.defineProperties:function(t,e){Y(t);for(var n,r=pe(e),o=r.length,i=0;o>i;)et.f(t,n=r[i++],e[n]);return t},de=Object.freeze({default:he,__moduleExports:he}),ye=R.document,ge=ye&&ye.documentElement,ve=Object.freeze({default:ge,__moduleExports:ge}),me=de&&he||de,_e=ve&&ge||ve,be=ee("IE_PROTO"),we=function(){},Ee="prototype",xe=function(){var t,e=U("iframe"),n=ce.length;for(e.style.display="none",_e.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),xe=t.F;n--;)delete xe[Ee][ce[n]];return xe()},Ae=Object.create||function(t,e){var n;return null!==t?(we[Ee]=Y(t),n=new we,we[Ee]=null,n[be]=t):n=xe(),void 0===e?n:me(n,e)},je=Object.freeze({default:Ae,__moduleExports:Ae}),Fe=n(function(t){var e=Vt("wks"),n=R.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Jt)("Symbol."+t))}).store=e}),Oe=Object.freeze({default:Fe,__moduleExports:Fe}),ke=Oe&&Fe||Oe,Ce=et.f,Te=ke("toStringTag"),Se=function(t,e,n){t&&!Zt(t=n?t:t.prototype,Te)&&Ce(t,Te,{configurable:!0,value:e})},Pe=Object.freeze({default:Se,__moduleExports:Se}),Me=je&&Ae||je,De=Pe&&Se||Pe,Re={};at(Re,ke("iterator"),function(){return this});var Ie=function(t,e,n){t.prototype=Me(Re,{next:nt(1,n)}),De(t,e+" Iterator")},Be=Object.freeze({default:Ie,__moduleExports:Ie}),ze=function(t){return Object(f(t))},Le=Object.freeze({default:ze,__moduleExports:ze}),Ne=Le&&ze||Le,Ue=ee("IE_PROTO"),qe=Object.prototype,Ke=Object.getPrototypeOf||function(t){return t=Ne(t),Zt(t,Ue)?t[Ue]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qe:null},He=Object.freeze({default:Ke,__moduleExports:Ke}),We=d&&h||d,Ye=lt&&ft||lt,$e=ht&&pt||ht,Ve=mt&&vt||mt,Je=Be&&Ie||Be,Qe=He&&Ke||He,Ge=ke("iterator"),Xe=!([].keys&&"next"in[].keys()),Ze="@@iterator",tn="keys",en="values",nn=function(){return this},rn=function(t,e,n,r,o,i,s){Je(n,e,r);var a,u,c,f=function(t){if(!Xe&&t in d)return d[t];switch(t){case tn:case en:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",p=o==en,h=!1,d=t.prototype,y=d[Ge]||d[Ze]||o&&d[o],g=!Xe&&y||f(o),v=o?p?f("entries"):g:void 0,m="Array"==e&&d.entries||y;if(m&&(c=Qe(m.call(new t)))!==Object.prototype&&c.next&&(De(c,l,!0),We||Zt(c,Ge)||at(c,Ge,nn)),p&&y&&y.name!==en&&(h=!0,g=function(){return y.call(this)}),We&&!s||!Xe&&!h&&d[Ge]||at(d,Ge,g),Ve[e]=g,Ve[l]=nn,o)if(a={values:p?g:f(en),keys:i?g:f(tn),entries:v},s)for(u in a)u in d||$e(d,u,a[u]);else Ye(Ye.P+Ye.F*(Xe||h),e,a);return a},on=Object.freeze({default:rn,__moduleExports:rn}),sn=p&&l||p,an=on&&rn||on,un=sn(!0);an(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=un(e,n),this._i+=t.length,{value:t,done:!1})});var cn=function(t,e,n,r){try{return r?e(Y(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Y(o.call(t)),e}},fn=Object.freeze({default:cn,__moduleExports:cn}),ln=ke("iterator"),pn=Array.prototype,hn=function(t){return void 0!==t&&(Ve.Array===t||pn[ln]===t)},dn=Object.freeze({default:hn,__moduleExports:hn}),yn=function(t,e,n){e in t?et.f(t,e,nt(0,n)):t[e]=n},gn=Object.freeze({default:yn,__moduleExports:yn}),vn=ke("toStringTag"),mn="Arguments"==Et(function(){return arguments}()),_n=function(t,e){try{return t[e]}catch(t){}},bn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=_n(e=Object(t),vn))?n:mn?Et(e):"Object"==(r=Et(e))&&"function"==typeof e.callee?"Arguments":r},wn=Object.freeze({default:bn,__moduleExports:bn}),En=wn&&bn||wn,xn=ke("iterator"),An=it.getIteratorMethod=function(t){if(void 0!=t)return t[xn]||t["@@iterator"]||Ve[En(t)]},jn=Object.freeze({default:An,__moduleExports:An}),Fn=ke("iterator"),On=!1;try{var kn=[7][Fn]();kn.return=function(){On=!0}}catch(t){}var Cn=function(t,e){if(!e&&!On)return!1;var n=!1;try{var r=[7],o=r[Fn]();o.next=function(){return{done:n=!0}},r[Fn]=function(){return o},t(r)}catch(t){}return n},Tn=Object.freeze({default:Cn,__moduleExports:Cn}),Sn=fn&&cn||fn,Pn=dn&&hn||dn,Mn=gn&&yn||gn,Dn=jn&&An||jn,Rn=Tn&&Cn||Tn;Ye(Ye.S+Ye.F*!Rn(function(t){}),"Array",{from:function(t){var e,n,r,o,i=Ne(t),s="function"==typeof this?this:Array,a=arguments.length,u=a>1?arguments[1]:void 0,c=void 0!==u,f=0,l=Dn(i);if(c&&(u=st(u,a>2?arguments[2]:void 0,2)),void 0==l||s==Array&&Pn(l))for(n=new s(e=It(i.length));e>f;f++)Mn(n,f,c?u(i[f],f):i[f]);else for(o=l.call(i),n=new s;!(r=o.next()).done;f++)Mn(n,f,c?Sn(o,u,[r.value,f],!0):r.value);return n.length=f,n}});var In=it.Array.from,Bn=Object.freeze({default:In,__moduleExports:In}),zn=Bn&&In||Bn,Ln=n(function(t){t.exports={default:zn,__esModule:!0}}),Nn=e(Ln),Un=Object.freeze({default:Nn,__moduleExports:Ln}),qn=Un&&Nn||Un,Kn=n(function(t,e){e.__esModule=!0;var n,r=(n=qn)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}});e(Kn);var Hn=function(){},Wn=Object.freeze({default:Hn,__moduleExports:Hn}),Yn=function(t,e){return{value:e,done:!!t}},$n=Object.freeze({default:Yn,__moduleExports:Yn}),Vn=Wn&&Hn||Wn,Jn=$n&&Yn||$n,Qn=an(Array,"Array",function(t,e){this._t=Rt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Jn(1)):Jn(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ve.Arguments=Ve.Array,Vn("keys"),Vn("values"),Vn("entries");for(var Gn=ke("toStringTag"),Xn="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Zn=0;Zn<Xn.length;Zn++){var tr=Xn[Zn],er=R[tr],nr=er&&er.prototype;nr&&!nr[Gn]&&at(nr,Gn,tr),Ve[tr]=Ve.Array}var rr=ke,or={f:rr},ir=Object.freeze({default:or,__moduleExports:or,f:rr}),sr=ir&&or||ir,ar=sr.f("iterator"),ur=n(function(t){t.exports={default:ar,__esModule:!0}}),cr=e(ur),fr=Object.freeze({default:cr,__moduleExports:ur}),lr=n(function(t){var e=Jt("meta"),n=et.f,r=0,o=Object.isExtensible||function(){return!0},i=!P(function(){return o(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!O(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Zt(t,e)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!Zt(t,e)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return i&&a.NEED&&o(t)&&!Zt(t,e)&&s(t),t}}}),pr=lr.KEY,hr=lr.NEED,dr=lr.fastKey,yr=lr.getWeak,gr=lr.onFreeze,vr=Object.freeze({default:lr,__moduleExports:lr,KEY:pr,NEED:hr,fastKey:dr,getWeak:yr,onFreeze:gr}),mr=et.f,_r=function(t){var e=it.Symbol||(it.Symbol=We?{}:R.Symbol||{});"_"==t.charAt(0)||t in e||mr(e,t,{value:sr.f(t)})},br=Object.freeze({default:_r,__moduleExports:_r}),wr=Object.getOwnPropertySymbols,Er={f:wr},xr=Object.freeze({default:Er,__moduleExports:Er,f:wr}),Ar={}.propertyIsEnumerable,jr={f:Ar},Fr=Object.freeze({default:jr,__moduleExports:jr,f:Ar}),Or=xr&&Er||xr,kr=Fr&&jr||Fr,Cr=function(t){var e=pe(t),n=Or.f;if(n)for(var r,o=n(t),i=kr.f,s=0;o.length>s;)i.call(t,r=o[s++])&&e.push(r);return e},Tr=Object.freeze({default:Cr,__moduleExports:Cr}),Sr=Array.isArray||function(t){return"Array"==Et(t)},Pr=Object.freeze({default:Sr,__moduleExports:Sr}),Mr=ce.concat("length","prototype"),Dr=Object.getOwnPropertyNames||function(t){return ue(t,Mr)},Rr={f:Dr},Ir=Object.freeze({default:Rr,__moduleExports:Rr,f:Dr}),Br=Ir&&Rr||Ir,zr=Br.f,Lr={}.toString,Nr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ur=function(t){try{return zr(t)}catch(t){return Nr.slice()}},qr=function(t){return Nr&&"[object Window]"==Lr.call(t)?Ur(t):zr(Rt(t))},Kr={f:qr},Hr=Object.freeze({default:Kr,__moduleExports:Kr,f:qr}),Wr=Object.getOwnPropertyDescriptor,Yr=N?Wr:function(t,e){if(t=Rt(t),e=V(e,!0),$)try{return Wr(t,e)}catch(t){}if(Zt(t,e))return nt(!kr.f.call(t,e),t[e])},$r={f:Yr},Vr=Object.freeze({default:$r,__moduleExports:$r,f:Yr}),Jr=vr&&lr||vr,Qr=br&&_r||br,Gr=Tr&&Cr||Tr,Xr=Pr&&Sr||Pr,Zr=Hr&&Kr||Hr,to=Vr&&$r||Vr,eo=Jr.KEY,no=to.f,ro=et.f,oo=Zr.f,io=R.Symbol,so=R.JSON,ao=so&&so.stringify,uo="prototype",co=ke("_hidden"),fo=ke("toPrimitive"),lo={}.propertyIsEnumerable,po=Vt("symbol-registry"),ho=Vt("symbols"),yo=Vt("op-symbols"),go=Object[uo],vo="function"==typeof io,mo=R.QObject,_o=!mo||!mo[uo]||!mo[uo].findChild,bo=N&&P(function(){return 7!=Me(ro({},"a",{get:function(){return ro(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=no(go,e);r&&delete go[e],ro(t,e,n),r&&t!==go&&ro(go,e,r)}:ro,wo=function(t){var e=ho[t]=Me(io[uo]);return e._k=t,e},Eo=vo&&"symbol"==typeof io.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof io},xo=function(t,e,n){return t===go&&xo(yo,e,n),Y(t),e=V(e,!0),Y(n),Zt(ho,e)?(n.enumerable?(Zt(t,co)&&t[co][e]&&(t[co][e]=!1),n=Me(n,{enumerable:nt(0,!1)})):(Zt(t,co)||ro(t,co,nt(1,{})),t[co][e]=!0),bo(t,e,n)):ro(t,e,n)},Ao=function(t,e){Y(t);for(var n,r=Gr(e=Rt(e)),o=0,i=r.length;i>o;)xo(t,n=r[o++],e[n]);return t},jo=function(t,e){return void 0===e?Me(t):Ao(Me(t),e)},Fo=function(t){var e=lo.call(this,t=V(t,!0));return!(this===go&&Zt(ho,t)&&!Zt(yo,t))&&(!(e||!Zt(this,t)||!Zt(ho,t)||Zt(this,co)&&this[co][t])||e)},Oo=function(t,e){if(t=Rt(t),e=V(e,!0),t!==go||!Zt(ho,e)||Zt(yo,e)){var n=no(t,e);return!n||!Zt(ho,e)||Zt(t,co)&&t[co][e]||(n.enumerable=!0),n}},ko=function(t){for(var e,n=oo(Rt(t)),r=[],o=0;n.length>o;)Zt(ho,e=n[o++])||e==co||e==eo||r.push(e);return r},Co=function(t){for(var e,n=t===go,r=oo(n?yo:Rt(t)),o=[],i=0;r.length>i;)!Zt(ho,e=r[i++])||n&&!Zt(go,e)||o.push(ho[e]);return o};vo||(io=function(){if(this instanceof io)throw TypeError("Symbol is not a constructor!");var t=Jt(arguments.length>0?arguments[0]:void 0),e=function(n){this===go&&e.call(yo,n),Zt(this,co)&&Zt(this[co],t)&&(this[co][t]=!1),bo(this,t,nt(1,n))};return N&&_o&&bo(go,t,{configurable:!0,set:e}),wo(t)},$e(io[uo],"toString",function(){return this._k}),to.f=Oo,et.f=xo,Br.f=Zr.f=ko,kr.f=Fo,Or.f=Co,N&&!We&&$e(go,"propertyIsEnumerable",Fo,!0),sr.f=function(t){return wo(ke(t))}),Ye(Ye.G+Ye.W+Ye.F*!vo,{Symbol:io});for(var To="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),So=0;To.length>So;)ke(To[So++]);for(var Po=pe(ke.store),Mo=0;Po.length>Mo;)Qr(Po[Mo++]);Ye(Ye.S+Ye.F*!vo,"Symbol",{for:function(t){return Zt(po,t+="")?po[t]:po[t]=io(t)},keyFor:function(t){if(!Eo(t))throw TypeError(t+" is not a symbol!");for(var e in po)if(po[e]===t)return e},useSetter:function(){_o=!0},useSimple:function(){_o=!1}}),Ye(Ye.S+Ye.F*!vo,"Object",{create:jo,defineProperty:xo,defineProperties:Ao,getOwnPropertyDescriptor:Oo,getOwnPropertyNames:ko,getOwnPropertySymbols:Co}),so&&Ye(Ye.S+Ye.F*(!vo||P(function(){var t=io();return"[null]"!=ao([t])||"{}"!=ao({a:t})||"{}"!=ao(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(O(e)||void 0!==t)&&!Eo(t))return Xr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Eo(e))return e}),r[1]=e,ao.apply(so,r)}}),io[uo][fo]||at(io[uo],fo,io[uo].valueOf),De(io,"Symbol"),De(Math,"Math",!0),De(R.JSON,"JSON",!0),Qr("asyncIterator"),Qr("observable");var Do=it.Symbol,Ro=Object.freeze({default:Do,__moduleExports:Do}),Io=Ro&&Do||Ro,Bo=n(function(t){t.exports={default:Io,__esModule:!0}}),zo=e(Bo),Lo=Object.freeze({default:zo,__moduleExports:Bo}),No=fr&&cr||fr,Uo=Lo&&zo||Lo,qo=n(function(t,e){e.__esModule=!0;var n=i(No),r=i(Uo),o="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function i(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===o(n.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":o(t)}});e(qo);var Ko=function(t){this.text=t},Ho=Object.freeze({default:Ko,__moduleExports:Ko}),Wo=Ho&&Ko||Ho,Yo=n(function(t){var e,n=(e=qo)&&e.__esModule?e:{default:e};t.exports=function(t,e,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s="expected",a=t.clone();e&&e.call(a,a);var u=t.clone();if("function"==typeof o)o.call(u,u);else if(o.length>0){var c=!1;o.forEach(function(t,e){var r=t&&"object"===(void 0===t?"undefined":(0,n.default)(t))&&t instanceof Wo;e>0&&(r||c||u.text(","),u.sp()),r?u.error(t.text):t.call(u,u),c=r})}var f=a.size(),l=u.size(),p=s.length+f.width+l.width+r.length,h=Math.max(f.height,l.height);if("omitSubject"in t&&t.omitSubject===i.subject){var d=/^(not )?to (.*)/.exec(r);d?(t.error("should "),d[1]&&t.error("not "),r=d[2]):r="expected: "+r}else i.compact&&i.compactSubject&&(f.height>1||f.width>(i.compactWidth||35))?(t.error("expected").sp(),i.compactSubject.call(t,t),t.sp()):(t.error(s),f.height>1?t.nl():t.sp(),t.append(a),f.height>1||1===h&&p>t.preferredWidth?t.nl():t.sp());return t.error(r),l.height>1?t.nl():l.width>0&&t.sp(),t.append(u),t}}),$o=e(Yo),Vo=Object.freeze({default:$o,__moduleExports:Yo}),Jo={intersects:function(t,e){return t.start<e.end&&e.start<t.end||t.start===e.start},intersectsWithSome:function(t,e){return t.some(function(t){return Jo.intersects(e,t)})}},Qo=Jo,Go=Object.freeze({default:Qo,__moduleExports:Qo}),Xo=function(t,e){var n=e.start-t.start;return 0!==n?n:t.end-t.start-(e.end-e.start)},Zo=Object.freeze({default:Xo,__moduleExports:Xo}),ti=Go&&Qo||Go,ei=Zo&&Xo||Zo,ni=ti.intersectsWithSome,ri=function(t,e){if(e=e||{},!Array.isArray(t))throw new Error("The interval packer requires an array of objects with start and end properties.");if(0===t.length)return[];var n;t.forEach(function(t){if("object"!=typeof t||"number"!=typeof t.start||"number"!=typeof t.end||t.end<=t.start)throw new Error("Intervals must be objects with integer properties start and end where start < end.")}),t=[].concat(t).sort(ei);for(var r=[],o=-1/0;t.length>0;){var i=t.pop();o<=i.start&&(n=[[]],r.push(n));for(var s=0;s<n.length&&ni(n[s],i);)s+=1;(n[s]=n[s]||[]).push(i),o=Math.max(o,i.end)}return e.groupPartitions?r:r.reduce(function(t,e){return e.forEach(function(e,n){return t[n]=t[n]||[],Array.prototype.push.apply(t[n],e),t}),t},[])},oi=n(function(t){var e,n=(e=qo)&&e.__esModule?e:{default:e};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array,o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i=t.exports={objectIs:Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t!=t?e!=e:t===e},duplicateArrayLikeUsingType:function(t,e){var r=e.getKeys(t),o=r.length;if(!e.numericalPropertiesOnly){for(var s=0,a=r.length-1;a>-1;a-=1){var u=r[a];if("symbol"!==(void 0===u?"undefined":(0,n.default)(u))&&i.numericalRegExp.test(u))break;s+=1}o-=s}var c=new Array(o);return r.forEach(function(n,r){r>=o&&!e.hasKey(t,n)||(c[n]=e.hasKey(t,n)?e.valueForKey(t,n):void 0)}),c},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPromise:function(t){return t&&"function"==typeof t.then},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},isError:function(t){return"object"===(void 0===t?"undefined":(0,n.default)(t))&&("[object Error]"===Object.prototype.toString.call(t)||t instanceof Error)},extend:function(t){for(var e=arguments,n=function(n){var r=e[n];r&&Object.keys(r).forEach(function(e){t[e]=r[e]})},r=1;r<arguments.length;r+=1)n(r);return t},findFirst:function(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n]))return t[n];return null},leftPad:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";t.length<e;)t=n+t;return t},escapeRegExpMetaChars:function(t){return t.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")},escapeChar:function(t){if("\t"===t)return"\\t";if("\r"===t)return"\\r";var e=t.charCodeAt(0),n=e.toString(16).toUpperCase();return e<256?"\\x"+i.leftPad(n,2,"0"):"\\u"+i.leftPad(n,4,"0")},getFunctionName:function(t){if("string"==typeof t.name)return t.name;var e=Function.prototype.toString.call(t).match(/function ([^(]+)/);return e?e[1]:t===Object?"Object":t===Function?"Function":""},wrapConstructorNameAroundOutput:function(t,e){var n=e.constructor,r=n&&n!==Object&&i.getFunctionName(n);return r&&"Object"!==r?t.clone().text(r+"(").append(t).text(")"):t},setPrototypeOfOrExtend:r?o:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},uniqueStringsAndSymbols:function(){var t=void 0;"function"==typeof(arguments.length<=0?void 0:arguments[0])&&(t=arguments.length<=0?void 0:arguments[0]);var e={},n=[];function r(o){Array.isArray(o)?o.forEach(r):Object.prototype.hasOwnProperty.call(e,o)||t&&!t(o)||(e[o]=!0,n.push(o))}for(var o=t?1:0;o<arguments.length;o+=1)r(arguments.length<=o?void 0:arguments[o]);return n},uniqueNonNumericalStringsAndSymbols:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.uniqueStringsAndSymbols(function(t){return"symbol"===(void 0===t?"undefined":(0,n.default)(t))||!i.numericalRegExp.test(t)},Array.prototype.slice.call(e))},forwardFlags:function(t,e){return t.replace(/\[(!?)([^\]]+)\] ?/g,function(t,n,r){return Boolean(e[r])!==Boolean(n)?r+" ":""}).trim()},numericalRegExp:/^(?:0|[1-9][0-9]*)$/,packArrows:function(t){var e={};t.forEach(function(t,n){"moveSource"===t.type?(t.changeIndex=n,(e[t.actualIndex]=e[t.actualIndex]||{}).source=t):"moveTarget"===t.type&&(t.changeIndex=n,(e[t.actualIndex]=e[t.actualIndex]||{}).target=t)});var n=Object.keys(e);if(n.length>0){var r=[];n.sort(function(t,n){return Math.abs(e[n].source.changeIndex-e[n].target.changeIndex)-Math.abs(e[t].source.changeIndex-e[t].target.changeIndex)}).forEach(function(t,n,o){var i=e[t],s=Math.min(i.source.changeIndex,i.target.changeIndex),a=Math.max(i.source.changeIndex,i.target.changeIndex);r.push({start:s,end:a,direction:i.source.changeIndex<i.target.changeIndex?"down":"up"})});for(var o=ri(r);o.length>3;)o.shift().forEach(function(e){var n=e.direction,r=e.start,o=e.end;t["up"===n?r:o].type="insert",t["up"===n?o:r].type="remove"});return o}}}}),ii=e(oi),si=oi.objectIs,ai=oi.duplicateArrayLikeUsingType,ui=oi.isArray,ci=oi.isPromise,fi=oi.isRegExp,li=oi.isError,pi=oi.extend,hi=oi.findFirst,di=oi.leftPad,yi=oi.escapeRegExpMetaChars,gi=oi.escapeChar,vi=oi.getFunctionName,mi=oi.wrapConstructorNameAroundOutput,_i=oi.setPrototypeOfOrExtend,bi=oi.uniqueStringsAndSymbols,wi=oi.uniqueNonNumericalStringsAndSymbols,Ei=oi.forwardFlags,xi=oi.numericalRegExp,Ai=oi.packArrows,ji=Object.freeze({default:ii,__moduleExports:oi,objectIs:si,duplicateArrayLikeUsingType:ai,isArray:ui,isPromise:ci,isRegExp:fi,isError:li,extend:pi,findFirst:hi,leftPad:di,escapeRegExpMetaChars:yi,escapeChar:gi,getFunctionName:vi,wrapConstructorNameAroundOutput:mi,setPrototypeOfOrExtend:_i,uniqueStringsAndSymbols:bi,uniqueNonNumericalStringsAndSymbols:wi,forwardFlags:Ei,numericalRegExp:xi,packArrows:Ai}),Fi="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Oi(){throw new Error("setTimeout has not been defined")}function ki(){throw new Error("clearTimeout has not been defined")}var Ci=Oi,Ti=ki;function Si(t){if(Ci===setTimeout)return setTimeout(t,0);if((Ci===Oi||!Ci)&&setTimeout)return Ci=setTimeout,setTimeout(t,0);try{return Ci(t,0)}catch(e){try{return Ci.call(null,t,0)}catch(e){return Ci.call(this,t,0)}}}function Pi(t){if(Ti===clearTimeout)return clearTimeout(t);if((Ti===ki||!Ti)&&clearTimeout)return Ti=clearTimeout,clearTimeout(t);try{return Ti(t)}catch(e){try{return Ti.call(null,t)}catch(e){return Ti.call(this,t)}}}"function"==typeof Fi.setTimeout&&(Ci=setTimeout),"function"==typeof Fi.clearTimeout&&(Ti=clearTimeout);var Mi=[],Di=!1,Ri,Ii=-1;function Bi(){Di&&Ri&&(Di=!1,Ri.length?Mi=Ri.concat(Mi):Ii=-1,Mi.length&&zi())}function zi(){if(!Di){var t=Si(Bi);Di=!0;for(var e=Mi.length;e;){for(Ri=Mi,Mi=[];++Ii<e;)Ri&&Ri[Ii].run();Ii=-1,e=Mi.length}Ri=null,Di=!1,Pi(t)}}function Li(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Mi.push(new Ni(t,e)),1!==Mi.length||Di||Si(zi)}function Ni(t,e){this.fun=t,this.array=e}Ni.prototype.run=function(){this.fun.apply(null,this.array)};var Ui="browser",qi="browser",Ki=!0,Hi={},Wi=[],Yi="",$i={},Vi={},Ji={};function Qi(){}var Gi=Qi,Xi=Qi,Zi=Qi,ts=Qi,es=Qi,ns=Qi,rs=Qi;function os(t){throw new Error("process.binding is not supported")}function is(){return"/"}function ss(t){throw new Error("process.chdir is not supported")}function as(){return 0}var us=Fi.performance||{},cs=us.now||us.mozNow||us.msNow||us.oNow||us.webkitNow||function(){return(new Date).getTime()};function fs(t){var e=.001*cs.call(us),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]}var ls=new Date;function ps(){return(new Date-ls)/1e3}for(var hs={nextTick:Li,title:Ui,browser:Ki,env:Hi,argv:Wi,version:Yi,versions:$i,on:Gi,addListener:Xi,once:Zi,off:ts,removeListener:es,removeAllListeners:ns,emit:rs,binding:os,cwd:is,chdir:ss,umask:as,hrtime:fs,platform:qi,release:Vi,config:Ji,uptime:ps},ds=!0,ys={extend:function(t){for(var e=1;e<arguments.length;e+=1){var n=arguments[e];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t},calculateOutputEntrySize:function(t){if(t.size)return t.size;var e;switch(t.style){case"text":e={width:String(t.args.content).length,height:1};break;case"block":e=ys.calculateSize(t.args);break;case"raw":var n=t.args;e={width:n.width,height:n.height};break;default:e={width:0,height:0}}return t.size=e,e},calculateLineSize:function(t){var e={height:1,width:0};return t.forEach(function(t){var n=ys.calculateOutputEntrySize(t);e.width+=n.width,e.height=Math.max(n.height,e.height)}),e},calculateSize:function(t){var e={height:0,width:0};return t.forEach(function(t){var n=ys.calculateLineSize(t);e.height+=n.height,e.width=Math.max(e.width,n.width)}),e},arrayEquals:function(t,e){if(t===e)return!0;if(!t||t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},escapeRegExp:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},findFirst:function(t,e,n){for(var r=n||null,o=0;o<t.length;o+=1)if(e.call(r,t[o],o,t))return t[o];return null},getFunctionName:function(t){if("string"==typeof t.name)return t.name;var e=Function.prototype.toString.call(t).match(/function ([^\(]+)/);return e?e[1]:t===Object?"Object":t===Function?"Function":void 0}},gs=ys,vs=Object.freeze({default:gs,__moduleExports:gs}),ms=256,_s=[""],bs=1;bs<=ms;bs+=1)_s[bs]=_s[bs-1]+" ";function ws(t,e){if(e<0)return"";var n="";if(" "===t){if(e<=ms)return _s[e];for(var r=_s[ms],o=Math.floor(e/ms),i=0;i<o;i+=1)n+=r;n+=_s[e%ms]}else for(var s=0;s<e;s+=1)n+=t;return n}var Es=ws,xs=Object.freeze({default:Es,__moduleExports:Es}),As=/^(?:bg)?#(?:[0-9a-f]{3}|[0-9a-f]{6})$/i,js=Object.freeze({default:As,__moduleExports:As}),Fs={bold:"font-weight: bold",dim:"opacity: 0.7",italic:"font-style: italic",underline:"text-decoration: underline",inverse:"-webkit-filter: invert(%100); filter: invert(100%)",hidden:"visibility: hidden",strikeThrough:"text-decoration: line-through",black:"color: black",red:"color: red",green:"color: green",yellow:"color: yellow",blue:"color: blue",magenta:"color: magenta",cyan:"color: cyan",white:"color: white",gray:"color: gray",bgBlack:"background-color: black",bgRed:"background-color: red",bgGreen:"background-color: green",bgYellow:"background-color: yellow",bgBlue:"background-color: blue",bgMagenta:"background-color: magenta",bgCyan:"background-color: cyan",bgWhite:"background-color: white"};Object.keys(Fs).forEach(function(t){Fs[t.toLowerCase()]=Fs[t]});var Os=Fs,ks=Object.freeze({default:Os,__moduleExports:Os}),Cs=hs.argv,Ts=!(-1!==Cs.indexOf("--no-color")||-1!==Cs.indexOf("--no-colors")||-1!==Cs.indexOf("--color=false")||-1===Cs.indexOf("--color")&&-1===Cs.indexOf("--colors")&&-1===Cs.indexOf("--color=true")&&-1===Cs.indexOf("--color=always")&&(hs.stdout&&!hs.stdout.isTTY||"win32"!==hs.platform&&!("COLORTERM"in hs.env||"dumb"!==hs.env.TERM&&/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(hs.env.TERM)))),Ss=Object.freeze({default:Ts,__moduleExports:Ts}),Ps=vs&&gs||vs,Ms=xs&&Es||xs;function Ds(t){return{style:"text",args:{content:Ms(" ",t),styles:[]}}}function Rs(t){return t.some(function(t){return"block"===t.style||"text"===t.style&&-1!==String(t.args.content).indexOf("\n")})}function Is(t){switch(t.style){case"text":return String(t.args.content).split("\n").map(function(e){return""===e?[]:[{style:"text",args:{content:e,styles:t.args.styles}}]});case"block":return zs(t.args);default:return[]}}function Bs(t){if(0===t.length)return[[]];if(!Rs(t))return[t];var e=[],n=[],r=0;return t.forEach(function(t,o){var i=Is(t),s=i.map(function(t){return Ps.calculateLineSize(t).width}),a=Math.max.apply(null,s);i.forEach(function(t,o){var i=e[o];if(i||(e[o]=i=[],n[o]=0),t.length){var a=r-n[o];i.push(Ds(a)),Array.prototype.push.apply(i,t),n[o]=r+s[o]}}),r+=a},this),e}function zs(t){var e=[];return t.forEach(function(t){Bs(t).forEach(function(t){e.push(t)})}),e}var Ls=zs,Ns=Object.freeze({default:Ls,__moduleExports:Ls}),Us=Ns&&Ls||Ns;function qs(){}qs.prototype.format="text",qs.prototype.serialize=function(t){return(t=Us(t)).map(this.serializeLine,this).join("\n")},qs.prototype.serializeLine=function(t){return t.map(function(t){return this[t.style]?String(this[t.style](t.args)):""},this).join("")},qs.prototype.text=function(t){return String(t.content)},qs.prototype.block=function(t){return this.serialize(t)},qs.prototype.raw=function(t){return String(t.content(this))};var Ks=qs,Hs=Object.freeze({default:Ks,__moduleExports:Ks}),Ws=function(t,e){if(1===e.length){for(var n=0,r=[],o=e[0],i=t.styles||{};"string"==typeof o&&i[o];)if(o=i[o],100<(n+=1)){var s=r.indexOf(o);if(r.push(o),-1!==s)throw new Error("Your theme contains a loop: "+r.slice(s).join(" -> "))}return Array.isArray(o)?o:[o]}return e},Ys=Object.freeze({default:Ws,__moduleExports:Ws}),$s=ks&&Os||ks,Vs=js&&As||js,Js=Ys&&Ws||Ys;function Qs(t){this.theme=t}Qs.prototype.format="html",Qs.prototype.serialize=function(t){return'<div style="font-family: monospace; white-space: nowrap">'+this.serializeLines(t)+"</div>"},Qs.prototype.serializeLines=function(t){return t.map(function(t){return"<div>"+(this.serializeLine(t).join("")||"&nbsp;")+"</div>"},this).join("")},Qs.prototype.serializeLine=function(t){return t.map(function(t){return this[t.style]?this[t.style](t.args):""},this)},Qs.prototype.block=function(t){return'<div style="display: inline-block; vertical-align: top">'+this.serializeLines(t)+"</div>"},Qs.prototype.text=function(t){var e=String(t.content);if(""===e)return"";e=e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");var n=Js(this.theme,t.styles);if(n.length>0){for(var r=[],o=0;o<n.length;o+=1){var i=n[o];Vs.test(i)?"bg"===i.substring(0,2)?r.push("background-color: "+i.substring(2)):r.push("color: "+i):$s[i]&&r.push($s[i])}r.length>0&&(e='<span style="'+r.join("; ")+'">'+e+"</span>")}return e},Qs.prototype.raw=function(t){return String(t.content(this))};var Gs=Qs,Xs=Object.freeze({default:Gs,__moduleExports:Gs}),Zs=ua,ta=Math.sqrt,ea=Math.pow,na=Math.cos,ra=Math.atan2,oa=Math.sin,ia=Math.abs,sa=Math.exp,aa=Math.PI;function ua(t,e){var n=t.L,r=t.a,o=t.b,i=e.L,s=e.a,a=e.b,u=ta(ea(r,2)+ea(o,2)),c=ta(ea(s,2)+ea(a,2)),f=(u+c)/2,l=.5*(1-ta(ea(f,7)/(ea(f,7)+ea(25,7)))),p=(1+l)*r,h=(1+l)*s,d=ta(ea(p,2)+ea(o,2)),y=ta(ea(h,2)+ea(a,2)),g=function(t,e){if(0==t&&0==e)return 0;var n=ca(ra(t,e));return n>=0?n:n+360},v=g(o,p),m=g(a,h),_=i-n,b=y-d,w=function(t,e,n,r){if(t*e==0)return 0;if(ia(r-n)<=180)return r-n;if(r-n>180)return r-n-360;if(r-n<-180)return r-n+360;throw new Error}(u,c,v,m),E=2*ta(d*y)*oa(fa(w)/2),x=(n+i)/2,A=(d+y)/2,j=function(t,e,n,r){if(t*e==0)return n+r;if(ia(n-r)<=180)return(n+r)/2;if(ia(n-r)>180&&n+r<360)return(n+r+360)/2;if(ia(n-r)>180&&n+r>=360)return(n+r-360)/2;throw new Error}(u,c,v,m),F=1-.17*na(fa(j-30))+.24*na(fa(2*j))+.32*na(fa(3*j+6))-.2*na(fa(4*j-63)),O=30*sa(-ea((j-275)/25,2)),k=ta(ea(A,7)/(ea(A,7)+ea(25,7))),C=1+.015*ea(x-50,2)/ta(20+ea(x-50,2)),T=1+.045*A,S=1+.015*A*F,P=-2*k*oa(fa(2*O));return ta(ea(_/(1*C),2)+ea(b/(1*T),2)+ea(E/(1*S),2)+P*(b/(1*T))*(E/(1*S)))}function ca(t){return t*(180/aa)}function fa(t){return t*(aa/180)}var la={ciede2000:Zs},pa=Object.freeze({default:la,__moduleExports:la,ciede2000:Zs}),ha=ya,da=Math.pow;function ya(t){return va(ga(t))}function ga(t){var e=t.R/255,n=t.G/255,r=t.B/255;return e>.04045?e=da((e+.055)/1.055,2.4):e/=12.92,n>.04045?n=da((n+.055)/1.055,2.4):n/=12.92,r>.04045?r=da((r+.055)/1.055,2.4):r/=12.92,{X:.4124*(e*=100)+.3576*(n*=100)+.1805*(r*=100),Y:.2126*e+.7152*n+.0722*r,Z:.0193*e+.1192*n+.9505*r}}function va(t){var e=t.Y/100,n=t.Z/108.883,r=t.X/95.047;return r=r>.008856?da(r,1/3):7.787*r+16/116,{L:116*(e=e>.008856?da(e,1/3):7.787*e+16/116)-16,a:500*(r-e),b:200*(e-(n=n>.008856?da(n,1/3):7.787*n+16/116))}}var ma={rgb_to_lab:ha},_a=Object.freeze({default:ma,__moduleExports:ma,rgb_to_lab:ha}),ba=pa&&la||pa,wa=_a&&ma||_a,Ea=ja,xa=Aa;function Aa(t){return"R"+t.R+"B"+t.B+"G"+t.G}function ja(t,e,n){var r={};n=n||"closest";for(var o=0;o<t.length;o+=1){for(var i=t[o],s=void 0,a=void 0,u=0;u<e.length;u+=1){var c=e[u],f=Fa(i,c);void 0==s||"closest"===n&&f<a?(s=c,a=f):"furthest"===n&&f>a&&(s=c,a=f)}r[Aa(i)]=s}return r}function Fa(t,e){return t=wa.rgb_to_lab(t),e=wa.rgb_to_lab(e),ba.ciede2000(t,e)}var Oa={map_palette:Ea,palette_map_key:xa},ka=Object.freeze({default:Oa,__moduleExports:Oa,map_palette:Ea,palette_map_key:xa}),Ca=ka&&Oa||ka,Ta=n(function(t){var e=t.exports={};e.diff=ba.ciede2000,e.rgb_to_lab=wa.rgb_to_lab,e.map_palette=Ca.map_palette,e.palette_map_key=Ca.palette_map_key,e.closest=function(t,n){var r=e.palette_map_key(t);return e.map_palette([t],n,"closest")[r]},e.furthest=function(t,n){var r=e.palette_map_key(t);return e.map_palette([t],n,"furthest")[r]}}),Sa=Object.freeze({default:Ta,__moduleExports:Ta}),Pa=n(function(t){var e=t.exports={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};e.colors.grey=e.colors.gray,Object.keys(e).forEach(function(t){var n=e[t];Object.keys(n).forEach(function(t){var r=n[t];e[t]=n[t]={open:"["+r[0]+"m",close:"["+r[1]+"m"}}),Object.defineProperty(e,t,{value:n,enumerable:!1})})}),Ma=Pa.modifiers,Da=Pa.colors,Ra=Pa.bgColors,Ia=Hs&&Ks||Hs,Ba=Sa&&Ta||Sa,za=0,La=1024,Na=Ps.extend({},Pa);function Ua(t){this.theme=t}Object.keys(Na).forEach(function(t){Na[t.toLowerCase()]=Na[t]}),Ua.prototype=new Ia,Ua.prototype.format="ansi";var qa={16:{"#000000":"black","#ff0000":"red","#00ff00":"green","#ffff00":"yellow","#0000ff":"blue","#ff00ff":"magenta","#00ffff":"cyan","#ffffff":"white","#808080":"gray"},256:{}},Ka={};function Ha(t){t.length<6&&(t=t.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var e=t.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(e)return{R:parseInt(e[1],16),G:parseInt(e[2],16),B:parseInt(e[3],16)}}function Wa(t){var e=(65536*Math.round(t.R)+256*Math.round(t.G)+Math.round(t.B)).toString(16);return"#"+"00000".substr(0,6-e.length)+e}function Ya(t){return t.substring(0,1).toUpperCase()+t.substring(1)}Ka[16]=Object.keys(qa[16]).map(Ha),Ka.bg16=Object.keys(qa[16]).filter(function(t){return"#808080"!==t}).map(Ha),Ka[256]=[].concat(Ka[16]);var $a=16;function Va(t){Ka[256].push(t),qa[256][Wa(t)]=$a,$a+=1}for(var Ja=0;Ja<6;Ja+=1)for(var Qa=0;Qa<6;Qa+=1)for(var Ga=0;Ga<6;Ga+=1)Va({R:Math.round(256*Ja/6),G:Math.round(256*Qa/6),B:Math.round(256*Ga/6)});[8,18,28,38,48,58,68,78,88,96,102,118,128,138,148,158,168,178,188,198,208,218,228,238].forEach(function(t){Va({R:t,G:t,B:t})}),Ua.prototype.text=function(t){var e=String(t.content);if(""===e)return"";var n=Js(this.theme,t.styles);if(n.length>0)for(var r=n.length-1;r>=0;r-=1){var o=n[r];if(Na[o])e=Na[o].open+e+Na[o].close;else if(Vs.test(o)){var i=o,s="bg"===o.substring(0,2),a=s?o.substring(2):o,u=Wa(Ba.closest(Ha(a),Ka[s?"bg16":16])),c=qa[16][u],f=Wa(Ba.closest(Ha(a),Ka[256])),l=qa[256][f];o=s?"bg"+Ya(c):c;var p=Na[o].open,h=Na[o].close;u!==f&&(p+="["+(s?48:38)+";5;"+l+"m"),za<La&&(Na[i]={open:p,close:h},za+=1),e=p+e+h}}return e};var Xa=Ua,Za=Object.freeze({default:Xa,__moduleExports:Xa});function tu(t){this.theme=t}tu.prototype.format="coloredConsole",tu.prototype.serialize=function(t){var e="",n=[];return this.serializeLines(Us(t)).forEach(function(t){t&&(e+=t[0],t.length>1&&n.push(t[1]))}),[e].concat(n)},tu.prototype.serializeLines=function(t){var e=[];return t.forEach(function(t,n){n>0&&e.push(["%c\n ",""]),Array.prototype.push.apply(e,this.serializeLine(t))},this),e},tu.prototype.serializeLine=function(t){var e=[];return t.forEach(function(t){this[t.style]&&e.push(this[t.style](t.args))},this),e},tu.prototype.block=function(t){return this.serializeLines(t)},tu.prototype.text=function(t){var e=String(t.content);if(""===e)return"";var n=Js(this.theme,t.styles),r=["%c"+e.replace(/%/g,"%%")],o=[];if(n.length>0)for(var i=0;i<n.length;i+=1){var s=n[i];Vs.test(s)?"bg"===s.substring(0,2)?o.push("background-color: "+s.substring(2)):o.push("color: "+s):$s[s]&&o.push($s[s])}return r.push(o.join("; ")),r},tu.prototype.raw=function(t){return String(t.content(this))};var eu=tu,nu=Object.freeze({default:eu,__moduleExports:eu}),ru=Ss&&Ts||Ss,ou=Xs&&Gs||Xs,iu=Za&&Xa||Za,su=nu&&eu||nu,au=n(function(t,e){var n=Ps.extend,r=["bold","dim","italic","underline","inverse","hidden","strikeThrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite"];function o(t){if(!(this instanceof o))return new o(t);"string"==typeof(t=t||{})&&(t={format:t});var e="indentationWidth"in t?t.indentationWidth:2;this.indentationWidth=Math.max(e,0),this.indentationLevel=0,this.output=[[]],this.styles=Object.create(null),this.installedPlugins=[],this._themes={},Object.keys(o.serializers).forEach(function(t){this._themes[t]={styles:{}}},this),this.preferredWidth=!ds&&hs.stdout.columns||80,t.format&&(this.format=t.format)}function i(t,e){return!(!t||!e||"text"!==t.style||"text"!==e.style)&&Ps.arrayEquals(t.args.styles,e.args.styles)}function s(t){if(0===t.length)return t;for(var e=[t[0]],n=1;n<t.length;n+=1){var r=e[e.length-1],o=t[n];"text"===o.style&&""===o.args.content||(i(r,o)?e[e.length-1]={style:r.style,args:{content:r.args.content+o.args.content,styles:r.args.styles}}:e.push(o))}return e}function a(t){return t&&"object"==typeof t&&"number"==typeof t.width&&"number"==typeof t.height&&("function"==typeof t.content||"string"==typeof t.content)}"string"!=typeof e.nodeName&&ru?o.defaultFormat="ansi":"undefined"!=typeof window&&void 0!==window.navigator?window._phantom||window.mochaPhantomJS||window.__karma__&&window.__karma__.config.captureConsole?o.defaultFormat="ansi":o.defaultFormat="html":o.defaultFormat="text",o.prototype.newline=o.prototype.nl=function(t){if(void 0===t&&(t=1),0===t)return this;for(var e=0;e<t;e+=1)this.output.push([]);return this},o.serializers={},[Ia,ou,iu,su].forEach(function(t){o.serializers[t.prototype.format]=t}),o.prototype.write=function(t){if(this.styles[t.style])return this.styles[t.style].apply(this,t.args),this;var e=this.output[this.output.length-1],n=e[e.length-1];return i(n,t)?e[e.length-1]={style:n.style,args:{content:n.args.content+t.args.content,styles:n.args.styles}}:e.push(t),this},o.prototype.indentLines=function(){return this.indentationLevel+=1,this},o.prototype.indent=o.prototype.i=function(){for(var t=0;t<this.indentationLevel;t+=1)this.space(this.indentationWidth);return this},o.prototype.outdentLines=function(){return this.indentationLevel=Math.max(0,this.indentationLevel-1),this},o.prototype.addStyle=function(t,e,n){if(!1===this[t]||(this.hasOwnProperty(t)||o.prototype[t])&&!Object.prototype.hasOwnProperty.call(this.styles,t)&&-1===r.indexOf(t))throw new Error('"'+t+'" style cannot be defined, it clashes with a built-in attribute');if((this.hasOwnProperty(t)||-1!==r.indexOf(t))&&("function"===typeof this[t]&&!n))throw new Error('"'+t+'" style is already defined, set 3rd arg (allowRedefinition) to true to define it anyway');return this._stylesHaveNotBeenClonedYet&&(this.styles=Object.create(this.styles),this._stylesHaveNotBeenClonedYet=!1),this.styles[t]=e,this[t]=function(){return e.apply(this,arguments),this},this},o.prototype.toString=function(t){if(t&&this.format&&t!==this.format)throw new Error("A pen with format: "+this.format+" cannot be serialized to: "+t);"auto"===(t=this.format||t||"text")&&(t=o.defaultFormat);var e=this._themes[t]||{};return new o.serializers[t](e).serialize(this.output)},o.prototype.text=function(){var t=arguments[0];if(""===t)return this;for(var e=new Array(arguments.length-1),n=1;n<arguments.length;n+=1)e[n-1]=arguments[n];if(-1!==(t=String(t)).indexOf("\n")){var r=t.split(/\n/);return r.forEach(function(t,n){t.length&&this.write({style:"text",args:{content:t,styles:e}}),n<r.length-1&&this.nl()},this),this}return this.write({style:"text",args:{content:t,styles:e}})},o.prototype.removeFormatting=function(){var t=this.clone();return this.output.forEach(function(e,n){t.output[n]=s(e.map(function(t){return"text"===t.style?{style:"text",args:{content:t.args.content,styles:[]}}:t}))}),t.indentationLevel=this.indentationLevel,t},o.prototype.getContentFromArguments=function(t){var e;if(t[0].isMagicPen)return this.ensureCompatibleFormat(t[0].format),t[0];if("function"==typeof t[0])return e=this.clone(),t[0].call(e,e),e;if("string"==typeof t[0]&&1===t.length)return(e=this.clone()).text(t[0]),e;if("string"==typeof t[0])return(e=this.clone())[t[0]].apply(e,Array.prototype.slice.call(t,1)),e;throw new Error("Requires the arguments to be:\na pen or\na callback appending content to a pen or\na style and arguments for that style or\njust a string.")},o.prototype.isMultiline=function(){return this.output.length>1||this.size().height>1},o.prototype.isAtStartOfLine=function(){return 0===this.output.length||0===this.output[this.output.length-1].length},o.prototype.isBlock=function(){return 1===this.output.length&&1===this.output[0].length&&"block"===this.output[0][0].style},o.prototype.ensureCompatibleFormat=function(t){if(t&&this.format&&t!==this.format)throw new Error("This pen is only compatible with the format: "+this.format)},o.prototype.block=function(){var t=this.getContentFromArguments(arguments).output.map(function(t){return[].concat(t)});return this.write({style:"block",args:t})},o.prototype.alt=function(t){var e=this.format;if(!e)throw new Error("The alt method is only supported on pen where the format has already been set");var n=t[e];return void 0===n?t.fallback?this.append(t.fallback):this:"string"==typeof n||a(n)?this.raw(n):this.append(n)},o.prototype.raw=function(t){if(!this.format)throw new Error("The alt method is only supported on pen where the format has already been set");if("string"==typeof t)return this.write({style:"raw",args:{height:0,width:0,content:function(){return t}}});if(a(t)){if("string"==typeof t.content){var e=(t=n({},t)).content;t.content=function(){return e}}return this.write({style:"raw",args:t})}throw new Error("Raw "+this.format+" content needs to adhere to one of the following forms:\na string of raw content\na function returning a string of raw content or\nan object with the following form { width: <number>, height: <number>, content: <string function() {}|string> }")},o.prototype.amend=function(){var t=this.getContentFromArguments(arguments);return t.isEmpty()?this:(this.output=function t(e,n){var r=e[e.length-1].slice(),o=e.slice(0,-1),i=r[r.length-1];return i&&"block"===i.style?(r[r.length-1]={style:"block",args:t(i.args,n)},o[e.length-1]=r):(Array.prototype.push.apply(r,n.output[0]),o[e.length-1]=s(r),o.push.apply(o,n.output.slice(1))),o}(this.output,t),this)},o.prototype.append=function(){var t=this.getContentFromArguments(arguments);if(t.isEmpty())return this;var e=this.output[this.output.length-1];return Array.prototype.push.apply(e,t.output[0]),this.output[this.output.length-1]=s(e),this.output.push.apply(this.output,t.output.slice(1)),this},o.prototype.prependLinesWith=function(){var t=this.getContentFromArguments(arguments);if(t.isEmpty())return this;if(t.output.length>1)throw new Error("PrependLinesWith only supports a pen with single line content");var e=this.size().height,n=this.clone();return n.block(function(){for(var n=0;n<e;n+=1)0<n&&this.nl(),this.append(t)}),n.block(this),this.output=n.output,this},o.prototype.space=o.prototype.sp=function(t){return 0===t?this:(void 0===t&&(t=1),this.text(Ms(" ",t)))},r.forEach(function(t){o.prototype[t]=o.prototype[t.toLowerCase()]=function(e){return this.text(e,t)}}),o.prototype.clone=function(t){function e(){}this.isEmpty()||this.ensureCompatibleFormat(t),e.prototype=this;var n=new e;return n.styles=this.styles,n._stylesHaveNotBeenClonedYet=!0,n.indentationLevel=0,n.output=[[]],n.installedPlugins=[],n._themes=this._themes,n._themesHaveNotBeenClonedYet=!0,n.format=t||this.format,n.parent=this,n},o.prototype.isMagicPen=!0,o.prototype.size=function(){return Ps.calculateSize(this.output)},o.prototype.use=function(t){var e=Ps.findFirst(this.installedPlugins,function(e){if(e===t)return!0;if("function"==typeof t&&"function"==typeof e){var n=Ps.getFunctionName(t);return""!==n&&n===Ps.getFunctionName(e)}return e.name===t.name});if(e){if(e===t||void 0!==t.version&&t.version===e.version)return this;throw new Error("Another instance of the plugin '"+t.name+"' is already installed"+(void 0!==e.version?" (version "+e.version+(void 0!==t.version?", trying to install "+t.version:"")+")":"")+". Please check your node_modules folder for unmet peerDependencies.")}if("function"!=typeof t&&("object"!=typeof t||"function"!=typeof t.installInto)||void 0!==t.name&&"string"!=typeof t.name||void 0!==t.dependencies&&!Array.isArray(t.dependencies))throw new Error("Plugins must be functions or adhere to the following interface\n{\n  name: <an optional plugin name>,\n  version: <an optional semver version string>,\n  dependencies: <an optional list of dependencies>,\n  installInto: <a function that will update the given magicpen instance>\n}");if(t.dependencies){var n=this,r=[];do{r.push(n),n=n.parent}while(n);var o=t.dependencies.filter(function(t){return!r.some(function(e){return e.installedPlugins.some(function(e){return e.name===t})})});if(1===o.length)throw new Error(t.name+" requires plugin "+o[0]);if(o.length>1)throw new Error(t.name+" requires plugins "+o.slice(0,-1).join(", ")+" and "+o[o.length-1])}return this.installedPlugins.push(t),"function"==typeof t?t(this):t.installInto(this),this},o.prototype.installPlugin=o.prototype.use,o.prototype.isEmpty=function(){return 1===this.output.length&&0===this.output[0].length},o.prototype.replaceText=function(t,e){if(this.isEmpty())return this;if("string"==typeof t&&(t=new RegExp(Ps.escapeRegExp(t),"g")),"string"==typeof e){var n=e;e=function(t,e){var r=[n].concat(t);this.text.apply(this,r)}}return 1===arguments.length&&(e=t,t=/.*/),this.output=function t(e,n,r,o){var i=e;return n.forEach(function(n,s){0<s&&i.nl(),n.forEach(function(n,s){if("block"===n.style)return i.output[i.output.length-1].push({style:"block",args:t(e.clone(),n.args,r,o)});if("text"!==n.style)return i.output[i.output.length-1].push(n);var a;r.global&&(r.lastIndex=0);for(var u=!0,c=0,f=n.args.content,l=n.args.styles;null!==(a=r.exec(f))&&(r.global||u);)c<a.index&&i.text.apply(i,[f.substring(c,a.index)].concat(l)),o.apply(i,[l].concat(a)),u=!1,c=a.index+a[0].length;0===c?(0===i.output.length?i.output[0]=[]:i.output[i.output.length-1]).push(n):c<f.length&&i.text.apply(i,[f.substring(c,f.length)].concat(l))},this)},this),i.output.map(s)}(this.clone(),this.output,t,e),this},o.prototype.theme=function(t){if(!(t=t||this.format))throw new Error("Could not detect which format you want to retrieve theme information for. Set the format of the pen or provide it as an argument to the theme method.");return this._themes[t]},o.prototype.installTheme=function(t,e){var r=this;if(1===arguments.length&&(e=t,t=Object.keys(o.serializers)),"string"==typeof t&&(t=[t]),"object"!=typeof e||!Array.isArray(t)||t.some(function(t){return"string"!=typeof t}))throw new Error("Themes must be installed the following way:\nInstall theme for all formats: pen.installTheme({ comment: 'gray' })\nInstall theme for a specific format: pen.installTheme('ansi', { comment: 'gray' }) or\nInstall theme for a list of formats: pen.installTheme(['ansi', 'html'], { comment: 'gray' })");if(e.styles&&"object"==typeof e.styles||(e={styles:e}),r._themesHaveNotBeenClonedYet){var i={};Object.keys(r._themes).forEach(function(t){i[t]=Object.create(r._themes[t])}),r._themes=i,r._themesHaveNotBeenClonedYet=!1}return Object.keys(e.styles).forEach(function(t){if(Vs.test(t)||$s[t])throw new Error("Invalid theme key: '"+t+"' you can't map build styles.");r[t]||r.addStyle(t,function(e){this.text(e,t)})}),t.forEach(function(t){var o=r._themes[t]||{styles:{}},i=n({},o,e);i.styles=n({},o.styles,e.styles),r._themes[t]=i}),this},t.exports=o}),uu=[],cu=[],fu=function(t,e){if(t===e)return 0;var n=t;t.length>e.length&&(t=e,e=n);var r=t.length,o=e.length;if(0===r)return o;if(0===o)return r;for(;r>0&&t.charCodeAt(~-r)===e.charCodeAt(~-o);)r--,o--;if(0===r)return o;for(var i,s,a,u,c=0;c<r&&t.charCodeAt(c)===e.charCodeAt(c);)c++;if(o-=c,0===(r-=c))return o;for(var f=0,l=0;f<r;)cu[c+f]=t.charCodeAt(c+f),uu[f]=++f;for(;l<o;)for(i=e.charCodeAt(c+l),a=l++,s=l,f=0;f<r;f++)u=i===cu[c+f]?a:a+1,a=uu[f],s=uu[f]=a>s?u>s?s+1:u:u>a?a+1:u;return s},lu=n(function(t){var e=function(){return void 0===this}();if(e)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:e,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var n={}.hasOwnProperty,r={}.toString,o={}.constructor.prototype,i=function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e};t.exports={isArray:function(t){try{return"[object Array]"===r.call(t)}catch(t){return!1}},keys:i,names:i,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return o}},isES5:e,propertyIsWritable:function(){return!0}}}}),pu=lu.freeze,hu=lu.defineProperty,du=lu.getDescriptor,yu=lu.keys,gu=lu.names,vu=lu.getPrototypeOf,mu=lu.isArray,_u=lu.isES5,bu=lu.propertyIsWritable,wu=Object.freeze({default:lu,__moduleExports:lu,freeze:pu,defineProperty:hu,getDescriptor:du,keys:yu,names:gu,getPrototypeOf:vu,isArray:mu,isES5:_u,propertyIsWritable:bu}),Eu=wu&&lu||wu,xu="undefined"==typeof navigator,Au=function(){try{var t={};return Eu.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),ju={e:{}},Fu;function Ou(){try{var t=Fu;return Fu=null,t.apply(this,arguments)}catch(t){return ju.e=t,ju}}function ku(t){return Fu=t,Ou}var Cu=function(t,e){var n={}.hasOwnProperty;function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function Tu(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function Su(t){return!Tu(t)}function Pu(t){return Tu(t)?new Error(Hu(t)):t}function Mu(t,e){var n,r=t.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=t[n];return o[n]=e,o}function Du(t,e,n){if(!Eu.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function Ru(t,e,n){if(Tu(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return Eu.defineProperty(t,e,r),t}function Iu(t){throw t}var Bu=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(Eu.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],o=Object.create(null);null!=t&&!e(t);){var i;try{i=n(t)}catch(t){return r}for(var s=0;s<i.length;++s){var a=i[s];if(!o[a]){o[a]=!0;var u=Object.getOwnPropertyDescriptor(t,a);null!=u&&null==u.get&&null==u.set&&r.push(a)}}t=Eu.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var o=[];t:for(var i in n)if(r.call(n,i))o.push(i);else{for(var s=0;s<t.length;++s)if(r.call(t[s],i))continue t;o.push(i)}return o}}(),zu=/this\s*\.\s*\S+\s*=/;function Lu(t){try{if("function"==typeof t){var e=Eu.names(t.prototype),n=Eu.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),o=zu.test(t+"")&&Eu.names(t).length>0;if(n||r||o)return!0}return!1}catch(t){return!1}}function Nu(t){return t}var Uu=/^[a-z$_][a-z$_0-9]*$/i;function qu(t){return Uu.test(t)}function Ku(t,e,n){for(var r=new Array(t),o=0;o<t;++o)r[o]=e+o+n;return r}function Hu(t){try{return t+""}catch(t){return"[no string representation]"}}function Wu(t){try{Ru(t,"isOperational",!0)}catch(t){}}function Yu(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function $u(t){return t instanceof Error&&Eu.propertyIsWritable(t,"stack")}var Vu="stack"in new Error?function(t){return $u(t)?t:new Error(Hu(t))}:function(t){if($u(t))return t;try{throw new Error(Hu(t))}catch(t){return t}};function Ju(t){return{}.toString.call(t)}function Qu(t,e,n){for(var r=Eu.names(t),o=0;o<r.length;++o){var i=r[o];if(n(i))try{Eu.defineProperty(e,i,Eu.getDescriptor(t,i))}catch(t){}}}var Gu={isClass:Lu,isIdentifier:qu,inheritedDataKeys:Bu,getDataPropertyOrDefault:Du,thrower:Iu,isArray:Eu.isArray,haveGetters:Au,notEnumerableProp:Ru,isPrimitive:Tu,isObject:Su,canEvaluate:xu,errorObj:ju,tryCatch:ku,inherits:Cu,withAppended:Mu,maybeWrapAsError:Pu,toFastProperties:Nu,filledRange:Ku,toString:Hu,canAttachTrace:$u,ensureErrorObject:Vu,originatesFromRejection:Yu,markAsOriginatingFromRejection:Wu,classString:Ju,copyDescriptors:Qu,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==hs&&"[object process]"===Ju(hs).toLowerCase()},Xu;Gu.isRecentNode=Gu.isNode&&(Xu=hs.versions.node.split(".").map(Number),0===Xu[0]&&Xu[1]>10||Xu[0]>0),Gu.isNode&&Gu.toFastProperties(hs);try{throw new Error}catch(t){Gu.lastLineError=t}var Zu=Gu,tc=Object.freeze({default:Zu,__moduleExports:Zu}),ec=tc&&Zu||tc,nc,rc=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(ec.isNode&&"undefined"==typeof MutationObserver){var oc=t.setImmediate,ic=Li;nc=ec.isRecentNode?function(e){oc.call(t,e)}:function(t){ic.call(hs,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?nc="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:rc:(nc=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},nc.isStatic=!0);var sc=nc,ac=Object.freeze({default:sc,__moduleExports:sc});function uc(t,e,n,r,o){for(var i=0;i<o;++i)n[i+r]=t[i+e],t[i+e]=void 0}function cc(t){this._capacity=t,this._length=0,this._front=0}cc.prototype._willBeOverCapacity=function(t){return this._capacity<t},cc.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},cc.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=(this._front-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},cc.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},cc.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=n,this._length=r},cc.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},cc.prototype.length=function(){return this._length},cc.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},cc.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,uc(this,0,this,e,this._front+this._length&e-1)};var fc=cc,lc=Object.freeze({default:fc,__moduleExports:fc}),pc=ac&&sc||ac,hc=lc&&fc||lc,dc;try{throw new Error}catch(t){dc=t}var yc=pc;function gc(){this._isTickUsed=!1,this._lateQueue=new hc(16),this._normalQueue=new hc(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=yc.isStatic?yc(this.drainQueues):yc}function vc(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function mc(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function _c(t){this._normalQueue._pushOne(t),this._queueTick()}gc.prototype.disableTrampolineIfNecessary=function(){ec.hasDevTools&&(this._trampolineEnabled=!1)},gc.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},gc.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},gc.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},ec.hasDevTools?(yc.isStatic&&(yc=function(t){setTimeout(t,0)}),gc.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?vc.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},gc.prototype.invoke=function(t,e,n){this._trampolineEnabled?mc.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},gc.prototype.settlePromises=function(t){this._trampolineEnabled?_c.call(this,t):this._schedule(function(){t._settlePromises()})}):(gc.prototype.invokeLater=vc,gc.prototype.invoke=mc,gc.prototype.settlePromises=_c),gc.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},gc.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},gc.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},gc.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},gc.prototype._reset=function(){this._isTickUsed=!1};var bc=new gc,wc=dc;bc.firstLineError=wc;var Ec=Object.freeze({default:bc,__moduleExports:bc,firstLineError:wc}),xc=Eu.freeze,Ac=ec.inherits,jc=ec.notEnumerableProp,Fc,Oc;function kc(t,e){function n(r){if(!(this instanceof n))return new n(r);jc(this,"message","string"==typeof r?r:e),jc(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return Ac(n,Error),n}var Cc=kc("Warning","warning"),Tc=kc("CancellationError","cancellation error"),Sc=kc("TimeoutError","timeout error"),Pc=kc("AggregateError","aggregate error");try{Fc=TypeError,Oc=RangeError}catch(t){Fc=kc("TypeError","type error"),Oc=kc("RangeError","range error")}for(var Mc="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),Dc=0;Dc<Mc.length;++Dc)"function"==typeof Array.prototype[Mc[Dc]]&&(Pc.prototype[Mc[Dc]]=Array.prototype[Mc[Dc]]);Eu.defineProperty(Pc.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),Pc.prototype.isOperational=!0;var Rc=0;function Ic(t){if(!(this instanceof Ic))return new Ic(t);jc(this,"name","OperationalError"),jc(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(jc(this,"message",t.message),jc(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}Pc.prototype.toString=function(){var t=Array(4*Rc+1).join(" "),e="\n"+t+"AggregateError of:\n";Rc++,t=Array(4*Rc+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(r=o.join("\n"))+"\n"}return Rc--,e},Ac(Ic,Error);var Bc=Error.__BluebirdErrorTypes__;Bc||(Bc=xc({CancellationError:Tc,TimeoutError:Sc,OperationalError:Ic,RejectionError:Ic,AggregateError:Pc}),jc(Error,"__BluebirdErrorTypes__",Bc));var zc={Error:Error,TypeError:Fc,RangeError:Oc,CancellationError:Bc.CancellationError,OperationalError:Bc.OperationalError,TimeoutError:Bc.TimeoutError,AggregateError:Bc.AggregateError,Warning:Cc},Lc=Object.freeze({default:zc,__moduleExports:zc}),Nc=function(t,e){var n=ec,r=n.errorObj,o=n.isObject;function i(t){return t.then}var s={}.hasOwnProperty;return function(a,u){if(o(a)){if(a instanceof t)return a;if(l=a,s.call(l,"_promise0")){var c=new t(e);return a._then(c._fulfillUnchecked,c._rejectUncheckedCheckError,c._progressUnchecked,c,null),c}var f=n.tryCatch(i)(a);if(f===r)return u&&u._pushContext(),c=t.reject(f.e),u&&u._popContext(),c;if("function"==typeof f)return function(o,i,s){var a=new t(e),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=!0,f=n.tryCatch(i).call(o,function(t){a&&(a._resolveCallback(t),a=null)},function(t){a&&(a._rejectCallback(t,c,!0),a=null)},function(t){a&&"function"==typeof a._progress&&a._progress(t)});return c=!1,a&&f===r&&(a._rejectCallback(f.e,!0,!0),a=null),u}(a,f,u)}var l;return a}},Uc=Object.freeze({default:Nc,__moduleExports:Nc}),qc=function(t,e,n,r){var o=ec.isArray;function i(n){var r,o=this._promise=new t(e);n instanceof t&&(r=n,o._propagateFrom(r,5)),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return i.prototype.length=function(){return this._length},i.prototype.promise=function(){return this._promise},i.prototype._init=function e(i,s){var a=n(this._values,this._promise);if(a instanceof t){if(a=a._target(),this._values=a,!a._isFulfilled())return a._isPending()?void a._then(e,this._reject,void 0,this,s):void this._reject(a._reason());if(a=a._value(),!o(a)){var u=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(u)}}else if(!o(a))return void this._promise._reject(r("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==a.length){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var f=this._promise,l=0;l<c;++l){var p=this._isResolved(),h=n(a[l],f);h instanceof t?(h=h._target(),p?h._ignoreRejections():h._isPending()?h._proxyPromiseArray(this,l):h._isFulfilled()?this._promiseFulfilled(h._value(),l):this._promiseRejected(h._reason(),l)):p||this._promiseFulfilled(h,l)}}else-5===s?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(s))},i.prototype._isResolved=function(){return null===this._values},i.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},i.prototype.__hardReject__=i.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},i.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},i.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},i.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},i.prototype.shouldCopyValues=function(){return!0},i.prototype.getActualLength=function(t){return t},i},Kc=Object.freeze({default:qc,__moduleExports:qc}),Hc=Ec&&bc||Ec,Wc=function(){var t,e=Hc,n=ec,r=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,o=null,i=null,s=!1;function a(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);d(this,a),e>32&&this.uncycle()}function u(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=o.test(r)||"    (No stack trace)"===r,a=i&&f(r);i&&!a&&(s&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function c(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}n.inherits(a,Error),a.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,o=this;void 0!==o;++r)e.push(o),o=o._parent;for(r=(t=this._length=r)-1;r>=0;--r){var i=e[r].stack;void 0===n[i]&&(n[i]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=r-2;c>=0;--c)e[c]._length=u,u++;return}}}},a.prototype.parent=function(){return this._parent},a.prototype.hasParent=function(){return void 0!==this._parent},a.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=a.parseStackAndMessage(t),r=e.message,o=[e.stack],i=this;void 0!==i;)o.push(u(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],o=e.length-1,i=e[o],s=-1,a=r.length-1;a>=0;--a)if(r[a]===i){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[o]!==u)break;e.pop(),o--}e=r}}(o),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(o),n.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");n<e.length&&(e[n]=e[n].join("\n"));return t+"\n"+e.join("\n")}(r,o)),n.notEnumerableProp(t,"__stackCleaned__",!0)}},a.parseStackAndMessage=function(t){var e=t.stack;return{message:t.toString(),stack:u(e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||o.test(r))break}return n>0&&(e=e.slice(n)),e}(t):["    (No stack trace)"])}},a.formatAndLogError=function(e,n){if("undefined"!=typeof console){var r;if("object"==typeof e||"function"==typeof e){var o=e.stack;r=n+i(o,e)}else r=n+String(e);"function"==typeof t?t(r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}},a.unhandledRejection=function(t){a.formatAndLogError(t,"^--- With additional stack trace: ")},a.isSupported=function(){return"function"==typeof d},a.fireRejectionEvent=function(t,n,r,o){var i=!1;try{"function"==typeof n&&(i=!0,"rejectionHandled"===t?n(o):n(r,o))}catch(t){e.throwLater(t)}var s=!1;try{s=y(t,r,o)}catch(t){s=!0,e.throwLater(t)}var u=!1;if(h)try{u=h(t.toLowerCase(),{reason:r,promise:o})}catch(t){u=!0,e.throwLater(t)}s||i||u||"unhandledRejection"!==t||a.formatAndLogError(r,"Unhandled rejection ")};var f=function(){return!1},l=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function p(t){var e=t.match(l);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}a.setBounds=function(t,e){if(a.isSupported()){for(var n,o,i=t.stack.split("\n"),s=e.stack.split("\n"),u=-1,c=-1,l=0;l<i.length;++l){if(h=p(i[l])){n=h.fileName,u=h.line;break}}for(l=0;l<s.length;++l){var h;if(h=p(s[l])){o=h.fileName,c=h.line;break}}u<0||c<0||!n||!o||n!==o||u>=c||(f=function(t){if(r.test(t))return!0;var e=p(t);return!!(e&&e.fileName===n&&u<=e.line&&e.line<=c)})}};var h,d=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():c(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,o=t,i=e;var n=Error.captureStackTrace;return f=function(t){return r.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var a,u=new Error;if("string"==typeof u.stack&&u.stack.split("\n")[0].indexOf("stackDetection@")>=0)return o=/@/,i=e,s=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){a="stack"in t}return"stack"in u||!a||"number"!=typeof Error.stackTraceLimit?(i=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?c(e):e.toString()},null):(o=t,i=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),y=function(){if(n.isNode)return function(t,e,n){return"rejectionHandled"===t?hs.emit(t,n):hs.emit(t,e,n)};var t=!1,e=!0;try{var r=new self.CustomEvent("test");t=r instanceof CustomEvent}catch(t){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(t){e=!1}e&&(h=function(e,n){var r;return t?r=new self.CustomEvent(e,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,n),!!r&&!self.dispatchEvent(r)});var i={};return i.unhandledRejection="onunhandledRejection".toLowerCase(),i.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=i[t],o=self[r];return!!o&&("rejectionHandled"===t?o.call(self,n):o.call(self,e,n),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(t=function(t){console.warn(t)},n.isNode&&hs.stderr.isTTY?t=function(t){hs.stderr.write("[31m"+t+"[39m\n")}:n.isNode||"string"!=typeof(new Error).stack||(t=function(t){console.warn("%c"+t,"color: red")})),a},Yc=Object.freeze({default:Wc,__moduleExports:Wc}),$c=Lc&&zc||Lc,Vc=function(t,e){var n,r,o=t._getDomain,i=Hc,s=$c.Warning,a=ec,u=a.canAttachTrace,c=a.isNode&&(!!hs.env.BLUEBIRD_DEBUG||"development"===hs.env.NODE_ENV);return c&&i.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),i.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){e.fireRejectionEvent("rejectionHandled",n,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),e.fireRejectionEvent("unhandledRejection",r,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(t){return(c||t&&e.isSupported())&&(this._traceForced=t,this._trace=new e(this._peekContext())),this},t.prototype._attachExtraTrace=function(t,n){if((c||this._traceForced)&&u(t)){var r=this._trace;if(void 0!==r&&n&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var o=e.parseStackAndMessage(t);a.notEnumerableProp(t,"stack",o.message+"\n"+o.stack.join("\n")),a.notEnumerableProp(t,"__stackCleaned__",!0)}}},t.prototype._warn=function(t){var n=new s(t),r=this._peekContext();if(r)r.attachExtraTrace(n);else{var o=e.parseStackAndMessage(n);n.stack=o.message+"\n"+o.stack.join("\n")}e.formatAndLogError(n,"")},t.onPossiblyUnhandledRejection=function(t){var e=o();r="function"==typeof t?null===e?t:e.bind(t):void 0},t.onUnhandledRejectionHandled=function(t){var e=o();n="function"==typeof t?null===e?t:e.bind(t):void 0},t.longStackTraces=function(){if(i.haveItemsQueued()&&!1===c)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(c=e.isSupported())&&i.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return c&&e.isSupported()},e.isSupported()||(t.longStackTraces=function(){},c=!1),function(){return c}},Jc=Object.freeze({default:Vc,__moduleExports:Vc}),Qc=function(t,e,n){var r=[];function o(){this._trace=new e(i())}function i(){var t=r.length-1;if(t>=0)return r[t]}return o.prototype._pushContext=function(){n()&&void 0!==this._trace&&r.push(this._trace)},o.prototype._popContext=function(){n()&&void 0!==this._trace&&r.pop()},t.prototype._peekContext=i,t.prototype._pushContext=o.prototype._pushContext,t.prototype._popContext=o.prototype._popContext,function(){if(n())return new o}},Gc=Object.freeze({default:Qc,__moduleExports:Qc}),Xc=function(t){var e=ec,n=$c,r=e.tryCatch,o=e.errorObj,i=Eu.keys,s=n.TypeError;function a(t,e,n){this._instances=t,this._callback=e,this._promise=n}return a.prototype.doFilter=function(e){for(var n,a,u,c=this._callback,f=this._promise._boundValue(),l=0,p=this._instances.length;l<p;++l){var h=this._instances[l],d=h===Error||null!=h&&h.prototype instanceof Error;if(d&&e instanceof h)return(y=r(c).call(f,e))===o?(t.e=y.e,t):y;if("function"==typeof h&&!d){var y,g=(n=e,void 0,void 0,a={},(u=r(h).call(a,n))===o?u:i(a).length?(o.e=new s("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),o):u);if(g===o){e=o.e;break}if(g)return(y=r(c).call(f,e))===o?(t.e=y.e,t):y}}return t.e=e,t},a},Zc=Object.freeze({default:Xc,__moduleExports:Xc}),tf=ec.maybeWrapAsError,ef=$c.TimeoutError,nf=$c.OperationalError,rf=ec.haveGetters;function of(t){return t instanceof Error&&Eu.getPrototypeOf(t)===Error.prototype}var sf=/^(?:name|message|stack|cause)$/,af;function uf(t){var e;if(of(t)){(e=new nf(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=Eu.keys(t),r=0;r<n.length;++r){var o=n[r];sf.test(o)||(e[o]=t[o])}return e}return ec.markAsOriginatingFromRejection(t),t}function cf(t){return function(e,n){if(null!==t){if(e){var r=uf(tf(e));t._attachExtraTrace(r),t._reject(r)}else if(arguments.length>2){for(var o=arguments.length,i=new Array(o-1),s=1;s<o;++s)i[s-1]=arguments[s];t._fulfill(i)}else t._fulfill(n);t=null}}}if(af=rf?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=cf(t),this.callback=this.asCallback},rf){var ff={get:function(){return cf(this.promise)}};Eu.defineProperty(af.prototype,"asCallback",ff),Eu.defineProperty(af.prototype,"callback",ff)}af._nodebackForPromise=cf,af.prototype.toString=function(){return"[object PromiseResolver]"},af.prototype.resolve=af.prototype.fulfill=function(t){if(!(this instanceof af))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},af.prototype.reject=function(t){if(!(this instanceof af))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},af.prototype.progress=function(t){if(!(this instanceof af))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},af.prototype.cancel=function(t){this.promise.cancel(t)},af.prototype.timeout=function(){this.reject(new ef("timeout"))},af.prototype.isResolved=function(){return this.promise.isResolved()},af.prototype.toJSON=function(){return this.promise.toJSON()};var lf=af,pf=Object.freeze({default:lf,__moduleExports:lf}),hf=function(t,e){var n=ec,r=Hc,o=n.tryCatch,i=n.errorObj;t.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},t.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},t.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},t.prototype._doProgressWith=function(e){var r=e.value,s=e.handler,a=e.promise,u=e.receiver,c=o(s).call(u,r);if(c===i){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var f=n.canAttachTrace(c.e)?c.e:new Error(n.toString(c.e));a._attachExtraTrace(f),a._progress(c.e)}}else c instanceof t?c._then(a._progress,null,null,a,void 0):a._progress(c)},t.prototype._progressUnchecked=function(n){for(var o=this._length(),i=this._progress,s=0;s<o;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof t)"function"==typeof a?r.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:n}):r.invoke(i,u,n);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,n,u):c instanceof e&&!c._isResolved()&&c._promiseProgressed(n,u)}}}},df=Object.freeze({default:hf,__moduleExports:hf}),yf=function(t,e,n,r){var o=ec,i=o.tryCatch;t.method=function(n){if("function"!=typeof n)throw new t.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new t(e);r._captureStackTrace(),r._pushContext();var o=i(n).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(o),r}},t.attempt=t.try=function(n,s,a){if("function"!=typeof n)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new t(e);u._captureStackTrace(),u._pushContext();var c=o.isArray(s)?i(n).apply(a,s):i(n).call(a,s);return u._popContext(),u._resolveFromSyncValue(c),u},t.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}},gf=Object.freeze({default:yf,__moduleExports:yf}),vf=function(t,e,n){var r=function(t,e){this._reject(e)},o=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},i=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(u._setBoundTo(a),a instanceof t){var f={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,o,u._progress,u,f),a._then(i,s,u._progress,u,f)}else u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(r,o){var i=n(r),s=new t(e);return s._setBoundTo(i),i instanceof t?i._then(function(){s._resolveCallback(o)},s._reject,s._progress,s,null):s._resolveCallback(o),s}},mf=Object.freeze({default:vf,__moduleExports:vf}),_f=function(t,e,n){var r=ec,o=r.isPrimitive,i=r.thrower;function s(){return this}function a(){throw this}function u(t,e,n){var r,u,c;return r=o(e)?n?(c=e,function(){return c}):(u=e,function(){throw u}):n?s:a,t._then(r,i,void 0,e,void 0)}function c(r){var o=this.promise,i=this.handler,s=o._isBound()?i.call(o._boundValue()):i();if(void 0!==s){var a=n(s,o);if(a instanceof t)return u(a=a._target(),r,o.isFulfilled())}return o.isRejected()?(e.e=r,e):r}function f(e){var r=this.promise,o=this.handler,i=r._isBound()?o.call(r._boundValue(),e):o(e);if(void 0!==i){var s=n(i,r);if(s instanceof t)return u(s=s._target(),e,!0)}return e}t.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:f,e?c:void 0,void 0,n,void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThroughHandler(t,!0)},t.prototype.tap=function(t){return this._passThroughHandler(t,!1)}},bf=Object.freeze({default:_f,__moduleExports:_f}),wf=ec.isPrimitive,Ef=function(t){var e=function(){return this},n=function(){throw this},r=function(){},o=function(){throw void 0},i=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(t){return void 0===t?this.then(r):wf(t)?this._then(i(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(o):wf(t)?this._then(i(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}},xf=Object.freeze({default:Ef,__moduleExports:Ef}),Af=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e},jf=Object.freeze({default:Af,__moduleExports:Af}),Ff=function(t,e,n,r){var o=ec,i=o.canEvaluate,s=o.tryCatch,a=o.errorObj;if(i){for(var u=function(t){for(var e=[],n=1;n<=t;++n)e.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},c=[],f=[void 0],l=1;l<=5;++l)c.push(new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,l))),f.push(u(l));var p=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};p.prototype.callers=f,p.prototype.checkFulfillment=function(t){var e=this.now;e++;var n=this.total;if(e>=n){var r=this.callers[n];t._pushContext();var o=s(r)(this);t._popContext(),o===a?t._rejectCallback(o.e,!1,!0):t._resolveCallback(o)}else this.now=e};var h=function(t){this._reject(t)}}t.join=function(){var o,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]&&(o=arguments[s],s<6&&i)){(v=new t(r))._captureStackTrace();for(var a=new p(s,o),u=c,f=0;f<s;++f){var l=n(arguments[f],v);l instanceof t?(l=l._target())._isPending()?l._then(u[f],h,void 0,v,a):l._isFulfilled()?u[f].call(v,l._value(),a):v._reject(l._reason()):u[f].call(v,l,a)}return v}for(var d=arguments.length,y=new Array(d),g=0;g<d;++g)y[g]=arguments[g];o&&y.pop();var v=new e(y).promise();return void 0!==o?v.spread(o):v}},Of=Object.freeze({default:Ff,__moduleExports:Ff}),kf=function(t,e,n,r,o){var i=t._getDomain,s=Hc,a=ec,u=a.tryCatch,c=a.errorObj,f={},l=[];function p(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var a=i();this._callback=null===a?e:a.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:l,s.invoke(h,this,void 0)}function h(){this._init$(void 0,-2)}function d(t,e,n,r){var o="object"==typeof n&&null!==n?n.concurrency:0;return new p(t,e,o="number"==typeof o&&isFinite(o)&&o>=1?o:0,r)}a.inherits(p,e),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,n){var o=this._values,i=this.length(),s=this._preservedValues,a=this._limit;if(o[n]===f){if(o[n]=e,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return o[n]=e,void this._queue.push(n);null!==s&&(s[n]=e);var l=this._callback,p=this._promise._boundValue();this._promise._pushContext();var h=u(l).call(p,e,n,i);if(this._promise._popContext(),h===c)return this._reject(h.e);var d=r(h,this._promise);if(d instanceof t){if((d=d._target())._isPending())return a>=1&&this._inFlight++,o[n]=f,d._proxyPromiseArray(this,n);if(!d._isFulfilled())return this._reject(d._reason());h=d._value()}o[n]=h}++this._totalResolved>=i&&(null!==s?this._filter(o,s):this._resolve(o))},p.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},p.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),o=0,i=0;i<n;++i)t[i]&&(r[o++]=e[i]);r.length=o,this._resolve(r)},p.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):d(this,t,e,null).promise()},t.map=function(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):d(t,e,r,o).promise()}},Cf=Object.freeze({default:kf,__moduleExports:kf}),Tf=function(t){var e=Hc,n=$c.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},t.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new n),e.invokeLater(this._cancel,this,t),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(e.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},t.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}},Sf=Object.freeze({default:Tf,__moduleExports:Tf}),Pf=function(t,e,n,r){var o=$c.TypeError,i=ec.inherits,s=t.PromiseInspection;function a(e){for(var n=e.length,r=0;r<n;++r){var o=e[r];if(o.isRejected())return t.reject(o.error());e[r]=o._settledValue}return e}function u(t){setTimeout(function(){throw t},0)}function c(e,r){var o=0,i=e.length,s=t.defer();return function a(){if(o>=i)return s.resolve();var c,f,l=(c=e[o++],(f=n(c))!==c&&"function"==typeof c._isDisposable&&"function"==typeof c._getDisposer&&c._isDisposable()&&f._setDisposable(c._getDisposer()),f);if(l instanceof t&&l._isDisposable()){try{l=n(l._getDisposer().tryDispose(r),e.promise)}catch(t){return u(t)}if(l instanceof t)return l._then(a,u,null,null,null)}a()}(),s.promise}function f(t){var e=new s;return e._settledValue=t,e._bitField=268435456,c(this,e).thenReturn(t)}function l(t){var e=new s;return e._settledValue=t,e._bitField=134217728,c(this,e).thenThrow(t)}function p(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function d(t){return p.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},p.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},p.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},i(h,p),h.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},t.using=function(){var r=arguments.length;if(r<2)return e("you must pass at least 2 arguments to Promise.using");var o=arguments[r-1];if("function"!=typeof o)return e("fn must be a function\n\n    See http://goo.gl/916lJJ\n");r--;for(var i=new Array(r),s=0;s<r;++s){var u=arguments[s];if(p.isDisposer(u)){var c=u;(u=u.promise())._setDisposable(c)}else{var h=n(u);h instanceof t&&(u=h._then(d,null,null,{resources:i,index:s},void 0))}i[s]=u}var y=t.settle(i).then(a).then(function(t){var e;y._pushContext();try{e=o.apply(void 0,t)}finally{y._popContext()}return e})._then(f,l,void 0,i,void 0);return i.promise=y,y},t.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,r());throw new o}},Mf=Object.freeze({default:Pf,__moduleExports:Pf}),Df=function(t,e,n,r){var o=$c.TypeError,i=ec,s=i.errorObj,a=i.tryCatch,u=[];function c(e,r,o,i){(this._promise=new t(n))._captureStackTrace(),this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(u):u}c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},c.prototype._continue=function(e){if(e===s)return this._promise._rejectCallback(e.e,!1,!0);var n=e.value;if(!0===e.done)this._promise._resolveCallback(n);else{var i=r(n,this._promise);if(!(i instanceof t)&&null===(i=function(e,n,o){for(var i=0;i<n.length;++i){o._pushContext();var u=a(n[i])(e);if(o._popContext(),u===s){o._pushContext();var c=t.reject(s.e);return o._popContext(),c}var f=r(u,o);if(f instanceof t)return f}return null}(i,this._yieldHandlers,this._promise)))return void this._throw(new o("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i._then(this._next,this._throw,void 0,this,null)}},c.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=a(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._next=function(t){this._promise._pushContext();var e=a(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},t.coroutine=function(t,e){if("function"!=typeof t)throw new o("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i);return o._generator=e,o._next(void 0),o.promise()}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new o("fn must be a function\n\n    See http://goo.gl/916lJJ\n");u.push(t)},t.spawn=function(n){if("function"!=typeof n)return e("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new c(n,this),o=r.promise();return r._run(t.spawn),o}},Rf=Object.freeze({default:Df,__moduleExports:Df}),If=function(t){var e=ec,n=Hc,r=e.tryCatch,o=e.errorObj;function i(t,i){if(!e.isArray(t))return s.call(this,t,i);var a=r(i).apply(this._boundValue(),[null].concat(t));a===o&&n.throwLater(a.e)}function s(t,e){var i=this._boundValue(),s=void 0===t?r(e).call(i,null):r(e).call(i,null,t);s===o&&n.throwLater(s.e)}function a(t,e){if(!t){var i=this._target()._getCarriedStackTrace();i.cause=t,t=i}var s=r(e).call(this._boundValue(),t);s===o&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=i),this._then(n,a,void 0,this,t)}return this}},Bf=Object.freeze({default:If,__moduleExports:If}),zf=Object.create;if(zf){var Lf=zf(null),Nf=zf(null);Lf[" size"]=Nf[" size"]=0}var Uf=function(t){var e,n,r=ec,o=r.canEvaluate,i=r.isIdentifier,s=function(t){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,t))(c)},a=function(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))},u=function(t,e,n){var r=n[t];if("function"!=typeof r){if(!i(t))return null;if(r=e(t),n[t]=r,n[" size"]++,n[" size"]>512){for(var o=Object.keys(n),s=0;s<256;++s)delete n[o[s]];n[" size"]=o.length-256}}return r};function c(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(i)}return o}function f(t){return c(t,this.pop()).apply(t,this)}function l(t){return t[this]}function p(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e=function(t){return u(t,s,Lf)},n=function(t){return u(t,a,Nf)},t.prototype.call=function(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;++i)r[i-1]=arguments[i];if(o){var s=e(t);if(null!==s)return this._then(s,void 0,void 0,r,void 0)}return r.push(t),this._then(f,void 0,void 0,r,void 0)},t.prototype.get=function(t){var e;if("number"==typeof t)e=p;else if(o){var r=n(t);e=null!==r?r:l}else e=l;return this._then(e,void 0,void 0,t,void 0)}},qf=Object.freeze({default:Uf,__moduleExports:Uf}),Kf=function(t,e,n,r){var o=ec,i=o.isObject,s=Eu;function a(t){for(var e=s.keys(t),n=e.length,r=new Array(2*n),o=0;o<n;++o){var i=e[o];r[o]=t[i],r[o+n]=i}this.constructor$(r)}function u(e){var o,s=n(e);return i(s)?(o=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new a(s).promise(),s instanceof t&&o._propagateFrom(s,4),o):r("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}o.inherits(a,e),a.prototype._init=function(){this._init$(void 0,-3)},a.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var n={},r=this.length(),o=0,i=this.length();o<i;++o)n[this._values[o+r]]=this._values[o];this._resolve(n)}},a.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},a.prototype.shouldCopyValues=function(){return!1},a.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return u(this)},t.props=function(t){return u(t)}},Hf=Object.freeze({default:Kf,__moduleExports:Kf}),Wf=function(t,e,n,r){var o=ec.isArray,i=function(t){return t.then(function(e){return s(e,t)})};function s(s,a){var u=n(s);if(u instanceof t)return i(u);if(!o(s))return r("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new t(e);void 0!==a&&c._propagateFrom(a,5);for(var f=c._fulfill,l=c._reject,p=0,h=s.length;p<h;++p){var d=s[p];(void 0!==d||p in s)&&t.cast(d)._then(f,l,void 0,c,null)}return c}t.race=function(t){return s(t,void 0)},t.prototype.race=function(){return s(this,void 0)}},Yf=Object.freeze({default:Wf,__moduleExports:Wf}),$f=function(t,e,n,r,o){var i=t._getDomain,s=Hc,a=ec,u=a.tryCatch,c=a.errorObj;function f(e,n,a,u){this.constructor$(e),this._promise._captureStackTrace(),this._preservedValues=u===o?[]:null,this._zerothIsAccum=void 0===a,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var c=r(a,this._promise),f=!1,p=c instanceof t;p&&((c=c._target())._isPending()?c._proxyPromiseArray(this,-1):c._isFulfilled()?(a=c._value(),this._gotAccum=!0):(this._reject(c._reason()),f=!0)),p||this._zerothIsAccum||(this._gotAccum=!0);var h=i();this._callback=null===h?n:h.bind(n),this._accum=a,f||s.invoke(l,this,void 0)}function l(){this._init$(void 0,-5)}function p(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new f(t,e,r,o).promise()}a.inherits(f,e),f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},f.prototype._promiseFulfilled=function(e,n){var o=this._values;o[n]=e;var i,s=this.length(),a=this._preservedValues,f=null!==a,l=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=new Array(s),i=0;i<s;++i)p[i]=0;if(i=p[n],0===n&&this._zerothIsAccum?(this._accum=e,this._gotAccum=l=!0,p[n]=0===i?1:2):-1===n?(this._accum=e,this._gotAccum=l=!0):0===i?p[n]=1:(p[n]=2,this._accum=e),l){for(var h,d=this._callback,y=this._promise._boundValue(),g=this._reducingIndex;g<s;++g)if(2!==(i=p[g])){if(1!==i)return;if(e=o[g],this._promise._pushContext(),f?(a.push(e),h=u(d).call(y,e,g,s)):h=u(d).call(y,this._accum,e,g,s),this._promise._popContext(),h===c)return this._reject(h.e);var v=r(h,this._promise);if(v instanceof t){if((v=v._target())._isPending())return p[g]=4,v._proxyPromiseArray(this,g);if(!v._isFulfilled())return this._reject(v._reason());h=v._value()}this._reducingIndex=g+1,this._accum=h}else this._reducingIndex=g+1;this._resolve(f?a:this._accum)}},t.prototype.reduce=function(t,e){return p(this,t,e,null)},t.reduce=function(t,e,n,r){return p(t,e,n,r)}},Vf=Object.freeze({default:$f,__moduleExports:$f}),Jf=function(t,e){var n=t.PromiseInspection;function r(t){this.constructor$(t)}ec.inherits(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var r=new n;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},r.prototype._promiseRejected=function(t,e){var r=new n;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},t.settle=function(t){return new r(t).promise()},t.prototype.settle=function(){return new r(this).promise()}},Qf=Object.freeze({default:Jf,__moduleExports:Jf}),Gf=function(t,e,n){var r=ec,o=$c.RangeError,i=$c.AggregateError,s=r.isArray;function a(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new a(t),o=r.promise();return r.setHowMany(e),r.init(),o}r.inherits(a,e),a.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},a.prototype.init=function(){this._initialized=!0,this._init()},a.prototype.setUnwrap=function(){this._unwrap=!0},a.prototype.howMany=function(){return this._howMany},a.prototype.setHowMany=function(t){this._howMany=t},a.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},a.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new i,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},a.prototype._fulfilled=function(){return this._totalResolved},a.prototype._rejected=function(){return this._values.length-this.length()},a.prototype._addRejected=function(t){this._values.push(t)},a.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},a.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},a.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},a.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=a},Xf=Object.freeze({default:Gf,__moduleExports:Gf}),Zf=pf&&lf||pf,tl=function(t,e){var n={},r=ec,o=Zf._nodebackForPromise,i=r.withAppended,s=r.maybeWrapAsError,a=r.canEvaluate,u=$c.TypeError,c={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),l=function(t){return r.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!f.test(t)}function h(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function d(t,e,n,o){for(var i,s,a,f,p=r.inheritedDataKeys(t),d=[],y=0;y<p.length;++y){var g=p[y],v=t[g],m=o===l||l(g,v,t);"function"!=typeof v||h(v)||(i=t,s=g,a=e,void 0,(f=r.getDataPropertyOrDefault(i,s+a,c))&&h(f))||!o(g,v,t,m)||d.push(g,v)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var o=t[r];if(n.test(o))for(var i=o.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===i)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}(d,e,n),d}var y=function(t){return t.replace(/([$])/,"\\$")},g=function(t){return r.filledRange(t,"_arg","")};var v=a?function(a,u,c,f){var l,p=Math.max(0,("number"==typeof(l=f).length?Math.max(Math.min(l.length,1024),0):0)-1),h=function(t){for(var e=[t],n=Math.max(0,t-1-3),r=t-1;r>=n;--r)e.push(r);for(r=t+1;r<=3;++r)e.push(r);return e}(p),d="string"==typeof a||u===n;var y,v="string"==typeof a?"this != null ? this['"+a+"'] : fn":"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n        ".replace("Parameters",(y=p,r.filledRange(Math.max(y,3),"_arg",""))).replace("[CodeForSwitchCase]",function(){for(var t,e,n,r="",o=0;o<h.length;++o)r+="case "+h[o]+":"+(t=h[o],e=g(t).join(", "),n=t>0?", ":"",(d?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===u?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",e).replace(", ",n));return r+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",d?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",v))(t,f,u,i,s,o,r.tryCatch,r.errorObj,r.notEnumerableProp,e)}:function(a,u,c,f){var l=function(){return this}(),p=a;function h(){var r=u;u===n&&(r=this);var c=new t(e);c._captureStackTrace();var f="string"==typeof p&&this!==l?this[p]:a,h=o(c);try{f.apply(r,i(arguments,h))}catch(t){c._rejectCallback(s(t),!0,!0)}return c}return"string"==typeof p&&(a=f),r.notEnumerableProp(h,"__isPromisified__",!0),h};function m(t,e,o,i){for(var s=new RegExp(y(e)+"$"),a=d(t,e,s,o),u=0,c=a.length;u<c;u+=2){var f=a[u],l=a[u+1];t[f+e]=i===v?v(f,n,f,l,e):i(l,function(){return v(f,n,f,l,e)})}return r.toFastProperties(t),t}t.promisify=function(t,e){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(h(t))return t;var o,i,s=(o=t,i=arguments.length<2?n:e,v(o,i,void 0,o));return r.copyDescriptors(t,s,p),s},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var n=(e=Object(e)).suffix;"string"!=typeof n&&(n="Async");var o=e.filter;"function"!=typeof o&&(o=l);var i=e.promisifier;if("function"!=typeof i&&(i=v),!r.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var s=r.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&r.isClass(c)&&(m(c.prototype,n,o,i),m(c,n,o,i))}return m(t,n,o,i)}},el=Object.freeze({default:tl,__moduleExports:tl}),nl=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}},rl=Object.freeze({default:nl,__moduleExports:nl}),ol=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}},il=Object.freeze({default:ol,__moduleExports:ol}),sl=function(t,e){var n=ec,r=t.TimeoutError,o=function(t){return i(+this).thenReturn(t)},i=t.delay=function(n,r){if(void 0===r){r=n,n=void 0;var i=new t(e);return setTimeout(function(){i._fulfill()},r),i}return r=+r,t.resolve(n)._then(o,null,null,r,void 0)};function s(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function a(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}t.prototype.delay=function(t){return i(this,t)},t.prototype.timeout=function(t,e){t=+t;var o=this.then().cancellable();o._cancellationParent=this;var i=setTimeout(function(){!function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var o=new r(e);n.markAsOriginatingFromRejection(o),t._attachExtraTrace(o),t._cancel(o)}}(o,e)},t);return o._then(s,a,void 0,i,void 0)}},al=Object.freeze({default:sl,__moduleExports:sl}),ul=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,o){return n(t,r,o,e)}},cl=Object.freeze({default:ul,__moduleExports:ul}),fl=Uc&&Nc||Uc,ll=Kc&&qc||Kc,pl=Yc&&Wc||Yc,hl=Jc&&Vc||Jc,dl=Gc&&Qc||Gc,yl=Zc&&Xc||Zc,gl=df&&hf||df,vl=gf&&yf||gf,ml=mf&&vf||mf,_l=bf&&_f||bf,bl=xf&&Ef||xf,wl=jf&&Af||jf,El=Of&&Ff||Of,xl=Cf&&kf||Cf,Al=Sf&&Tf||Sf,jl=Mf&&Pf||Mf,Fl=Rf&&Df||Rf,Ol=Bf&&If||Bf,kl=qf&&Uf||qf,Cl=Hf&&Kf||Hf,Tl=Yf&&Wf||Yf,Sl=Vf&&$f||Vf,Pl=Qf&&Jf||Qf,Ml=Xf&&Gf||Xf,Dl=el&&tl||el,Rl=rl&&nl||rl,Il=il&&ol||il,Bl=al&&sl||al,zl=cl&&ul||cl,Ll=function(){var t,e=function(){return new a("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},n=function(){return new w.PromiseInspection(this._target())},r=function(t){return w.reject(new a(t))},o=ec;t=o.isNode?function(){var t=hs.domain;return void 0===t&&(t=null),t}:function(){return null},o.notEnumerableProp(w,"_getDomain",t);var i=Hc,s=$c,a=w.TypeError=s.TypeError;w.RangeError=s.RangeError,w.CancellationError=s.CancellationError,w.TimeoutError=s.TimeoutError,w.OperationalError=s.OperationalError,w.RejectionError=s.OperationalError,w.AggregateError=s.AggregateError;var u=function(){},c={},f={e:null},l=fl(w,u),p=ll(w,u,l,r),h=pl(),d=hl(w,h),y=dl(w,h,d),g=yl(f),v=Zf,m=v._nodebackForPromise,_=o.errorObj,b=o.tryCatch;function w(t){if("function"!=typeof t)throw new a("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==w)throw new a("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==u&&this._resolveFromResolver(t)}function E(t){var e=new w(u);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}return w.prototype.toString=function(){return"[object Promise]"},w.prototype.caught=w.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var i=arguments[n];if("function"!=typeof i)return w.reject(new a("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));r[o++]=i}r.length=o,t=arguments[n];var s=new g(r,t,this);return this._then(void 0,s.doFilter,void 0,s,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},w.prototype.reflect=function(){return this._then(n,n,void 0,this,void 0)},w.prototype.then=function(t,e,n){if(d()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+o.classString(t);arguments.length>1&&(r+=", "+o.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},w.prototype.done=function(t,e,n){this._then(t,e,n,void 0,void 0)._setIsFinal()},w.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,c,void 0)},w.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},w.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},w.prototype.all=function(){return new p(this).promise()},w.prototype.error=function(t){return this.caught(o.originatesFromRejection,t)},w.is=function(t){return t instanceof w},w.fromNode=function(t){var e=new w(u),n=b(t)(m(e));return n===_&&e._rejectCallback(n.e,!0,!0),e},w.all=function(t){return new p(t).promise()},w.defer=w.pending=function(){var t=new w(u);return new v(t)},w.cast=function(t){var e=l(t);if(!(e instanceof w)){var n=e;(e=new w(u))._fulfillUnchecked(n)}return e},w.resolve=w.fulfilled=w.cast,w.reject=w.rejected=function(t){var e=new w(u);return e._captureStackTrace(),e._rejectCallback(t,!0),e},w.setScheduler=function(t){if("function"!=typeof t)throw new a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=i._schedule;return i._schedule=t,e},w.prototype._then=function(e,n,r,o,s){var a=void 0!==s,c=a?s:new w(u);a||(c._propagateFrom(this,5),c._captureStackTrace());var f=this._target();f!==this&&(void 0===o&&(o=this._boundTo),a||c._setIsMigrated());var l=f._addCallbacks(e,n,r,c,o,t());return f._isResolved()&&!f._isSettlePromisesQueued()&&i.invoke(f._settlePromiseAtPostResolution,f,l),c},w.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},w.prototype._length=function(){return 131071&this._bitField},w.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},w.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},w.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},w.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},w.prototype._setRejected=function(){this._bitField=134217728|this._bitField},w.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},w.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},w.prototype._isFinal=function(){return(33554432&this._bitField)>0},w.prototype._cancellable=function(){return(67108864&this._bitField)>0},w.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},w.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},w.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},w.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},w.prototype._isMigrated=function(){return(4194304&this._bitField)>0},w.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundValue():e},w.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},w.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},w.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},w.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof w?t.isFulfilled()?t.value():void 0:t},w.prototype._migrateCallbacks=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),i=t._promiseAt(e),s=t._receiverAt(e);i instanceof w&&i._setIsMigrated(),this._addCallbacks(n,r,o,i,s,null)},w.prototype._addCallbacks=function(t,e,n,r,o,i){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=r,void 0!==o&&(this._receiver0=o),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e)),"function"==typeof n&&(this._progressHandler0=null===i?n:i.bind(n));else{var a=5*s-5;this[a+3]=r,this[a+4]=o,"function"==typeof t&&(this[a+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[a+1]=null===i?e:i.bind(e)),"function"==typeof n&&(this[a+2]=null===i?n:i.bind(n))}return this._setLength(s+1),s},w.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},w.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},w.prototype._resolveCallback=function(t,n){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(e(),!1,!0);var r=l(t,this);if(!(r instanceof w))return this._fulfill(t);var o=1|(n?4:0);this._propagateFrom(r,o);var i=r._target();if(i._isPending()){for(var s=this._length(),a=0;a<s;++a)i._migrateCallbacks(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},w.prototype._rejectCallback=function(t,e,n){n||o.markAsOriginatingFromRejection(t);var r=o.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,!!e&&i),this._reject(t,i?void 0:r)},w.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=b(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===_&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},w.prototype._settlePromiseFromHandler=function(t,n,r,o){var i;if(!o._isRejected())if(o._pushContext(),i=n!==c||this._isRejected()?b(t).call(n,r):b(t).apply(this._boundValue(),r),o._popContext(),i===_||i===o||i===f){var s=i===o?e():i.e;o._rejectCallback(s,!1,!0)}else o._resolveCallback(i)},w.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},w.prototype._followee=function(){return this._rejectionHandler0},w.prototype._setFollowee=function(t){this._rejectionHandler0=t},w.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},w.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},w.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},w.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},w.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),n=e instanceof w;if(n&&e._isMigrated())return e._unsetIsMigrated(),i.invoke(this._settlePromiseAt,this,t);var r=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,a=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof r?n?this._settlePromiseFromHandler(r,a,s,e):r.call(a,s,e):a instanceof p?a._isResolved()||(this._isFulfilled()?a._promiseFulfilled(s,e):a._promiseRejected(s,e)):n&&(this._isFulfilled()?e._fulfill(s):e._reject(s,o)),t>=4&&4==(31&t)&&i.invokeLater(this._setLength,this,0)},w.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},w.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},w.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},w.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},w.prototype._queueSettlePromises=function(){i.settlePromises(this),this._setSettlePromisesQueued()},w.prototype._fulfillUnchecked=function(t){if(t===this){var n=e();return this._attachExtraTrace(n),this._rejectUnchecked(n,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},w.prototype._rejectUncheckedCheckError=function(t){var e=o.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},w.prototype._rejectUnchecked=function(t,n){if(t===this){var r=e();return this._attachExtraTrace(r),this._rejectUnchecked(r)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?i.throwLater(function(t){throw"stack"in t&&i.invokeFirst(h.unhandledRejection,void 0,t),t},void 0===n?t:n):(void 0!==n&&n!==t&&this._setCarriedStackTrace(n),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},w.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},o.notEnumerableProp(w,"_makeSelfResolutionError",e),gl(w,p),vl(w,u,l,r),ml(w,u,l),_l(w,f,l),bl(w),wl(w),El(w,p,l,u),w.Promise=w,xl(w,p,r,l,u),Al(w),jl(w,r,l,y),Fl(w,r,u,l),Ol(w),kl(w),Cl(w,p,l,r),Tl(w,u,l,r),Sl(w,p,r,l,u),Pl(w,p),Ml(w,p,r),Dl(w,u),Rl(w),Il(w,u),Bl(w,u),zl(w,u),o.toFastProperties(w),o.toFastProperties(w.prototype),E({a:1}),E({b:2}),E({c:3}),E(1),E(function(){}),E(void 0),E(!1),E(new w(u)),h.setBounds(i.firstLineError,o.lastLineError),w},Nl=Object.freeze({default:Ll,__moduleExports:Ll}),Ul=Nl&&Ll||Nl,ql;function Kl(){try{Promise===Hl&&(Promise=ql)}catch(t){}return Hl}"undefined"!=typeof Promise&&(ql=Promise);var Hl=Ul();Hl.noConflict=Kl;var Wl=Hl,Yl={queue:[],drain:function(){this.queue.forEach(function(t){t()}),this.queue=[]}},$l=Wl.setScheduler(function(t){Yl.queue.push(t),$l(function(){Yl.drain()})});Wl.prototype._notifyUnhandledRejection=function(){var t=this;$l(function(){if(t._isRejectionUnhandled()){if(!Yl.onUnhandledRejection)throw t.reason();Yl.onUnhandledRejection(t.reason())}})};var Vl=Yl,Jl=Object.freeze({default:Vl,__moduleExports:Vl}),Ql=!1;"undefined"!=typeof window&&void 0!==window.location&&(Ql=!!window.location.search.match(/[?&]full-trace=true(?:$|&)/)),void 0!==hs&&hs.env&&hs.env.UNEXPECTED_FULL_TRACE&&(Wl.longStackTraces(),Ql=!0);var Gl=Ql,Xl=Object.freeze({default:Gl,__moduleExports:Gl}),Zl=Jl&&Vl||Jl,tp=Xl&&Gl||Xl,ep=function(t){if(!t||"function"!=typeof t.then)return t;if(!t.isRejected)return t;if(t.isFulfilled())return t;if(t.isRejected())throw t.caught(function(){}),t.reason();var e=function(){},n=function(){},r=!1,o=void 0;if(t.then(function(n){r=!0,e(t)},function(t){r=!0,o=t,n(t)}),Zl.drain(),r&&o)throw o._isUnexpected&&Error.captureStackTrace&&Error.captureStackTrace(o),o;return r?t:(t._captureStackTrace&&!tp&&t._captureStackTrace(!0),new Wl(function(t,r){e=t,n=r}))},np=Object.freeze({default:ep,__moduleExports:ep});function rp(t){if(t&&"aggregate error"===t.message)for(var e=0;e<t.length;e+=1)rp(t[e]);else if(!t||!t._isUnexpected)throw t}var op=rp,ip=Object.freeze({default:op,__moduleExports:op}),sp=np&&ep||np,ap=ip&&op||ip,up=n(function(t){var e=r(Kn),n=r(qo);function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if("function"!=typeof t)throw new TypeError("expect.promise(...) requires a function argument to be supplied.\nSee http://unexpected.js.org/api/promise/ for more details.");return 2===t.length?new Wl(t):new Wl(function(e,n){var r=0,o=void 0,s=!1;function a(){s&&0===r&&e(o)}function u(t){void 0!==t&&void 0===o&&(o=t)}try{var c=sp(t(function(t){return r+=1,function(){r-=1;var e=void 0;try{"function"==typeof t&&(i(e=sp(t.apply(void 0,arguments)))?(r+=1,e.then(function(t){u(t),r-=1,a()},n)):u(e))}catch(t){return n(t)}return a(),e}}));i(c)?(r+=1,c.then(function(t){u(t),r-=1,a()},n)):u(c)}catch(t){return n(t)}s=!0,a()})}function i(t){return t&&"object"===(void 0===t?"undefined":(0,n.default)(t))&&"function"==typeof t.then}["all","any","settle"].forEach(function(t){o[t]=function(r){var o=Wl[t](function t(r){if(i(r))return[r];if(r&&"object"===(void 0===r?"undefined":(0,n.default)(r))){var o=[];return Object.keys(r).forEach(function(n){o.push.apply(o,(0,e.default)(t(r[n])))}),o}return[]}(r));return"settle"===t?o.then(function(t){return t.forEach(function(t){t.isRejected()&&ap(t.reason())}),t}):o}}),Object.keys(Wl).forEach(function(t){/^_|^on|^setScheduler|ongStackTraces/.test(t)||"function"!=typeof Wl[t]||void 0!==o[t]||(o[t]=Wl[t])}),t.exports=o}),cp=e(up),fp=Object.freeze({default:cp,__moduleExports:up});function lp(t,e,n){return t.and=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];function i(){return e.findTypeOf(r[0]).is("expect.it")?lp(r[0](n),e,n):e.apply(void 0,[n].concat(r))}return this.isFulfilled()?i():lp(this.then(i),e,n)},t}var pp=lp,hp=Object.freeze({default:pp,__moduleExports:pp}),dp=fp&&cp||fp,yp=function(t){return"function"!=typeof t.isPending?dp(function(){return t}):t},gp=Object.freeze({default:yp,__moduleExports:yp}),vp=3,mp="undefined"!=typeof window&&void 0!==window.location&&window.location.search.match(/[?&]depth=(\d+)(?:$|&)/);mp?vp=parseInt(mp[1],10):void 0!==hs&&hs.env.UNEXPECTED_DEPTH&&(vp=parseInt(hs.env.UNEXPECTED_DEPTH,10));var _p=vp,bp=Object.freeze({default:_p,__moduleExports:_p}),wp=function(t){return t&&(t.isMagicPen?t.diff=t:(t.diff.inline=t.inline,(t=t.diff).diff=t)),t},Ep=Object.freeze({default:wp,__moduleExports:wp}),xp=ji&&ii||ji,Ap=bp&&_p||bp,jp=Ep&&wp||Ep,Fp=["message","line","sourceId","sourceURL","stack","stackArray"].reduce(function(t,e){return t[e]=!0,t},{});function Op(t,e){this.errorMode=t&&t.errorMode||"default";var n=Error.call(this,"");if(Error.captureStackTrace)Error.captureStackTrace(this,Op);else{try{throw n}catch(t){}this.stack=n.stack}this.expect=t,this.parent=e||null,this.name="UnexpectedError"}Op.prototype=Object.create(Error.prototype),Op.prototype.useFullStackTrace=tp;var kp="You must either provide a format or a magicpen instance";function Cp(t){for(var e=t.length-1;e>=0;e-=1)if(""===t[e])return e+1;return-1}Op.prototype.outputFromOptions=function(t){if(!t)throw new Error(kp);if("string"==typeof t)return this.expect.createOutput(t);if(t.isMagicPen)return t.clone();if(t.output)return t.output.clone();if(t.format)return this.expect.createOutput(t.format);throw new Error(kp)},Op.prototype._isUnexpected=!0,Op.prototype.isUnexpected=!0,Op.prototype.buildDiff=function(t){var e=this.outputFromOptions(t),n=this.expect;return this.createDiff&&jp(this.createDiff(e,function(t,r){return n.diff(t,r,e.clone())},function(t,n){return e.clone().appendInspected(t,(n||Ap)-1)},function(t,e){return n.equal(t,e)}))},Op.prototype.getDefaultErrorMessage=function(t){var e=this.outputFromOptions(t);this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e);for(var n=this;!n.createDiff&&n.parent;)n=n.parent;if(n&&n.createDiff){var r=n.buildDiff(t);r&&e.nl(2).append(r)}return e},Op.prototype.getNestedErrorMessage=function(t){var e=this.outputFromOptions(t);this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e);for(var n=this.parent;"bubble"===n.getErrorMode();)n=n.parent;return"string"==typeof t?t={format:t}:t&&t.isMagicPen&&(t={output:t}),e.nl().indentLines().i().block(n.getErrorMessage(xp.extend({},t||{},{compact:this.expect.subject===n.expect.subject}))),e},Op.prototype.getDefaultOrNestedMessage=function(t){return this.hasDiff()?this.getDefaultErrorMessage(t):this.getNestedErrorMessage(t)},Op.prototype.hasDiff=function(){return!!this.getDiffMethod()},Op.prototype.getDiffMethod=function(){for(var t=this;!t.createDiff&&t.parent;)t=t.parent;return t&&t.createDiff||null},Op.prototype.getDiff=function(t){for(var e=this;!e.createDiff&&e.parent;)e=e.parent;return e&&e.buildDiff(t)},Op.prototype.getDiffMessage=function(t){var e=this.outputFromOptions(t),n=this.getDiff(t);return n?e.append(n):this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e),e},Op.prototype.getErrorMode=function(){if(this.parent)return this.errorMode;switch(this.errorMode){case"default":case"bubbleThrough":return this.errorMode;default:return"default"}},Op.prototype.getErrorMessage=function(t){for(var e=this.parent;e&&"bubbleThrough"!==e.getErrorMode();)e=e.parent;if(e)return e.getErrorMessage(t);var n=this.getErrorMode();switch(n){case"nested":return this.getNestedErrorMessage(t);case"default":case"bubbleThrough":return this.getDefaultErrorMessage(t);case"bubble":return this.parent.getErrorMessage(t);case"diff":return this.getDiffMessage(t);case"defaultOrNested":return this.getDefaultOrNestedMessage(t);default:throw new Error("Unknown error mode: '"+n+"'")}},Op.prototype.serializeMessage=function(t){if(!this._hasSerializedErrorMessage){var e="html"===t;if(e&&("htmlMessage"in this||(this.htmlMessage=this.getErrorMessage({format:"html"}).toString())),this.message="\n"+this.getErrorMessage({format:e?"text":t}).toString()+"\n",this.originalError&&this.originalError instanceof Error&&"string"==typeof this.originalError.stack){var n=this.originalError.stack.indexOf(this.originalError.message);this.stack=-1===n?this.message+"\n"+this.originalError.stack:this.message+this.originalError.stack.substr(n+this.originalError.message.length)}else if(/^(Unexpected)?Error:?\n/.test(this.stack)){var r=/^(?:Unexpected)?Error:?\n/.exec(this.stack);r&&(this.stack=this.message+this.stack.substr(r[0].length))}if(this.stack&&!this.useFullStackTrace){var o=this.stack.split(/\n/),i=Cp(o),s=o.filter(function(t,e){return e<i||!/node_modules[/\\]unexpected(?:-[^/\\]+)?[/\\]/.test(t)&&!/executeExpect.*node_modules[/\\]unexpected[/\\]/.test(o[e+1])});if(s.length!==o.length){var a=/^(\s*)/.exec(o[o.length-1])[1];"html"===t?s.push(a+"set the query parameter full-trace=true to see the full stack trace"):s.push(a+"set UNEXPECTED_FULL_TRACE=true to see the full stack trace")}this.stack=s.join("\n")}this._hasSerializedErrorMessage=!0}},Op.prototype.clone=function(){var t=this,e=new Op(this.expect);return Object.keys(t).forEach(function(n){Fp[n]||(e[n]=t[n])}),e},Op.prototype.getLabel=function(){for(var t=this;t&&!t.label;)t=t.parent;return t&&t.label||null},Op.prototype.getParents=function(){for(var t=[],e=this.parent;e;)t.push(e),e=e.parent;return t},Op.prototype.getAllErrors=function(){var t=this.getParents();return t.unshift(this),t},Object.__defineGetter__&&Object.defineProperty(Op.prototype,"htmlMessage",{enumerable:!0,get:function(){return this.getErrorMessage({format:"html"}).toString()}});var Tp=Op,Sp=Object.freeze({default:Tp,__moduleExports:Tp}),Pp=n(function(t){var e,n=(e=qo)&&e.__esModule?e:{default:e};var r=[],o=!1,i=null;function s(t){return t.isPending()||t.isRejected()&&t.reason().uncaught}function a(){if("function"==typeof afterEach&&!o){o=!0;try{afterEach(function(){var t=void 0,e=!0;if(r.some(s)){var o=void 0;this.currentTest?(e="passed"===this.currentTest.state,o=this.currentTest.title):"object"===(void 0===i?"undefined":(0,n.default)(i))&&(e=0===i.failedExpectations.length,o=i.fullName),t=new Error(o+": You have created a promise that was not returned from the it block")}if(r=[],t&&e)throw t})}catch(t){}}}"object"===("undefined"==typeof jasmine?"undefined":(0,n.default)(jasmine))&&jasmine.getEnv().addReporter({specStarted:function(t){i=t},specDone:function(t){i=null}}),a(),t.exports=function(t){r.push(t),a()}}),Mp=e(Pp),Dp=Object.freeze({default:Mp,__moduleExports:Pp}),Rp=Vo&&$o||Vo,Ip=hp&&pp||hp,Bp=gp&&yp||gp,zp=Sp&&Tp||Sp,Lp=n(function(t){var e=r(qo),n=r(Kn);function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.type.is("assertion")}function i(t,e){for(var r=[],o=e;o;o=o.parent)o.assertions[t]&&r.push.apply(r,(0,n.default)(o.assertions[t]));return r}function s(t,e){if("string"!=typeof t)return null;var n=i(t,e);if(n.length>0)return n;for(var r=t.split(" "),o=r.length-1;o>0;o-=1){var a=i(r.slice(o).join(" "),e);if(s(r.slice(0,o).join(" "),e)&&a.length>0)return a}return null}t.exports=function(t){var r={promise:dp,errorMode:"default",equal:t.equal,inspect:t.inspect,createOutput:t.createOutput.bind(t),findTypeOf:t.findTypeOf.bind(t),findTypeOfWithParentType:t.findTypeOfWithParentType.bind(t),findCommonType:t.findCommonType.bind(t),it:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return"string"==typeof n[0]&&(n[0]=xp.forwardFlags(n[0],this.flags)),t.it.apply(t,n)},diff:t.diff,getType:t.getType,output:t.output,outputFormat:t.outputFormat.bind(t),format:t.format,withError:t.withError,fail:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.context.expect;this.callInNestedContext(function(){r.fail.apply(r,e)})},standardErrorMessage:function(t,n){var r=this;return n="object"===(void 0===n?"undefined":(0,e.default)(n))?n:{},"omitSubject"in t&&(n.subject=this.subject),n&&n.compact&&(n.compactSubject=function(t){t.jsFunctionName(r.subjectType.name)}),Rp(t,r.subjectOutput,r.testDescription,r.argsOutput,n)},callInNestedContext:function(t){var e=this;try{var n=sp(t());return xp.isPromise(n)?(n=Bp(n)).isPending()&&(n=n.then(void 0,function(t){if(t&&t._isUnexpected){var n=new zp(e,t);throw n.originalError=t.originalError,n}throw t})):n=dp.resolve(n),Ip(n,e.execute,e.subject)}catch(t){if(t&&t._isUnexpected){var r=new zp(e,t);throw r.originalError=t.originalError,r}throw t}},shift:function(t,e){if(arguments.length<=1){0===arguments.length&&(t=this.subject),e=-1;for(var r=0;r<this.assertionRule.args.length;r+=1){var o=this.assertionRule.args[r].type;if(o.is("assertion")||o.is("expect.it")){e=r;break}}}else 3===arguments.length&&(t=arguments[1],e=arguments[2]);if(-1!==e){var i=this.args.slice(0,e),s=this.args.slice(e),a=this.findTypeOf(s[0]);if(arguments.length>1&&(this.argsOutput=function(t){i.forEach(function(e,n){n>0&&t.text(", "),t.appendInspected(e)}),i.length>0&&t.sp(),a.is("string")?t.error(s[0]):s.length>0&&t.appendInspected(s[0]),s.length>1&&t.sp(),s.slice(1).forEach(function(e,n){n>0&&t.text(", "),t.appendInspected(e)})}),a.is("expect.it")){var u=this;return this.withError(function(){return s[0](t)},function(t){u.fail(t)})}return a.is("string")?this.execute.apply(this,[t].concat((0,n.default)(s))):t}return t},_getSubjectType:function(){return this.findTypeOfWithParentType(this.subject,this.assertionRule.subject.type)},_getArgTypes:function(t){var e=this.assertionRule.args.length-1;return this.args.map(function(t,n){return this.findTypeOfWithParentType(t,this.assertionRule.args[Math.min(n,e)].type)},this)},_getAssertionIndices:function(){if(!this._assertionIndices){var e=[],n=this.args,r=this.assertionRule,i=0;t:for(;;){if(r.args.length>1&&o(r.args[r.args.length-2])){e.push(i+r.args.length-2);var a=s(n[i+r.args.length-2],t);if(a)for(var u=0;u<a.length;u+=1)if(a[u].args.some(o)){i+=r.args.length-1,r=a[u];continue t}}break}this._assertionIndices=e}return this._assertionIndices}};return Object.__defineGetter__&&(Object.defineProperty(r,"subjectType",{enumerable:!0,get:function(){return this.assertionRule&&this._getSubjectType()}}),Object.defineProperty(r,"argTypes",{enumerable:!0,get:function(){return this.assertionRule&&this._getArgTypes()}})),xp.setPrototypeOfOrExtend(r,Function.prototype),r}}),Np=e(Lp),Up=Object.freeze({default:Np,__moduleExports:Lp}),qp=Dp&&Mp||Dp,Kp=Up&&Np||Up,Hp=n(function(t){var e=r(Kn),n=r(qo);function r(t){return t&&t.__esModule?t:{default:t}}var o=xp.extend;function i(t){return t.type.is("assertion")}function s(t){this.expect=t,this.level=0}s.prototype.child=function(){var t=Object.create(this);return t.level++,t};var a={_unexpectedType:!0,name:"any",level:0,identify:function(){return!0},equal:xp.objectIs,inspect:function(t,e,n){return n&&n.isMagicPen?n.text(t):"type: "+this.name},diff:function(t,e,n,r,o){return null},typeEqualityCache:{},is:function(t){var e=void 0;e="string"==typeof t?t:t.name;var n=this.typeEqualityCache[e];if(void 0!==n)return n;var r=!1;return this.name===e?r=!0:this.baseType&&(r=this.baseType.is(e)),this.typeEqualityCache[e]=r,r}};function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.assertions=t.assertions||{},this.typeByName=t.typeByName||{any:a},this.types=t.types||[a],t.output?this.output=t.output:(this.output=au(),this.output.inline=!1,this.output.diff=!1),this._outputFormat=t.format||au.defaultFormat,this.installedPlugins=t.installedPlugins||[];var e=this;this.getType=function(t){return e.typeByName[t]||e.parent&&e.parent.getType(t)},this.findTypeOf=function(t){return xp.findFirst(e.types||[],function(e){return e.identify&&e.identify(t)})||e.parent&&e.parent.findTypeOf(t)},this.findTypeOfWithParentType=function(t,n){return xp.findFirst(e.types||[],function(e){return e.identify&&e.identify(t)&&(!n||e.is(n))})||e.parent&&e.parent.findTypeOfWithParentType(t,n)},this.findCommonType=function(t,e){for(var n={},r=this.findTypeOf(t);r;)n[r.name]=r,r=r.baseType;for(r=this.findTypeOf(e);r;){if(n[r.name])return r;r=r.baseType}},this._wrappedExpectProto=Kp(this)}var c={};function f(t,e){var r,o=(r=[[]],e.forEach(function(t){t===c?r.push([]):r[r.length-1].push(t)}),r);function i(e,r){r=r&&"object"===(void 0===r?"undefined":(0,n.default)(r))&&r instanceof s?r:new s(t);var i=[],a=[];return o.forEach(function(n){var o,s,u,c=(o=t,s=r,u=e,n.map(function(t){var e=Array.prototype.slice.call(t);return e.unshift(u),{expectation:e,promise:dp(function(){if("function"==typeof e[1]){if(e.length>2)throw new Error("expect.it(<function>) does not accept additional arguments");return e[1](e[0])}return o._expect(s.child(),e)})}}));c.forEach(function(t){var e=t.promise;a.push(e)}),i.push(c)}),sp(dp.settle(a).then(function(){i.forEach(function(t){t.forEach(function(t){var e=t.promise;if(e.isRejected()&&"bubbleThrough"===e.reason().errorMode)throw e.reason()})}),i.some(function(t){return t.every(function(t){return t.promise.isFulfilled()})})||t.fail(function(t){var e,n,r,o;e=t,r=(n=i).length>1,o=n.some(function(t){return t.length>1}),n.forEach(function(t,n){n>0&&(o?e.nl():e.sp(),e.jsComment("or").nl());var i=!1;t.forEach(function(t,n){n>0&&e.jsComment(" and").nl();var s=t.promise.isRejected();if(s&&!i){i=!0;var a=t.promise.reason();(o||r)&&e.error("⨯ "),e.block(function(t){t.append(a.getErrorMessage(t))})}else{s?e.error("⨯ "):e.success("✓ ");var u=t.expectation;e.block(function(t){var e=u[0],n=u.slice(2).map(function(t){return function(e){e.appendInspected(t)}}),r=u[1];Rp(t,function(t){t.appendInspected(e)},r,n,{subject:e})})}})})})}))}return i._expectIt=!0,i._expectations=e,i._OR=c,i.and=function(){for(var n=e.slice(),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n.push(o),f(t,n)},i.or=function(){for(var n=e.slice(),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n.push(c,o),f(t,n)},i}u.prototype.it=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return f(this,[e])},u.prototype.equal=function(t,e,n,r){var o=this;if((n="number"==typeof n?n:100)<=0){if(-1!==(r=r||[]).indexOf(t))throw new Error("Cannot compare circular structures");r.push(t)}return this.findCommonType(t,e).equal(t,e,function(t,e){return o.equal(t,e,n-1,r)})},u.prototype.inspect=function(t,e,n){var r=[],o=this;var i="string"==typeof n?this.createOutput(n):n;return i=i||this.createOutput(),function t(e,n,i){var s=o.findTypeOf(e);return n<=0&&s.is("object")&&!s.is("expect.it")?i.text("..."):-1!==(r=r||[]).indexOf(e)?i.text("[Circular]"):s.inspect(e,n,i,function(o,s){return i=i.clone(),r.push(e),void 0===s&&(s=n-1),i=t(o,s,i)||i,r.pop(),i})}(t,"number"==typeof e?e:Ap,i)||i},u.prototype.expandTypeAlternations=function(t){var e=this;var n=[];return t.subject.forEach(function(r){t.args.length?function t(n,r){if(r===n.length)return[];var o=[];return n[r].forEach(function(i){var s=t(n,r+1);s.length?s.forEach(function(t){o.push([i].concat(t))}):i.type.is("assertion")?(o.push([{type:i.type,minimum:1,maximum:1},{type:e.getType("any"),minimum:0,maximum:1/0}]),o.push([{type:e.getType("expect.it"),minimum:1,maximum:1}]),0===i.minimum&&o.push([])):o.push([i])}),o}(t.args,0).forEach(function(e){n.push(o({},t,{subject:r,args:e}))}):n.push(o({},t,{subject:r,args:[]}))}),n},u.prototype.parseAssertion=function(t){var e=this,n=[],r=0;function o(n){return n.split("|").map(function(n){var r=n.match(/^([a-z_](?:|[a-z0-9_.-]*[_a-z0-9]))([+*?]|)$/i);if(!r)throw new SyntaxError("Cannot parse type declaration:"+n);var o=e.getType(r[1]);if(!o)throw new Error("Unknown type: "+r[1]+" in "+t);var i=r[2];return{minimum:i&&"+"!==i?0:1,maximum:"*"===i||"+"===i?1/0:1,type:o}})}function i(t){return t.some(function(t){var e=t.minimum,n=t.maximum;return 1!==e||1!==n})}t.replace(/\s*<((?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?)(?:\|(?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?))*)>|\s*([^<]+)/gi,function(e,i,s,a){var u=e.length;if(a!==r)throw new SyntaxError("Cannot parse token at index "+r+" in "+t);i?n.push(o(i)):n.push(s.trim()),r+=u});var s=void 0;if(s=1===n.length&&"string"==typeof n[0]?{subject:o("any"),assertion:n[0],args:[o("any*")]}:{subject:n[0],assertion:n[1],args:n.slice(2)},!Array.isArray(s.subject))throw new SyntaxError("Missing subject type in "+t);if("string"!=typeof s.assertion)throw new SyntaxError("Missing assertion in "+t);if(i(s.subject))throw new SyntaxError("The subject type cannot have varargs: "+t);if(s.args.some(function(t){return"string"==typeof t}))throw new SyntaxError("Only one assertion string is supported (see #225)");if(s.args.slice(0,-1).some(i))throw new SyntaxError("Only the last argument type can have varargs: "+t);if([s.subject].concat(s.args.slice(0,-1)).some(function(t){return t.some(function(t){return t.type.is("assertion")})}))throw new SyntaxError("Only the last argument type can be <assertion>: "+t);var a=s.args[s.args.length-1]||[],u=a.filter(function(t){return t.type.is("assertion")});if(u.length>0&&a.length>1)throw new SyntaxError("<assertion> cannot be alternated with other types: "+t);if(u.some(function(t){return 1!==t.maximum}))throw new SyntaxError("<assertion+> and <assertion*> are not allowed: "+t);return this.expandTypeAlternations(s)};var l=/(\{(?:\d+)\})/g,p=/\{(\d+)\}/;function h(t,e){for(var n=0;n<Math.min(t.length,e.length);n+=1){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function d(t){return"function"==typeof t?xp.getFunctionName(t):t.name}function y(t){var e,n,r=((n=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._expect(new s(e),n)}).it=(e=t).it.bind(e),n.equal=e.equal.bind(e),n.inspect=e.inspect.bind(e),n.findTypeOf=e.findTypeOf,n.fail=function(){try{e.fail.apply(e,arguments)}catch(t){throw t&&t._isUnexpected&&e.setErrorMessage(t),t}},n.createOutput=e.createOutput.bind(e),n.diff=e.diff.bind(e),n.async=e.async.bind(e),n.promise=dp,n.withError=e.withError,n.addAssertion=e.addAssertion.bind(e),n.addStyle=e.addStyle.bind(e),n.installTheme=e.installTheme.bind(e),n.addType=e.addType.bind(e),n.getType=e.getType,n.clone=e.clone.bind(e),n.child=e.child.bind(e),n.toString=e.toString.bind(e),n.assertions=e.assertions,n.use=n.installPlugin=e.use.bind(e),n.output=e.output,n.outputFormat=e.outputFormat.bind(e),n.notifyPendingPromise=qp,n.hook=function(t){e._expect=t(e._expect.bind(e))},n.parseAssertion=e.parseAssertion.bind(e),n);return t.expect=r,r}u.prototype.fail=function(t){if(t instanceof zp)throw t._hasSerializedErrorMessage=!1,t;if(xp.isError(t))throw t;var e=new zp(this.expect);if("function"==typeof t)e.errorMode="bubble",e.output=t;else if(t&&"object"===(void 0===t?"undefined":(0,n.default)(t))){void 0!==t.message&&(e.errorMode="bubble"),e.output=function(e){void 0!==t.message?t.message.isMagicPen?e.append(t.message):"function"==typeof t.message?t.message.call(e,e):e.text(String(t.message)):e.error("Explicit failure")};var r=this.expect;Object.keys(t).forEach(function(n){var o=t[n];"diff"===n?"function"==typeof o&&this.parent?e.createDiff=function(t,e,n,i){var s=r.createOutput(t.format);return s.inline=t.inline,s.output=t.output,o(s,function(t,e){return r.diff(t,e,s.clone())},function(t,e){return s.clone().appendInspected(t,(e||Ap)-1)},function(t,e){return r.equal(t,e)})}:e.createDiff=o:"message"!==n&&(e[n]=o)},this)}else{var o=void 0;if(arguments.length>0){o=new Array(arguments.length-1);for(var i=1;i<arguments.length;i+=1)o[i-1]=arguments[i]}e.errorMode="bubble",e.output=function(e){(t?String(t):"Explicit failure").split(l).forEach(function(t){var n=p.exec(t);if(n){var r=n[1];if(r in o){var i=o[r];i&&i.isMagicPen?e.append(i):e.appendInspected(i)}else e.text(n[0])}else e.error(t)})}}throw e},u.prototype.addAssertion=function(t,e,r){var i=void 0;if(i="object"===(void 0===r?"undefined":(0,n.default)(r))?3:2,arguments.length>i||"function"!=typeof e||"string"!=typeof t&&!Array.isArray(t)){var s="Syntax: expect.addAssertion(<string|array[string]>, function (expect, subject, ...) { ... });";throw"string"!=typeof e&&!Array.isArray(e)||"function"!=typeof arguments[2]||(s+="\nAs of Unexpected 10, the syntax for adding assertions that apply only to specific\ntypes has changed. See http://unexpected.js.org/api/addAssertion/"),new Error(s)}var a=Array.isArray(t)?t:[t];a.forEach(function(t){if("string"!=typeof t||""===t)throw new Error("Assertion patterns must be a non-empty string");if(t!==t.trim())throw new Error("Assertion patterns can't start or end with whitespace:\n\n    "+JSON.stringify(t))});var u=this,c=this.assertions,f={},l=[],p=0;if(a.forEach(function(t){u.parseAssertion(t).forEach(function(n){var o=n.assertion,i=n.args,s=n.subject;!function(t){for(var e={"[":0,"]":0,"(":0,")":0},n=0;n<t.length;n+=1){var r=t.charAt(n);if(r in e&&(e[r]+=1),"]"===r&&e["["]>=e["]"]){if(e["["]===e["]"]+1)throw new Error("Assertion patterns must not contain flags with brackets: '"+t+"'");if(e["("]!==e[")"])throw new Error("Assertion patterns must not contain flags with parentheses: '"+t+"'");if("["===t.charAt(n-1))throw new Error("Assertion patterns must not contain empty flags: '"+t+"'")}else if(")"===r&&e["("]>=e[")"]){if(e["("]===e[")"]+1)throw new Error("Assertion patterns must not contain alternations with parentheses: '"+t+"'");if(e["["]!==e["]"])throw new Error("Assertion patterns must not contain alternations with brackets: '"+t+"'")}}if(e["["]!==e["]"])throw new Error("Assertion patterns must not contain unbalanced brackets: '"+t+"'");if(e["("]!==e[")"])throw new Error("Assertion patterns must not contain unbalanced parentheses: '"+t+"'")}(o),g(o).forEach(function(n){var o=n.flags,a=n.alternations,u=n.text;Object.keys(o).forEach(function(t){f[t]=!1}),p=Math.max(p,i.reduce(function(t,e){var n=e.maximum;return t+(null===n?1/0:n)},0)),l.push({handler:e,alternations:a,flags:o,subject:s,args:i,testDescriptionString:u,declaration:t,unexpected:r})})})}),e.length-2>p)throw new Error("The provided assertion handler takes "+(e.length-2)+" parameters, but the type signature specifies a maximum of "+p+":\n\n    "+JSON.stringify(a));return l.forEach(function(t){t.flags=o({},f,t.flags);var e,n,r,i=c[t.testDescriptionString];if(t.specificity=(n=(e=t).subject,r=e.args,[n.type.level].concat(r.map(function(t){var e=t.minimum,n=t.maximum,r=t.type;return(1===e&&1===n?.5:0)+r.level}))),i){for(var s=0;s<i.length&&h(t.specificity,i[s].specificity)>0;)s+=1;i.splice(s,0,t)}else c[t.testDescriptionString]=[t]}),this.expect},u.prototype.addType=function(t,e){var n=this,r=void 0;if("string"!=typeof t.name||!/^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$/i.test(t.name))throw new Error("A type must be given a non-empty name and must match ^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$");if("function"!=typeof t.identify&&!1!==t.identify)throw new Error("Type "+t.name+" must specify an identify function or be declared abstract by setting identify to false");if(this.typeByName[t.name])throw new Error("The type with the name "+t.name+" already exists");if(t.base){if(!(r=this.getType(t.base)))throw new Error("Unknown base type: "+t.base)}else r=a;var i=Object.create(r);i.inspect=function(t,e,n){if(!n||!n.isMagicPen)throw new Error("You need to pass the output to baseType.inspect() as the third parameter");return r.inspect(t,e,n,function(t,e){return n.clone().appendInspected(t,e)})},i.diff=function(t,e,o){if(!o||!o.isMagicPen)throw new Error("You need to pass the output to baseType.diff() as the third parameter");return jp(r.diff(t,e,o.clone(),function(t,e){return n.diff(t,e,o.clone())},function(t,e){return o.clone().appendInspected(t,e)},n.equal.bind(n)))},i.equal=function(t,e){return r.equal(t,e,n.equal.bind(n))};var s=o({},r,t,{baseType:i}),u=s.inspect;if(s.inspect=function(n,r,o,i){if(arguments.length<2||!o||!o.isMagicPen)return"type: "+t.name;if(e){var s=e.createOutput(o.format);return u.call(this,n,r,s,i)||s}return u.call(this,n,r,o,i)||o},e){s.childUnexpected=e;var c=s.diff;s.diff=function(t,n,r,o,i,s){var a=e.createOutput(r.format);return a.output=r.output,c.call(this,t,n,a,o,i,s)||r}}return!1===s.identify?this.types.push(s):this.types.unshift(s),s.level=r.level+1,s.typeEqualityCache={},this.typeByName[s.name]=s,this.expect},u.prototype.addStyle=function(){var t;return(t=this.output).addStyle.apply(t,arguments),this.expect},u.prototype.installTheme=function(){var t;return(t=this.output).installTheme.apply(t,arguments),this.expect},u.prototype.use=function(t){if("function"!=typeof t&&("object"!==(void 0===t?"undefined":(0,n.default)(t))||"function"!=typeof t.installInto)||void 0!==t.name&&"string"!=typeof t.name)throw new Error("Plugins must be functions or adhere to the following interface\n{\n  name: <an optional plugin name>,\n  version: <an optional semver version string>,\n  installInto: <a function that will update the given expect instance>\n}");var e=d(t),r=xp.findFirst(this.installedPlugins,function(n){return n===t||e&&e===d(n)});if(r){if(r===t||void 0!==t.version&&t.version===r.version)return this.expect;throw new Error("Another instance of the plugin '"+e+"' is already installed"+(void 0!==r.version?" (version "+r.version+(void 0!==t.version?", trying to install "+t.version:"")+")":"")+". Please check your node_modules folder for unmet peerDependencies.")}if("unexpected-promise"===e)throw new Error("The unexpected-promise plugin was pulled into Unexpected as of 8.5.0. This means that the plugin is no longer supported.");return this.installedPlugins.push(t),"function"==typeof t?t(this.expect):t.installInto(this.expect),this.expect},u.prototype.withError=function(t,e){return sp(dp(t).caught(function(t){return ap(t),e(t)}))},u.prototype.installPlugin=u.prototype.use,u.prototype.throwAssertionNotFoundError=function(t,n,r){for(var o=this.assertions[n],i=this,s=this;s&&!o;)o=s.assertions[n],s=s.parent;o&&this.fail({message:function(e){e.append(Rp(e.clone(),function(e){e.appendInspected(t)},n,function(t){t.appendItems(r,", ")})).nl().indentLines(),e.i().error("The assertion does not have a matching signature for:").nl().indentLines().i().text("<").text(i.findTypeOf(t).name).text(">").sp().text(n),r.forEach(function(t,n){e.sp().text("<").text(i.findTypeOf(t).name).text(">")}),e.outdentLines().nl().i().text("did you mean:").indentLines().nl(),Object.keys(o.reduce(function(t,e){return t[e.declaration]=!0,t},{})).sort().forEach(function(t,n){e.nl(n>0?1:0).i().text(t)}),e.outdentLines()}});var a=[],u=[];for(s=this;s;)u.push.apply(u,(0,e.default)(Object.keys(s.assertions))),s=s.parent;u.forEach(function(t){var e=fu(n,t);a.push({assertion:t,score:e})},this);var c=a.sort(function(t,e){var n=t.score-e.score;return 0!==n?n:t.assertion<e.assertion?-1:1}).slice(0,10).filter(function(t,e,n){var r=t.score;return Math.abs(r-n[0].score)<=2}).sort(function(e,n){var o,s,a,u,c=(o=e.assertion,s=n.assertion,a=i.lookupAssertionRule(t,o,r),u=i.lookupAssertionRule(t,s,r),a||u?a&&!u?-1:!a&&u?1:h(a.specificity,u.specificity):0);return 0!==c?c:e.score-n.score})[0];this.fail({errorMode:"bubbleThrough",message:function(t){t.error("Unknown assertion '").jsString(n).error("', did you mean: '").jsString(c.assertion).error("'")}})},u.prototype.lookupAssertionRule=function(t,e,n,r){var o=this;if("string"!=typeof e)throw new Error("The expect function requires the second parameter to be a string or an expect.it.");for(var s=void 0,a=this;a;){var u=a.assertions[e];u&&(s=s?s.concat(u):u),a=a.parent}if(!s)return null;var c={};function f(t,e,n,r){return!(!e.is("assertion")||"string"!=typeof t)||(r?!1===e.identify?o.types.some(function(n){return n.identify&&n.is(e)&&n.identify(t)}):e.identify(t):(i=t,s=n,a=c[s],a||(a=o.findTypeOf(i),c[s]=a),a).is(e));var i,s,a}function l(e,o){if(!f(t,e.subject.type,"subject",o))return!1;if(r&&!e.args.some(i))return!1;var s=e.args.reduce(function(t,e){var n=e.minimum,r=e.maximum;return t.minimum+=n,t.maximum+=r,t},{minimum:0,maximum:0});if(n.length<s.minimum||s.maximum<n.length)return!1;if(0===n.length&&0===s.maximum)return!0;var a=e.args[e.args.length-1];return n.every(function(t,n){return n<e.args.length-1?f(t,e.args[n].type,n,o):f(t,a.type,n,o)})}var p=void 0,h=void 0;for(p=0;p<s.length;p+=1)if(l(h=s[p]))return h;for(p=0;p<s.length;p+=1)if(l(h=s[p],!0))return h;return null},u.prototype.setErrorMessage=function(t){t.serializeMessage(this.outputFormat())},u.prototype._expect=function(t,n){var r=this,i=n[0],s=n[1];if(n.length<2)throw new Error("The expect function requires at least two parameters.");if(s&&s._expectIt)return r.expect.withError(function(){return s(i)},function(t){r.fail(t)});try{var a=function t(n,i,s,a){var u,c,f=r.lookupAssertionRule(i,s,a);if(!f){var l=s.split(" ");t:for(var p=l.length-1;p>0;p-=1){var h=l.slice(0,p).join(" "),d=l.slice(p),y=[d.join(" ")].concat(a);if(f=r.lookupAssertionRule(i,h,y,!0))for(var g=1;g<d.length;g+=1)if(r.assertions.hasOwnProperty(d.slice(0,g+1).join(" "))){s=h,a=y;break t}}f||r.throwAssertionNotFoundError(i,s,a)}if(f&&f.unexpected&&f.unexpected!==r)return(c=f.unexpected).expect.apply(c,[i,s].concat((0,e.default)(a)));var v=o({},f.flags),m=function e(r,o){if(0===arguments.length)throw new Error("The expect function requires at least one parameter.");if(1===arguments.length)return Ip(dp.resolve(r),e,r);if(o&&o._expectIt)return e.errorMode="nested",e.withError(function(){return o(r)},function(t){e.fail(t)});o=xp.forwardFlags(o,v);for(var i=new Array(arguments.length-2),s=2;s<arguments.length;s+=1)i[s-2]=arguments[s];return e.callInNestedContext(function(){return t(n.child(),r,o,i)})};return xp.setPrototypeOfOrExtend(m,r._wrappedExpectProto),m.context=n,m.execute=m,m.alternations=f.alternations,m.flags=v,m.subject=i,m.testDescription=s,m.args=a,m.assertionRule=f,m.subjectOutput=function(t){t.appendInspected(i)},m.argsOutput=a.map(function(t,e){var n=m.assertionRule.args[e];return"string"==typeof t&&(n&&n.type.is("assertion")||m._getAssertionIndices().indexOf(e)>=0)?new Wo(t):function(e){e.appendInspected(t)}}),Object.__defineGetter__||(m.subjectType=m._getSubjectType(),m.argTypes=m._getArgTypes()),sp((u=f.handler).call.apply(u,[m,m,i].concat((0,e.default)(a))))}(t,i,s,Array.prototype.slice.call(n,2));return xp.isPromise(a)?(a=Bp(a)).isPending()&&(r.expect.notifyPendingPromise(a),a=a.then(void 0,function(e){throw e&&e._isUnexpected&&0===t.level&&r.setErrorMessage(e),e})):a=dp.resolve(a),Ip(a,r.expect,i)}catch(e){if(e&&e._isUnexpected){var u=e;throw"undefined"!=typeof mochaPhantomJS&&(u=e.clone()),0===t.level&&r.setErrorMessage(u),u}throw e}},u.prototype.async=function(t){var e=this;function n(t){e._isAsync=!1,e.expect.fail(function(e){e.error(t).nl().text("Usage: ").nl().text("it('test description', expect.async(function () {").nl().indentLines().i().text("return expect('test.txt', 'to have content', 'Content read asynchroniously');").nl().outdentLines().text("});")})}return"function"==typeof t&&0===t.length||n("expect.async requires a callback without arguments."),function(r){e._isAsync&&n("expect.async can't be within a expect.async context."),e._isAsync=!0,"function"!=typeof r&&n("expect.async should be called in the context of an it-block\nand the it-block should supply a done callback.");var o=void 0;try{o=t()}finally{e._isAsync=!1}o&&"function"==typeof o.then||n("expect.async requires the block to return a promise or throw an exception."),o.then(function(){e._isAsync=!1,r()},function(t){e._isAsync=!1,r(t)})}},u.prototype.diff=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.createOutput(),r=arguments[3],o=arguments[4],i=this;if((r="number"==typeof r?r:100)<=0){if(-1!==(o=o||[]).indexOf(t))throw new Error("Cannot compare circular structures");o.push(t)}return jp(this.findCommonType(t,e).diff(t,e,n,function(t,e){return i.diff(t,e,n.clone(),r-1,o)},function(t,e){return n.clone().appendInspected(t,e)},function(t,e){return i.equal(t,e)}))},u.prototype.toString=function(){var t=this.assertions,e={},n=[],r=au();return Object.keys(t).sort().forEach(function(r){t[r].forEach(function(t){var r=t.declaration;e[r]||(n.push(r),e[r]=!0)})}),n.forEach(function(t){r.text(t).nl()}),r.toString()},u.prototype.clone=function(){var t={};Object.keys(this.assertions).forEach(function(e){t[e]=[].concat(this.assertions[e])},this);var e=new u({assertions:t,types:[].concat(this.types),typeByName:o({},this.typeByName),output:this.output.clone(),format:this.outputFormat(),installedPlugins:[].concat(this.installedPlugins)});return e._expect=this._expect,y(e)},u.prototype.child=function(){var t=new u({assertions:{},types:[],typeByName:{},output:this.output.clone(),format:this.outputFormat(),installedPlugins:[]}),e=t.parent=this,n=y(t);return n.exportAssertion=function(n,r){return e.addAssertion(n,r,t),this},n.exportType=function(r){return n.getType(r.name)!==r&&n.addType(r),e.addType(r,t),this},n.exportStyle=function(t,r){return e.addStyle(t,function(){for(var t=n.createOutput(this.format),e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];this.append(r.call.apply(r,[t].concat(o))||t)}),this},n},u.prototype.outputFormat=function(t){return void 0===t?this._outputFormat:(this._outputFormat=t,this.expect)},u.prototype.createOutput=function(t){var e=this,n=this.output.clone(t||"text");return n.addStyle("appendInspected",function(t,n){this.append(e.inspect(t,n,this.clone()))}),n},u.create=function(){return y(new u)};var g=function(){return function(t){t=t.replace(/(\[[^\]]+\]) ?/g,"$1");for(var e=/\[[^\]]+\]|\([^)]+\)/g,n=[],r=void 0,i=0;r=e.exec(t);)n.push(t.slice(i,r.index)),n.push(t.slice(r.index,e.lastIndex)),i=e.lastIndex;n.push(t.slice(i));var s=function t(e,n){if(n===e.length)return[{text:"",flags:{},alternations:[]}];var r,i,s=e[n],a=t(e,n+1);if("["===(i=s).slice(0,1)&&"]"===i.slice(-1)){var u=s.slice(1,-1);return a.map(function(t){var e={};return e[u]=!0,{text:u+" "+t.text,flags:o(e,t.flags),alternations:t.alternations}}).concat(a.map(function(t){var e={};return e[u]=!1,{text:t.text,flags:o(e,t.flags),alternations:t.alternations}}))}return"("===(r=s).slice(0,1)&&")"===r.slice(-1)?s.substr(1,s.length-2).split(/\|/).reduce(function(t,e){return t.concat(a.map(function(t){var n=t.text,r=t.flags,o=t.alternations;return{text:e?e+n:n.replace(/^ /,""),flags:r,alternations:[e].concat(o)}}))},[]):a.map(function(t){var e=t.text,n=t.flags,r=t.alternations;return{text:s+e,flags:n,alternations:r}})}(n=n.filter(function(t){return""!==t}),0);return s.forEach(function(t){if(t.text=t.text.trim(),""===t.text)throw new Error("Assertion patterns must not only contain flags")}),s}}();t.exports=u}),Wp=e(Hp),Yp=Object.freeze({default:Wp,__moduleExports:Hp}),$p=n(function(t){var e,n;n=function(){function t(t,e,n){if(Array.prototype.map)return Array.prototype.map.call(t,e,n);for(var r=new Array(t.length),o=0,i=t.length;o<i;o++)r[o]=e.call(n,t[o],o,t);return r}function n(t){return{newPos:t.newPos,components:t.components.slice(0)}}function r(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e}var o=function(t){this.ignoreWhitespace=t};o.prototype={diff:function(t,r){if(r===t)return[{value:r}];if(!r)return[{value:t,removed:!0}];if(!t)return[{value:r,added:!0}];r=this.tokenize(r),t=this.tokenize(t);var o=r.length,i=t.length,s=o+i,a=[{newPos:-1,components:[]}],u=this.extractCommon(a[0],r,t,0);if(a[0].newPos+1>=o&&u+1>=i)return a[0].components;for(var c=1;c<=s;c++)for(var f=-1*c;f<=c;f+=2){var l,p=a[f-1],h=a[f+1];u=(h?h.newPos:0)-f,p&&(a[f-1]=e);var d=p&&p.newPos+1<o,y=h&&0<=u&&u<i;if(d||y){!d||y&&p.newPos<h.newPos?(l=n(h),this.pushComponent(l.components,t[u],e,!0)):((l=n(p)).newPos++,this.pushComponent(l.components,r[l.newPos],!0,e));u=this.extractCommon(l,r,t,f);if(l.newPos+1>=o&&u+1>=i)return l.components;a[f]=l}else a[f]=e}},pushComponent:function(t,e,n,r){var o=t[t.length-1];o&&o.added===n&&o.removed===r?t[t.length-1]={value:this.join(o.value,e),added:n,removed:r}:t.push({value:e,added:n,removed:r})},extractCommon:function(t,n,r,o){for(var i=n.length,s=r.length,a=t.newPos,u=a-o;a+1<i&&u+1<s&&this.equals(n[a+1],r[u+1]);)a++,u++,this.pushComponent(t.components,n[a],e,e);return t.newPos=a,u},equals:function(t,e){var n=/\S/;return!(!this.ignoreWhitespace||n.test(t)||n.test(e))||t===e},join:function(t,e){return t+e},tokenize:function(t){return t}};var i=new o,s=new o(!0),a=new o;s.tokenize=a.tokenize=function(t){return r(t.split(/(\s+|\b)/))};var u=new o(!0);u.tokenize=function(t){return r(t.split(/([{}:;,]|\s+)/))};var c=new o;return c.tokenize=function(t){for(var e=[],n=t.split(/^/m),r=0;r<n.length;r++){var o=n[r],i=n[r-1];"\n"==o&&i&&"\r"===i[i.length-1]?e[e.length-1]+="\n":o&&e.push(o)}return e},{Diff:o,diffChars:function(t,e){return i.diff(t,e)},diffWords:function(t,e){return s.diff(t,e)},diffWordsWithSpace:function(t,e){return a.diff(t,e)},diffLines:function(t,e){return c.diff(t,e)},diffCss:function(t,e){return u.diff(t,e)},createPatch:function(e,n,r,o,i){var s=[];s.push("Index: "+e),s.push("==================================================================="),s.push("--- "+e+(void 0===o?"":"\t"+o)),s.push("+++ "+e+(void 0===i?"":"\t"+i));var a=c.diff(n,r);function u(e){return t(e,function(t){return" "+t})}function f(t,e,n){var r=a[a.length-2],o=e===a.length-2,i=e===a.length-3&&(n.added!==r.added||n.removed!==r.removed);/\n$/.test(n.value)||!o&&!i||t.push("\\ No newline at end of file")}a[a.length-1].value||a.pop(),a.push({value:"",lines:[]});for(var l=0,p=0,h=[],d=1,y=1,g=0;g<a.length;g++){var v=a[g],m=v.lines||v.value.replace(/\n$/,"").split("\n");if(v.lines=m,v.added||v.removed){if(!l){var _=a[g-1];l=d,p=y,_&&(l-=(h=u(_.lines.slice(-4))).length,p-=h.length)}h.push.apply(h,t(m,function(t){return(v.added?"+":"-")+t})),f(h,g,v),v.added?y+=m.length:d+=m.length}else{if(l)if(m.length<=8&&g<a.length-2)h.push.apply(h,u(m));else{var b=Math.min(m.length,4);s.push("@@ -"+l+","+(d-l+b)+" +"+p+","+(y-p+b)+" @@"),s.push.apply(s,h),s.push.apply(s,u(m.slice(0,b))),m.length<=4&&f(s,g,v),l=0,p=0,h=[]}d+=m.length,y+=m.length}}return s.join("\n")+"\n"},applyPatch:function(t,e){for(var n=e.split("\n"),r=[],o=!1,i=!1,s="I"===n[0][0]?4:0;s<n.length;s++)if("@"===n[s][0]){var a=n[s].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===n[s][0]?r[0].newlines.push(n[s].substr(1)):"-"===n[s][0]?r[0].oldlines.push(n[s].substr(1)):" "===n[s][0]?(r[0].newlines.push(n[s].substr(1)),r[0].oldlines.push(n[s].substr(1))):"\\"===n[s][0]&&("+"===n[s-1][0]?o=!0:"-"===n[s-1][0]&&(i=!0));var u=t.split("\n");for(s=r.length-1;s>=0;s--){for(var c=r[s],f=0;f<c.oldlength;f++)if(u[c.start-1+f]!==c.oldlines[f])return!1;Array.prototype.splice.apply(u,[c.start-1,+c.oldlength].concat(c.newlines))}if(o)for(;!u[u.length-1];)u.pop();else i&&u.push("");return u.join("\n")},convertChangesToXML:function(t){for(var e,n=[],r=0;r<t.length;r++){var o=t[r];o.added?n.push("<ins>"):o.removed&&n.push("<del>"),n.push((e=o.value,void 0,e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))),o.added?n.push("</ins>"):o.removed&&n.push("</del>")}return n.join("")},convertChangesToDMP:function(t){for(var e,n=[],r=0;r<t.length;r++)e=t[r],n.push([e.added?1:e.removed?-1:0,e.value]);return n}}}(),t.exports=n}),Vp=/([\x00-\x09\x0B-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BA-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF])/g,Jp=Object.freeze({default:Vp,__moduleExports:Vp}),Qp=Jp&&Vp||Jp,Gp=n(function(t){var e,n=(e=qo)&&e.__esModule?e:{default:e};t.exports=function(t){t.installTheme({styles:{jsBoolean:"jsPrimitive",jsNumber:"jsPrimitive",error:["red","bold"],success:["green","bold"],diffAddedLine:"green",diffAddedHighlight:["bgGreen","white"],diffAddedSpecialChar:["bgGreen","cyan","bold"],diffRemovedLine:"red",diffRemovedHighlight:["bgRed","white"],diffRemovedSpecialChar:["bgRed","cyan","bold"],partialMatchHighlight:["bgYellow"]}}),t.installTheme("html",{palette:["#993333","#669933","#314575","#337777","#710071","#319916","#BB1A53","#999933","#4311C2","#996633","#993399","#333399","#228842","#C24747","#336699","#663399"],styles:{jsComment:"#969896",jsFunctionName:"#795da3",jsKeyword:"#a71d5d",jsPrimitive:"#0086b3",jsRegexp:"#183691",jsString:"#df5000",jsKey:"#555"}}),t.installTheme("ansi",{palette:["#FF1A53","#E494FF","#1A53FF","#FF1AC6","#1AFF53","#D557FF","#81FF57","#C6FF1A","#531AFF","#AFFF94","#C61AFF","#53FF1A","#FF531A","#1AFFC6","#FFC61A","#1AC6FF"],styles:{jsComment:"gray",jsFunctionName:"jsKeyword",jsKeyword:"magenta",jsNumber:[],jsPrimitive:"cyan",jsRegexp:"green",jsString:"cyan",jsKey:"#666",diffAddedHighlight:["bgGreen","black"],diffRemovedHighlight:["bgRed","black"],partialMatchHighlight:["bgYellow","black"]}}),t.addStyle("colorByIndex",function(t,e){var n=this.theme().palette;if(n){var r=n[e%n.length];this.text(t,r)}else this.text(t)}),t.addStyle("singleQuotedString",function(t){t=String(t),this.jsString("'").jsString(t.replace(/[\\\x00-\x1f']/g,function(t){if("\n"===t)return"\\n";if("\r"===t)return"\\r";if("'"===t)return"\\'";if("\\"===t)return"\\\\";if("\t"===t)return"\\t";if("\b"===t)return"\\b";if("\f"===t)return"\\f";var e=t.charCodeAt(0);return"\\x"+(e<16?"0":"")+e.toString(16)})).jsString("'")}),t.addStyle("propertyForObject",function(t,e,r){var o=!1;"symbol"===(void 0===t?"undefined":(0,n.default)(t))?this.text("[").appendInspected(t).text("]").text(":"):(t=String(t),/^[a-z$_][a-z0-9$_]*$/i.test(t)?this.text(t,"jsKey").text(":"):/^(?:0|[1-9][0-9]*)$/.test(t)?r?o=!0:this.jsNumber(t).text(":"):this.singleQuotedString(t).text(":")),e.isEmpty()||(o||(t.length>5&&e.isBlock()&&e.isMultiline()?(this.indentLines(),this.nl().i()):this.sp()),this.append(e))}),t.addStyle("code",function(t,e){this.text(t)}),t.addStyle("annotationBlock",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.getContentFromArguments(e),o=r.size().height;this.block(function(){for(var t=0;t<o;t+=1)t>0&&this.nl(),this.error("//")}),this.sp().block(r)}),t.addStyle("commentBlock",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.getContentFromArguments(e),o=r.size().height;this.block(function(){for(var t=0;t<o;t+=1)t>0&&this.nl(),this.jsComment("//")}),this.sp().block(r)}),t.addStyle("removedHighlight",function(t){this.alt({text:function(){t.split(/(\n)/).forEach(function(t){"\n"===t?this.nl():this.block(function(){this.text(t).nl().text(t.replace(/[\s\S]/g,"^"))})},this)},fallback:function(){this.diffRemovedHighlight(t)}})}),t.addStyle("match",function(t){this.alt({text:function(){t.split(/(\n)/).forEach(function(t){"\n"===t?this.nl():this.block(function(){this.text(t).nl().text(t.replace(/[\s\S]/g,"^"))})},this)},fallback:function(){this.diffAddedHighlight(t)}})}),t.addStyle("partialMatch",function(t){this.alt({text:function(){this.match(t)},fallback:function(){this.partialMatchHighlight(t)}})}),t.addStyle("shouldEqualError",function(t){this.error(void 0===t?"should be":"should equal").sp().block(function(){this.appendInspected(t)})}),t.addStyle("errorName",function(t){var e=t.name,n=t.constructor;"string"==typeof e&&"Error"!==e?this.text(e):n&&"string"==typeof n.name?this.text(n.name):this.text("Error")}),t.addStyle("appendErrorMessage",function(t,e){t&&t.isUnexpected?this.append(t.getErrorMessage(xp.extend({output:this},e))):this.appendInspected(t)}),t.addStyle("appendItems",function(t,e){var n=this;e=e||"",t.forEach(function(t,r){r>0&&n.append(e),n.appendInspected(t)})}),t.addStyle("stringDiffFragment",function(t,e,n,r){e.split(/\n/).forEach(function(e,o,i){var s=i.length;this.isAtStartOfLine()&&this.alt({text:t,fallback:function(){""!==e||" "===t||0!==o&&o===s-1||this["+"===t?"diffAddedSpecialChar":"diffRemovedSpecialChar"]("\\n")}});var a=e.match(/^(.*[^ ])?( +)$/);a&&(e=a[1]||""),r?e.split(Qp).forEach(function(e){Qp.test(e)?this[{"+":"diffAddedSpecialChar","-":"diffRemovedSpecialChar"}[t]||n](xp.escapeChar(e)):this[n](e)},this):this[n](e),a&&this[{"+":"diffAddedHighlight","-":"diffRemovedHighlight"}[t]||n](a[2]),o!==s-1&&this.nl()},this)}),t.addStyle("stringDiff",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.type||"WordsWithSpace",o=[],i=void 0;$p.diffLines(t,e).forEach(function(t){i&&i.added&&t.removed?(o.push({oldValue:t.value,newValue:i.value,replaced:!0}),i=null):(i&&o.push(i),i=t)}),i&&o.push(i),o.forEach(function(t,e){if(t.replaced){var i=t.oldValue,s=t.newValue,a=this.clone(),u="\n"===i.slice(-1),c="\n"===s.slice(-1);u&&(i=i.slice(0,-1)),c&&(s=s.slice(0,-1)),$p["diff"+r](i,s).forEach(function(t){var e=t.added,r=t.value,o=t.removed;e?a.stringDiffFragment("+",r,"diffAddedHighlight",n.markUpSpecialCharacters):o?this.stringDiffFragment("-",r,"diffRemovedHighlight",n.markUpSpecialCharacters):(a.stringDiffFragment("+",r,"diffAddedLine"),this.stringDiffFragment("-",r,"diffRemovedLine"))},this),c&&!u&&a.diffAddedSpecialChar("\\n"),u&&!c&&this.diffRemovedSpecialChar("\\n"),this.nl().append(a).nl(u&&e<o.length-1?1:0)}else{var f=/\n$/.test(t.value),l=f?t.value.slice(0,-1):t.value;t.added?this.stringDiffFragment("+",l,"diffAddedLine",n.markUpSpecialCharacters):t.removed?this.stringDiffFragment("-",l,"diffRemovedLine",n.markUpSpecialCharacters):this.stringDiffFragment(" ",l,"text"),f&&this.nl()}},this)}),t.addStyle("arrow",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.styles||[],n=void 0;for(this.nl(t.top||0).sp(t.left||0).text("┌",e),n=1;n<t.width;n+=1)this.text(n===t.width-1&&"up"===t.direction?"▷":"─",e);for(this.nl(),n=1;n<t.height-1;n+=1)this.sp(t.left||0).text("│",e).nl();for(this.sp(t.left||0).text("└",e),n=1;n<t.width;n+=1)this.text(n===t.width-1&&"down"===t.direction?"▷":"─",e)});var e=Us;t.addStyle("merge",function(t){for(var n=t.map(function(t){var n=t.output;return e(n)}).reverse(),r=n.reduce(function(t,e){var n=e.length;return Math.max(t,n)},0),o=new Array(n.length),i=new Array(n.length),s=0;s<r;s+=1){s>0&&this.nl();var a=void 0;for(a=0;a<o.length;a+=1)o[a]=0,i[a]=0;var u=void 0;do{u=!1;var c=!1;for(a=0;a<n.length;a+=1){var f=n[a][s];if(f){for(;f[o[a]]&&i[a]>=f[o[a]].args.content.length;)o[a]+=1,i[a]=0;var l=f[o[a]];if(l){if(u=!0,!c){var p=l.args.content.charAt(i[a]);" "!==p&&(this.text(p,l.args.styles),c=!0)}i[a]+=1}}}!c&&u&&this.sp()}while(u)}}),t.addStyle("arrowsAlongsideChangeOutputs",function(t,e){if(t){var n={},r=0;e.forEach(function(t,e){n[e]=r,r+=t.size().height});var o=this,i=[];t.forEach(function(t,e,r){var s=r.length;t.forEach(function(t){var r=t.start,a=t.end,u=t.direction;i.push(o.clone().arrow({left:2*e,top:n[r],width:1+2*(s-e),height:n[a]-n[r]+1,direction:u}))})}),1===i.length?this.block(i[0]):i.length>1&&this.block(function(){this.merge(i)})}else this.i();this.block(function(){e.forEach(function(e,n){this.nl(n>0?1:0),e.isEmpty()||this.sp(t?1:0).append(e)},this)})})}}),Xp=e(Gp),Zp=Object.freeze({default:Xp,__moduleExports:Gp}),th=[],eh=[],nh="undefined"!=typeof Uint8Array?Uint8Array:Array,rh=!1;function oh(){rh=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)th[e]=t[e],eh[t.charCodeAt(e)]=e;eh["-".charCodeAt(0)]=62,eh["_".charCodeAt(0)]=63}function ih(t){var e,n,r,o,i,s;rh||oh();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===t[a-2]?2:"="===t[a-1]?1:0,s=new nh(3*a/4-i),r=i>0?a-4:a;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)o=eh[t.charCodeAt(e)]<<18|eh[t.charCodeAt(e+1)]<<12|eh[t.charCodeAt(e+2)]<<6|eh[t.charCodeAt(e+3)],s[u++]=o>>16&255,s[u++]=o>>8&255,s[u++]=255&o;return 2===i?(o=eh[t.charCodeAt(e)]<<2|eh[t.charCodeAt(e+1)]>>4,s[u++]=255&o):1===i&&(o=eh[t.charCodeAt(e)]<<10|eh[t.charCodeAt(e+1)]<<4|eh[t.charCodeAt(e+2)]>>2,s[u++]=o>>8&255,s[u++]=255&o),s}function sh(t){return th[t>>18&63]+th[t>>12&63]+th[t>>6&63]+th[63&t]}function ah(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16)+(t[i+1]<<8)+t[i+2],o.push(sh(r));return o.join("")}function uh(t){var e;rh||oh();for(var n=t.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(ah(t,s,s+16383>a?a:s+16383));return 1===r?(e=t[n-1],o+=th[e>>2],o+=th[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=th[e>>10],o+=th[e>>4&63],o+=th[e<<2&63],o+="="),i.push(o),i.join("")}function ch(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?o-1:0,p=n?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=a;f>0;i=256*i+t[e+l],l+=p,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)}function fh(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[n+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*y}var lh={}.toString,ph=Array.isArray||function(t){return"[object Array]"==lh.call(t)},hh=50;function dh(){return gh.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function yh(t,e){if(dh()<e)throw new RangeError("Invalid typed array length");return gh.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=gh.prototype:(null===t&&(t=new gh(e)),t.length=e),t}function gh(t,e,n){if(!(gh.TYPED_ARRAY_SUPPORT||this instanceof gh))return new gh(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return bh(this,t)}return vh(this,t,e,n)}function vh(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?xh(t,e,n,r):"string"==typeof e?wh(t,e,n):Ah(t,e)}function mh(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _h(t,e,n,r){return mh(e),e<=0?yh(t,e):void 0!==n?"string"==typeof r?yh(t,e).fill(n,r):yh(t,e).fill(n):yh(t,e)}function bh(t,e){if(mh(e),t=yh(t,e<0?0:0|jh(e)),!gh.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function wh(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!gh.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Oh(e,n),o=(t=yh(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}function Eh(t,e){var n=e.length<0?0:0|jh(e.length);t=yh(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function xh(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),gh.TYPED_ARRAY_SUPPORT?(t=e).__proto__=gh.prototype:t=Eh(t,e),t}function Ah(t,e){if(Fh(e)){var n=0|jh(e.length);return 0===(t=yh(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||ud(e.length)?yh(t,0):Eh(t,e);if("Buffer"===e.type&&ph(e.data))return Eh(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function jh(t){if(t>=dh())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+dh().toString(16)+" bytes");return 0|t}function Fh(t){return!(null==t||!t._isBuffer)}function Oh(t,e){if(Fh(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return rd(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return sd(t).length;default:if(r)return rd(t).length;e=(""+e).toLowerCase(),r=!0}}function kh(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Hh(this,e,n);case"utf8":case"utf-8":return Lh(this,e,n);case"ascii":return qh(this,e,n);case"latin1":case"binary":return Kh(this,e,n);case"base64":return zh(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wh(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ch(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Th(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=gh.from(e,r)),Fh(e))return 0===e.length?-1:Sh(t,e,n,r,o);if("number"==typeof e)return e&=255,gh.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Sh(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Sh(t,e,n,r,o){var i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var f=-1;for(i=n;i<a;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(c(t,i+p)!==c(e,p)){l=!1;break}if(l)return i}return-1}function Ph(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function Mh(t,e,n,r){return ad(rd(e,t.length-n),t,n,r)}function Dh(t,e,n,r){return ad(od(e),t,n,r)}function Rh(t,e,n,r){return Dh(t,e,n,r)}function Ih(t,e,n,r){return ad(sd(e),t,n,r)}function Bh(t,e,n,r){return ad(id(e,t.length-n),t,n,r)}function zh(t,e,n){return 0===e&&n===t.length?uh(t):uh(t.slice(e,n))}function Lh(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,u,c=t[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return Uh(r)}gh.TYPED_ARRAY_SUPPORT=void 0===Fi.TYPED_ARRAY_SUPPORT||Fi.TYPED_ARRAY_SUPPORT,gh.poolSize=8192,gh._augment=function(t){return t.__proto__=gh.prototype,t},gh.from=function(t,e,n){return vh(null,t,e,n)},gh.TYPED_ARRAY_SUPPORT&&(gh.prototype.__proto__=Uint8Array.prototype,gh.__proto__=Uint8Array),gh.alloc=function(t,e,n){return _h(null,t,e,n)},gh.allocUnsafe=function(t){return bh(null,t)},gh.allocUnsafeSlow=function(t){return bh(null,t)},gh.isBuffer=cd,gh.compare=function(t,e){if(!Fh(t)||!Fh(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},gh.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},gh.concat=function(t,e){if(!ph(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return gh.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=gh.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var i=t[n];if(!Fh(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},gh.byteLength=Oh,gh.prototype._isBuffer=!0,gh.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ch(this,e,e+1);return this},gh.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ch(this,e,e+3),Ch(this,e+1,e+2);return this},gh.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ch(this,e,e+7),Ch(this,e+1,e+6),Ch(this,e+2,e+5),Ch(this,e+3,e+4);return this},gh.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Lh(this,0,t):kh.apply(this,arguments)},gh.prototype.equals=function(t){if(!Fh(t))throw new TypeError("Argument must be a Buffer");return this===t||0===gh.compare(this,t)},gh.prototype.inspect=function(){var t="",e=hh;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},gh.prototype.compare=function(t,e,n,r,o){if(!Fh(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var i=o-r,s=n-e,a=Math.min(i,s),u=this.slice(r,o),c=t.slice(e,n),f=0;f<a;++f)if(u[f]!==c[f]){i=u[f],s=c[f];break}return i<s?-1:s<i?1:0},gh.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},gh.prototype.indexOf=function(t,e,n){return Th(this,t,e,n,!0)},gh.prototype.lastIndexOf=function(t,e,n){return Th(this,t,e,n,!1)},gh.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return Ph(this,t,e,n);case"utf8":case"utf-8":return Mh(this,t,e,n);case"ascii":return Dh(this,t,e,n);case"latin1":case"binary":return Rh(this,t,e,n);case"base64":return Ih(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bh(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},gh.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Nh=4096;function Uh(t){var e=t.length;if(e<=Nh)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Nh));return n}function qh(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function Kh(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function Hh(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=nd(t[i]);return o}function Wh(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function Yh(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function $h(t,e,n,r,o,i){if(!Fh(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Vh(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Jh(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function Qh(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Gh(t,e,n,r,o){return o||Qh(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),fh(t,e,n,r,23,4),n+4}function Xh(t,e,n,r,o){return o||Qh(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),fh(t,e,n,r,52,8),n+8}gh.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),gh.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=gh.prototype;else{var o=e-t;n=new gh(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},gh.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Yh(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},gh.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Yh(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},gh.prototype.readUInt8=function(t,e){return e||Yh(t,1,this.length),this[t]},gh.prototype.readUInt16LE=function(t,e){return e||Yh(t,2,this.length),this[t]|this[t+1]<<8},gh.prototype.readUInt16BE=function(t,e){return e||Yh(t,2,this.length),this[t]<<8|this[t+1]},gh.prototype.readUInt32LE=function(t,e){return e||Yh(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},gh.prototype.readUInt32BE=function(t,e){return e||Yh(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},gh.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Yh(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},gh.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Yh(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},gh.prototype.readInt8=function(t,e){return e||Yh(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},gh.prototype.readInt16LE=function(t,e){e||Yh(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},gh.prototype.readInt16BE=function(t,e){e||Yh(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},gh.prototype.readInt32LE=function(t,e){return e||Yh(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},gh.prototype.readInt32BE=function(t,e){return e||Yh(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},gh.prototype.readFloatLE=function(t,e){return e||Yh(t,4,this.length),ch(this,t,!0,23,4)},gh.prototype.readFloatBE=function(t,e){return e||Yh(t,4,this.length),ch(this,t,!1,23,4)},gh.prototype.readDoubleLE=function(t,e){return e||Yh(t,8,this.length),ch(this,t,!0,52,8)},gh.prototype.readDoubleBE=function(t,e){return e||Yh(t,8,this.length),ch(this,t,!1,52,8)},gh.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||$h(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},gh.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||$h(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},gh.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,1,255,0),gh.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},gh.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,2,65535,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Vh(this,t,e,!0),e+2},gh.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,2,65535,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Vh(this,t,e,!1),e+2},gh.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,4,4294967295,0),gh.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Jh(this,t,e,!0),e+4},gh.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,4,4294967295,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Jh(this,t,e,!1),e+4},gh.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);$h(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},gh.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);$h(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},gh.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,1,127,-128),gh.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},gh.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,2,32767,-32768),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Vh(this,t,e,!0),e+2},gh.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,2,32767,-32768),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Vh(this,t,e,!1),e+2},gh.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,4,2147483647,-2147483648),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Jh(this,t,e,!0),e+4},gh.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||$h(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Jh(this,t,e,!1),e+4},gh.prototype.writeFloatLE=function(t,e,n){return Gh(this,t,e,!0,n)},gh.prototype.writeFloatBE=function(t,e,n){return Gh(this,t,e,!1,n)},gh.prototype.writeDoubleLE=function(t,e,n){return Xh(this,t,e,!0,n)},gh.prototype.writeDoubleBE=function(t,e,n){return Xh(this,t,e,!1,n)},gh.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!gh.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},gh.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!gh.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=Fh(t)?t:rd(new gh(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var Zh=/[^+\/0-9A-Za-z-_]/g;function td(t){if((t=ed(t).replace(Zh,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function ed(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function nd(t){return t<16?"0"+t.toString(16):t.toString(16)}function rd(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function od(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function id(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}function sd(t){return ih(td(t))}function ad(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function ud(t){return t!=t}function cd(t){return null!=t&&(!!t._isBuffer||fd(t)||ld(t))}function fd(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function ld(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&fd(t.slice(0,0))}var pd=vd;function hd(t,e){this.index=t,this.values=e}function dd(t,e){this.index=t,this.howMany=e}function yd(t,e,n){this.from=t,this.to=e,this.howMany=n}function gd(t,e){return t===e}function vd(t,e,n){n||(n=gd);for(var r=t.length,o=e.length,i=[],s={},a={},u=0;u<r;u++)for(var c=t[u],f=0;f<o;f++)if(!a[f]&&n(c,e[f],u,f)){var l=u,p=f,h=0;do{s[u++]=a[f++]=!0,h++}while(u<r&&f<o&&n(t[u],e[f],u,f)&&!a[f]);i.push(new yd(l,p,h)),u--;break}var d=[];for(u=0;u<r;)if(s[u])u++;else{var y=u;for(h=0;u<r&&!s[u++];)h++;d.push(new dd(y,h))}var g=[];for(f=0;f<o;)if(a[f])f++;else{for(y=f,h=0;f<o&&!a[f++];)h++;var v=e.slice(y,y+h);g.push(new hd(y,v))}var m,_,b=g.length,w=d.length,E=i.length,x=0;for(m=0;m<w;m++){var A=d[m];for(A.index-=x,x+=A.howMany,_=0;_<E;_++){(k=i[_]).from>=A.index&&(k.from-=A.howMany)}}for(m=b;m--;){var j=g[m];h=j.values.length;for(_=E;_--;){(k=i[_]).to>=j.index&&(k.to-=h)}}for(m=E;m-- >1;){if((k=i[m]).to!==k.from)for(_=m;_--;){var F=i[_];F.to>=k.to&&(F.to-=k.howMany),F.to>=k.from&&(F.to+=k.howMany)}}var O=[];for(m=0;m<E;m++){var k;if((k=i[m]).to!==k.from)for(O.push(k),_=m+1;_<E;_++){var C=i[_];C.from>=k.from&&(C.from-=k.howMany),C.from>=k.to&&(C.from+=k.howMany)}}return d.concat(O,g)}function md(t){for(var e=1;e<arguments.length;e+=1){var n=arguments[e];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t}vd.InsertDiff=hd,vd.RemoveDiff=dd,vd.MoveDiff=yd,hd.prototype.type="insert",hd.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},dd.prototype.type="remove",dd.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},yd.prototype.type="move",yd.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};var _d=function(t,e,n,r,o){if(Array.isArray(o)||"boolean"==typeof o)throw new Error(["It looks like you are using arrayChanges includeNonNumericalProperties,","the API has changed. You need to supply it as an entry to an option object:","arrayChanges(actual, expected, equal, similar, {",'  includeNonNumericalProperties: ["foo", "bar"]',"})"].join("\n"));for(var i=(o=o||{}).includeNonNumericalProperties,s=(!("fallbackToItemByItemDiff"in o)||o.fallbackToItemByItemDiff),a=new Array(t.length),u=0;u<t.length;u+=1)a[u]={type:"similar",value:t[u],actualIndex:u};n=n||function(t,e){return t===e},r=r||function(t,e){return!1};var c=pd(Array.prototype.slice.call(t),Array.prototype.slice.call(e),function(t,e,o,i){return n(t,e,o,i)||r(t,e,o,i)});function f(t){var e,n=0;for(e=0;e<a.length&&n<t;e+=1)"remove"!==a[e].type&&"moveSource"!==a[e].type&&n++;return e}var l=0;c.filter(function(t){return"remove"===t.type}).forEach(function(t){var e=l+t.index;a.slice(e,t.howMany+e).forEach(function(t){t.type="remove"}),l+=t.howMany}),c.filter(function(t){return"move"===t.type}).forEach(function(t){var e=f(t.from+1)-1,n=a.slice(e,t.howMany+e),r=n.map(function(t){return md({},t,{last:!1,type:"moveTarget"})});n.forEach(function(t){t.type="moveSource"});var o=f(t.to);Array.prototype.splice.apply(a,[o,0].concat(r))}),c.filter(function(t){return"insert"===t.type}).forEach(function(t){for(var e=new Array(t.values.length),n=0;n<t.values.length;n+=1)e[n]={type:"insert",value:t.values[n],expectedIndex:t.index};var r=f(t.index);Array.prototype.splice.apply(a,[r,0].concat(e))});var p=0;a.forEach(function(t,n){var r=t.type;"remove"===r||"moveSource"===r?p-=1:"similar"===r&&(t.expected=e[p+n],t.expectedIndex=p+n)});var h=a.reduce(function(t,e){return"similar"===e.type||"moveSource"===e.type||"moveTarget"===e.type?t:t+1},0);if(s){var d,y;for(y=0,d=0;y<Math.max(t.length,e.length)&&d<=h;y+=1)(y>=t.length||y>=e.length||!n(t[y],e[y],y,y)&&!r(t[y],e[y],y,y))&&(d+=1);if(d<=h){var g;for(a=[],g=0;g<Math.min(t.length,e.length);g+=1)a.push({type:"similar",value:t[g],expected:e[g],actualIndex:g,expectedIndex:g});if(t.length<e.length)for(;g<Math.max(t.length,e.length);g+=1)a.push({type:"insert",value:e[g],expectedIndex:g});else for(;g<Math.max(t.length,e.length);g+=1)a.push({type:"remove",value:t[g],actualIndex:g})}}if(a.forEach(function(t){"similar"===t.type&&n(t.value,t.expected,t.actualIndex,t.expectedIndex)&&(t.type="equal")}),i){var v;if(Array.isArray(i))v=i;else{var m={};v=[],[t,e].forEach(function(t){Object.keys(t).forEach(function(t){/^(?:0|[1-9][0-9]*)$/.test(t)||m[t]||(m[t]=!0,v.push(t))}),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(t){m[t]||(m[t]=!0,v.push(t))})})}v.forEach(function(r){var o;if(r in t){var i=t[r];o=e[r],r in e&&void 0!==o?(o=e[r],a.push({type:n(i,o,r,r)?"equal":"similar",expectedIndex:r,actualIndex:r,value:i,expected:o})):void 0!==i&&a.push({type:"remove",actualIndex:r,value:i})}else void 0!==(o=e[r])&&a.push({type:"insert",expectedIndex:r,value:o})})}return a.length>0&&(a[a.length-1].last=!0),a},bd=Number.isNaN||function(t){return t!=t},wd=Object.freeze({default:bd,__moduleExports:bd}),Ed=wd&&bd||wd,xd=Number.isFinite||function(t){return!("number"!=typeof t||Ed(t)||t===1/0||t===-1/0)},Ad=Object.freeze({default:xd,__moduleExports:xd}),jd=Ad&&xd||Ad,Fd=function(t,e){if("string"!=typeof t)throw new TypeError("Expected a string as the first argument");if(e<0||!jd(e))throw new TypeError("Expected a finite positive number");var n="";do{1&e&&(n+=t),t+=t}while(e>>=1);return n},Od=/^(?:( )+|\t+)/;function kd(t){var e=0,n=0,r=0;for(var o in t){var i=t[o],s=i[0],a=i[1];(s>n||s===n&&a>r)&&(n=s,r=a,e=+o)}return e}var Cd=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");var e,n,r=0,o=0,i=0,s={};t.split(/\n/g).forEach(function(t){if(t){var a,u=t.match(Od);u?(a=u[0].length,u[1]?o++:r++):a=0;var c=a-i;i=a,c?(e=s[(n=c>0)?c:-c])?e[0]++:e=s[c]=[1,0]:e&&(e[1]+=+n)}});var a,u,c=kd(s);return c?o>=r?(a="space",u=Fd(" ",c)):(a="tab",u=Fd("\t",c)):(a=null,u=""),{amount:c,type:a,indent:u}},Td=n(function(e){var n=o(Kn),r=o(qo);function o(t){return t&&t.__esModule?t:{default:t}}var i=xp.isRegExp,s=xp.leftPad;e.exports=function(e){e.addType({name:"wrapperObject",identify:!1,equal:function(t,e,n){return t===e||n(this.unwrap(t),this.unwrap(e))},inspect:function(t,e,n,r){return n.append(this.prefix(n.clone(),t)),n.append(r(this.unwrap(t),e)),n.append(this.suffix(n.clone(),t)),n},diff:function(t,e,n,r,o){n.inline=!0,t=this.unwrap(t),e=this.unwrap(e);var i=r(t,e),s=this.prefix(n.clone(),t),a=this.suffix(n.clone(),t);return i&&i.inline?n.append(s).append(i).append(a):n.append(s).nl().indentLines().i().block(function(){this.append(o(t)).sp().annotationBlock(function(){this.shouldEqualError(e,o),i&&this.nl(2).append(i)})}).nl().outdentLines().append(a)}}),"function"==typeof Symbol&&e.addType({name:"Symbol",identify:function(t){return"symbol"===(void 0===t?"undefined":(0,r.default)(t))},inspect:function(t,e,n,r){return n.jsKeyword("Symbol").text("(").singleQuotedString(t.toString().replace(/^Symbol\(|\)$/g,"")).text(")")}}),e.addType({name:"object",indent:!0,forceMultipleLines:!1,identify:function(t){return t&&"object"===(void 0===t?"undefined":(0,r.default)(t))},prefix:function(t,e){var n=e.constructor,r=n&&"function"==typeof n&&n!==Object&&xp.getFunctionName(n);return r&&"Object"!==r&&t.text(r+"("),t.text("{")},property:function(t,e,n,r){return t.propertyForObject(e,n,r)},suffix:function(t,e){t.text("}");var n=e.constructor,r=n&&"function"==typeof n&&n!==Object&&xp.getFunctionName(n);return r&&"Object"!==r&&t.text(")"),t},delimiter:function(t,e,n){return e<n-1&&t.text(","),t},getKeys:Object.getOwnPropertySymbols?function(t){var e=Object.keys(t),n=Object.getOwnPropertySymbols(t);return n.length>0?e.concat(n):e}:Object.keys,keyComparator:"function"==typeof Symbol?function(t,e){var n,o,i=t,s=e;if(n="symbol"===(void 0===t?"undefined":(0,r.default)(t)),o="symbol"===(void 0===e?"undefined":(0,r.default)(e)),n){if(!o)return 1;i=t.toString(),s=e.toString()}else if(o)return-1;return i<s?-1:i>s?1:0}:void 0,equal:function(t,e,n){var r=this;if(t===e)return!0;if(e.constructor!==t.constructor)return!1;var o=this.getKeys(t).filter(function(e){return void 0!==r.valueForKey(t,e)}),i=this.getKeys(e).filter(function(t){return void 0!==r.valueForKey(e,t)});if(o.length!==i.length)return!1;o.sort(this.keyComparator),i.sort(this.keyComparator);for(var s=0;s<o.length;s+=1)if(o[s]!==i[s])return!1;for(var a=0;a<o.length;a+=1){var u=o[a];if(!n(this.valueForKey(t,u),this.valueForKey(e,u)))return!1}return!0},hasKey:function(t,e){return e in t},inspect:function(t,e,n,r){var o=this.getKeys(t);if(0===o.length)return this.prefix(n,t),this.suffix(n,t),n;var i=this,s=o.map(function(e,s){var a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,e),u=a&&a.get,c=a&&a.set,f=n.clone();c&&!u&&f.text("set").sp();var l=void 0;l=c&&!u?c:i.valueForKey(t,e);var p=r(l);return l&&l._expectIt&&(p=n.clone().block(p)),i.property(f,e,p),f.amend(i.delimiter(n.clone(),s,o.length)),u&&c?f.sp().jsComment("/* getter/setter */"):u&&f.sp().jsComment("/* getter */"),f}),a=n.preferredWidth-2*(e===1/0?0:e)-2,u=0,c=s.length>5||s.every(function(t){return!t.isMultiline()&&(u+=t.size().width)<a}),f=n.clone();if(c){var l=0;s.forEach(function(t,e){var n=t.size();l+=n.width+1,e>0&&(1===n.height&&l<a?f.sp():(f.nl(),l=n.width),n.height>1&&(l=a)),f.append(t)})}else s.forEach(function(t,e){e>0&&f.nl(),f.append(t)});var p=this.prefix(n.clone(),t),h=this.suffix(n.clone(),t);return n.append(p),this.forceMultipleLines||f.isMultiline()?(p.isEmpty()||n.nl(),this.indent&&n.indentLines().i(),n.block(f),this.indent&&n.outdentLines(),h.isEmpty()||n.nl()):n.sp(p.isEmpty()?0:1).append(f).sp(h.isEmpty()?0:1),n.append(h)},diff:function(t,e,n,r,o,i){if(t.constructor!==e.constructor)return n.text("Mismatching constructors ").text(t.constructor&&xp.getFunctionName(t.constructor)||t.constructor).text(" should be ").text(e.constructor&&xp.getFunctionName(e.constructor)||e.constructor);n.inline=!0;var s=this.getKeys(t),a=this.getKeys(e),u=this.uniqueKeys(s,a),c=this.prefix(n.clone(),t);n.append(c).nl(c.isEmpty()?0:1),this.indent&&n.indentLines();var f=this;u.forEach(function(a,u){n.nl(u>0?1:0).i().block(function(){var c=f.valueForKey(t,a),l=f.valueForKey(e,a),p=n.clone(),h=!i(c,l),d=!1,y=void 0;if(h)if(a in e)if(a in t){var g=r(c,l);!g||g&&!g.inline?(p.shouldEqualError(l),g&&p.nl(2).append(g)):(d=!0,y=g)}else this.error("// missing").sp(),y=n.clone().appendInspected(l),d=!0;else p.error("should be removed"),d=!0;else d=!0;y||(y=o(c,h?1/0:null)),y.amend(f.delimiter(n.clone(),u,s.length)),d||(y=n.clone().block(y)),f.property(this,a,y),p.isEmpty()||this.sp().annotationBlock(p)})}),this.indent&&n.outdentLines();var l=this.suffix(n.clone(),t);return n.nl(l.isEmpty()?0:1).append(l)},similar:function(t,e){var n=this;if(null===t||null===e)return!1;var o=void 0===t?"undefined":(0,r.default)(t);if(o!==(void 0===e?"undefined":(0,r.default)(e)))return!1;if("string"===o)return fu(t,e)<t.length/2;if("object"!==o||!t)return!1;if(xp.isArray(t)&&xp.isArray(e))return!0;var i=this.getKeys(t),s=this.getKeys(e),a=0,u=Math.round(Math.max(i.length,s.length)/2);return i.concat(s).some(function(r){return n.hasKey(t,r)&&n.hasKey(e,r)&&(a+=1),a>=u})},uniqueKeys:xp.uniqueStringsAndSymbols,valueForKey:function(t,e){return t[e]}}),e.addType({name:"type",base:"object",identify:function(t){return t&&t._unexpectedType},inspect:function(t,e,n){var r=t.name;return n.text("type: ").jsKeyword(r)}}),e.addType({name:"array-like",base:"object",identify:!1,numericalPropertiesOnly:!0,getKeys:function(t){for(var e=new Array(t.length),r=0;r<t.length;r+=1)e[r]=r;return this.numericalPropertiesOnly||e.push.apply(e,(0,n.default)(this.getKeysNonNumerical(t))),e},getKeysNonNumerical:Object.getOwnPropertySymbols?function(t){var e=[];Object.keys(t).forEach(function(t){xp.numericalRegExp.test(t)||e.push(t)});var r=Object.getOwnPropertySymbols(t);return r.length>0&&e.push.apply(e,(0,n.default)(r)),e}:function(t){var e=[];return Object.keys(t).forEach(function(t){xp.numericalRegExp.test(t)||e.push(t)}),e},equal:function(t,e,n){var r=this;if(t===e)return!0;if(t.constructor===e.constructor&&t.length===e.length){var o=void 0;for(o=0;o<t.length;o+=1)if(!n(this.valueForKey(t,o),this.valueForKey(e,o)))return!1;if(!this.numericalPropertiesOnly){var i=this.getKeysNonNumerical(t).filter(function(e){return void 0!==r.valueForKey(t,e)}),s=this.getKeysNonNumerical(e).filter(function(n){return void 0!==r.valueForKey(e,n)||void 0!==r.valueForKey(t,n)});if(i.length!==s.length)return!1;for(o=0;o<i.length;o+=1)if(!n(this.valueForKey(t,i[o]),this.valueForKey(e,s[o])))return!1}return!0}return!1},prefix:function(t){return t.text("[")},suffix:function(t){return t.text("]")},inspect:function(t,e,n,r){var o=this,i=this.prefix(n.clone(),t),s=this.suffix(n.clone(),t),a=this.getKeys(t);if(0===a.length)return n.append(i).append(s);if(1===e&&t.length>10)return n.append(i).text("...").append(s);var u=a.map(function(e){var i=void 0;return i=o.hasKey(t,e)?r(o.valueForKey(t,e)):xp.numericalRegExp.test(e)?n.clone():r(void 0),o.property(n.clone(),e,i,!0)}),c=Ap-Math.min(Ap,e),f=n.preferredWidth-20-c*n.indentationWidth-2,l=0,p=this.forceMultipleLines||u.some(function(t){if(t.isMultiline())return!0;var e=t.size();return(l+=e.width)>f});return u.forEach(function(t,e){t.amend(o.delimiter(n.clone(),e,a.length))}),p?(n.append(i),i.isEmpty()||n.nl(),this.indent&&n.indentLines(),u.forEach(function(t,e){n.nl(e>0?1:0).i().block(t)}),this.indent&&n.outdentLines(),s.isEmpty()||n.nl(),n.append(s)):(n.append(i).sp(i.isEmpty()?0:1),u.forEach(function(t,e){n.append(t),e===u.length-1||n.sp()}),n.sp(s.isEmpty()?0:1).append(s))},diffLimit:512,diff:function(t,e,n,r,o,i){if(n.inline=!0,Math.max(t.length,e.length)>this.diffLimit)return n.jsComment("Diff suppressed due to size > "+this.diffLimit),n;if(t.constructor!==e.constructor)return this.baseType.diff(t,e,n);var s=this.prefix(n.clone(),t);n.append(s).nl(s.isEmpty()?0:1),this.indent&&n.indentLines();var a=xp.duplicateArrayLikeUsingType(t,this),u=this.getKeys(t),c=xp.duplicateArrayLikeUsingType(e,this),f=this.getKeys(e),l=!this.numericalPropertiesOnly&&xp.uniqueNonNumericalStringsAndSymbols(u,f),p=this,h=_d(a,c,i,function(t,e){return p.similar(t,e)},{includeNonNumericalProperties:l}),d=h.reduce(function(t,e,n){return"insert"===e.type?t:n},-1),y=xp.packArrows(h);n.arrowsAlongsideChangeOutputs(y,h.map(function(t,e){var i=p.delimiter(n.clone(),e,d+1);return"moveTarget"===t.type?n.clone():n.clone().block(function(){if("moveSource"===t.type){var e=p.property(n.clone(),t.actualIndex,o(t.value),!0);this.amend(e).amend(i).sp().error("// should be moved")}else"insert"===t.type?this.annotationBlock(function(){this.error("missing ").block(function(){var e=void 0!==t.actualIndex?t.actualIndex:t.expectedIndex,r=p.property(n.clone(),e,o(t.value),!0);this.amend(r)})}):"remove"===t.type?this.block(function(){var e=p.property(n.clone(),t.actualIndex,o(t.value),!0);this.amend(e).amend(i).sp().error("// should be removed")}):"equal"===t.type?this.block(function(){var e=p.property(n.clone(),t.actualIndex,o(t.value),!0);this.amend(e).amend(i)}):this.block(function(){var e=r(t.value,t.expected);if(e&&e.inline)this.append(e).append(i);else{var s=p.property(n.clone(),t.actualIndex,o(t.value),!0);this.append(s).append(i).sp().annotationBlock(function(){this.shouldEqualError(t.expected,o),e&&this.nl(2).append(e)})}})})})),this.indent&&n.outdentLines();var g=this.suffix(n.clone(),t);return n.nl(g.isEmpty()?0:1).append(g)}}),e.addType({name:"array",base:"array-like",numericalPropertiesOnly:!1,identify:function(t){return xp.isArray(t)}}),e.addType({name:"arguments",base:"array-like",prefix:function(t){return t.text("arguments(","cyan")},suffix:function(t){return t.text(")","cyan")},identify:function(t){return"[object Arguments]"===Object.prototype.toString.call(t)}});var o=["message","name","description","line","column","sourceId","sourceURL","stack","stackArray"].reduce(function(t,e){return t[e]=!0,t},{});e.addType({base:"object",name:"Error",identify:function(t){return xp.isError(t)},getKeys:function(t){var e=this.baseType.getKeys(t).filter(function(t){return!o[t]});return e.unshift("message"),e},unwrap:function(t){return this.getKeys(t).reduce(function(e,n){return e[n]=t[n],e},{})},equal:function(t,e,n){return t===e||n(t.message,e.message)&&this.baseType.equal(t,e)},inspect:function(t,e,n,r){n.errorName(t).text("(");var o=this.getKeys(t);return 1===o.length&&"message"===o[0]?""!==t.message&&n.append(r(t.message)):n.append(r(this.unwrap(t),e)),n.text(")")},diff:function(t,e,n,r){return t.constructor!==e.constructor?n.text("Mismatching constructors ").errorName(t).text(" should be ").errorName(e):((n=r(this.unwrap(t),this.unwrap(e)))&&((n=n.clone().errorName(t).text("(").append(n).text(")")).inline=!1),n)}});var a=["output","_isUnexpected","htmlMessage","_hasSerializedErrorMessage","expect","assertion","originalError"].reduce(function(t,e){return t[e]=!0,t},{});e.addType({base:"Error",name:"UnexpectedError",identify:function(t){return t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&t._isUnexpected&&this.baseType.identify(t)},getKeys:function(t){return this.baseType.getKeys(t).filter(function(t){return!a[t]})},inspect:function(t,e,n){n.jsFunctionName(this.name).text("(");var r=t.getErrorMessage(n);return r.isMultiline()?n.nl().indentLines().i().block(r).nl():n.append(r),n.text(")")}}),e.addType({name:"date",identify:function(t){return"[object Date]"===Object.prototype.toString.call(t)},equal:function(t,e){return t.getTime()===e.getTime()},inspect:function(t,e,n,r){var o=t.toUTCString().replace(/UTC/,"GMT"),i=t.getUTCMilliseconds();if(i>0){for(var s=String(i);s.length<3;)s="0"+s;o=o.replace(" GMT","."+s+" GMT")}return n.jsKeyword("new").sp().text("Date(").append(r(o).text(")"))}}),e.addType({base:"any",name:"function",identify:function(t){return"function"==typeof t},getKeys:Object.keys,equal:function(t,e){return t===e},inspect:function(t,e,n,r){var o=Function.prototype.toString.call(t).replace(/\r\n?|\n\r?/g,"\n"),i=xp.getFunctionName(t)||"",s=void 0,a=void 0,u=void 0,c=o.match(/^\s*((?:async )?\s*(?:\S+\s*=>|\([^)]*\)\s*=>|function\s?\w*\s*\([^)]*\)))([\s\S]*)$/);if(c){"function ()"===(s=c[1].replace(/function(\S)/,"function $1"))&&i&&(s="function "+i+"()");var f=(a=c[2]).match(/^(\s*\{)([\s\S]*?)([ ]*)\}\s*$/),l=void 0,p=!0,h="}";if(f?(l=f[1],a=f[2],1===(u=f[3]||"").length&&(h=" }")):(f=a.match(/^(\s*)([\s\S]*?)([ ]*)\s*$/))&&(l=f[1],p=!1,a=f[2],u=f[3]||"",h=""),/\n/.test(a)&&!/\\\n/.test(a)){a=a.replace(new RegExp("^ {"+u.length+"}","mg"),"");var d=Cd(a);a=a.replace(new RegExp("^(?:"+d.indent+")+","mg"),function(t){var e=t.length;return xp.leftPad("",e/d.amount*n.indentationWidth," ")})}i&&"anonymous"!==i||(i=""),/^\s*\[native code\]\s*$/.test(a)?(a=" /* native code */ ",h="}"):/^\s*$/.test(a)?a="":/^\s*[^\r\n]{1,30}\s*$/.test(a)&&-1===a.indexOf("//")&&p?(a=" "+a.trim()+" ",h="}"):a=a.replace(/^((?:.*\n){3}( *).*\n)[\s\S]*?\n[\s\S]*?\n((?:.*\n){3})$/,"$1$2// ... lines removed ...\n$3"),a=f?l+a+h:a.replace(/[ ]*$/,"")}else s="function "+i+"( /*...*/ ) ",a="{ /*...*/ }";return n.code(s+a,"javascript")}}),e.addType({base:"function",name:"expect.it",identify:function(t){return"function"==typeof t&&t._expectIt},inspect:function(t,e,n,r){var o=t._expectations,i=t._OR;n.text("expect.it(");var s=!1;return o.forEach(function(t,e){t!==i?(s?n.text(")\n      .or("):e>0&&n.text(")\n        .and("),Array.prototype.slice.call(t).forEach(function(t,e){e>0&&n.text(", "),n.append(r(t))}),s=!1):s=!0}),n.amend(")")}}),e.addType({name:"Promise",base:"object",identify:function(t){return t&&this.baseType.identify(t)&&"function"==typeof t.then},inspect:function(t,e,n,r){if(n.jsFunctionName("Promise"),t.isPending&&t.isPending())n.sp().yellow("(pending)");else if(t.isFulfilled&&t.isFulfilled()){if(n.sp().green("(fulfilled)"),t.value){var o=t.value();void 0!==o&&n.sp().text("=>").sp().append(r(o))}}else if(t.isRejected&&t.isRejected()){n.sp().red("(rejected)"),void 0!==t.reason()&&n.sp().text("=>").sp().append(r(t.reason()))}return n}}),e.addType({name:"regexp",base:"object",identify:i,equal:function(t,e){return t===e||t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline},inspect:function(t,e,n){return n.jsRegexp(t)},diff:function(t,e,n,r,o){return n.inline=!1,n.stringDiff(String(t),String(e),{type:"Chars",markUpSpecialCharacters:!0})}}),e.addType({name:"binaryArray",base:"array-like",digitWidth:2,hexDumpWidth:16,identify:!1,prefix:function(t){return t.code(this.name+"([","javascript")},suffix:function(t){return t.code("])","javascript")},equal:function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},hexDump:function(t,e){var n="";"number"==typeof e&&0!==e||(e=t.length);for(var r=0;r<e;r+=this.hexDumpWidth){n.length>0&&(n+="\n");for(var o="",i=" │",a=0;a<this.hexDumpWidth;a+=1)if(r+a<e){var u=t[r+a];o+=s(u.toString(16).toUpperCase(),this.digitWidth,"0")+" ",i+=String.fromCharCode(u).replace(/\n/g,"␊").replace(/\r/g,"␍")}else 2===this.digitWidth&&(o+="   ");2===this.digitWidth?n+=o+i+"│":n+=o.replace(/\s+$/,"")}return n},inspect:function(t,e,n){this.prefix(n,t);for(var r="",o=0;o<Math.min(this.hexDumpWidth,t.length);o+=1){o>0&&(r+=", ");var i=t[o];r+="0x"+s(i.toString(16).toUpperCase(),this.digitWidth,"0")}return t.length>this.hexDumpWidth&&(r+=" /* "+(t.length-this.hexDumpWidth)+" more */ "),n.code(r,"javascript"),this.suffix(n,t),n},diffLimit:512,diff:function(t,e,n,r,o){return n.inline=!1,Math.max(t.length,e.length)>this.diffLimit?n.jsComment("Diff suppressed due to size > "+this.diffLimit):n.stringDiff(this.hexDump(t),this.hexDump(e),{type:"Chars",markUpSpecialCharacters:!1}).replaceText(/[\x00-\x1f\x7f-\xff␊␍]/g,".").replaceText(/[│ ]/g,function(t,e){this.text(e)}),n}}),[8,16,32].forEach(function(n){["Int","Uint"].forEach(function(r){var o=r+n+"Array",i=t[o];void 0!==i&&e.addType({name:o,base:"binaryArray",hexDumpWidth:128/n,digitWidth:n/4,identify:function(t){return t instanceof i}})},this)},this),void 0!==gh&&e.addType({name:"Buffer",base:"binaryArray",identify:cd}),e.addType({name:"string",identify:function(t){return"string"==typeof t},inspect:function(t,e,n){return n.singleQuotedString(t)},diffLimit:4096,diff:function(t,e,n,r,o){return Math.max(t.length,e.length)>this.diffLimit?(n.jsComment("Diff suppressed due to size > "+this.diffLimit),n):(n.stringDiff(t,e,{type:"WordsWithSpace",markUpSpecialCharacters:!0}),n.inline=!1,n)}}),e.addType({name:"number",identify:function(t){return"number"==typeof t&&!isNaN(t)},inspect:function(t,e,n){return t=0===t&&1/t==-1/0?"-0":String(t),n.jsNumber(String(t))}}),e.addType({name:"NaN",identify:function(t){return"number"==typeof t&&isNaN(t)},inspect:function(t,e,n){return n.jsPrimitive(t)}}),e.addType({name:"boolean",identify:function(t){return"boolean"==typeof t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),e.addType({name:"undefined",identify:function(t){return void 0===t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),e.addType({name:"null",identify:function(t){return null===t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),e.addType({name:"assertion",identify:function(t){return t instanceof Wo}})}}),Sd=e(Td),Pd=Object.freeze({default:Sd,__moduleExports:Td}),Md=Ld,Dd=1e3;function Rd(t,e){this.index=t,this.values=e}function Id(t,e){this.index=t,this.howMany=e}function Bd(t,e,n){this.from=t,this.to=e,this.howMany=n}function zd(t,e,n,r,o){return o(t===e)}function Ld(t,e,n,r){n||(n=zd);var o=t.length,i=e.length,s=[],a={},u={};!function r(c,f,l,p){f>=i&&(c++,f=0),c>=o?p():u[f]?l?r(c,f+1,l-1,p):setTimeout(function(){r(c,f+1,Dd,p)},0):n(t[c],e[f],c,f,function(h){if(h){var d=c,y=f;!function r(s,c,f,l){a[s++]=u[c++]=!0,f++,s<o&&c<i&&!u[c]?n(t[s],e[c],s,c,function(t){t?setTimeout(function(){r(s,c,f,l)},0):l(s,c,f)}):l(s,c,f)}(c,f,0,function(t,e,n){s.push(new Bd(d,y,n)),l?r(t,0,l-1,p):setTimeout(function(){r(t,0,Dd,p)},0)})}else l?r(c,f+1,l-1,p):setTimeout(function(){r(c,f+1,Dd,p)},0)})}(0,0,Dd,function(){for(var t=[],n=0;n<o;)if(a[n])n++;else{for(var c=n,f=0;n<o&&!a[n++];)f++;t.push(new Id(c,f))}for(var l=[],p=0;p<i;)if(u[p])p++;else{for(c=p,f=0;p<i&&!u[p++];)f++;var h=e.slice(c,c+f);l.push(new Rd(c,h))}var d,y,g=l.length,v=t.length,m=s.length,_=0;for(d=0;d<v;d++){var b=t[d];for(b.index-=_,_+=b.howMany,y=0;y<m;y++){(A=s[y]).from>=b.index&&(A.from-=b.howMany)}}for(d=g;d--;){var w=l[d];f=w.values.length;for(y=m;y--;){(A=s[y]).to>=w.index&&(A.to-=f)}}for(d=m;d-- >1;){if((A=s[d]).to!==A.from)for(y=d;y--;){var E=s[y];E.to>=A.to&&(E.to-=A.howMany),E.to>=A.from&&(E.to+=A.howMany)}}var x=[];for(d=0;d<m;d++){var A;if((A=s[d]).to!==A.from)for(x.push(A),y=d+1;y<m;y++){var j=s[y];j.from>=A.from&&(j.from-=A.howMany),j.from>=A.to&&(j.from+=A.howMany)}}r(t.concat(x,l))})}Ld.InsertDiff=Rd,Ld.RemoveDiff=Id,Ld.MoveDiff=Bd,Rd.prototype.type="insert",Rd.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},Id.prototype.type="remove",Id.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},Bd.prototype.type="move",Bd.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};var Nd=Object.freeze({default:Md,__moduleExports:Md}),Ud=Nd&&Md||Nd,qd=1e3;function Kd(t){for(var e=1;e<arguments.length;e+=1){var n=arguments[e];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t}var Hd=function(t,e,n,r,o,i){"function"==typeof o&&(i=o,o=!1);for(var s=new Array(t.length),a=0;a<t.length;a+=1)s[a]={type:"similar",actualIndex:a,value:t[a]};r=r||function(t,e,n,r,o){return o(!1)},Ud([].concat(t),[].concat(e),function(t,e,o,i,s){n(t,e,o,i,function(n){if(n)return s(!0);r(t,e,o,i,function(t){return s(t)})})},function(a){function u(t){var e,n=0;for(e=0;e<s.length&&n<t;e+=1)"remove"!==s[e].type&&"moveSource"!==s[e].type&&(n+=1);return e}var c=0;a.filter(function(t){return"remove"===t.type}).forEach(function(t){var e=c+t.index;s.slice(e,t.howMany+e).forEach(function(t){t.type="remove"}),c+=t.howMany}),a.filter(function(t){return"move"===t.type}).forEach(function(t){var e=u(t.from+1)-1,n=s.slice(e,t.howMany+e),r=n.map(function(t){return Kd({},t,{last:!1,type:"moveTarget"})});n.forEach(function(t){t.type="moveSource"});var o=u(t.to);Array.prototype.splice.apply(s,[o,0].concat(r))}),a.filter(function(t){return"insert"===t.type}).forEach(function(t){for(var e=new Array(t.values.length),n=0;n<t.values.length;n+=1)e[n]={type:"insert",value:t.values[n]};Array.prototype.splice.apply(s,[u(t.index),0].concat(e))});var f=0;s.forEach(function(t,n){var r=t.type;"remove"===r||"moveSource"===r?f-=1:"similar"===r&&(t.expected=e[f+n],t.expectedIndex=f+n)});var l=s.reduce(function(t,e){return"similar"===e.type||"moveSource"===e.type||"moveTarget"===e.type?t:t+1},0),p=Math.max(t.length,e.length),h=function(o,i,s,a){if(o>=p||i>l)return setTimeout(function(){a(i)},0);r(t[o],e[o],o,o,function(r){if(!r)return i+=1,0===s?setTimeout(function(){h(o+1,i,qd,a)}):h(o+1,i,s-1,a);n(t[o],e[o],o,o,function(t){return t||(i+=1),0===s?setTimeout(function(){h(o+1,i,qd,a)}):h(o+1,i,s-1,a)})})};h(0,0,qd,function(r){if(r<=l){var a;for(s=[],a=0;a<Math.min(t.length,e.length);a+=1)s.push({type:"similar",actualIndex:a,expectedIndex:a,value:t[a],expected:e[a]});if(t.length<e.length)for(;a<Math.max(t.length,e.length);a+=1)s.push({type:"insert",value:e[a]});else for(;a<Math.max(t.length,e.length);a+=1)s.push({type:"remove",value:t[a]})}var u=function(t,e,r){if(t>=s.length)return r();var o=s[t];return"similar"===o.type?n(o.value,o.expected,o.actualIndex,o.expectedIndex,function(n){if(n&&(s[t].type="equal"),0===e)return setTimeout(function(){u(t+1,qd,r)});u(t+1,e-1,r)}):0===e?setTimeout(function(){u(t+1,qd,r)}):u(t+1,e-1,r)};if(o){var c;if(Array.isArray(o))c=o;else{var f={};c=[],[t,e].forEach(function(t){Object.keys(t).forEach(function(t){/^(?:0|[1-9][0-9]*)$/.test(t)||f[t]||(f[t]=!0,c.push(t))}),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(t){f[t]||(f[t]=!0,c.push(t))})})}c.forEach(function(n){var r;if(n in t){var o=t[n];r=e[n],n in e&&void 0!==r?(r=e[n],s.push({type:"similar",expectedIndex:n,actualIndex:n,value:o,expected:r})):void 0!==o&&s.push({type:"remove",actualIndex:n,value:o})}else void 0!==(r=e[n])&&s.push({type:"insert",expectedIndex:n,value:r})})}u(0,qd,function(){s.length>0&&(s[s.length-1].last=!0),i(s)})})})},Wd=n(function(t){var e=r(Kn),n=r(qo);function r(t){return t&&t.__esModule?t:{default:t}}var o=xp.objectIs,i=xp.isRegExp,s=xp.extend;t.exports=function(t){function r(t,e,n){var r=t.getDiffMethod();if(r)return function(t){e.prefix(t,n);for(var o=arguments.length,i=Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];var a=r.call.apply(r,[this,t].concat(i));return e.suffix(t,n),a}}function a(t,e){function n(){return t.apply(this,e)}return n.prototype=t.prototype,new n}t.addAssertion("<any> [not] to be (ok|truthy)",function(t,e){!!e===!!t.flags.not&&t.fail()}),t.addAssertion("<any> [not] to be (ok|truthy) <string>",function(t,e,n){!!e===!!t.flags.not&&t.fail({errorMode:"bubble",message:n})}),t.addAssertion("<any> [not] to be <any>",function(t,e,n){t(o(e,n),"[not] to be truthy")}),t.addAssertion("<string> [not] to be <string>",function(t,e,n){t(e,"[not] to equal",n)}),t.addAssertion("<boolean> [not] to be true",function(t,e){t(e,"[not] to be",!0)}),t.addAssertion("<boolean> [not] to be false",function(t,e){t(e,"[not] to be",!1)}),t.addAssertion("<any> [not] to be falsy",function(t,e){t(e,"[!not] to be truthy")}),t.addAssertion("<any> [not] to be falsy <string>",function(t,e,n){!!e!==!!t.flags.not&&t.fail({errorMode:"bubble",message:n})}),t.addAssertion("<any> [not] to be null",function(t,e){t(e,"[not] to be",null)}),t.addAssertion("<any> [not] to be undefined",function(t,e){t(void 0===e,"[not] to be truthy")}),t.addAssertion("<any> to be defined",function(t,e){t(e,"not to be undefined")}),t.addAssertion("<number|NaN> [not] to be NaN",function(t,e){t(isNaN(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be close to <number> <number?>",function(t,e,n,r){t.errorMode="bubble","number"!=typeof r&&(r=1e-9),t.withError(function(){t(Math.abs(e-n),"[not] to be less than or equal to",r)},function(o){t.fail(function(o){o.error("expected ").appendInspected(e).sp().error(t.testDescription).sp().appendInspected(n).sp().text("(epsilon: ").jsNumber(r.toExponential()).text(")")})})}),t.addAssertion("<any> [not] to be (a|an) <type>",function(t,e,n){t.argsOutput[0]=function(t){t.text(n.name)},t(n.identify(e),"[not] to be true")}),t.addAssertion("<any> [not] to be (a|an) <string>",function(t,e,n){n=/^reg(?:exp?|ular expression)$/.test(n)?"regexp":n,t.argsOutput[0]=function(t){t.jsString(n)},t.getType(n)||(t.errorMode="nested",t.fail(function(t){t.error("Unknown type:").sp().jsString(n)})),t(t.subjectType.is(n),"[not] to be truthy")}),t.addAssertion("<any> [not] to be (a|an) <function>",function(t,e,n){var r=xp.getFunctionName(n);r&&(t.argsOutput[0]=function(t){t.text(r)}),t(e instanceof n,"[not] to be truthy")}),t.addAssertion("<any> [not] to be one of <array>",function(t,e,n){for(var r=!1,i=0;i<n.length;i+=1)r=r||o(e,n[i]);r===t.flags.not&&t.fail()}),t.addAssertion("<any> [not] to be an (object|array)",function(t,e){t(e,"[not] to be an",t.alternations[0])}),t.addAssertion("<any> [not] to be a (boolean|number|string|function|regexp|regex|regular expression|date)",function(t,e){t(e,"[not] to be a",t.alternations[0])}),t.addAssertion("<string> to be (the empty|an empty|a non-empty) string",function(t,e){t(e,"a non-empty"===t.alternations[0]?"not to be empty":"to be empty")}),t.addAssertion("<array-like> to be (the empty|an empty|a non-empty) array",function(t,e){t(e,"a non-empty"===t.alternations[0]?"not to be empty":"to be empty")}),t.addAssertion("<string> to match <regexp>",function(t,e,n){return t.withError(function(){var r=e.match(n);return t(r,"to be truthy"),r},function(e){e.label="should match",t.fail(e)})}),t.addAssertion("<string> not to match <regexp>",function(t,e,n){return t.withError(function(){t(n.test(e),"to be false")},function(r){t.fail({label:"should not match",diff:function(t){t.inline=!1;var r=0;function o(n){n>r&&(t.text(e.substring(r,n)),r=n)}return e.replace(new RegExp(n.source,"g"),function(e,n){o(n),r+=e.length,t.removedHighlight(e)}),o(e.length),t}})})}),t.addAssertion("<object|function> [not] to have own property <string>",function(t,e,n){return t(e.hasOwnProperty(n),"[not] to be truthy"),e[n]}),t.addAssertion("<object|function> [not] to have (enumerable|configurable|writable) property <string>",function(t,e,n){var r=t.alternations[0];return t(Object.getOwnPropertyDescriptor(e,n)[r],"[not] to be truthy"),e[n]}),t.addAssertion("<object|function> [not] to have property <string>",function(t,e,n){var r=t.findTypeOf(e),o=r.is("function")?e[n]:r.valueForKey(e,n);return t(o,"[!not] to be undefined"),o}),t.addAssertion("<object|function> to have [own] property <string> <any>",function(t,e,n,r){return t(e,"to have [own] property",n).then(function(e){return t.argsOutput=function(){this.appendInspected(n).sp().error("with a value of").sp().appendInspected(r)},t(e,"to equal",r),e})}),t.addAssertion("<object|function> [not] to have [own] properties <array>",function(t,e,n){var r=[];n.forEach(function(t){"string"!=typeof t&&"number"!=typeof t&&r.push(t)}),r.length>0&&(t.errorMode="nested",t.fail(function(){this.error("All expected properties must be passed as strings or numbers, but these are not:").indentLines(),r.forEach(function(t){this.nl().i().appendInspected(t)},this),this.outdentLines()})),n.forEach(function(n){t(e,"[not] to have [own] property",String(n))})}),t.addAssertion("<object|function> to have [own] properties <object>",function(t,e,n){t.withError(function(){Object.keys(n).forEach(function(r){var o=n[r];void 0===o?t(e,"not to have [own] property",r):t(e,"to have [own] property",r,o)})},function(r){t.fail({diff:function(r,o){r.inline=!1;var i=s({},n),a={},u=t.findTypeOf(e).getKeys(e);for(var c in e)e.hasOwnProperty(c)||u.push(c);return u.forEach(function(r){t.flags.own&&!e.hasOwnProperty(r)||r in n||(i[r]=e[r]),t.flags.own&&!e.hasOwnProperty(r)||r in a||(a[r]=e[r])}),xp.wrapConstructorNameAroundOutput(o(a,i),e)}})})}),t.addAssertion("<string|array-like> [not] to have length <number>",function(t,e,n){t.flags.not||(t.errorMode="nested"),t(e.length,"[not] to be",n)}),t.addAssertion("<string|array-like> [not] to be empty",function(t,e){t(e,"[not] to have length",0)}),t.addAssertion("<string|array-like|object> to be non-empty",function(t,e){t(e,"not to be empty")}),t.addAssertion("<object> to [not] [only] have keys <array>",function(t,e,n){var r={},o=t.findTypeOf(e),i=o.getKeys(e);if(i.forEach(function(t){r[t]=!0}),!t.flags.not||0!==n.length){var s=n.every(function(t){return r[t]});t.flags.only?(t(s,"to be truthy"),t.withError(function(){t(i.length===n.length,"[not] to be truthy")},function(r){t.fail({diff:!t.flags.not&&function(t,r,s,a){t.inline=!0;var u={};n.forEach(function(t){u[t]=!0});var c=o.is("array-like");return o.prefix(t,e),t.nl().indentLines(),i.forEach(function(n,r){var a=o.property(t.clone(),n,s(o.valueForKey(e,n)),c),f=o.delimiter(t.clone(),r,i.length);t.i().block(function(){this.amend(a).amend(f),u[n]||this.sp().annotationBlock(function(){this.error("should be removed")})}).nl()}),t.outdentLines(),o.suffix(t,e),t}})})):t(s,"[not] to be truthy")}}),t.addAssertion("<object> [not] to be empty",function(t,e){if(t.flags.not&&!t.findTypeOf(e).getKeys(e).length)return t.fail();t(e,"to [not] only have keys",[])}),t.addAssertion("<object> not to have keys <array>",function(t,e,n){t(e,"to not have keys",n)}),t.addAssertion("<object> not to have key <string>",function(t,e,n){t(e,"to not have keys",[n])}),t.addAssertion("<object> not to have keys <string+>",function(t,e,n){t(e,"to not have keys",Array.prototype.slice.call(arguments,2))}),t.addAssertion("<object> to [not] [only] have key <string>",function(t,e,n){t(e,"to [not] [only] have keys",[n])}),t.addAssertion("<object> to [not] [only] have keys <string+>",function(t,e){t(e,"to [not] [only] have keys",Array.prototype.slice.call(arguments,2))}),t.addAssertion("<string> [not] to contain <string+>",function(t,e){var n=Array.prototype.slice.call(arguments,2);n.forEach(function(e){if(""===e)throw new Error("The '"+t.testDescription+"' assertion does not support the empty string")}),t.withError(function(){n.forEach(function(n){t(-1!==e.indexOf(n),"[not] to be truthy")})},function(r){t.fail({diff:function(r){r.inline=!1;var o=0;function i(t){t>o&&(r.text(e.substring(o,t)),o=t)}if(t.flags.not)e.replace(new RegExp(n.map(function(t){return xp.escapeRegExpMetaChars(t)}).join("|"),"g"),function(t,e){i(e),o+=t.length,r.removedHighlight(t)}),i(e.length);else{var s=[];n.forEach(function(t){for(var n=t,r=!1;n.length>1;){var i=!1;o=-1;var a=void 0;do{-1!==(a=e.indexOf(n,o+1))&&(i=!0,s.push({startIndex:a,endIndex:a+n.length,partial:r})),o=a}while(-1!==o);if(i)break;n=t.substr(0,n.length-1),r=!0}}),o=0,s.sort(function(t,e){return t.startIndex-e.startIndex}).forEach(function(t){var n=t.startIndex,s=t.endIndex,a=t.partial;i(n);var u=Math.max(n,o);s>u&&(a?r.partialMatch(e.substring(u,s)):r.match(e.substring(u,s)),o=s)}),i(e.length)}return r}})})}),t.addAssertion("<array-like> [not] to contain <any+>",function(t,e){var n=Array.prototype.slice.call(arguments,2);t.withError(function(){n.forEach(function(n){t(e&&Array.prototype.some.call(e,function(e){return t.equal(e,n)}),"[not] to be truthy")})},function(r){t.fail({diff:t.flags.not&&function(t,r,o,i){return r(e,Array.prototype.filter.call(e,function(t){return!n.some(function(e){return i(t,e)})}))}})})}),t.addAssertion("<string> [not] to begin with <string>",function(t,e,n){if(""===n)throw new Error("The '"+t.testDescription+"' assertion does not support a prefix of the empty string");t.withError(function(){t(e.substr(0,n.length),"[not] to equal",n)},function(r){t.fail({diff:function(r){if(r.inline=!1,t.flags.not)r.removedHighlight(n).text(e.substr(n.length));else{for(var o=0;e[o]===n[o];)o+=1;if(0===o)return null;r.partialMatch(e.substr(0,o)).text(e.substr(o))}return r}})})}),t.addAssertion("<string> [not] to end with <string>",function(t,e,n){if(""===n)throw new Error("The '"+t.testDescription+"' assertion does not support a suffix of the empty string");t.withError(function(){t(e.substr(-n.length),"[not] to equal",n)},function(r){t.fail({diff:function(r){if(r.inline=!1,t.flags.not)r.text(e.substr(0,e.length-n.length)).removedHighlight(n);else{for(var o=0;e[e.length-1-o]===n[n.length-1-o];)o+=1;if(0===o)return null;r.text(e.substr(0,e.length-o)).partialMatch(e.substr(e.length-o,e.length))}return r}})})}),t.addAssertion("<number> [not] to be finite",function(t,e){t(isFinite(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be infinite",function(t,e){t(!isNaN(e)&&!isFinite(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be within <number> <number>",function(t,e,n,r){t.argsOutput=function(t){t.appendInspected(n).text("..").appendInspected(r)},t(e>=n&&e<=r,"[not] to be truthy")}),t.addAssertion("<string> [not] to be within <string> <string>",function(t,e,n,r){t.argsOutput=function(t){t.appendInspected(n).text("..").appendInspected(r)},t(e>=n&&e<=r,"[not] to be truthy")}),t.addAssertion("<number> [not] to be (less than|below) <number>",function(t,e,n){t(e<n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be (less than|below) <string>",function(t,e,n){t(e<n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be less than or equal to <number>",function(t,e,n){t(e<=n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be less than or equal to <string>",function(t,e,n){t(e<=n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be (greater than|above) <number>",function(t,e,n){t(e>n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be (greater than|above) <string>",function(t,e,n){t(e>n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be greater than or equal to <number>",function(t,e,n){t(e>=n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be greater than or equal to <string>",function(t,e,n){t(e>=n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be positive",function(t,e){t(e,"[not] to be greater than",0)}),t.addAssertion("<number> [not] to be negative",function(t,e){t(e,"[not] to be less than",0)}),t.addAssertion("<any> to equal <any>",function(t,e,n){t.withError(function(){t(t.equal(n,e),"to be truthy")},function(r){t.fail({label:"should equal",diff:function(t,r){return r(e,n)}})})}),t.addAssertion("<any> not to equal <any>",function(t,e,n){t(t.equal(n,e),"to be falsy")}),t.addAssertion("<function> to error",function(t,e){return t.promise(function(){return e()}).then(function(){t.fail()},function(t){return t})}),t.addAssertion("<function> to error [with] <any>",function(t,e,n){return t(e,"to error").then(function(e){return t.errorMode="nested",t.withError(function(){return e.isUnexpected&&("string"==typeof n||i(n))?t(e,"to have message",n):t(e,"to satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> not to error",function(t,e){var n=!1;return t.promise(function(){try{return e()}catch(t){throw n=!0,t}}).caught(function(e){t.errorMode="nested",t.fail({output:function(t){t.error(n?"threw":"returned promise rejected with").error(": ").appendErrorMessage(e)},originalError:e})})}),t.addAssertion("<function> not to throw",function(t,e){var n=!1,r=void 0;try{e()}catch(t){r=t,n=!0}n&&(t.errorMode="nested",t.fail({output:function(t){t.error("threw: ").appendErrorMessage(r)},originalError:r}))}),t.addAssertion("<function> to (throw|throw error|throw exception)",function(t,e){try{e()}catch(t){return t}t.errorMode="nested",t.fail("did not throw")}),t.addAssertion("<function> to throw (a|an) <function>",function(t,e,n){var r=xp.getFunctionName(n);return r&&(t.argsOutput[0]=function(t){t.jsFunctionName(r)}),t.errorMode="nested",t(e,"to throw").then(function(e){t(e,"to be a",n)})}),t.addAssertion("<function> to (throw|throw error|throw exception) <any>",function(t,e,n){return t.errorMode="nested",t(e,"to throw").then(function(e){var r=e&&e._isUnexpected;return t.errorMode="nested",t.withError(function(){return r&&("string"==typeof n||i(n))?t(e.getErrorMessage("text").toString(),"to satisfy",n):t(e,"to satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> to have arity <number>",function(t,e,n){t(e.length,"to equal",n)}),t.addAssertion(["<object> to have values [exhaustively] satisfying <any>","<object> to have values [exhaustively] satisfying <assertion>","<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <any>","<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <assertion>"],function(t,e,n){t.errorMode="nested",t(e,"not to be empty"),t.errorMode="bubble";var r={};return t.subjectType.getKeys(e).forEach(function(e,o){r[e]="string"==typeof n?function(e){return t.shift(e)}:"function"==typeof n?function(e){return n._expectIt?n(e,t.context):n(e,o)}:n}),t.withError(function(){return t(e,"to [exhaustively] satisfy",r)},function(e){t.fail({message:function(e){e.append(t.standardErrorMessage(e.clone(),{compact:!0}))},diff:function(t){var n=e.getDiff({output:t});return n.inline=!0,n}})})}),t.addAssertion(["<array-like> to have items [exhaustively] satisfying <any>","<array-like> to have items [exhaustively] satisfying <assertion>","<array-like> to be an array whose items [exhaustively] satisfy <any>","<array-like> to be an array whose items [exhaustively] satisfy <assertion>"],function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.errorMode="nested",t(e,"not to be empty"),t.errorMode="bubble",t.withError(function(){return t.apply(void 0,[e,"to have values [exhaustively] satisfying"].concat(r))},function(e){t.fail({message:function(e){e.append(t.standardErrorMessage(e.clone(),{compact:!0}))},diff:function(t){var n=e.getDiff({output:t});return n.inline=!0,n}})})}),t.addAssertion(["<object> to have keys satisfying <any>","<object> to have keys satisfying <assertion>","<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <any>","<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <assertion>"],function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.errorMode="nested",t(e,"not to be empty"),t.errorMode="default";var i=t.subjectType.getKeys(e);return t.apply(void 0,[i,"to have items satisfying"].concat(r))}),t.addAssertion(["<object> to have a value [exhaustively] satisfying <any>","<object> to have a value [exhaustively] satisfying <assertion>"],function(t,e,n){t.errorMode="nested",t(e,"not to be empty"),t.errorMode="bubble";var r=t.findTypeOf(e),o=r.getKeys(e);return t.promise.any(o.map(function(o,i){var s=void 0;return s="string"==typeof n?function(e){return t.shift(e)}:"function"==typeof n?function(t){return n(t,i)}:n,t.promise(function(){return t(r.valueForKey(e,o),"to [exhaustively] satisfy",s)})})).caught(function(e){return t.fail(function(e){e.append(t.standardErrorMessage(e.clone(),{compact:!0}))})})}),t.addAssertion(["<array-like> to have an item [exhaustively] satisfying <any>","<array-like> to have an item [exhaustively] satisfying <assertion>"],function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.errorMode="nested",t(e,"not to be empty"),t.errorMode="bubble",t.withError(function(){return t.apply(void 0,[e,"to have a value [exhaustively] satisfying"].concat(r))},function(e){t.fail(function(e){e.append(t.standardErrorMessage(e.clone(),{compact:!0}))})})}),t.addAssertion("<object> to be canonical",function(t,e){var r=[];!function e(o){var i=void 0;for(i=0;i<r.length;i+=1)if(r[i]===o)return;if(o&&"object"===(void 0===o?"undefined":(0,n.default)(o))){var s=Object.keys(o);for(i=0;i<s.length-1;i+=1)t(s[i],"to be less than",s[i+1]);r.push(o),s.forEach(function(t){e(o[t])}),r.pop()}}(e)}),t.addAssertion("<Error> to have message <any>",function(t,e,n){return t.errorMode="nested",t(e.isUnexpected?e.getErrorMessage("text").toString():e.message,"to satisfy",n)}),t.addAssertion("<Error> to [exhaustively] satisfy <Error>",function(t,e,n){t(e.constructor,"to be",n.constructor);var r=t.argTypes[0].unwrap(n);return t.withError(function(){return t(e,"to [exhaustively] satisfy",r)},function(n){t.fail({diff:function(n,o){n.inline=!1;var i=t.subjectType.unwrap(e);return xp.wrapConstructorNameAroundOutput(o(i,r),e)}})})}),t.addAssertion("<Error> to [exhaustively] satisfy <object>",function(t,e,n){var r=t.argTypes[0],o=t.subjectType.getKeys(e),i=r.getKeys(n),s={};return o.concat(i).forEach(function(t){s[t]=e[t]}),t(s,"to [exhaustively] satisfy",n)}),t.addAssertion("<Error> to [exhaustively] satisfy <regexp|string>",function(t,e,n){return t(e.message,"to [exhaustively] satisfy",n)}),t.addAssertion("<Error> to [exhaustively] satisfy <any>",function(t,e,n){return t(e.message,"to [exhaustively] satisfy",n)}),t.addAssertion("<binaryArray> to [exhaustively] satisfy <expect.it>",function(t,e,n){return t.withError(function(){return n(e,t.context)},function(e){t.fail({diff:function(t,n,r,o){return t.inline=!1,t.appendErrorMessage(e)}})})}),t.addAssertion("<UnexpectedError> to [exhaustively] satisfy <function>",function(t,e,n){return t.promise(function(){return e.serializeMessage(t.outputFormat()),n(e)})}),t.addAssertion("<any|Error> to [exhaustively] satisfy <function>",function(t,e,n){return t.promise(function(){return n(e)})}),void 0!==gh&&t.addAssertion("<Buffer> [when] decoded as <string> <assertion?>",function(t,e,n){return t.shift(e.toString(n))}),t.addAssertion("<any> not to [exhaustively] satisfy [assertion] <any>",function(t,e,n){return t.promise(function(r,o){return t.promise(function(){return t(e,"to [exhaustively] satisfy [assertion]",n)}).then(function(){try{t.fail()}catch(t){o(t)}}).caught(function(t){t&&t._isUnexpected?r():o(t)})})}),t.addAssertion("<any> to [exhaustively] satisfy assertion <any>",function(t,e,n){return t.errorMode="bubble",t(e,"to [exhaustively] satisfy",n)}),t.addAssertion("<any> to [exhaustively] satisfy assertion <assertion>",function(t,e){return t.errorMode="bubble",t.shift()}),t.addAssertion("<any> to [exhaustively] satisfy [assertion] <expect.it>",function(t,e,n){return t.withError(function(){return n(e,t.context)},function(e){t.fail({diff:function(t){return t.inline=!1,t.appendErrorMessage(e)}})})}),t.addAssertion("<regexp> to [exhaustively] satisfy <regexp>",function(t,e,n){t(e,"to equal",n)}),t.addAssertion("<string> to [exhaustively] satisfy <regexp>",function(t,e,n){return t.errorMode="bubble",t(e,"to match",n)}),t.addAssertion("<function> to [exhaustively] satisfy <function>",function(t,e,n){t.errorMode="bubble",t(e,"to equal",n)}),t.addAssertion("<binaryArray> to [exhaustively] satisfy <binaryArray>",function(t,e,n){t.errorMode="bubble",t(e,"to equal",n)}),t.addAssertion("<any> to [exhaustively] satisfy <any>",function(t,e,n){t.errorMode="bubble",t(e,"to equal",n)}),t.addAssertion("<array-like> to [exhaustively] satisfy <array-like>",function(t,e,r){t.errorMode="bubble";var o=t.subjectType,i=o.getKeys(e),s=t.argTypes[0],a=s.getKeys(r).filter(function(t){return xp.numericalRegExp.test(t)||"symbol"===(void 0===t?"undefined":(0,n.default)(t))||void 0!==s.valueForKey(r,t)||void 0!==o.valueForKey(e,t)}),u={};return a.forEach(function(n){u[n]=t.promise(function(){var i=o.valueForKey(e,n),a=s.valueForKey(r,n);return t.findTypeOf(a).is("function")?a(i):t(i,"to [exhaustively] satisfy",a)})}),t.promise.all([t.promise(function(){var r={};o.getKeys(e).forEach(function(t){r[t]=1}),a.forEach(function(t){r[t]?delete r[t]:r[t]=2});var i=Object.keys(r).filter(function(t){return xp.numericalRegExp.test(t)||"symbol"===(void 0===t?"undefined":(0,n.default)(t))||void 0!==o.valueForKey(e,t)||2===r[t]});t(0===i.length,"to be truthy")}),t.promise.all(u)]).caught(function(){var n=0;return t.promise.settle(u).then(function(){var c=new Array(e.length);for(n=0;n<e.length;n+=1)c[n]=new Array(r.length),n<r.length&&(c[n][n]=u[n].isFulfilled()||u[n].reason());if(e.length>10||r.length>10){var f=[];for(n=0;n<e.length;n+=1){var l=u[n];n<r.length?f.push({type:l.isFulfilled()?"equal":"similar",value:e[n],expected:r[n],actualIndex:n,expectedIndex:n,last:n===Math.max(e.length,r.length)-1}):f.push({type:"remove",value:e[n],actualIndex:n,last:n===e.length-1})}for(n=e.length;n<r.length;n+=1)f.push({type:"insert",value:r[n],expectedIndex:n});return v(f)}var p=!1,h=xp.duplicateArrayLikeUsingType(e,o),d=xp.duplicateArrayLikeUsingType(r,s),y=!o.numericalPropertiesOnly&&xp.uniqueNonNumericalStringsAndSymbols(i,a),g=_d(h,d,function(e,n,r,o){c[r]=c[r]||[];var i=c[r][o];if(void 0!==i)return!0===i;var s=void 0;try{s=t(e,"to [exhaustively] satisfy",n)}catch(t){return ap(t),c[r][o]=t,!1}return s.then(function(){},function(){}),s.isPending()?(p=!0,!1):(c[r][o]=!0,!0)},function(t,e){return o.similar(t,e)},{includeNonNumericalProperties:y});return p?t.promise(function(n,i){Hd(e,r,function(e,n,r,o,i){c[r]=c[r]||[];var s=c[r][o];if(void 0!==s)return i(!0===s);t.promise(function(){return t(e,"to [exhaustively] satisfy",n)}).then(function(){c[r][o]=!0,i(!0)},function(t){c[r][o]=t,i(!1)})},function(t,e,n,r,i){i(o.similar(t,e))},y,n)}).then(v):v(g);function v(n){t.errorMode="default",t.fail({diff:function(r,i,s,a){r.inline=!0;var f=n.reduce(function(t,e,n){return"insert"===e.type?t:n},-1),l=o.prefix(r.clone(),e);r.append(l).nl(l.isEmpty()?0:1),o.indent&&r.indentLines();var p=xp.packArrows(n);r.arrowsAlongsideChangeOutputs(p,n.map(function(e,n){var i=o.delimiter(r.clone(),n,f+1),a=e.type;return"moveTarget"===a?r.clone():r.clone().block(function(){if("moveSource"===a){var n=o.property(r.clone(),e.actualIndex,s(e.value),!0);this.append(n).append(i).sp().error("// should be moved")}else if("insert"===a)this.annotationBlock(function(){if(t.findTypeOf(e.value).is("function"))this.error("missing: ").block(function(){this.omitSubject=void 0;var t=u[e.expectedIndex];t.isRejected()?this.appendErrorMessage(t.reason()):this.appendInspected(e.value)});else{var n=void 0!==e.actualIndex?e.actualIndex:e.expectedIndex,i=o.property(r.clone(),n,s(e.value),!0);this.error("missing ").append(i)}});else{var f=o.property(r.clone(),e.actualIndex,s(e.value),!0);this.block(function(){if("remove"===a)this.append(f).append(i).sp().error("// should be removed");else if("equal"===a)this.append(f).append(i);else{var t=c[e.actualIndex][e.expectedIndex],n=t&&!0!==t&&t.getDiff({output:r.clone()});n&&n.inline?this.append(n).append(i):this.append(f).append(i).sp().annotationBlock(function(){this.omitSubject=e.value;var r=t.getLabel();r?(this.error(r).sp().block(s(e.expected)),n&&this.nl(2).append(n)):this.appendErrorMessage(t)})}})}})})),o.indent&&r.outdentLines();var h=o.suffix(r.clone(),e);return r.nl(h.isEmpty()?0:1).append(h),r}})}})})}),t.addAssertion("<object> to [exhaustively] satisfy <object>",function(t,e,n){var r=t.argTypes[0],o=t.subjectType,i=o.is("array-like");if(e!==n){r.is("array-like")&&!i&&t.fail();var s={},a=r.getKeys(n),u=o.getKeys(e);return i||a.forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&-1===u.indexOf(t)&&u.push(t)}),a.forEach(function(i,a){s[i]=t.promise(function(){var s=o.valueForKey(e,i),a=r.valueForKey(n,i),u=t.findTypeOf(a);return u.is("expect.it")?(t.context.thisObject=e,a(s,t.context)):u.is("function")?a(s):t(s,"to [exhaustively] satisfy",a)})}),t.promise.all([t.promise(function(){if(t.flags.exhaustively){var i=a.filter(function(t){return!Object.prototype.hasOwnProperty.call(e,t)&&void 0!==o.valueForKey(e,t)}),s=a.filter(function(t){return void 0!==r.valueForKey(n,t)}),c=u.filter(function(t){return void 0!==o.valueForKey(e,t)});t(s.length-i.length,"to equal",c.length)}}),t.promise.all(s)]).caught(function(){return t.promise.settle(s).then(function(){t.fail({diff:function(i,a,c,f){i.inline=!0;var l=o.is("array-like"),p=r.getKeys(n),h=o.uniqueKeys(u,p).filter(function(t){return o.hasKey(e,t)||void 0!==r.valueForKey(n,t)}),d=o.prefix(i.clone(),e);i.append(d).nl(d.isEmpty()?0:1),o.indent&&i.indentLines(),h.forEach(function(a,f){var p=o.valueForKey(e,a),d=r.valueForKey(n,a);i.nl(f>0?1:0).i().block(function(){var y=void 0,g=i.clone(),v=void 0;Object.prototype.hasOwnProperty.call(s,a)&&s[a].isRejected()&&(v=s[a].reason());var m=o.is("array-like")&&!o.hasKey(e,a),_=!0;if(i.omitSubject=p,r.hasKey(n,a))if(o.hasKey(e,a)){if(v||m){var b=v&&v.getDiff({output:i});_=!b||b.inline,m&&i.error("// missing").sp(),b&&b.inline?y=b:"function"==typeof d?(_=!1,g.appendErrorMessage(v)):!b||b&&!b.inline?(g.error(v&&v.getLabel()||"should satisfy").sp().block(c(d)),b&&g.nl(2).append(b)):y=b}}else t.findTypeOf(d).is("function")?s[a].isRejected()?(i.error("// missing:").sp(),y=i.clone().appendErrorMessage(s[a].reason())):(i.error("// missing").sp(),y=i.clone().error("should satisfy").sp().block(c(n[a]))):(i.error("// missing").sp(),y=c(d));else t.flags.exhaustively?g.error("should be removed"):v=null;if(y||(y=m||!o.hasKey(e,a)?i.clone():c(p)),!(m||f>=u.length-1)){var w=o.delimiter(i.clone(),f,h.length);y.amend(w)}var E=!_&&i.preferredWidth<this.size().width+y.size().width+g.size().width;g.isEmpty()||(y.isEmpty()||(E?y.nl():y.sp()),y.annotationBlock(function(){this.append(g)})),_||(y=i.clone().block(y));var x=o.property(i.clone(),a,y,l);this.append(x)})}),o.indent&&i.outdentLines();var y=o.suffix(i.clone(),e);return i.nl(y.isEmpty()?0:1).append(y)}})})})}}),t.addAssertion("<wrapperObject> to [exhaustively] satisfy <wrapperObject>",function(t,e,n){var o=t.findCommonType(e,n);return t(o.is("wrapperObject"),"to be truthy"),t.withError(function(){return t(o.unwrap(e),"to [exhaustively] satisfy",o.unwrap(n))},function(n){t.fail({label:n.getLabel(),diff:r(n,o,e)})})}),t.addAssertion("<wrapperObject> to [exhaustively] satisfy <any>",function(t,e,n){var o=t.subjectType;return t.withError(function(){return t(o.unwrap(e),"to [exhaustively] satisfy",n)},function(n){t.fail({label:n.getLabel(),diff:r(n,o,e)})})}),t.addAssertion("<function> [when] called with <array-like> <assertion?>",function(t,e,n){t.errorMode="nested",t.argsOutput[0]=function(t){t.appendItems(n,", ")};var r=t.context.thisObject||null;return t.shift(e.apply(r,n))}),t.addAssertion("<function> [when] called <assertion?>",function(t,e){t.errorMode="nested";var n=t.context.thisObject||null;return t.shift(e.call(n))}),t.addAssertion(["<array-like> [when] passed as parameters to [async] <function> <assertion?>","<array-like> [when] passed as parameters to [constructor] <function> <assertion?>"],function(t,n,r){t.errorMode="nested";var o=n;return t.flags.async?t.promise(function(n){o=[].concat((0,e.default)(o),[n(function(e,n){return t(e,"to be falsy"),t.shift(n)})]),r.apply(void 0,(0,e.default)(o))}):t.shift(t.flags.constructor?a(r,o):r.apply(void 0,(0,e.default)(o)))}),t.addAssertion(["<any> [when] passed as parameter to [async] <function> <assertion?>","<any> [when] passed as parameter to [constructor] <function> <assertion?>"],function(t,n,r){t.errorMode="nested";var o=[n];return t.flags.async?t.promise(function(n){o=[].concat((0,e.default)(o),[n(function(e,n){return t(e,"to be falsy"),t.shift(n)})]),r.apply(void 0,(0,e.default)(o))}):t.shift(t.flags.constructor?a(r,o):r.apply(void 0,(0,e.default)(o)))}),t.addAssertion(["<array-like> [when] sorted [numerically] <assertion?>","<array-like> [when] sorted by <function> <assertion?>"],function(t,e,n){return t.flags.numerically&&(n=function(t,e){return t-e}),t.shift(Array.prototype.slice.call(e).sort("function"==typeof n?n:void 0))}),t.addAssertion("<Promise> to be rejected",function(t,e){return t.errorMode="nested",t.promise(function(){return e}).then(function(n){t.fail(function(t){t.appendInspected(e).sp().text("unexpectedly fulfilled"),void 0!==n&&t.sp().text("with").sp().appendInspected(n)})},function(t){return t})}),t.addAssertion("<function> to be rejected",function(t,e){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be rejected")}),t.addAssertion(["<Promise> to be rejected with <any>","<Promise> to be rejected with error [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(e,"to be rejected").tap(function(e){return t.withError(function(){return e&&e._isUnexpected&&("string"==typeof n||i(n))?t(e,"to have message",n):t(e,"to [exhaustively] satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion(["<function> to be rejected with <any>","<function> to be rejected with error [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be rejected with error [exhaustively] satisfying",n)}),t.addAssertion("<Promise> to be fulfilled",function(t,e){return t.errorMode="nested",t.promise(function(){return e}).caught(function(n){t.fail({output:function(t){t.appendInspected(e).sp().text("unexpectedly rejected"),void 0!==n&&t.sp().text("with").sp().appendInspected(n)},originalError:n})})}),t.addAssertion("<function> to be fulfilled",function(t,e){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be fulfilled")}),t.addAssertion(["<Promise> to be fulfilled with <any>","<Promise> to be fulfilled with value [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(e,"to be fulfilled").tap(function(e){return t(e,"to [exhaustively] satisfy",n)})}),t.addAssertion(["<function> to be fulfilled with <any>","<function> to be fulfilled with value [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be fulfilled with value [exhaustively] satisfying",n)}),t.addAssertion("<Promise> when rejected <assertion>",function(t,e,n){return t.errorMode="nested",t.promise(function(){return e}).then(function(r){"string"==typeof n&&(t.argsOutput=function(e){e.error(n);var r=t.args.slice(1);r.length>0&&e.sp().appendItems(r,", ")}),t.fail(function(t){t.appendInspected(e).sp().text("unexpectedly fulfilled"),void 0!==r&&t.sp().text("with").sp().appendInspected(r)})},function(e){return t.withError(function(){return t.shift(e)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> when rejected <assertion>",function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.errorMode="nested",t.apply(void 0,[t.promise(function(){return e()}),"when rejected"].concat(r))}),t.addAssertion("<Promise> when fulfilled <assertion>",function(t,e,n){return t.errorMode="nested",t.promise(function(){return e}).then(function(e){return t.shift(e)},function(r){t.argsOutput=function(e){e.error(n);var r=t.args.slice(1);r.length>0&&e.sp().appendItems(r,", ")},t.fail({output:function(t){t.appendInspected(e).sp().text("unexpectedly rejected"),void 0!==r&&t.sp().text("with").sp().appendInspected(r)},originalError:r})})}),t.addAssertion("<function> when fulfilled <assertion>",function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.errorMode="nested",t.apply(void 0,[t.promise(function(){return e()}),"when fulfilled"].concat(r))}),t.addAssertion("<function> to call the callback",function(t,e){return t.errorMode="nested",t.promise(function(n){var r=!1,o=!1,i=void 0;var s=n(function(){return o&&t.fail(function(){this.error("The callback was called twice")}),i});if(e(function(){if(i)o=!0;else{for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];i=Array.prototype.slice.call(e)}r&&setTimeout(s,0)}),r=!0,i)return s()})}),t.addAssertion("<function> to call the callback without error",function(t,e){return t(e,"to call the callback").then(function(e){var n=e[0];if(!n)return e.slice(1);t.errorMode="nested",t.fail({message:function(t){t.error("called the callback with: "),n.getErrorMessage?t.appendErrorMessage(n):t.appendInspected(n)}})})}),t.addAssertion("<function> to call the callback with error",function(t,e){return t(e,"to call the callback").spread(function(e){return t(e,"to be truthy"),e})}),t.addAssertion("<function> to call the callback with error <any>",function(t,e,n){return t(e,"to call the callback with error").tap(function(e){return t.errorMode="nested",e&&e._isUnexpected&&("string"==typeof n||i(n))?t(e,"to have message",n):t(e,"to satisfy",n)})})}}),Yd=e(Wd),$d=Object.freeze({default:Yd,__moduleExports:Wd}),Vd=Yp&&Wp||Yp,Jd=Zp&&Xp||Zp,Qd=Pd&&Sd||Pd,Gd=$d&&Yd||$d,Xd=n(function(t){t.exports=Vd.create().use(Jd).use(Qd).use(Gd),Wl.prototype.inspect=function(){return t.exports.createOutput(au.defaultFormat).appendInspected(this).toString()}});return Xd});
//# sourceMappingURL=unexpected.js.map
