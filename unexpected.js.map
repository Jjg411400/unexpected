{"version":3,"file":"unexpected.js","sources":["node_modules/process-es6/browser.js","node_modules/magicpen/lib/duplicateText.js","node_modules/magicpen/lib/flattenBlocksInLines.js","node_modules/magicpen/lib/TextSerializer.js","node_modules/magicpen/lib/HtmlSerializer.js","node_modules/color-diff/lib/diff.js","node_modules/color-diff/lib/convert.js","node_modules/color-diff/lib/palette.js","node_modules/magicpen/lib/AnsiSerializer.js","node_modules/magicpen/lib/ColoredConsoleSerializer.js","node_modules/unexpected-bluebird/js/main/util.js","node_modules/unexpected-bluebird/js/main/queue.js","node_modules/unexpected-bluebird/js/main/async.js","node_modules/unexpected-bluebird/js/main/errors.js","node_modules/unexpected-bluebird/js/main/promise_resolver.js","node_modules/unexpected-bluebird/js/main/bluebird.js","lib/makePromise.js","lib/UnexpectedError.js","lib/notifyPendingPromise.js","lib/createWrappedExpectProto.js","lib/Unexpected.js","node_modules/buffer-es6/base64.js","node_modules/buffer-es6/ieee754.js","node_modules/buffer-es6/index.js","node_modules/arraydiff-papandreou/index.js","node_modules/array-changes/lib/arrayChanges.js","node_modules/detect-indent/index.js","node_modules/arraydiff-async/index.js","node_modules/array-changes-async/lib/arrayChanges.js","lib/AssertionString.js","lib/createStandardErrorMessage.js","node_modules/greedy-interval-packer/lib/intersection.js","node_modules/greedy-interval-packer/lib/byDescStartAndLength.js","node_modules/greedy-interval-packer/lib/greedyIntervalPacker.js","lib/utils.js","node_modules/rollup-plugin-node-globals/src/global.js","node_modules/rollup-plugin-node-globals/src/browser.js","node_modules/magicpen/lib/utils.js","node_modules/magicpen/lib/rgbRegexp.js","node_modules/magicpen/lib/cssStyles.js","node_modules/supports-color/index.js","node_modules/magicpen/lib/themeMapper.js","node_modules/color-diff/lib/index.js","node_modules/ansi-styles/index.js","node_modules/magicpen/lib/MagicPen.js","node_modules/leven/index.js","node_modules/unexpected-bluebird/js/main/es5.js","node_modules/unexpected-bluebird/js/main/schedule.js","node_modules/unexpected-bluebird/js/main/thenables.js","node_modules/unexpected-bluebird/js/main/promise_array.js","node_modules/unexpected-bluebird/js/main/captured_trace.js","node_modules/unexpected-bluebird/js/main/debuggability.js","node_modules/unexpected-bluebird/js/main/context.js","node_modules/unexpected-bluebird/js/main/catch_filter.js","node_modules/unexpected-bluebird/js/main/progress.js","node_modules/unexpected-bluebird/js/main/method.js","node_modules/unexpected-bluebird/js/main/bind.js","node_modules/unexpected-bluebird/js/main/finally.js","node_modules/unexpected-bluebird/js/main/direct_resolve.js","node_modules/unexpected-bluebird/js/main/synchronous_inspection.js","node_modules/unexpected-bluebird/js/main/join.js","node_modules/unexpected-bluebird/js/main/map.js","node_modules/unexpected-bluebird/js/main/cancel.js","node_modules/unexpected-bluebird/js/main/using.js","node_modules/unexpected-bluebird/js/main/generators.js","node_modules/unexpected-bluebird/js/main/nodeify.js","node_modules/unexpected-bluebird/js/main/call_get.js","node_modules/unexpected-bluebird/js/main/props.js","node_modules/unexpected-bluebird/js/main/race.js","node_modules/unexpected-bluebird/js/main/reduce.js","node_modules/unexpected-bluebird/js/main/settle.js","node_modules/unexpected-bluebird/js/main/some.js","node_modules/unexpected-bluebird/js/main/promisify.js","node_modules/unexpected-bluebird/js/main/any.js","node_modules/unexpected-bluebird/js/main/each.js","node_modules/unexpected-bluebird/js/main/timers.js","node_modules/unexpected-bluebird/js/main/filter.js","node_modules/unexpected-bluebird/js/main/promise.js","lib/workQueue.js","lib/useFullStackTrace.js","lib/oathbreaker.js","lib/throwIfNonUnexpectedError.js","lib/addAdditionalPromiseMethods.js","lib/isPendingPromise.js","lib/defaultDepth.js","lib/makeDiffResultBackwardsCompatible.js","node_modules/diff/diff.js","lib/specialCharRegExp.js","lib/styles.js","node_modules/buffer-es6/isArray.js","node_modules/number-is-nan/index.js","node_modules/is-finite/index.js","node_modules/repeating/index.js","lib/types.js","lib/assertions.js","lib/index.js"],"sourcesContent":["// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","var whitespaceCacheLength = 256;\nvar whitespaceCache = [''];\nfor (var i = 1; i <= whitespaceCacheLength; i += 1) {\n    whitespaceCache[i] = whitespaceCache[i - 1] + ' ';\n}\n\nfunction duplicateText(content, times) {\n    if (times < 0) {\n        return '';\n    }\n\n    var result = '';\n\n    if (content === ' ') {\n        if (times <= whitespaceCacheLength) {\n            return whitespaceCache[times];\n        }\n\n        var segment = whitespaceCache[whitespaceCacheLength];\n        var numberOfSegments = Math.floor(times / whitespaceCacheLength);\n        for (var i = 0; i < numberOfSegments; i += 1) {\n            result += segment;\n        }\n        result += whitespaceCache[times % whitespaceCacheLength];\n    } else {\n        for (var j = 0; j < times; j += 1) {\n            result += content;\n        }\n    }\n\n    return result;\n}\n\nmodule.exports = duplicateText;\n","var utils = require('./utils');\nvar duplicateText = require('./duplicateText');\n\nfunction createPadding(length) {\n    return { style: 'text', args: { content: duplicateText(' ', length), styles: [] } };\n}\n\nfunction lineContainsBlocks(line) {\n    return line.some(function (outputEntry) {\n        return outputEntry.style === 'block' ||\n            (outputEntry.style === 'text' && String(outputEntry.args.content).indexOf('\\n') !== -1);\n    });\n}\n\nfunction flattenBlocksInOutputEntry(outputEntry) {\n    switch (outputEntry.style) {\n    case 'text': return String(outputEntry.args.content).split('\\n').map(function (line) {\n        if (line === '') {\n            return [];\n        }\n\n        var args = { content: line, styles: outputEntry.args.styles };\n        return [{ style: 'text', args: args }];\n    });\n    case 'block': return flattenBlocksInLines(outputEntry.args);\n    default: return [];\n    }\n}\n\nfunction flattenBlocksInLine(line) {\n    if (line.length === 0) {\n       return [[]];\n    }\n\n    if (!lineContainsBlocks(line)) {\n        return [line];\n    }\n\n    var result = [];\n    var linesLengths = [];\n\n    var startIndex = 0;\n    line.forEach(function (outputEntry, blockIndex) {\n        var blockLines = flattenBlocksInOutputEntry(outputEntry);\n\n        var blockLinesLengths = blockLines.map(function (line) {\n            return utils.calculateLineSize(line).width;\n        });\n\n        var longestLineLength = Math.max.apply(null, blockLinesLengths);\n\n        blockLines.forEach(function (blockLine, index) {\n            var resultLine = result[index];\n\n            if (!resultLine) {\n                result[index] = resultLine = [];\n                linesLengths[index] = 0;\n            }\n\n            if (blockLine.length) {\n                var paddingLength = startIndex - linesLengths[index];\n                resultLine.push(createPadding(paddingLength));\n                Array.prototype.push.apply(resultLine, blockLine);\n                linesLengths[index] = startIndex + blockLinesLengths[index];\n            }\n        });\n\n        startIndex += longestLineLength;\n    }, this);\n    return result;\n}\n\nfunction flattenBlocksInLines(lines) {\n    var result = [];\n    lines.forEach(function (line) {\n        flattenBlocksInLine(line).forEach(function (line) {\n            result.push(line);\n        });\n    });\n    return result;\n}\n\nmodule.exports = flattenBlocksInLines;\n","var flattenBlocksInLines = require('./flattenBlocksInLines');\n\nfunction TextSerializer() {}\n\nTextSerializer.prototype.format = 'text';\n\nTextSerializer.prototype.serialize = function (lines) {\n    lines = flattenBlocksInLines(lines);\n    return lines.map(this.serializeLine, this).join('\\n');\n};\n\nTextSerializer.prototype.serializeLine = function (line) {\n    return line.map(function (outputEntry) {\n        return this[outputEntry.style] ?\n            String(this[outputEntry.style](outputEntry.args)) :\n            '';\n    }, this).join('');\n};\n\nTextSerializer.prototype.text = function (options) {\n    return String(options.content);\n};\n\nTextSerializer.prototype.block = function (content) {\n    return this.serialize(content);\n};\n\nTextSerializer.prototype.raw = function (options) {\n    return String(options.content(this));\n};\n\n\nmodule.exports = TextSerializer;\n","var cssStyles = require('./cssStyles');\nvar rgbRegexp = require('./rgbRegexp');\nvar themeMapper = require('./themeMapper');\n\nfunction HtmlSerializer(theme) {\n    this.theme = theme;\n}\n\nHtmlSerializer.prototype.format = 'html';\n\nHtmlSerializer.prototype.serialize = function (lines) {\n    return '<div style=\"font-family: monospace; white-space: nowrap\">' + this.serializeLines(lines) + '</div>';\n};\n\nHtmlSerializer.prototype.serializeLines = function (lines) {\n    return lines.map(function (line) {\n        return '<div>' + (this.serializeLine(line).join('') || '&nbsp;') + '</div>';\n    }, this).join('');\n};\n\nHtmlSerializer.prototype.serializeLine = function (line) {\n    return line.map(function (outputEntry) {\n        return this[outputEntry.style] ?\n            this[outputEntry.style](outputEntry.args) :\n            '';\n    }, this);\n};\n\nHtmlSerializer.prototype.block = function (content) {\n    return '<div style=\"display: inline-block; vertical-align: top\">' +\n        this.serializeLines(content) +\n        '</div>';\n};\n\nHtmlSerializer.prototype.text = function (options) {\n    var content = String(options.content);\n\n    if (content === '') {\n        return '';\n    }\n\n    content = content\n        .replace(/&/g, '&amp;')\n        .replace(/ /g, '&nbsp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;');\n\n\n    var styles = themeMapper(this.theme, options.styles);\n\n    if (styles.length > 0) {\n        var styleProperties = [];\n        for (var j = 0; j < styles.length; j += 1) {\n            var styleName = styles[j];\n            if (rgbRegexp.test(styleName)) {\n                if (styleName.substring(0, 2) === 'bg') {\n                    styleProperties.push('background-color: ' + styleName.substring(2));\n                } else {\n                    styleProperties.push('color: ' + styleName);\n                }\n            } else if (cssStyles[styleName]) {\n                styleProperties.push(cssStyles[styleName]);\n            }\n\n        }\n\n        if (styleProperties.length > 0) {\n            content = '<span style=\"' + styleProperties.join('; ') + '\">' + content + '</span>';\n        }\n    }\n    return content;\n};\n\nHtmlSerializer.prototype.raw = function (options) {\n    return String(options.content(this));\n};\n\nmodule.exports = HtmlSerializer;\n","/**\n * @author Markus Ekholm\n * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2015, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the <organization> nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.ciede2000 = ciede2000;\n\n/**\n* IMPORTS\n*/\nvar sqrt = Math.sqrt;\nvar pow = Math.pow;\nvar cos = Math.cos;\nvar atan2 = Math.atan2;\nvar sin = Math.sin;\nvar abs = Math.abs;\nvar exp = Math.exp;\nvar PI = Math.PI;\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns diff between c1 and c2 using the CIEDE2000 algorithm\n* @param {labcolor} c1    Should have fields L,a,b\n* @param {labcolor} c2    Should have fields L,a,b\n* @return {float}   Difference between c1 and c2\n*/\nfunction ciede2000(c1,c2)\n{\n  /**\n   * Implemented as in \"The CIEDE2000 Color-Difference Formula:\n   * Implementation Notes, Supplementary Test Data, and Mathematical Observations\"\n   * by Gaurav Sharma, Wencheng Wu and Edul N. Dalal.\n   */\n\n  // Get L,a,b values for color 1\n  var L1 = c1.L;\n  var a1 = c1.a;\n  var b1 = c1.b;\n\n  // Get L,a,b values for color 2\n  var L2 = c2.L;\n  var a2 = c2.a;\n  var b2 = c2.b;\n\n  // Weight factors\n  var kL = 1;\n  var kC = 1;\n  var kH = 1;\n\n  /**\n   * Step 1: Calculate C1p, C2p, h1p, h2p\n   */\n  var C1 = sqrt(pow(a1, 2) + pow(b1, 2)) //(2)\n  var C2 = sqrt(pow(a2, 2) + pow(b2, 2)) //(2)\n\n  var a_C1_C2 = (C1+C2)/2.0;             //(3)\n\n  var G = 0.5 * (1 - sqrt(pow(a_C1_C2 , 7.0) /\n                          (pow(a_C1_C2, 7.0) + pow(25.0, 7.0)))); //(4)\n\n  var a1p = (1.0 + G) * a1; //(5)\n  var a2p = (1.0 + G) * a2; //(5)\n\n  var C1p = sqrt(pow(a1p, 2) + pow(b1, 2)); //(6)\n  var C2p = sqrt(pow(a2p, 2) + pow(b2, 2)); //(6)\n\n  var hp_f = function(x,y) //(7)\n  {\n    if(x== 0 && y == 0) return 0;\n    else{\n      var tmphp = degrees(atan2(x,y));\n      if(tmphp >= 0) return tmphp\n      else           return tmphp + 360;\n    }\n  }\n\n  var h1p = hp_f(b1, a1p); //(7)\n  var h2p = hp_f(b2, a2p); //(7)\n\n  /**\n   * Step 2: Calculate dLp, dCp, dHp\n   */\n  var dLp = L2 - L1; //(8)\n  var dCp = C2p - C1p; //(9)\n\n  var dhp_f = function(C1, C2, h1p, h2p) //(10)\n  {\n    if(C1*C2 == 0)               return 0;\n    else if(abs(h2p-h1p) <= 180) return h2p-h1p;\n    else if((h2p-h1p) > 180)     return (h2p-h1p)-360;\n    else if((h2p-h1p) < -180)    return (h2p-h1p)+360;\n    else                         throw(new Error());\n  }\n  var dhp = dhp_f(C1,C2, h1p, h2p); //(10)\n  var dHp = 2*sqrt(C1p*C2p)*sin(radians(dhp)/2.0); //(11)\n\n  /**\n   * Step 3: Calculate CIEDE2000 Color-Difference\n   */\n  var a_L = (L1 + L2) / 2.0; //(12)\n  var a_Cp = (C1p + C2p) / 2.0; //(13)\n\n  var a_hp_f = function(C1, C2, h1p, h2p) { //(14)\n    if(C1*C2 == 0)                                      return h1p+h2p\n    else if(abs(h1p-h2p)<= 180)                         return (h1p+h2p)/2.0;\n    else if((abs(h1p-h2p) > 180) && ((h1p+h2p) < 360))  return (h1p+h2p+360)/2.0;\n    else if((abs(h1p-h2p) > 180) && ((h1p+h2p) >= 360)) return (h1p+h2p-360)/2.0;\n    else                                                throw(new Error());\n  }\n  var a_hp = a_hp_f(C1,C2,h1p,h2p); //(14)\n  var T = 1-0.17*cos(radians(a_hp-30))+0.24*cos(radians(2*a_hp))+\n    0.32*cos(radians(3*a_hp+6))-0.20*cos(radians(4*a_hp-63)); //(15)\n  var d_ro = 30 * exp(-(pow((a_hp-275)/25,2))); //(16)\n  var RC = sqrt((pow(a_Cp, 7.0)) / (pow(a_Cp, 7.0) + pow(25.0, 7.0)));//(17)\n  var SL = 1 + ((0.015 * pow(a_L - 50, 2)) /\n                sqrt(20 + pow(a_L - 50, 2.0)));//(18)\n  var SC = 1 + 0.045 * a_Cp;//(19)\n  var SH = 1 + 0.015 * a_Cp * T;//(20)\n  var RT = -2 * RC * sin(radians(2 * d_ro));//(21)\n  var dE = sqrt(pow(dLp /(SL * kL), 2) + pow(dCp /(SC * kC), 2) +\n                pow(dHp /(SH * kH), 2) + RT * (dCp /(SC * kC)) *\n                (dHp / (SH * kH))); //(22)\n  return dE;\n}\n\n/**\n * INTERNAL FUNCTIONS\n */\nfunction degrees(n) { return n*(180/PI); }\nfunction radians(n) { return n*(PI/180); }\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n","/**\n * @author Markus Ekholm\n * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2015, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the <organization> nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.rgb_to_lab = rgb_to_lab;\n\n/**\n* IMPORTS\n*/\nvar pow  = Math.pow;\nvar sqrt = Math.sqrt;\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns c converted to labcolor.\n* @param {rgbcolor} c should have fields R,G,B\n* @return {labcolor} c converted to labcolor\n*/\nfunction rgb_to_lab(c)\n{\n  return xyz_to_lab(rgb_to_xyz(c))\n}\n\n/**\n* Returns c converted to xyzcolor.\n* @param {rgbcolor} c should have fields R,G,B\n* @return {xyzcolor} c converted to xyzcolor\n*/\nfunction rgb_to_xyz(c)\n{\n  // Based on http://www.easyrgb.com/index.php?X=MATH&H=02\n  var R = ( c.R / 255 );\n  var G = ( c.G / 255 );\n  var B = ( c.B / 255 );\n\n  if ( R > 0.04045 ) R = pow(( ( R + 0.055 ) / 1.055 ),2.4);\n  else               R = R / 12.92;\n  if ( G > 0.04045 ) G = pow(( ( G + 0.055 ) / 1.055 ),2.4);\n  else               G = G / 12.92;\n  if ( B > 0.04045 ) B = pow(( ( B + 0.055 ) / 1.055 ), 2.4);\n  else               B = B / 12.92;\n\n  R *= 100;\n  G *= 100;\n  B *= 100;\n\n  // Observer. = 2°, Illuminant = D65\n  var X = R * 0.4124 + G * 0.3576 + B * 0.1805;\n  var Y = R * 0.2126 + G * 0.7152 + B * 0.0722;\n  var Z = R * 0.0193 + G * 0.1192 + B * 0.9505;\n  return {'X' : X, 'Y' : Y, 'Z' : Z};\n}\n\n/**\n* Returns c converted to labcolor.\n* @param {xyzcolor} c should have fields X,Y,Z\n* @return {labcolor} c converted to labcolor\n*/\nfunction xyz_to_lab(c)\n{\n  // Based on http://www.easyrgb.com/index.php?X=MATH&H=07\n  var ref_Y = 100.000;\n  var ref_Z = 108.883;\n  var ref_X = 95.047; // Observer= 2°, Illuminant= D65\n  var Y = c.Y / ref_Y;\n  var Z = c.Z / ref_Z;\n  var X = c.X / ref_X;\n  if ( X > 0.008856 ) X = pow(X, 1/3);\n  else                X = ( 7.787 * X ) + ( 16 / 116 );\n  if ( Y > 0.008856 ) Y = pow(Y, 1/3);\n  else                Y = ( 7.787 * Y ) + ( 16 / 116 );\n  if ( Z > 0.008856 ) Z = pow(Z, 1/3);\n  else                Z = ( 7.787 * Z ) + ( 16 / 116 );\n  var L = ( 116 * Y ) - 16;\n  var a = 500 * ( X - Y );\n  var b = 200 * ( Y - Z );\n  return {'L' : L , 'a' : a, 'b' : b};\n}\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n","/**\n * @author Markus Ekholm\n * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2015, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the <organization> nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.map_palette     = map_palette;\nexports.palette_map_key = palette_map_key;\n\n/**\n* IMPORTS\n*/\nvar color_diff    = require('./diff');\nvar color_convert = require('./convert');\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns the hash key used for a {rgbcolor} in a {palettemap}\n* @param {rgbcolor} c should have fields R,G,B\n* @return {string}\n*/\nfunction palette_map_key(c)\n{\n  return \"R\" + c.R + \"B\" + c.B + \"G\" + c.G;\n}\n\n/**\n* Returns a mapping from each color in a to the closest color in b\n* @param [{rgbcolor}] a each element should have fields R,G,B\n* @param [{rgbcolor}] b each element should have fields R,G,B\n* @param 'type' should be the string 'closest' or 'furthest'\n* @return {palettemap}\n*/\nfunction map_palette(a, b, type)\n{\n  var c = {};\n  type = type || 'closest';\n  for (var idx1 = 0; idx1 < a.length; idx1 += 1){\n    var color1 = a[idx1];\n    var best_color      = undefined;\n    var best_color_diff = undefined;\n    for (var idx2 = 0; idx2 < b.length; idx2 += 1)\n    {\n      var color2 = b[idx2];\n      var current_color_diff = diff(color1,color2);\n\n      if((best_color == undefined) || ((type === 'closest') && (current_color_diff < best_color_diff)))\n      {\n        best_color      = color2;\n        best_color_diff = current_color_diff;\n        continue;\n      }\n      if((type === 'furthest') && (current_color_diff > best_color_diff))\n      {\n        best_color      = color2;\n        best_color_diff = current_color_diff;\n        continue;\n      }\n    }\n    c[palette_map_key(color1)] = best_color;\n  }\n  return c;\n}\n\n/**\n * INTERNAL FUNCTIONS\n */\n\nfunction diff(c1,c2)\n{\n  c1 = color_convert.rgb_to_lab(c1);\n  c2 = color_convert.rgb_to_lab(c2);\n  return color_diff.ciede2000(c1,c2);\n}\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n","var utils = require('./utils');\nvar TextSerializer = require('./TextSerializer');\nvar colorDiff = require('color-diff');\nvar rgbRegexp = require('./rgbRegexp');\nvar themeMapper = require('./themeMapper');\n\nvar cacheSize = 0;\nvar maxColorCacheSize = 1024;\n\nvar ansiStyles = utils.extend({}, require('ansi-styles'));\nObject.keys(ansiStyles).forEach(function (styleName) {\n    ansiStyles[styleName.toLowerCase()] = ansiStyles[styleName];\n});\n\nfunction AnsiSerializer(theme) {\n    this.theme = theme;\n}\n\nAnsiSerializer.prototype = new TextSerializer();\n\nAnsiSerializer.prototype.format = 'ansi';\n\nvar colorPalettes = {\n    16: {\n        '#000000': 'black',\n        '#ff0000': 'red',\n        '#00ff00': 'green',\n        '#ffff00': 'yellow',\n        '#0000ff': 'blue',\n        '#ff00ff': 'magenta',\n        '#00ffff': 'cyan',\n        '#ffffff': 'white',\n        '#808080': 'gray'\n    },\n    256: {}\n};\n\nvar diffPalettes = {};\n\nfunction convertColorToObject(color) {\n    if (color.length < 6) {\n        // Allow CSS shorthand\n        color = color.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i, '$1$1$2$2$3$3');\n    }\n    // Split color into red, green, and blue components\n    var hexMatch = color.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);\n    if (hexMatch) {\n        return {\n            R: parseInt(hexMatch[1], 16),\n            G: parseInt(hexMatch[2], 16),\n            B: parseInt(hexMatch[3], 16)\n        };\n    }\n}\n\nfunction toHexColor(colorObject) {\n    var hexString = (Math.round(colorObject.R) * 0x10000 + Math.round(colorObject.G) * 0x100 + Math.round(colorObject.B)).toString(16);\n    return '#' + ('00000'.substr(0, 6 - hexString.length)) + hexString;\n}\n\nfunction firstUp(text) {\n    return text.substring(0, 1).toUpperCase() + text.substring(1);\n}\n\ndiffPalettes[16] = Object.keys(colorPalettes[16]).map(convertColorToObject);\ndiffPalettes['bg16'] = Object.keys(colorPalettes[16]).filter(function (color) {\n    return color !== \"#808080\";\n}).map(convertColorToObject);\ndiffPalettes[256] = [].concat(diffPalettes[16]);\nvar nextAnsiColorNumber = 16;\nfunction registerNext256PaletteEntry(obj) {\n    diffPalettes[256].push(obj);\n    colorPalettes[256][toHexColor(obj)] = nextAnsiColorNumber;\n    nextAnsiColorNumber += 1;\n}\n\nfor (var r = 0 ; r < 6 ; r += 1) {\n    for (var g = 0 ; g < 6 ; g += 1) {\n        for (var b = 0 ; b < 6 ; b += 1) {\n            registerNext256PaletteEntry({\n                R: Math.round(r * 256 / 6),\n                G: Math.round(g * 256 / 6),\n                B: Math.round(b * 256 / 6)\n            });\n        }\n    }\n}\n\n[\n    0x08, 0x12, 0x1c, 0x26, 0x30, 0x3a, 0x44, 0x4e, 0x58, 0x60, 0x66, 0x76,\n    0x80, 0x8a, 0x94, 0x9e, 0xa8, 0xb2, 0xbc, 0xc6, 0xd0, 0xda, 0xe4, 0xee\n].forEach(function (value) {\n    registerNext256PaletteEntry({R: value, G: value, B: value});\n});\n\nAnsiSerializer.prototype.text = function (options) {\n    var content = String(options.content);\n    if (content === '') {\n        return '';\n    }\n\n    var styles = themeMapper(this.theme, options.styles);\n\n    if (styles.length > 0) {\n        for (var i = styles.length -1; i >= 0; i -= 1) {\n            var styleName = styles[i];\n\n            if (ansiStyles[styleName]) {\n                content = ansiStyles[styleName].open + content + ansiStyles[styleName].close;\n            } else if (rgbRegexp.test(styleName)) {\n                var originalStyleName = styleName;\n                var isBackgroundColor = styleName.substring(0, 2) === 'bg';\n                var colorName = isBackgroundColor ? styleName.substring(2) : styleName;\n\n                var color16Hex = toHexColor(colorDiff.closest(convertColorToObject(colorName),\n                                                              diffPalettes[isBackgroundColor ? 'bg16' : 16]));\n                var closestColor16 = colorPalettes[16][color16Hex];\n\n                var color256Hex = toHexColor(colorDiff.closest(convertColorToObject(colorName), diffPalettes[256]));\n                var closest256ColorIndex = colorPalettes[256][color256Hex];\n\n                if (isBackgroundColor) {\n                    styleName = 'bg' + firstUp(closestColor16);\n                } else {\n                    styleName = closestColor16;\n                }\n\n                var open = ansiStyles[styleName].open;\n                var close = ansiStyles[styleName].close;\n                if (color16Hex !== color256Hex) {\n                    open += '\\x1b[' + (isBackgroundColor ? 48 : 38) + ';5;' + closest256ColorIndex + 'm';\n                }\n                if (cacheSize < maxColorCacheSize) {\n                    ansiStyles[originalStyleName] = {open: open, close: close};\n                    cacheSize += 1;\n                }\n\n                content = open + content + close;\n            }\n        }\n    }\n\n    return content;\n};\n\nmodule.exports = AnsiSerializer;\n","var cssStyles = require('./cssStyles');\nvar flattenBlocksInLines = require('./flattenBlocksInLines');\nvar rgbRegexp = require('./rgbRegexp');\nvar themeMapper = require('./themeMapper');\n\nfunction ColoredConsoleSerializer(theme) {\n    this.theme = theme;\n}\n\nColoredConsoleSerializer.prototype.format = 'coloredConsole';\n\nColoredConsoleSerializer.prototype.serialize = function (lines) {\n    var formatString = '';\n    var styleStrings = [];\n    this.serializeLines(flattenBlocksInLines(lines)).forEach(function (entry) {\n        if (entry) {\n            formatString += entry[0];\n            if (entry.length > 1) {\n                styleStrings.push(entry[1]);\n            }\n        }\n    });\n    return [formatString].concat(styleStrings);\n};\n\nColoredConsoleSerializer.prototype.serializeLines = function (lines) {\n    var result = [];\n    lines.forEach(function (line, i) {\n        if (i > 0) {\n            result.push(['%c\\n ', '']);\n        }\n        Array.prototype.push.apply(result, this.serializeLine(line));\n    }, this);\n    return result;\n};\n\nColoredConsoleSerializer.prototype.serializeLine = function (line) {\n    var result = [];\n    line.forEach(function (outputEntry) {\n        if (this[outputEntry.style]) {\n            result.push(this[outputEntry.style](outputEntry.args));\n        }\n    }, this);\n    return result;\n};\n\nColoredConsoleSerializer.prototype.block = function (content) {\n    return this.serializeLines(content);\n};\n\nColoredConsoleSerializer.prototype.text = function (options) {\n    var content = String(options.content);\n    if (content === '') {\n        return '';\n    }\n\n    var styles = themeMapper(this.theme, options.styles);\n\n    var result = ['%c' + content.replace(/%/g, '%%')];\n    var styleProperties = [];\n\n    if (styles.length > 0) {\n        for (var i = 0; i < styles.length; i += 1) {\n            var styleName = styles[i];\n            if (rgbRegexp.test(styleName)) {\n                if (styleName.substring(0, 2) === 'bg') {\n                    styleProperties.push('background-color: ' + styleName.substring(2));\n                } else {\n                    styleProperties.push('color: ' + styleName);\n                }\n            } else if (cssStyles[styleName]) {\n                styleProperties.push(cssStyles[styleName]);\n            }\n        }\n    }\n    result.push(styleProperties.join('; '));\n    return result;\n};\n\nColoredConsoleSerializer.prototype.raw = function (options) {\n    return String(options.content(this));\n};\n\nmodule.exports = ColoredConsoleSerializer;\n","\"use strict\";\nvar es5 = require(\"./es5.js\");\nvar canEvaluate = typeof navigator == \"undefined\";\nvar haveGetters = (function(){\n    try {\n        var o = {};\n        es5.defineProperty(o, \"f\", {\n            get: function () {\n                return 3;\n            }\n        });\n        return o.f === 3;\n    }\n    catch (e) {\n        return false;\n    }\n\n})();\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return !isPrimitive(value);\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function f() {}\n    f.prototype = obj;\n    var l = 8;\n    while (l--) new f();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return obj instanceof Error && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    haveGetters: haveGetters,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\"\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n","\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype._unshiftOne = function(value) {\n    var capacity = this._capacity;\n    this._checkCapacity(this.length() + 1);\n    var front = this._front;\n    var i = (((( front - 1 ) &\n                    ( capacity - 1) ) ^ capacity ) - capacity );\n    this[i] = value;\n    this._front = i;\n    this._length = this.length() + 1;\n};\n\nQueue.prototype.unshift = function(fn, receiver, arg) {\n    this._unshiftOne(arg);\n    this._unshiftOne(receiver);\n    this._unshiftOne(fn);\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n","\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule.js\");\nvar Queue = require(\"./queue.js\");\nvar util = require(\"./util.js\");\n\nfunction Async() {\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule =\n        schedule.isStatic ? schedule(this.drainQueues) : schedule;\n}\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.enableTrampoline = function() {\n    if (!this._trampolineEnabled) {\n        this._trampolineEnabled = true;\n        this._schedule = function(fn) {\n            setTimeout(fn, 0);\n        };\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._normalQueue.length() > 0;\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    if (schedule.isStatic) {\n        schedule = function(fn) { setTimeout(fn, 0); };\n    }\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype.invokeFirst = function (fn, receiver, arg) {\n    this._normalQueue.unshift(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = new Async();\nmodule.exports.firstLineError = firstLineError;\n","\"use strict\";\nvar es5 = require(\"./es5.js\");\nvar Objectfreeze = es5.freeze;\nvar util = require(\"./util.js\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    notEnumerableProp(Error, \"__BluebirdErrorTypes__\", errorTypes);\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n","\"use strict\";\nvar util = require(\"./util.js\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors.js\");\nvar TimeoutError = errors.TimeoutError;\nvar OperationalError = errors.OperationalError;\nvar haveGetters = util.haveGetters;\nvar es5 = require(\"./es5.js\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise) {\n    return function(err, value) {\n        if (promise === null) return;\n\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (arguments.length > 2) {\n            var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}\n            promise._fulfill(args);\n        } else {\n            promise._fulfill(value);\n        }\n\n        promise = null;\n    };\n}\n\n\nvar PromiseResolver;\nif (!haveGetters) {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n        this.asCallback = nodebackForPromise(promise);\n        this.callback = this.asCallback;\n    };\n}\nelse {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n    };\n}\nif (haveGetters) {\n    var prop = {\n        get: function() {\n            return nodebackForPromise(this.promise);\n        }\n    };\n    es5.defineProperty(PromiseResolver.prototype, \"asCallback\", prop);\n    es5.defineProperty(PromiseResolver.prototype, \"callback\", prop);\n}\n\nPromiseResolver._nodebackForPromise = nodebackForPromise;\n\nPromiseResolver.prototype.toString = function () {\n    return \"[object PromiseResolver]\";\n};\n\nPromiseResolver.prototype.resolve =\nPromiseResolver.prototype.fulfill = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._resolveCallback(value);\n};\n\nPromiseResolver.prototype.reject = function (reason) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._rejectCallback(reason);\n};\n\nPromiseResolver.prototype.progress = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._progress(value);\n};\n\nPromiseResolver.prototype.cancel = function (err) {\n    this.promise.cancel(err);\n};\n\nPromiseResolver.prototype.timeout = function () {\n    this.reject(new TimeoutError(\"timeout\"));\n};\n\nPromiseResolver.prototype.isResolved = function () {\n    return this.promise.isResolved();\n};\n\nPromiseResolver.prototype.toJSON = function () {\n    return this.promise.toJSON();\n};\n\nmodule.exports = PromiseResolver;\n","\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = require(\"./promise.js\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n","var Promise = require('unexpected-bluebird');\nvar oathbreaker = require('./oathbreaker');\nvar throwIfNonUnexpectedError = require('./throwIfNonUnexpectedError');\n\nfunction makePromise(body) {\n    if (typeof body !== 'function') {\n        throw new TypeError('expect.promise(...) requires a function argument to be supplied.\\n' +\n                            'See http://unexpected.js.org/api/promise/ for more details.');\n    }\n\n    if (body.length === 2) {\n        return new Promise(body);\n    }\n\n    return new Promise(function (resolve, reject) {\n        var runningTasks = 0;\n        var resolvedValue;\n        var outerFunctionHasReturned = false;\n\n        function fulfillIfDone() {\n            if (outerFunctionHasReturned && runningTasks === 0) {\n                resolve(resolvedValue);\n            }\n        }\n\n        function noteResolvedValue(value) {\n            if (typeof value !== 'undefined' && typeof resolvedValue === 'undefined') {\n                resolvedValue = value;\n            }\n        }\n\n        var runner = function (cb) {\n            runningTasks += 1;\n            return function () {\n                runningTasks -= 1;\n                var result;\n                try {\n                    if (typeof cb === 'function') {\n                        result = oathbreaker(cb.apply(null, arguments));\n                        if (isPromise(result)) {\n                            runningTasks += 1;\n                            result.then(function (value) {\n                                noteResolvedValue(value);\n                                runningTasks -= 1;\n                                fulfillIfDone();\n                            }, reject);\n                        } else {\n                            noteResolvedValue(result);\n                        }\n                    }\n                } catch (e) {\n                    return reject(e);\n                }\n                fulfillIfDone();\n                return result;\n            };\n        };\n\n        try {\n            var result = oathbreaker(body(runner));\n            if (isPromise(result)) {\n                runningTasks += 1;\n                result.then(function (value) {\n                    noteResolvedValue(value);\n                    runningTasks -= 1;\n                    fulfillIfDone();\n                }, reject);\n            } else {\n                noteResolvedValue(result);\n            }\n        } catch (e) {\n            return reject(e);\n        }\n        outerFunctionHasReturned = true;\n        fulfillIfDone();\n    });\n}\n\nfunction isPromise(obj) {\n    return obj && typeof obj === 'object' && typeof obj.then === 'function';\n}\n\nfunction extractPromisesFromObject(obj) {\n    if (isPromise(obj)) {\n        return [obj];\n    } else if (obj && typeof obj === 'object') {\n        var promises = [];\n        // Object or Array\n        Object.keys(obj).forEach(function (key) {\n            Array.prototype.push.apply(promises, extractPromisesFromObject(obj[key]));\n        });\n        return promises;\n    }\n    return [];\n}\n\n['all', 'any', 'settle'].forEach(function (staticMethodName) {\n    makePromise[staticMethodName] = function (obj) {\n        var result = Promise[staticMethodName](extractPromisesFromObject(obj));\n        if (staticMethodName === 'settle') {\n            return result.then(function (promises) {\n                promises.forEach(function (promise) {\n                    if (promise.isRejected()) {\n                        throwIfNonUnexpectedError(promise.reason());\n                    }\n                });\n                return promises;\n            });\n        }\n        return result;\n    };\n});\n\n// Expose all of Bluebird's static methods, except the ones related to long stack traces,\n// unhandled rejections and the scheduler, which we need to manage ourselves:\nObject.keys(Promise).forEach(function (staticMethodName) {\n    if (!/^_|^on|^setScheduler|ongStackTraces/.test(staticMethodName) && typeof Promise[staticMethodName] === 'function' && typeof makePromise[staticMethodName] === 'undefined') {\n        makePromise[staticMethodName] = Promise[staticMethodName];\n    }\n});\n\nmodule.exports = makePromise;\n","var utils = require('./utils');\nvar defaultDepth = require('./defaultDepth');\nvar useFullStackTrace = require('./useFullStackTrace');\nvar makeDiffResultBackwardsCompatible = require('./makeDiffResultBackwardsCompatible');\n\nvar errorMethodBlacklist = ['message', 'line', 'sourceId', 'sourceURL', 'stack', 'stackArray'].reduce(function (result, prop) {\n    result[prop] = true;\n    return result;\n}, {});\n\nfunction UnexpectedError(expect, parent) {\n    this.errorMode = (expect && expect.errorMode) || 'default';\n    var base = Error.call(this, '');\n\n    if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, UnexpectedError);\n    } else {\n        // Throw the error to make sure it has its stack serialized:\n        try { throw base; } catch (err) {}\n        this.stack = base.stack;\n    }\n\n    this.expect = expect;\n    this.parent = parent || null;\n    this.name = 'UnexpectedError';\n}\n\nUnexpectedError.prototype = Object.create(Error.prototype);\n\nUnexpectedError.prototype.useFullStackTrace = useFullStackTrace;\n\nvar missingOutputMessage = 'You must either provide a format or a magicpen instance';\nUnexpectedError.prototype.outputFromOptions = function (options) {\n    if (!options) {\n        throw new Error(missingOutputMessage);\n    }\n\n    if (typeof options === 'string') {\n        return this.expect.createOutput(options);\n    }\n\n    if (options.isMagicPen) {\n        return options.clone();\n    }\n\n    if (options.output) {\n        return options.output.clone();\n    }\n\n    if (options.format) {\n        return this.expect.createOutput(options.format);\n    }\n\n    throw new Error(missingOutputMessage);\n};\n\n\nUnexpectedError.prototype._isUnexpected = true;\nUnexpectedError.prototype.isUnexpected = true;\nUnexpectedError.prototype.buildDiff = function (options) {\n    var output = this.outputFromOptions(options);\n    var expect = this.expect;\n    return this.createDiff && makeDiffResultBackwardsCompatible(this.createDiff(output, function (actual, expected) {\n        return expect.diff(actual, expected, output.clone());\n    }, function (v, depth) {\n        return output.clone().appendInspected(v, (depth || defaultDepth) - 1);\n    }, function (actual, expected) {\n        return expect.equal(actual, expected);\n    }));\n};\n\nUnexpectedError.prototype.getDefaultErrorMessage = function (options) {\n    var output = this.outputFromOptions(options);\n    if (this.expect.testDescription) {\n        output.append(this.expect.standardErrorMessage(output.clone(), options));\n    } else if (typeof this.output === 'function') {\n        this.output.call(output, output);\n    }\n\n    var errorWithDiff = this;\n    while (!errorWithDiff.createDiff && errorWithDiff.parent) {\n        errorWithDiff = errorWithDiff.parent;\n    }\n\n    if (errorWithDiff && errorWithDiff.createDiff) {\n        var comparison = errorWithDiff.buildDiff(options);\n        if (comparison) {\n            output.nl(2).append(comparison);\n        }\n    }\n\n    return output;\n};\n\nUnexpectedError.prototype.getNestedErrorMessage = function (options) {\n    var output = this.outputFromOptions(options);\n    if (this.expect.testDescription) {\n        output.append(this.expect.standardErrorMessage(output.clone(), options));\n    } else if (typeof this.output === 'function') {\n        this.output.call(output, output);\n    }\n\n    var parent = this.parent;\n    while (parent.getErrorMode() === 'bubble') {\n        parent = parent.parent;\n    }\n\n    if (typeof options === 'string') {\n        options = { format: options };\n    } else if (options && options.isMagicPen) {\n        options = { output: options };\n    }\n\n    output.nl()\n        .indentLines()\n        .i().block(parent.getErrorMessage(utils.extend({}, options || {}, {\n            compact: this.expect.subject === parent.expect.subject\n        })));\n    return output;\n};\n\nUnexpectedError.prototype.getDefaultOrNestedMessage = function (options) {\n    if (this.hasDiff()) {\n        return this.getDefaultErrorMessage(options);\n    } else {\n        return this.getNestedErrorMessage(options);\n    }\n};\n\nUnexpectedError.prototype.hasDiff = function () {\n    return !!this.getDiffMethod();\n};\n\nUnexpectedError.prototype.getDiffMethod = function () {\n    var errorWithDiff = this;\n    while (!errorWithDiff.createDiff && errorWithDiff.parent) {\n        errorWithDiff = errorWithDiff.parent;\n    }\n\n    return errorWithDiff && errorWithDiff.createDiff || null;\n};\n\nUnexpectedError.prototype.getDiff = function (options) {\n    var errorWithDiff = this;\n    while (!errorWithDiff.createDiff && errorWithDiff.parent) {\n        errorWithDiff = errorWithDiff.parent;\n    }\n\n    return errorWithDiff && errorWithDiff.buildDiff(options);\n};\n\nUnexpectedError.prototype.getDiffMessage = function (options) {\n    var output = this.outputFromOptions(options);\n    var comparison = this.getDiff(options);\n    if (comparison) {\n        output.append(comparison);\n    } else if (this.expect.testDescription) {\n        output.append(this.expect.standardErrorMessage(output.clone(), options));\n    } else if (typeof this.output === 'function') {\n        this.output.call(output, output);\n    }\n    return output;\n};\n\nUnexpectedError.prototype.getErrorMode = function () {\n    if (!this.parent) {\n        switch (this.errorMode) {\n        case 'default':\n        case 'bubbleThrough':\n            return this.errorMode;\n        default:\n            return 'default';\n        }\n    } else {\n        return this.errorMode;\n    }\n};\n\n\nUnexpectedError.prototype.getErrorMessage = function (options) {\n    // Search for any parent error that has an error mode of 'bubbleThrough' through on the\n    // error these should be bubbled to the top\n    var errorWithBubbleThrough = this.parent;\n    while (errorWithBubbleThrough && errorWithBubbleThrough.getErrorMode() !== 'bubbleThrough') {\n        errorWithBubbleThrough = errorWithBubbleThrough.parent;\n    }\n    if (errorWithBubbleThrough) {\n        return errorWithBubbleThrough.getErrorMessage(options);\n    }\n\n    var errorMode = this.getErrorMode();\n    switch (errorMode) {\n    case 'nested': return this.getNestedErrorMessage(options);\n    case 'default': return this.getDefaultErrorMessage(options);\n    case 'bubbleThrough': return this.getDefaultErrorMessage(options);\n    case 'bubble': return this.parent.getErrorMessage(options);\n    case 'diff': return this.getDiffMessage(options);\n    case 'defaultOrNested': return this.getDefaultOrNestedMessage(options);\n    default: throw new Error(\"Unknown error mode: '\" + errorMode + \"'\");\n    }\n};\n\nfunction findStackStart(lines) {\n    for (var i = lines.length - 1; 0 <= i; i -= 1) {\n        if (lines[i] === '') {\n            return i + 1;\n        }\n    }\n\n    return -1;\n}\n\nUnexpectedError.prototype.serializeMessage = function (outputFormat) {\n    if (!this._hasSerializedErrorMessage) {\n        var htmlFormat = outputFormat === 'html';\n        if (htmlFormat) {\n            if (!('htmlMessage' in this)) {\n                this.htmlMessage = this.getErrorMessage({format: 'html'}).toString();\n            }\n        }\n\n        this.message = '\\n' + this.getErrorMessage({\n            format: htmlFormat ? 'text' : outputFormat\n        }).toString() + '\\n';\n\n        if (this.originalError && this.originalError instanceof Error && typeof this.originalError.stack === 'string') {\n            // The stack of the original error looks like this:\n            //   <constructor name>: <error message>\\n<actual stack trace>\n            // Try to get hold of <actual stack trace> and append it\n            // to the error message of this error:\n            var index = this.originalError.stack.indexOf(this.originalError.message);\n            if (index === -1) {\n                // Phantom.js doesn't include the error message in the stack property\n                this.stack = this.message + '\\n' + this.originalError.stack;\n            } else {\n                this.stack = this.message + this.originalError.stack.substr(index + this.originalError.message.length);\n            }\n        } else if (/^(Unexpected)?Error:?\\n/.test(this.stack)) {\n            // Fix for Jest that does not seem to capture the error message\n            this.stack = this.stack.replace(/^(Unexpected)?Error:?\\n/, this.message);\n        }\n\n        if (this.stack && !this.useFullStackTrace) {\n            var newStack = [];\n            var removedFrames = false;\n            var lines = this.stack.split(/\\n/);\n\n            var stackStart = findStackStart(lines);\n\n            lines.forEach(function (line, i) {\n                if (stackStart <= i && (/node_modules\\/unexpected(?:-[^\\/]+)?\\//).test(line)) {\n                    removedFrames = true;\n                } else {\n                    newStack.push(line);\n                }\n            });\n\n            if (removedFrames) {\n                var indentation = (/^(\\s*)/).exec(lines[lines.length - 1])[1];\n\n                if (outputFormat === 'html') {\n                    newStack.push(indentation + 'set the query parameter full-trace=true to see the full stack trace');\n                } else {\n                    newStack.push(indentation + 'set UNEXPECTED_FULL_TRACE=true to see the full stack trace');\n                }\n            }\n\n            this.stack = newStack.join('\\n');\n        }\n\n        this._hasSerializedErrorMessage = true;\n    }\n};\n\nUnexpectedError.prototype.clone = function () {\n    var that = this;\n    var newError = new UnexpectedError(this.expect);\n    Object.keys(that).forEach(function (key) {\n        if (!errorMethodBlacklist[key]) {\n            newError[key] = that[key];\n        }\n    });\n    return newError;\n};\n\nUnexpectedError.prototype.getLabel = function () {\n    var currentError = this;\n    while (currentError && !currentError.label) {\n        currentError = currentError.parent;\n    }\n    return (currentError && currentError.label) || null;\n};\n\nUnexpectedError.prototype.getParents = function () {\n    var result = [];\n    var parent = this.parent;\n    while (parent) {\n        result.push(parent);\n        parent = parent.parent;\n    }\n    return result;\n};\n\nUnexpectedError.prototype.getAllErrors = function () {\n    var result = this.getParents();\n    result.unshift(this);\n    return result;\n};\n\nif (Object.__defineGetter__) {\n    Object.defineProperty(UnexpectedError.prototype, 'htmlMessage', {\n        enumerable: true,\n        get: function () {\n            return this.getErrorMessage({ format: 'html' }).toString();\n        }\n    });\n}\n\nmodule.exports = UnexpectedError;\n","/*global afterEach, jasmine*/\nvar pendingPromisesForTheCurrentTest = [];\nvar afterEachRegistered = false;\n\nvar currentSpec = null;\n\nif (typeof jasmine === 'object') {\n    // Add a custom reporter that allows us to capture the name of the currently executing spec:\n    jasmine.getEnv().addReporter({\n        specStarted: function (spec) {\n            currentSpec = spec;\n        },\n        specDone: function (spec) {\n            currentSpec = null;\n        }\n    });\n}\n\nfunction isPendingOrHasUnhandledRejection(promise) {\n    return promise.isPending() || (promise.isRejected() && promise.reason().uncaught);\n}\n\nfunction registerAfterEachHook() {\n    if (typeof afterEach === 'function' && !afterEachRegistered) {\n        afterEachRegistered = true;\n        try {\n            afterEach(function () {\n                var error;\n                var testPassed = true;\n                if (pendingPromisesForTheCurrentTest.some(isPendingOrHasUnhandledRejection)) {\n                    var displayName;\n                    if (this.currentTest) {\n                        // mocha\n                        testPassed = this.currentTest.state === 'passed';\n                        displayName = this.currentTest.title;\n                    } else if (typeof currentSpec === 'object') {\n                        testPassed = currentSpec.failedExpectations.length === 0;\n                        displayName = currentSpec.fullName;\n                    }\n                    error = new Error(displayName + ': You have created a promise that was not returned from the it block');\n                }\n                pendingPromisesForTheCurrentTest = [];\n                if (error && testPassed) {\n                    throw error;\n                }\n            });\n        } catch (e) {\n            // The benchmark suite fails when attempting to add an afterEach\n        }\n    }\n}\n\n// When running in jasmine/node.js, afterEach is available immediately,\n// but doesn't work within the it block. Register the hook immediately:\nregisterAfterEachHook();\n\nmodule.exports = function notifyPendingPromise(promise) {\n    pendingPromisesForTheCurrentTest.push(promise);\n    // Register the afterEach hook lazily (mocha/node.js):\n    registerAfterEachHook();\n};\n","var createStandardErrorMessage = require('./createStandardErrorMessage');\nvar makePromise = require('./makePromise');\nvar isPendingPromise = require('./isPendingPromise');\nvar oathbreaker = require('./oathbreaker');\nvar UnexpectedError = require('./UnexpectedError');\nvar addAdditionalPromiseMethods = require('./addAdditionalPromiseMethods');\nvar utils = require('./utils');\n\nfunction isAssertionArg(arg) {\n    return arg.type.is('assertion');\n}\n\nfunction lookupAssertionsInParentChain(assertionString, unexpected) {\n    var assertions = [];\n    for (var instance = unexpected ; instance ; instance = instance.parent) {\n        if (instance.assertions[assertionString]) {\n            Array.prototype.push.apply(assertions, instance.assertions[assertionString]);\n        }\n    }\n    return assertions;\n}\n\nfunction findSuffixAssertions(assertionString, unexpected) {\n    if (typeof assertionString !== 'string') {\n        return null;\n    }\n    var straightforwardAssertions = lookupAssertionsInParentChain(assertionString, unexpected);\n    if (straightforwardAssertions.length > 0) {\n        return straightforwardAssertions;\n    }\n    var tokens = assertionString.split(' ');\n    for (var n = tokens.length - 1 ; n > 0 ; n -= 1) {\n        var suffix = tokens.slice(n).join(' ');\n        var suffixAssertions = lookupAssertionsInParentChain(suffix, unexpected);\n        if (findSuffixAssertions(tokens.slice(0, n).join(' '), unexpected) && suffixAssertions.length > 0) {\n            return suffixAssertions;\n        }\n    }\n    return null;\n}\n\nmodule.exports = function createWrappedExpectProto(unexpected) {\n    var wrappedExpectProto = {\n        promise: makePromise,\n        errorMode: 'default',\n\n        equal: unexpected.equal,\n        inspect: unexpected.inspect,\n        createOutput: unexpected.createOutput.bind(unexpected),\n        findTypeOf: unexpected.findTypeOf.bind(unexpected),\n        findTypeOfWithParentType: unexpected.findTypeOfWithParentType.bind(unexpected),\n        findCommonType: unexpected.findCommonType.bind(unexpected),\n        it: function () { // ...\n            var length = arguments.length;\n            var args = new Array(length);\n            for (var i = 0 ; i < length ; i += 1) {\n                args[i] = arguments[i];\n            }\n            if (typeof args[0] === 'string') {\n                args[0] = utils.forwardFlags(args[0], this.flags);\n            }\n            return unexpected.it.apply(unexpected, args);\n        },\n        diff: unexpected.diff,\n        getType: unexpected.getType,\n        output: unexpected.output,\n        outputFormat: unexpected.outputFormat.bind(unexpected),\n        format: unexpected.format,\n        withError: unexpected.withError,\n\n        fail: function () {\n            var args = arguments;\n            var expect = this.context.expect;\n            this.callInNestedContext(function () {\n                expect.fail.apply(expect, args);\n            });\n        },\n        standardErrorMessage: function (output, options) {\n            var that = this;\n            options = typeof options === 'object' ? options : {};\n\n            if ('omitSubject' in output) {\n                options.subject = this.subject;\n            }\n\n            if (options && options.compact) {\n                options.compactSubject = function (output) {\n                    output.jsFunctionName(that.subjectType.name);\n                };\n            }\n            return createStandardErrorMessage(output, that.subjectOutput, that.testDescription, that.argsOutput, options);\n        },\n        callInNestedContext: function (callback) {\n            var that = this;\n\n            try {\n                var result = oathbreaker(callback());\n                if (isPendingPromise(result)) {\n                    result = result.then(undefined, function (e) {\n                        if (e && e._isUnexpected) {\n                            var wrappedError = new UnexpectedError(that, e);\n                            wrappedError.originalError = e.originalError;\n                            throw wrappedError;\n                        }\n                        throw e;\n                    });\n                } else if (!result || typeof result.then !== 'function') {\n                    result = makePromise.resolve(result);\n                }\n                return addAdditionalPromiseMethods(result, that.execute, that.subject);\n            } catch (e) {\n                if (e && e._isUnexpected) {\n                    var wrappedError = new UnexpectedError(that, e);\n                    wrappedError.originalError = e.originalError;\n                    throw wrappedError;\n                }\n                throw e;\n            }\n        },\n        shift: function (subject, assertionIndex) {\n            if (arguments.length <= 1) {\n                if (arguments.length === 0) {\n                    subject = this.subject;\n                }\n                assertionIndex = -1;\n                for (var i = 0 ; i < this.assertionRule.args.length ; i += 1) {\n                    var type = this.assertionRule.args[i].type;\n                    if (type.is('assertion') || type.is('expect.it')) {\n                        assertionIndex = i;\n                        break;\n                    }\n                }\n            } else if (arguments.length === 3) {\n                // The 3-argument syntax for wrappedExpect.shift is deprecated, please omit the first (expect) arg\n                subject = arguments[1];\n                assertionIndex = arguments[2];\n            }\n\n            if (assertionIndex !== -1) {\n                var args = this.args.slice(0, assertionIndex);\n                var rest = this.args.slice(assertionIndex);\n                var nextArgumentType = this.findTypeOf(rest[0]);\n                if (arguments.length > 1) {\n                    // Legacy\n                    this.argsOutput = function (output) {\n                        args.forEach(function (arg, index) {\n                            if (0 < index) {\n                                output.text(', ');\n                            }\n                            output.appendInspected(arg);\n                        });\n\n                        if (args.length > 0) {\n                            output.sp();\n                        }\n                        if (nextArgumentType.is('string')) {\n                            output.error(rest[0]);\n                        } else if (rest.length > 0) {\n                            output.appendInspected(rest[0]);\n                        }\n                        if (rest.length > 1) {\n                            output.sp();\n                        }\n                        rest.slice(1).forEach(function (arg, index) {\n                            if (0 < index)  {\n                                output.text(', ');\n                            }\n                            output.appendInspected(arg);\n                        });\n                    };\n                }\n                if (nextArgumentType.is('expect.it')) {\n                    var that = this;\n                    return this.withError(function () {\n                        return rest[0](subject);\n                    }, function (err) {\n                        that.fail(err);\n                    });\n                } else if (nextArgumentType.is('string')) {\n                    return this.execute.apply(this.execute, [subject].concat(rest));\n                } else {\n                    return subject;\n                }\n            } else {\n                // No assertion to delegate to. Provide the new subject as the fulfillment value:\n                return subject;\n            }\n        },\n        _getSubjectType: function () {\n            return this.findTypeOfWithParentType(this.subject, this.assertionRule.subject.type);\n        },\n        _getArgTypes: function (index) {\n            var lastIndex = this.assertionRule.args.length - 1;\n            return this.args.map(function (arg, index) {\n                return this.findTypeOfWithParentType(arg, this.assertionRule.args[Math.min(index, lastIndex)].type);\n            }, this);\n        },\n        _getAssertionIndices: function () {\n            if (!this._assertionIndices) {\n                var assertionIndices = [];\n                var args = this.args;\n                var currentAssertionRule = this.assertionRule;\n                var offset = 0;\n                OUTER: while (true) {\n                    if (currentAssertionRule.args.length > 1 && isAssertionArg(currentAssertionRule.args[currentAssertionRule.args.length - 2])) {\n                        assertionIndices.push(offset + currentAssertionRule.args.length - 2);\n                        var suffixAssertions = findSuffixAssertions(args[offset + currentAssertionRule.args.length - 2], unexpected);\n                        if (suffixAssertions) {\n                            for (var i = 0 ; i < suffixAssertions.length ; i += 1) {\n                                if (suffixAssertions[i].args.some(isAssertionArg)) {\n                                    offset += currentAssertionRule.args.length - 1;\n                                    currentAssertionRule = suffixAssertions[i];\n                                    continue OUTER;\n                                }\n                            }\n                        }\n                    }\n                    // No further assertions found,\n                    break;\n                }\n                this._assertionIndices = assertionIndices;\n            }\n            return this._assertionIndices;\n        }\n    };\n\n    if (Object.__defineGetter__) {\n        Object.defineProperty(wrappedExpectProto, 'subjectType', {\n            enumerable: true,\n            get: function () {\n                return this.assertionRule && this._getSubjectType();\n            }\n        });\n\n        Object.defineProperty(wrappedExpectProto, 'argTypes', {\n            enumerable: true,\n            get: function () {\n                return this.assertionRule && this._getArgTypes();\n            }\n        });\n    }\n\n\n    utils.setPrototypeOfOrExtend(wrappedExpectProto, Function.prototype);\n    return wrappedExpectProto;\n};\n","var createStandardErrorMessage = require('./createStandardErrorMessage');\nvar utils = require('./utils');\nvar magicpen = require('magicpen');\nvar extend = utils.extend;\nvar leven = require('leven');\nvar makePromise = require('./makePromise');\nvar addAdditionalPromiseMethods = require('./addAdditionalPromiseMethods');\nvar isPendingPromise = require('./isPendingPromise');\nvar oathbreaker = require('./oathbreaker');\nvar UnexpectedError = require('./UnexpectedError');\nvar notifyPendingPromise = require('./notifyPendingPromise');\nvar defaultDepth = require('./defaultDepth');\nvar createWrappedExpectProto = require('./createWrappedExpectProto');\nvar AssertionString = require('./AssertionString');\nvar throwIfNonUnexpectedError = require('./throwIfNonUnexpectedError');\nvar makeDiffResultBackwardsCompatible = require('./makeDiffResultBackwardsCompatible');\n\nfunction isAssertionArg(arg) {\n    return arg.type.is('assertion');\n}\n\nfunction Context(unexpected) {\n    this.expect = unexpected;\n    this.level = 0;\n}\n\nContext.prototype.child = function () {\n    var child = Object.create(this);\n    child.level++;\n    return child;\n};\n\nvar anyType = {\n    _unexpectedType: true,\n    name: 'any',\n    level: 0,\n    identify: function () {\n        return true;\n    },\n    equal: utils.objectIs,\n    inspect: function (value, depth, output) {\n        if (output && output.isMagicPen) {\n            return output.text(value);\n        } else {\n            // Guard against node.js' require('util').inspect eagerly calling .inspect() on objects\n            return 'type: ' + this.name;\n        }\n    },\n    diff: function (actual, expected, output, diff, inspect) {\n        return null;\n    },\n    typeEqualityCache: {},\n    is: function (typeOrTypeName) {\n        var typeName;\n        if (typeof typeOrTypeName === 'string') {\n            typeName = typeOrTypeName;\n        } else {\n            typeName = typeOrTypeName.name;\n        }\n\n        var cachedValue = this.typeEqualityCache[typeName];\n        if (typeof cachedValue !== 'undefined') {\n            return cachedValue;\n        }\n\n        var result = false;\n        if (this.name === typeName) {\n            result = true;\n        } else if (this.baseType) {\n            result = this.baseType.is(typeName);\n        }\n        this.typeEqualityCache[typeName] = result;\n        return result;\n    }\n};\n\n\nfunction Unexpected(options) {\n    options = options || {};\n    this.assertions = options.assertions || {};\n    this.typeByName = options.typeByName || {any: anyType};\n    this.types = options.types || [anyType];\n    if (options.output) {\n        this.output = options.output;\n    } else {\n        this.output = magicpen();\n        this.output.inline = false;\n        this.output.diff = false;\n    }\n    this._outputFormat = options.format || magicpen.defaultFormat;\n    this.installedPlugins = options.installedPlugins || [];\n\n    // Make bound versions of these two helpers up front to save a bit when creating wrapped expects:\n    var that = this;\n    this.getType = function (typeName) {\n        return that.typeByName[typeName] || (that.parent && that.parent.getType(typeName));\n    };\n    this.findTypeOf = function (obj) {\n        return utils.findFirst(that.types || [], function (type) {\n            return type.identify && type.identify(obj);\n        }) || (that.parent && that.parent.findTypeOf(obj));\n    };\n    this.findTypeOfWithParentType = function (obj, requiredParentType) {\n        return utils.findFirst(that.types || [], function (type) {\n            return type.identify && type.identify(obj) && (!requiredParentType || type.is(requiredParentType));\n        }) || (that.parent && that.parent.findTypeOfWithParentType(obj, requiredParentType));\n    };\n    this.findCommonType = function (a, b) {\n        var aAncestorIndex = {};\n        var current = this.findTypeOf(a);\n        while (current) {\n            aAncestorIndex[current.name] = current;\n            current = current.baseType;\n        }\n        current = this.findTypeOf(b);\n        while (current) {\n            if (aAncestorIndex[current.name]) {\n                return current;\n            }\n            current = current.baseType;\n        }\n    };\n    this._wrappedExpectProto = createWrappedExpectProto(this);\n}\n\nvar OR = {};\nfunction getOrGroups(expectations) {\n    var orGroups = [[]];\n    expectations.forEach(function (expectation) {\n        if (expectation === OR) {\n            orGroups.push([]);\n        } else {\n            orGroups[orGroups.length - 1].push(expectation);\n        }\n    });\n    return orGroups;\n}\n\nfunction evaluateGroup(unexpected, context, subject, orGroup) {\n    return orGroup.map(function (expectation) {\n        var args = Array.prototype.slice.call(expectation);\n        args.unshift(subject);\n        return {\n            expectation: args,\n            promise: makePromise(function () {\n                if (typeof args[1] === 'function') {\n                    if (args.length > 2) {\n                        throw new Error('expect.it(<function>) does not accept additional arguments');\n                    } else {\n                        // expect.it(function (value) { ... })\n                        return args[1](args[0]);\n                    }\n                } else {\n                    return unexpected._expect(context.child(), args);\n                }\n            })\n        };\n    });\n}\n\nfunction writeGroupEvaluationsToOutput(output, groupEvaluations) {\n    var hasOrClauses = groupEvaluations.length > 1;\n    var hasAndClauses = groupEvaluations.some(function (groupEvaluation) {\n        return groupEvaluation.length > 1;\n    });\n    groupEvaluations.forEach(function (groupEvaluation, i) {\n        if (i > 0) {\n            if (hasAndClauses) {\n                output.nl();\n            } else {\n                output.sp();\n            }\n            output.jsComment('or').nl();\n        }\n\n        var groupFailed = false;\n        groupEvaluation.forEach(function (evaluation, j) {\n            if (j > 0) {\n                output.jsComment(' and').nl();\n            }\n            var isRejected = evaluation.promise.isRejected();\n            if (isRejected && !groupFailed) {\n                groupFailed = true;\n                var err = evaluation.promise.reason();\n\n                if (hasAndClauses || hasOrClauses) {\n                    output.error('⨯ ');\n                }\n\n                output.block(function (output) {\n                    output.append(err.getErrorMessage(output));\n                });\n            } else {\n                if (isRejected) {\n                    output.error('⨯ ');\n                } else {\n                    output.success('✓ ');\n                }\n\n                var expectation = evaluation.expectation;\n                output.block(function (output) {\n                    var subject = expectation[0];\n                    var subjectOutput = function (output) {\n                        output.appendInspected(subject);\n                    };\n                    var args = expectation.slice(2);\n                    var argsOutput = args.map(function (arg) {\n                        return function (output) {\n                            output.appendInspected(arg);\n                        };\n                    });\n                    var testDescription = expectation[1];\n                    createStandardErrorMessage(output, subjectOutput, testDescription, argsOutput, {\n                        subject: subject\n                    });\n                });\n            }\n        });\n    });\n}\n\nfunction createExpectIt(unexpected, expectations) {\n    var orGroups = getOrGroups(expectations);\n\n    function expectIt(subject, context) {\n        context = (\n            context &&\n            typeof context === 'object' &&\n            context instanceof Context\n        ) ? context : new Context(unexpected);\n\n        var groupEvaluations = [];\n        var promises = [];\n        orGroups.forEach(function (orGroup) {\n            var evaluations = evaluateGroup(unexpected, context, subject, orGroup);\n            evaluations.forEach(function (evaluation) {\n                promises.push(evaluation.promise);\n            });\n            groupEvaluations.push(evaluations);\n        });\n\n        return oathbreaker(makePromise.settle(promises).then(function () {\n            groupEvaluations.forEach(function (groupEvaluation) {\n                groupEvaluation.forEach(function (evaluation) {\n                    if (evaluation.promise.isRejected() && evaluation.promise.reason().errorMode === 'bubbleThrough') {\n                        throw evaluation.promise.reason();\n                    }\n                });\n            });\n\n            if (!groupEvaluations.some(function (groupEvaluation) {\n                return groupEvaluation.every(function (evaluation) {\n                    return evaluation.promise.isFulfilled();\n                });\n            })) {\n                unexpected.fail(function (output) {\n                    writeGroupEvaluationsToOutput(output, groupEvaluations);\n                });\n            }\n        }));\n    }\n    expectIt._expectIt = true;\n    expectIt._expectations = expectations;\n    expectIt._OR = OR;\n    expectIt.and = function () {\n        var copiedExpectations = expectations.slice();\n        copiedExpectations.push(arguments);\n        return createExpectIt(unexpected, copiedExpectations);\n    };\n    expectIt.or = function () {\n        var copiedExpectations = expectations.slice();\n        copiedExpectations.push(OR, arguments);\n        return createExpectIt(unexpected, copiedExpectations);\n    };\n    return expectIt;\n}\n\nUnexpected.prototype.it = function () { // ...\n    return createExpectIt(this, [arguments]);\n};\n\nUnexpected.prototype.equal = function (actual, expected, depth, seen) {\n    var that = this;\n\n    depth = typeof depth === 'number' ? depth : 100;\n    if (depth <= 0) {\n        // detect recursive loops in the structure\n        seen = seen || [];\n        if (seen.indexOf(actual) !== -1) {\n            throw new Error('Cannot compare circular structures');\n        }\n        seen.push(actual);\n    }\n\n    return this.findCommonType(actual, expected).equal(actual, expected, function (a, b) {\n        return that.equal(a, b, depth - 1, seen);\n    });\n};\n\nUnexpected.prototype.inspect = function (obj, depth, outputOrFormat) {\n    var seen = [];\n    var that = this;\n    var printOutput = function (obj, currentDepth, output) {\n        var objType = that.findTypeOf(obj);\n        if (currentDepth <= 0 && objType.is('object') && !objType.is('expect.it')) {\n            return output.text('...');\n        }\n\n        seen = seen || [];\n        if (seen.indexOf(obj) !== -1) {\n            return output.text('[Circular]');\n        }\n\n        return objType.inspect(obj, currentDepth, output, function (v, childDepth) {\n            output = output.clone();\n            seen.push(obj);\n            if (typeof childDepth === 'undefined') {\n                childDepth = currentDepth - 1;\n            }\n            output = printOutput(v, childDepth, output) || output;\n            seen.pop();\n            return output;\n        });\n    };\n\n    var output = typeof outputOrFormat === 'string' ? this.createOutput(outputOrFormat) : outputOrFormat;\n    output = output || this.createOutput();\n    return printOutput(obj, typeof depth === 'number' ? depth : defaultDepth, output) || output;\n};\n\nUnexpected.prototype.expandTypeAlternations = function (assertion) {\n    var that = this;\n    function createPermutations(args, i) {\n        if (i === args.length) {\n            return [];\n        }\n\n        var result = [];\n        args[i].forEach(function (arg) {\n            var tails = createPermutations(args, i + 1);\n            if (tails.length) {\n                tails.forEach(function (tail) {\n                    result.push([arg].concat(tail));\n                });\n            } else if (arg.type.is('assertion')) {\n                result.push([\n                    { type: arg.type, minimum: 1, maximum: 1 },\n                    { type: that.getType('any'), minimum: 0, maximum: Infinity }\n                ]);\n                result.push([\n                    { type: that.getType('expect.it'), minimum: 1, maximum: 1 }\n                ]);\n                if (arg.minimum === 0) { // <assertion?>\n                    result.push([]);\n                }\n            } else {\n                result.push([arg]);\n            }\n        });\n        return result;\n    }\n    var result = [];\n    assertion.subject.forEach(function (subjectRequirement) {\n        if (assertion.args.length) {\n            createPermutations(assertion.args, 0).forEach(function (args) {\n                result.push(extend({}, assertion, {\n                    subject: subjectRequirement,\n                    args: args\n                }));\n            });\n        } else {\n            result.push(extend({}, assertion, {\n                subject: subjectRequirement,\n                args: []\n            }));\n        }\n    });\n    return result;\n};\n\nUnexpected.prototype.parseAssertion = function (assertionString) {\n    var that = this;\n    var tokens = [];\n    var nextIndex = 0;\n\n    function parseTypeToken(typeToken) {\n        return typeToken.split('|').map(function (typeDeclaration) {\n            var matchNameAndOperator = typeDeclaration.match(/^([a-z_](?:|[a-z0-9_.-]*[_a-z0-9]))([+*?]|)$/i);\n            if (!matchNameAndOperator) {\n                throw new SyntaxError('Cannot parse type declaration:' + typeDeclaration);\n            }\n            var type = that.getType(matchNameAndOperator[1]);\n            if (!type) {\n                throw new Error('Unknown type: ' + matchNameAndOperator[1] + ' in ' + assertionString);\n            }\n            var operator = matchNameAndOperator[2];\n            return {\n                minimum: !operator || operator === '+' ? 1 : 0,\n                maximum: operator === '*' || operator === '+' ? Infinity : 1,\n                type: type\n            };\n        });\n    }\n\n    function hasVarargs(types) {\n        return types.some(function (type) {\n            return type.minimum !== 1 || type.maximum !== 1;\n        });\n    }\n    assertionString.replace(/\\s*<((?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?)(?:\\|(?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?))*)>|\\s*([^<]+)/ig, function ($0, $1, $2, index) {\n        if (index !== nextIndex) {\n            throw new SyntaxError('Cannot parse token at index ' + nextIndex + ' in ' + assertionString);\n        }\n        if ($1) {\n            tokens.push(parseTypeToken($1));\n        } else {\n            tokens.push($2.trim());\n        }\n        nextIndex += $0.length;\n    });\n\n    var assertion;\n    if (tokens.length === 1 && typeof tokens[0] === 'string') {\n        assertion = {\n            subject: parseTypeToken('any'),\n            assertion: tokens[0],\n            args: [parseTypeToken('any*')]\n        };\n    } else {\n        assertion = {\n            subject: tokens[0],\n            assertion: tokens[1],\n            args: tokens.slice(2)\n        };\n    }\n\n    if (!Array.isArray(assertion.subject)) {\n        throw new SyntaxError('Missing subject type in ' + assertionString);\n    }\n    if (typeof assertion.assertion !== 'string')  {\n        throw new SyntaxError('Missing assertion in ' + assertionString);\n    }\n    if (hasVarargs(assertion.subject)) {\n        throw new SyntaxError('The subject type cannot have varargs: ' + assertionString);\n    }\n    if (assertion.args.some(function (arg) { return typeof arg === 'string'; })) {\n        throw new SyntaxError('Only one assertion string is supported (see #225)');\n    }\n\n    if (assertion.args.slice(0, -1).some(hasVarargs)) {\n        throw new SyntaxError('Only the last argument type can have varargs: ' + assertionString);\n    }\n    if ([assertion.subject].concat(assertion.args.slice(0, -1)).some(function (argRequirements) {\n        return argRequirements.some(function (argRequirement) {\n            return argRequirement.type.is('assertion');\n        });\n    })) {\n        throw new SyntaxError('Only the last argument type can be <assertion>: ' + assertionString);\n    }\n\n    var lastArgRequirements = assertion.args[assertion.args.length - 1] || [];\n    var assertionRequirements = lastArgRequirements.filter(function (argRequirement) {\n        return argRequirement.type.is('assertion');\n    });\n\n    if (assertionRequirements.length > 0 && lastArgRequirements.length > 1) {\n        throw new SyntaxError('<assertion> cannot be alternated with other types: ' + assertionString);\n    }\n\n    if (assertionRequirements.some(function (argRequirement) {\n        return argRequirement.maximum !== 1;\n    })) {\n        throw new SyntaxError('<assertion+> and <assertion*> are not allowed: ' + assertionString);\n    }\n    return this.expandTypeAlternations(assertion);\n};\n\nvar placeholderSplitRegexp = /(\\{(?:\\d+)\\})/g;\nvar placeholderRegexp = /\\{(\\d+)\\}/;\nUnexpected.prototype.fail = function (arg) {\n    if (arg instanceof UnexpectedError) {\n        arg._hasSerializedErrorMessage = false;\n        throw arg;\n    }\n\n    if (utils.isError(arg)) {\n        throw arg;\n    }\n\n    var error = new UnexpectedError(this.expect);\n    if (typeof arg === 'function') {\n        error.errorMode = 'bubble';\n        error.output = arg;\n    } else if (arg && typeof arg === 'object') {\n        if (typeof arg.message !== 'undefined') {\n            error.errorMode = 'bubble';\n        }\n        error.output = function (output) {\n            if (typeof arg.message !== 'undefined') {\n                if (arg.message.isMagicPen) {\n                    output.append(arg.message);\n                } else if (typeof arg.message === 'function') {\n                    arg.message.call(output, output);\n                } else {\n                    output.text(String(arg.message));\n                }\n            } else {\n                output.error('Explicit failure');\n            }\n        };\n        var expect = this.expect;\n        Object.keys(arg).forEach(function (key) {\n            var value = arg[key];\n            if (key === 'diff') {\n                if (typeof value === 'function' && this.parent) {\n                    error.createDiff = function (output, diff, inspect, equal) {\n                        var childOutput = expect.createOutput(output.format);\n                        childOutput.inline = output.inline;\n                        childOutput.output = output.output;\n                        return value(childOutput, function diff(actual, expected) {\n                            return expect.diff(actual, expected, childOutput.clone());\n                        }, function inspect(v, depth) {\n                            return childOutput.clone().appendInspected(v, (depth || defaultDepth) - 1);\n                        }, function (actual, expected) {\n                            return expect.equal(actual, expected);\n                        });\n                    };\n                } else {\n                    error.createDiff = value;\n                }\n            } else if (key !== 'message') {\n                error[key] = value;\n            }\n        }, this);\n    } else {\n        var placeholderArgs;\n        if (arguments.length > 0) {\n            placeholderArgs = new Array(arguments.length - 1);\n            for (var i = 1 ; i < arguments.length ; i += 1) {\n                placeholderArgs[i - 1] = arguments[i];\n            }\n        }\n        error.errorMode = 'bubble';\n        error.output = function (output) {\n            var message = arg ? String(arg) : 'Explicit failure';\n            var tokens = message.split(placeholderSplitRegexp);\n            tokens.forEach(function (token) {\n                var match = placeholderRegexp.exec(token);\n                if (match) {\n                    var index = match[1];\n                    if (index in placeholderArgs) {\n                        var placeholderArg = placeholderArgs[index];\n                        if (placeholderArg && placeholderArg.isMagicPen) {\n                            output.append(placeholderArg);\n                        } else {\n                            output.appendInspected(placeholderArg);\n                        }\n                    } else {\n                        output.text(match[0]);\n                    }\n\n                } else {\n                    output.error(token);\n                }\n            });\n        };\n    }\n\n    throw error;\n};\n\nfunction compareSpecificities(a, b) {\n    for (var i = 0; i < Math.min(a.length, b.length); i += 1) {\n        var c = b[i] - a[i];\n        if (c !== 0) {\n            return c;\n        }\n    }\n    return b.length - a.length;\n}\n\nfunction calculateAssertionSpecificity(assertion) {\n    return [assertion.subject.type.level].concat(assertion.args.map(function (argRequirement) {\n        var bonus = argRequirement.minimum === 1 && argRequirement.maximum === 1 ?\n            0.5 : 0;\n        return bonus + argRequirement.type.level;\n    }));\n}\n\nUnexpected.prototype.addAssertion = function (patternOrPatterns, handler, childUnexpected) {\n    var maxArguments;\n    if (typeof childUnexpected === 'object') {\n        maxArguments = 3;\n    } else {\n        maxArguments = 2;\n    }\n    if (arguments.length > maxArguments || typeof handler !== 'function' || (typeof patternOrPatterns !== 'string' && !Array.isArray(patternOrPatterns))) {\n        var errorMessage = \"Syntax: expect.addAssertion(<string|array[string]>, function (expect, subject, ...) { ... });\";\n        if ((typeof handler === 'string' || Array.isArray(handler)) && typeof arguments[2] === 'function') {\n            errorMessage +=\n                '\\nAs of Unexpected 10, the syntax for adding assertions that apply only to specific\\n' +\n                'types has changed. See http://unexpected.js.org/api/addAssertion/';\n        }\n        throw new Error(errorMessage);\n    }\n    var patterns = (Array.isArray(patternOrPatterns) ? patternOrPatterns : [patternOrPatterns]);\n    patterns.forEach(function (pattern) {\n        if (typeof pattern !== 'string' || pattern === '') {\n            throw new Error('Assertion patterns must be a non-empty string');\n        } else {\n            if (pattern !== pattern.trim()) {\n                throw new Error(\"Assertion patterns can't start or end with whitespace:\\n\\n    \" + JSON.stringify(pattern));\n            }\n        }\n    });\n\n    var that = this;\n    var assertions = this.assertions;\n\n    var defaultValueByFlag = {};\n    var assertionHandlers = [];\n    var maxNumberOfArgs = 0;\n    patterns.forEach(function (pattern) {\n        var assertionDeclarations = that.parseAssertion(pattern);\n        assertionDeclarations.forEach(function (assertionDeclaration) {\n            ensureValidUseOfParenthesesOrBrackets(assertionDeclaration.assertion);\n            var expandedAssertions = expandAssertion(assertionDeclaration.assertion);\n            expandedAssertions.forEach(function (expandedAssertion) {\n                Object.keys(expandedAssertion.flags).forEach(function (flag) {\n                    defaultValueByFlag[flag] = false;\n                });\n                maxNumberOfArgs = Math.max(maxNumberOfArgs, assertionDeclaration.args.reduce(function (previous, argDefinition) {\n                    return previous + (argDefinition.maximum === null ? Infinity : argDefinition.maximum);\n                }, 0));\n                assertionHandlers.push({\n                    handler: handler,\n                    alternations: expandedAssertion.alternations,\n                    flags: expandedAssertion.flags,\n                    subject: assertionDeclaration.subject,\n                    args: assertionDeclaration.args,\n                    testDescriptionString: expandedAssertion.text,\n                    declaration: pattern,\n                    unexpected: childUnexpected\n                });\n            });\n        });\n    });\n    if (handler.length - 2 > maxNumberOfArgs) {\n        throw new Error('The provided assertion handler takes ' + (handler.length - 2) + ' parameters, but the type signature specifies a maximum of ' + maxNumberOfArgs + ':\\n\\n    ' + JSON.stringify(patterns));\n    }\n\n    assertionHandlers.forEach(function (handler) {\n        // Make sure that all flags are defined.\n        handler.flags = extend({}, defaultValueByFlag, handler.flags);\n\n        var assertionHandlers = assertions[handler.testDescriptionString];\n        handler.specificity = calculateAssertionSpecificity(handler);\n        if (!assertionHandlers) {\n            assertions[handler.testDescriptionString] = [handler];\n        } else {\n            var i = 0;\n            while (i < assertionHandlers.length && compareSpecificities(handler.specificity, assertionHandlers[i].specificity) > 0) {\n                i += 1;\n            }\n            assertionHandlers.splice(i, 0, handler);\n        }\n    });\n\n    return this.expect; // for chaining\n};\n\nUnexpected.prototype.addType = function (type, childUnexpected) {\n    var that = this;\n    var baseType;\n    if (typeof type.name !== 'string' || !/^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$/i.test(type.name)) {\n        throw new Error('A type must be given a non-empty name and must match ^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$');\n    }\n\n    if (typeof type.identify !== 'function' && type.identify !== false) {\n        throw new Error('Type ' + type.name + ' must specify an identify function or be declared abstract by setting identify to false');\n    }\n\n    if (this.typeByName[type.name]) {\n        throw new Error('The type with the name ' + type.name + ' already exists');\n    }\n\n    if (type.base) {\n        baseType = this.getType(type.base);\n\n        if (!baseType) {\n            throw new Error('Unknown base type: ' + type.base);\n        }\n    } else {\n        baseType = anyType;\n    }\n\n    var extendedBaseType = Object.create(baseType);\n    extendedBaseType.inspect = function (value, depth, output) {\n        if (!output || !output.isMagicPen) {\n            throw new Error('You need to pass the output to baseType.inspect() as the third parameter');\n        }\n\n        return baseType.inspect(value, depth, output, function (value, depth) {\n            return output.clone().appendInspected(value, depth);\n        });\n    };\n\n    extendedBaseType.diff = function (actual, expected, output) {\n        if (!output || !output.isMagicPen) {\n            throw new Error('You need to pass the output to baseType.diff() as the third parameter');\n        }\n\n        return makeDiffResultBackwardsCompatible(baseType.diff(actual, expected,\n                      output.clone(),\n                      function (actual, expected) {\n                          return that.diff(actual, expected, output.clone());\n                      },\n                      function (value, depth) {\n                          return output.clone().appendInspected(value, depth);\n                      },\n                      that.equal.bind(that)));\n    };\n\n    extendedBaseType.equal = function (actual, expected) {\n        return baseType.equal(actual, expected, that.equal.bind(that));\n    };\n\n    var extendedType = extend({}, baseType, type, { baseType: extendedBaseType });\n    var originalInspect = extendedType.inspect;\n\n    extendedType.inspect = function (obj, depth, output, inspect) {\n        if (arguments.length < 2 || (!output || !output.isMagicPen)) {\n            return 'type: ' + type.name;\n        } else if (childUnexpected) {\n            var childOutput = childUnexpected.createOutput(output.format);\n            return originalInspect.call(this, obj, depth, childOutput, inspect) || childOutput;\n        } else {\n            return originalInspect.call(this, obj, depth, output, inspect) || output;\n        }\n    };\n\n    if (childUnexpected) {\n        extendedType.childUnexpected = childUnexpected;\n        var originalDiff = extendedType.diff;\n        extendedType.diff = function (actual, expected, output, inspect, diff, equal) {\n            var childOutput = childUnexpected.createOutput(output.format);\n            // Make sure that already buffered up output is preserved:\n            childOutput.output = output.output;\n            return originalDiff.call(this, actual, expected, childOutput, inspect, diff, equal) || output;\n        };\n    }\n\n    if (extendedType.identify === false) {\n        this.types.push(extendedType);\n    } else {\n        this.types.unshift(extendedType);\n    }\n\n    extendedType.level = baseType.level + 1;\n    extendedType.typeEqualityCache = {};\n    this.typeByName[extendedType.name] = extendedType;\n\n    return this.expect;\n};\n\nUnexpected.prototype.addStyle = function () { // ...\n    this.output.addStyle.apply(this.output, arguments);\n    return this.expect;\n};\n\nUnexpected.prototype.installTheme = function () { // ...\n    this.output.installTheme.apply(this.output, arguments);\n    return this.expect;\n};\n\nfunction getPluginName(plugin) {\n    if (typeof plugin === 'function') {\n        return utils.getFunctionName(plugin);\n    } else {\n        return plugin.name;\n    }\n}\n\nUnexpected.prototype.use = function (plugin) {\n    if ((typeof plugin !== 'function' && (typeof plugin !== 'object' || typeof plugin.installInto !== 'function')) ||\n        (typeof plugin.name !== 'undefined' && typeof plugin.name !== 'string')) {\n        throw new Error(\n            'Plugins must be functions or adhere to the following interface\\n' +\n            '{\\n' +\n            '  name: <an optional plugin name>,\\n' +\n            '  version: <an optional semver version string>,\\n' +\n            '  installInto: <a function that will update the given expect instance>\\n' +\n            '}'\n        );\n    }\n\n\n    var pluginName = getPluginName(plugin);\n\n    var existingPlugin = utils.findFirst(this.installedPlugins, function (installedPlugin) {\n        if (installedPlugin === plugin) {\n            return true;\n        } else {\n            return pluginName && pluginName === getPluginName(installedPlugin);\n        }\n    });\n\n    if (existingPlugin) {\n        if (existingPlugin === plugin || (typeof plugin.version !== 'undefined' && plugin.version === existingPlugin.version)) {\n            // No-op\n            return this.expect;\n        } else {\n            throw new Error(\"Another instance of the plugin '\" + pluginName + \"' \" +\n                            \"is already installed\" +\n                            (typeof existingPlugin.version !== 'undefined' ?\n                                ' (version ' + existingPlugin.version +\n                                (typeof plugin.version !== 'undefined' ?\n                                    ', trying to install ' + plugin.version : '') +\n                                ')' : '') +\n                            \". Please check your node_modules folder for unmet peerDependencies.\");\n        }\n    }\n\n    if (pluginName === 'unexpected-promise') {\n        throw new Error('The unexpected-promise plugin was pulled into Unexpected as of 8.5.0. This means that the plugin is no longer supported.');\n    }\n\n    this.installedPlugins.push(plugin);\n    if (typeof plugin === 'function') {\n        plugin(this.expect);\n    } else {\n        plugin.installInto(this.expect);\n    }\n\n    return this.expect; // for chaining\n};\n\nUnexpected.prototype.withError = function (body, handler) {\n    return oathbreaker(makePromise(body).caught(function (e) {\n        throwIfNonUnexpectedError(e);\n        return handler(e);\n    }));\n};\n\nUnexpected.prototype.installPlugin = Unexpected.prototype.use; // Legacy alias\n\nfunction installExpectMethods(unexpected) {\n    var expect = function () { /// ...\n        return unexpected._expect(new Context(unexpected), arguments);\n    };\n    expect.it = unexpected.it.bind(unexpected);\n    expect.equal = unexpected.equal.bind(unexpected);\n    expect.inspect = unexpected.inspect.bind(unexpected);\n    expect.findTypeOf = unexpected.findTypeOf; // Already bound\n    expect.fail = function () {\n        try {\n            unexpected.fail.apply(unexpected, arguments);\n        } catch (e) {\n            if (e && e._isUnexpected) {\n                unexpected.setErrorMessage(e);\n            }\n            throw e;\n        }\n    };\n\n    expect.createOutput = unexpected.createOutput.bind(unexpected);\n    expect.diff = unexpected.diff.bind(unexpected);\n    expect.async = unexpected.async.bind(unexpected);\n    expect.promise = makePromise;\n    expect.withError = unexpected.withError;\n    expect.addAssertion = unexpected.addAssertion.bind(unexpected);\n    expect.addStyle = unexpected.addStyle.bind(unexpected);\n    expect.installTheme = unexpected.installTheme.bind(unexpected);\n    expect.addType = unexpected.addType.bind(unexpected);\n    expect.getType = unexpected.getType;\n    expect.clone = unexpected.clone.bind(unexpected);\n    expect.child = unexpected.child.bind(unexpected);\n    expect.toString = unexpected.toString.bind(unexpected);\n    expect.assertions = unexpected.assertions;\n    expect.use = expect.installPlugin = unexpected.use.bind(unexpected);\n    expect.output = unexpected.output;\n    expect.outputFormat = unexpected.outputFormat.bind(unexpected);\n    expect.notifyPendingPromise = notifyPendingPromise;\n    expect.hook = function (fn) {\n        unexpected._expect = fn(unexpected._expect.bind(unexpected));\n    };\n    // TODO For testing purpose while we don't have all the pieces yet\n    expect.parseAssertion = unexpected.parseAssertion.bind(unexpected);\n\n    return expect;\n}\n\nfunction calculateLimits(items) {\n    return items.reduce(function (result, item) {\n        result.minimum += item.minimum;\n        result.maximum += item.maximum;\n        return result;\n    }, { minimum: 0, maximum: 0 });\n}\n\nUnexpected.prototype.throwAssertionNotFoundError = function (subject, testDescriptionString, args) {\n    var candidateHandlers = this.assertions[testDescriptionString];\n    var that = this;\n    if (candidateHandlers) {\n        this.fail({\n            message: function (output) {\n                var subjectOutput = function (output) {\n                    output.appendInspected(subject);\n                };\n                var argsOutput = function (output) {\n                    output.appendItems(args, ', ');\n                };\n                output.append(createStandardErrorMessage(output.clone(), subjectOutput, testDescriptionString, argsOutput)).nl()\n                    .indentLines();\n                output.i().error('The assertion does not have a matching signature for:').nl()\n                    .indentLines().i().text('<').text(that.findTypeOf(subject).name).text('>').sp().text(testDescriptionString);\n\n                args.forEach(function (arg, i) {\n                    output.sp().text('<').text(that.findTypeOf(arg).name).text('>');\n                });\n\n                output\n                    .outdentLines()\n                    .nl()\n                    .i().text('did you mean:')\n                    .indentLines()\n                    .nl();\n                var assertionDeclarations = Object.keys(candidateHandlers.reduce(function (result, handler) {\n                    result[handler.declaration] = true;\n                    return result;\n                }, {})).sort();\n                assertionDeclarations.forEach(function (declaration, i) {\n                    output.nl(i > 0 ? 1 : 0).i().text(declaration);\n                });\n                output.outdentLines();\n            }\n        });\n    }\n\n    var assertionsWithScore = [];\n    var assertionStrings = [];\n    var instance = this;\n    while (instance) {\n        Array.prototype.push.apply(assertionStrings, Object.keys(instance.assertions));\n        instance = instance.parent;\n    }\n\n    function compareAssertions(a, b) {\n        var aAssertion = that.lookupAssertionRule(subject, a, args);\n        var bAssertion = that.lookupAssertionRule(subject, b, args);\n        if (!aAssertion && !bAssertion) {\n            return 0;\n        }\n        if (aAssertion && !bAssertion) {\n            return -1;\n        }\n        if (!aAssertion && bAssertion) {\n            return 1;\n        }\n\n        return compareSpecificities(aAssertion.specificity, bAssertion.specificity);\n    }\n\n    assertionStrings.forEach(function (assertionString) {\n        var score = leven(testDescriptionString, assertionString);\n\n        assertionsWithScore.push({\n            assertion: assertionString,\n            score: score\n        });\n    }, this);\n\n    var bestMatch = assertionsWithScore.sort(function (a, b) {\n        var c = a.score - b.score;\n        if (c !== 0) {\n            return c;\n        }\n\n        if (a.assertion < b.assertion) {\n            return -1;\n        } else {\n            return 1;\n        }\n    }).slice(0, 10).filter(function (assertionsWithScore, i, arr) {\n        return Math.abs(assertionsWithScore.score - arr[0].score) <= 2;\n    }).sort(function (a, b) {\n        var c = compareAssertions(a.assertion, b.assertion);\n        if (c !== 0) {\n            return c;\n        }\n\n        return a.score - b.score;\n    })[0];\n\n    this.fail({\n        errorMode: 'bubbleThrough',\n        message: function (output) {\n            output.error(\"Unknown assertion '\").jsString(testDescriptionString)\n                .error(\"', did you mean: '\").jsString(bestMatch.assertion).error(\"'\");\n        }\n    });\n};\n\nUnexpected.prototype.lookupAssertionRule = function (subject, testDescriptionString, args, requireAssertionSuffix) {\n    var that = this;\n    if (typeof testDescriptionString !== 'string') {\n        throw new Error('The expect function requires the second parameter to be a string or an expect.it.');\n    }\n    var handlers;\n    var instance = this;\n    while (instance) {\n        var instanceHandlers = instance.assertions[testDescriptionString];\n        if (instanceHandlers) {\n            handlers = handlers ? handlers.concat(instanceHandlers) : instanceHandlers;\n        }\n        instance = instance.parent;\n    }\n    if (!handlers) {\n        return null;\n    }\n    var cachedTypes = {};\n\n    function findTypeOf(value, key) {\n        var type = cachedTypes[key];\n        if (!type) {\n            type = that.findTypeOf(value);\n            cachedTypes[key] = type;\n        }\n        return type;\n    }\n\n    function matches(value, assertionType, key, relaxed) {\n        if (assertionType.is('assertion') && typeof value === 'string') {\n            return true;\n        }\n\n        if (relaxed) {\n            if (assertionType.identify === false) {\n                return that.types.some(function (type) {\n                    return type.identify && type.is(assertionType) && type.identify(value);\n                });\n            }\n            return assertionType.identify(value);\n        } else {\n            return findTypeOf(value, key).is(assertionType);\n        }\n    }\n\n    function matchesHandler(handler, relaxed) {\n        if (!matches(subject, handler.subject.type, 'subject', relaxed)) {\n            return false;\n        }\n        if (requireAssertionSuffix && !handler.args.some(isAssertionArg)) {\n            return false;\n        }\n\n        var requireArgumentsLength = calculateLimits(handler.args);\n\n        if (args.length < requireArgumentsLength.minimum || requireArgumentsLength.maximum < args.length) {\n            return false;\n        } else if (args.length === 0 && requireArgumentsLength.maximum === 0) {\n            return true;\n        }\n\n        var lastRequirement = handler.args[handler.args.length - 1];\n        return args.every(function (arg, i) {\n            if (i < handler.args.length - 1) {\n                return matches(arg, handler.args[i].type, i, relaxed);\n            } else {\n                return matches(arg, lastRequirement.type, i, relaxed);\n            }\n        });\n    }\n\n    var j, handler;\n    for (j = 0; j < handlers.length; j += 1) {\n        handler = handlers[j];\n        if (matchesHandler(handler)) {\n            return handler;\n        }\n    }\n    for (j = 0; j < handlers.length; j += 1) {\n        handler = handlers[j];\n        if (matchesHandler(handler, true)) {\n            return handler;\n        }\n    }\n\n    return null;\n};\n\nfunction makeExpectFunction(unexpected) {\n    var expect = installExpectMethods(unexpected);\n    unexpected.expect = expect;\n    return expect;\n}\n\nUnexpected.prototype.setErrorMessage = function (err) {\n    err.serializeMessage(this.outputFormat());\n};\n\nUnexpected.prototype._expect = function expect(context, args) {\n    var that = this;\n    var subject = args[0];\n    var testDescriptionString = args[1];\n\n    if (args.length < 2) {\n        throw new Error('The expect function requires at least two parameters.');\n    } else if (testDescriptionString && testDescriptionString._expectIt) {\n        return that.expect.withError(function () {\n            return testDescriptionString(subject);\n        }, function (err) {\n            that.fail(err);\n        });\n    }\n\n    function executeExpect(context, subject, testDescriptionString, args) {\n        var assertionRule = that.lookupAssertionRule(subject, testDescriptionString, args);\n\n        if (!assertionRule) {\n            var tokens = testDescriptionString.split(' ');\n            OUTER: for (var n = tokens.length - 1; n > 0 ; n -= 1) {\n                var prefix = tokens.slice(0, n).join(' ');\n                var remainingTokens = tokens.slice(n);\n                var argsWithAssertionPrepended = [ remainingTokens.join(' ') ].concat(args);\n                assertionRule = that.lookupAssertionRule(subject, prefix, argsWithAssertionPrepended, true);\n                if (assertionRule) {\n                    // Found the longest prefix of the string that yielded a suitable assertion for the given subject and args\n                    // To avoid bogus error messages when shifting later (#394) we require some prefix of the remaining tokens\n                    // to be a valid assertion name:\n                    for (var i = 1 ; i < remainingTokens.length ; i += 1) {\n                        if (that.assertions.hasOwnProperty(remainingTokens.slice(0, i + 1).join(' '))) {\n                            testDescriptionString = prefix;\n                            args = argsWithAssertionPrepended;\n                            break OUTER;\n                        }\n                    }\n                }\n            }\n            if (!assertionRule) {\n                that.throwAssertionNotFoundError(subject, testDescriptionString, args);\n            }\n        }\n        if (assertionRule && assertionRule.unexpected && assertionRule.unexpected !== that) {\n            return assertionRule.unexpected.expect.apply(assertionRule.unexpected.expect, [subject, testDescriptionString].concat(args));\n        }\n\n        var flags = extend({}, assertionRule.flags);\n        var wrappedExpect = function (subject, testDescriptionString) {\n            if (arguments.length === 0) {\n                throw new Error('The expect function requires at least one parameter.');\n            } else if (arguments.length === 1) {\n                return addAdditionalPromiseMethods(makePromise.resolve(subject), wrappedExpect, subject);\n            } else if (testDescriptionString && testDescriptionString._expectIt) {\n                wrappedExpect.errorMode = 'nested';\n                return wrappedExpect.withError(function () {\n                    return testDescriptionString(subject);\n                }, function (err) {\n                    wrappedExpect.fail(err);\n                });\n            }\n            testDescriptionString = utils.forwardFlags(testDescriptionString, flags);\n\n            var args = new Array(arguments.length - 2);\n            for (var i = 2 ; i < arguments.length ; i += 1) {\n                args[i - 2] = arguments[i];\n            }\n            return wrappedExpect.callInNestedContext(function () {\n                return executeExpect(context.child(), subject, testDescriptionString, args);\n            });\n        };\n\n        utils.setPrototypeOfOrExtend(wrappedExpect, that._wrappedExpectProto);\n\n        wrappedExpect.context = context;\n        wrappedExpect.execute = wrappedExpect;\n        wrappedExpect.alternations = assertionRule.alternations;\n        wrappedExpect.flags = flags;\n        wrappedExpect.subject = subject;\n        wrappedExpect.testDescription = testDescriptionString;\n        wrappedExpect.args = args;\n        wrappedExpect.assertionRule = assertionRule;\n\n        wrappedExpect.subjectOutput = function (output) {\n            output.appendInspected(subject);\n        };\n        wrappedExpect.argsOutput = args.map(function (arg, i) {\n            var argRule = wrappedExpect.assertionRule.args[i];\n            if (typeof arg === 'string' && (argRule && argRule.type.is('assertion') || wrappedExpect._getAssertionIndices().indexOf(i) >= 0)) {\n                return new AssertionString(arg);\n            }\n\n            return function (output) {\n                output.appendInspected(arg);\n            };\n        });\n\n        // Eager-compute these properties in browsers that don't support getters\n        // (Object.defineProperty might be polyfilled by es5-sham):\n        if (!Object.__defineGetter__) {\n            wrappedExpect.subjectType = wrappedExpect._getSubjectType();\n            wrappedExpect.argTypes = wrappedExpect._getArgTypes();\n        }\n\n        return oathbreaker(assertionRule.handler.apply(wrappedExpect, [wrappedExpect, subject].concat(args)));\n    }\n\n    try {\n        var result = executeExpect(context, subject, testDescriptionString, Array.prototype.slice.call(args, 2));\n        if (isPendingPromise(result)) {\n            that.expect.notifyPendingPromise(result);\n            result = result.then(undefined, function (e) {\n                if (e && e._isUnexpected && context.level === 0) {\n                    that.setErrorMessage(e);\n                }\n                throw e;\n            });\n        } else {\n            if (!result || typeof result.then !== 'function') {\n                result = makePromise.resolve(result);\n            }\n        }\n        return addAdditionalPromiseMethods(result, that.expect, subject);\n    } catch (e) {\n        if (e && e._isUnexpected) {\n            var newError = e;\n            if (typeof mochaPhantomJS !== 'undefined') {\n                newError = e.clone();\n            }\n            if (context.level === 0) {\n                that.setErrorMessage(newError);\n            }\n            throw newError;\n        }\n        throw e;\n    }\n};\n\nUnexpected.prototype.async = function (cb) {\n    var that = this;\n\n    function asyncMisusage(message) {\n        that._isAsync = false;\n        that.expect.fail(function (output) {\n            output.error(message).nl()\n                  .text(\"Usage: \").nl()\n                  .text(\"it('test description', expect.async(function () {\").nl()\n                  .indentLines()\n                  .i().text(\"return expect('test.txt', 'to have content', 'Content read asynchroniously');\").nl()\n                  .outdentLines()\n                  .text(\"});\");\n        });\n    }\n\n    if (typeof cb !== 'function' || cb.length !== 0) {\n        asyncMisusage(\"expect.async requires a callback without arguments.\");\n    }\n\n    return function (done) {\n        if (that._isAsync) {\n            asyncMisusage(\"expect.async can't be within a expect.async context.\");\n        }\n        that._isAsync = true;\n\n        if (typeof done !== 'function') {\n            asyncMisusage(\"expect.async should be called in the context of an it-block\\n\" +\n                          \"and the it-block should supply a done callback.\");\n        }\n        var result;\n        try {\n            result = cb();\n        } finally {\n            that._isAsync = false;\n        }\n        if (!result || typeof result.then !== 'function') {\n            asyncMisusage(\"expect.async requires the block to return a promise or throw an exception.\");\n        }\n        result.then(function () {\n            that._isAsync = false;\n            done();\n        }, function (err) {\n            that._isAsync = false;\n            done(err);\n        });\n    };\n};\n\nUnexpected.prototype.diff = function (a, b, output, recursions, seen) {\n    output = output || this.createOutput();\n    var that = this;\n\n    var maxRecursions = 100;\n    recursions = typeof recursions === 'number' ? recursions : maxRecursions;\n    if (recursions <= 0) {\n        // detect recursive loops in the structure\n        seen = seen || [];\n        if (seen.indexOf(a) !== -1) {\n            throw new Error('Cannot compare circular structures');\n        }\n        seen.push(a);\n    }\n\n    return makeDiffResultBackwardsCompatible(this.findCommonType(a, b).diff(a, b, output, function (actual, expected) {\n        return that.diff(actual, expected, output.clone(), recursions - 1, seen);\n    }, function (v, depth) {\n        return output.clone().appendInspected(v, depth);\n    }, function (actual, expected) {\n        return that.equal(actual, expected);\n    }));\n};\n\nUnexpected.prototype.toString = function () {\n    var assertions = this.assertions;\n\n    var seen = {};\n    var declarations = [];\n    var pen = magicpen();\n    Object.keys(assertions).sort().forEach(function (key) {\n        assertions[key].forEach(function (assertion) {\n            if (!seen[assertion.declaration]) {\n                declarations.push(assertion.declaration);\n                seen[assertion.declaration] = true;\n            }\n        });\n    });\n\n    declarations.forEach(function (declaration) {\n        pen.text(declaration).nl();\n    });\n    return pen.toString();\n};\n\nUnexpected.prototype.clone = function () {\n    var clonedAssertions = {};\n    Object.keys(this.assertions).forEach(function (assertion) {\n        clonedAssertions[assertion] = [].concat(this.assertions[assertion]);\n    }, this);\n    var unexpected = new Unexpected({\n        assertions: clonedAssertions,\n        types: [].concat(this.types),\n        typeByName: extend({}, this.typeByName),\n        output: this.output.clone(),\n        format: this.outputFormat(),\n        installedPlugins: [].concat(this.installedPlugins)\n    });\n    // Install the hooks:\n    unexpected._expect = this._expect;\n    return makeExpectFunction(unexpected);\n};\n\nUnexpected.prototype.child = function () {\n    var childUnexpected = new Unexpected({\n        assertions: {},\n        types: [],\n        typeByName: {},\n        output: this.output.clone(),\n        format: this.outputFormat(),\n        installedPlugins: []\n    });\n    var parent = childUnexpected.parent = this;\n    var childExpect = makeExpectFunction(childUnexpected);\n\n    childExpect.exportAssertion = function (testDescription, handler) {\n        parent.addAssertion(testDescription, handler, childUnexpected);\n        return this;\n    };\n    childExpect.exportType = function (type) {\n        parent.addType(type, childUnexpected);\n        return this;\n    };\n    childExpect.exportStyle = function (name, handler) {\n        parent.addStyle(name, function () { // ...\n            var childOutput = childExpect.createOutput(this.format);\n            this.append(handler.apply(childOutput, arguments) || childOutput);\n        });\n        return this;\n    };\n    return childExpect;\n};\n\nUnexpected.prototype.outputFormat = function (format) {\n    if (typeof format === 'undefined') {\n        return this._outputFormat;\n    } else {\n        this._outputFormat = format;\n        return this.expect;\n    }\n};\n\nUnexpected.prototype.createOutput = function (format) {\n    var that = this;\n    var output = this.output.clone(format || 'text');\n    output.addStyle('appendInspected', function (value, depth) {\n        this.append(that.inspect(value, depth, this.clone()));\n    });\n    return output;\n};\n\nUnexpected.create = function () {\n    var unexpected = new Unexpected();\n    return makeExpectFunction(unexpected);\n};\n\nvar expandAssertion = (function () {\n    function isFlag(token) {\n        return token.slice(0, 1) === '[' && token.slice(-1) === ']';\n    }\n    function isAlternation(token) {\n        return token.slice(0, 1) === '(' && token.slice(-1) === ')';\n    }\n    function removeEmptyStrings(texts) {\n        return texts.filter(function (text) {\n            return text !== '';\n        });\n    }\n    function createPermutations(tokens, index) {\n        if (index === tokens.length) {\n            return [{ text: '', flags: {}, alternations: [] }];\n        }\n\n        var token = tokens[index];\n        var tail = createPermutations(tokens, index + 1);\n        if (isFlag(token)) {\n            var flag = token.slice(1, -1);\n            return tail.map(function (pattern) {\n                var flags = {};\n                flags[flag] = true;\n                return {\n                    text: flag + ' ' + pattern.text,\n                    flags: extend(flags, pattern.flags),\n                    alternations: pattern.alternations\n                };\n            }).concat(tail.map(function (pattern) {\n                var flags = {};\n                flags[flag] = false;\n                return {\n                    text: pattern.text,\n                    flags: extend(flags, pattern.flags),\n                    alternations: pattern.alternations\n                };\n            }));\n        } else if (isAlternation(token)) {\n            return token\n                .substr(1, token.length - 2) // Remove parentheses\n                .split(/\\|/)\n                .reduce(function (result, alternation) {\n                    return result.concat(tail.map(function (pattern) {\n                        return {\n                            // Make sure that an empty alternation doesn't produce two spaces:\n                            text: alternation ? alternation + pattern.text : pattern.text.replace(/^ /, ''),\n                            flags: pattern.flags,\n                            alternations: [alternation].concat(pattern.alternations)\n                        };\n                    }));\n                }, []);\n        } else {\n            return tail.map(function (pattern) {\n                return {\n                    text: token + pattern.text,\n                    flags: pattern.flags,\n                    alternations: pattern.alternations\n                };\n            });\n        }\n    }\n    return function (pattern) {\n        pattern = pattern.replace(/(\\[[^\\]]+\\]) ?/g, '$1');\n        var splitRegex = /\\[[^\\]]+\\]|\\([^\\)]+\\)/g;\n        var tokens = [];\n        var m;\n        var lastIndex = 0;\n        while ((m = splitRegex.exec(pattern))) {\n            tokens.push(pattern.slice(lastIndex, m.index));\n            tokens.push(pattern.slice(m.index, splitRegex.lastIndex));\n            lastIndex = splitRegex.lastIndex;\n        }\n        tokens.push(pattern.slice(lastIndex));\n        tokens = removeEmptyStrings(tokens);\n        var permutations = createPermutations(tokens, 0);\n        permutations.forEach(function (permutation) {\n            permutation.text = permutation.text.trim();\n            if (permutation.text === '') {\n                // This can only happen if the pattern only contains flags\n                throw new Error(\"Assertion patterns must not only contain flags\");\n            }\n        });\n        return permutations;\n    };\n}());\n\n\nfunction ensureValidUseOfParenthesesOrBrackets(pattern) {\n    var counts = {\n        '[': 0,\n        ']': 0,\n        '(': 0,\n        ')': 0\n    };\n    for (var i = 0; i < pattern.length; i += 1) {\n        var c = pattern.charAt(i);\n        if (c in counts) {\n            counts[c] += 1;\n        }\n        if (c === ']' && counts['['] >= counts[']']) {\n            if (counts['['] === counts[']'] + 1) {\n                throw new Error(\"Assertion patterns must not contain flags with brackets: '\" + pattern + \"'\");\n            }\n\n            if (counts['('] !== counts[')']) {\n                throw new Error(\"Assertion patterns must not contain flags with parentheses: '\" + pattern + \"'\");\n            }\n\n            if (pattern.charAt(i - 1) === '[') {\n                throw new Error(\"Assertion patterns must not contain empty flags: '\" + pattern + \"'\");\n            }\n        } else if (c === ')' && counts['('] >= counts[')']) {\n            if (counts['('] === counts[')'] + 1) {\n                throw new Error(\"Assertion patterns must not contain alternations with parentheses: '\" + pattern + \"'\");\n            }\n\n            if (counts['['] !== counts[']']) {\n                throw new Error(\"Assertion patterns must not contain alternations with brackets: '\" + pattern + \"'\");\n            }\n        }\n    }\n\n    if (counts['['] !== counts[']']) {\n        throw new Error(\"Assertion patterns must not contain unbalanced brackets: '\" + pattern + \"'\");\n    }\n\n    if (counts['('] !== counts[')']) {\n        throw new Error(\"Assertion patterns must not contain unbalanced parentheses: '\" + pattern + \"'\");\n    }\n}\n\nmodule.exports = Unexpected;\n","\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\nexport function toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nexport function fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","\nexport function read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexport function write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\nimport * as base64 from './base64'\nimport * as ieee754 from './ieee754'\nimport isArray from './isArray'\n\nexport var INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength()\nexport {_kMaxLength as kMaxLength};\nfunction typedArraySupport () {\n  return true;\n  // rollup issues\n  // try {\n  //   var arr = new Uint8Array(1)\n  //   arr.__proto__ = {\n  //     __proto__: Uint8Array.prototype,\n  //     foo: function () { return 42 }\n  //   }\n  //   return arr.foo() === 42 && // typed array instances can be augmented\n  //       typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n  //       arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  // } catch (e) {\n  //   return false\n  // }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    // Object.defineProperty(Buffer, Symbol.species, {\n    //   value: null,\n    //   configurable: true\n    // })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nexport function SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nexport function isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n","module.exports = arrayDiff;\n\n// Based on some rough benchmarking, this algorithm is about O(2n) worst case,\n// and it can compute diffs on random arrays of length 1024 in about 34ms,\n// though just a few changes on an array of length 1024 takes about 0.5ms\n\narrayDiff.InsertDiff = InsertDiff;\narrayDiff.RemoveDiff = RemoveDiff;\narrayDiff.MoveDiff = MoveDiff;\n\nfunction InsertDiff(index, values) {\n  this.index = index;\n  this.values = values;\n}\nInsertDiff.prototype.type = 'insert';\nInsertDiff.prototype.toJSON = function() {\n  return {\n    type: this.type\n  , index: this.index\n  , values: this.values\n  };\n};\n\nfunction RemoveDiff(index, howMany) {\n  this.index = index;\n  this.howMany = howMany;\n}\nRemoveDiff.prototype.type = 'remove';\nRemoveDiff.prototype.toJSON = function() {\n  return {\n    type: this.type\n  , index: this.index\n  , howMany: this.howMany\n  };\n};\n\nfunction MoveDiff(from, to, howMany) {\n  this.from = from;\n  this.to = to;\n  this.howMany = howMany;\n}\nMoveDiff.prototype.type = 'move';\nMoveDiff.prototype.toJSON = function() {\n  return {\n    type: this.type\n  , from: this.from\n  , to: this.to\n  , howMany: this.howMany\n  };\n};\n\nfunction strictEqual(a, b) {\n  return a === b;\n}\n\nfunction arrayDiff(before, after, equalFn) {\n  if (!equalFn) equalFn = strictEqual;\n\n  // Find all items in both the before and after array, and represent them\n  // as moves. Many of these \"moves\" may end up being discarded in the last\n  // pass if they are from an index to the same index, but we don't know this\n  // up front, since we haven't yet offset the indices.\n  //\n  // Also keep a map of all the indices accounted for in the before and after\n  // arrays. These maps are used next to create insert and remove diffs.\n  var beforeLength = before.length;\n  var afterLength = after.length;\n  var moves = [];\n  var beforeMarked = {};\n  var afterMarked = {};\n  for (var beforeIndex = 0; beforeIndex < beforeLength; beforeIndex++) {\n    var beforeItem = before[beforeIndex];\n    for (var afterIndex = 0; afterIndex < afterLength; afterIndex++) {\n      if (afterMarked[afterIndex]) continue;\n      if (!equalFn(beforeItem, after[afterIndex], beforeIndex, afterIndex)) continue;\n      var from = beforeIndex;\n      var to = afterIndex;\n      var howMany = 0;\n      do {\n        beforeMarked[beforeIndex++] = afterMarked[afterIndex++] = true;\n        howMany++;\n      } while (\n        beforeIndex < beforeLength &&\n        afterIndex < afterLength &&\n        equalFn(before[beforeIndex], after[afterIndex], beforeIndex, afterIndex) &&\n        !afterMarked[afterIndex]\n      );\n      moves.push(new MoveDiff(from, to, howMany));\n      beforeIndex--;\n      break;\n    }\n  }\n\n  // Create a remove for all of the items in the before array that were\n  // not marked as being matched in the after array as well\n  var removes = [];\n  for (beforeIndex = 0; beforeIndex < beforeLength;) {\n    if (beforeMarked[beforeIndex]) {\n      beforeIndex++;\n      continue;\n    }\n    var index = beforeIndex;\n    var howMany = 0;\n    while (beforeIndex < beforeLength && !beforeMarked[beforeIndex++]) {\n      howMany++;\n    }\n    removes.push(new RemoveDiff(index, howMany));\n  }\n\n  // Create an insert for all of the items in the after array that were\n  // not marked as being matched in the before array as well\n  var inserts = [];\n  for (afterIndex = 0; afterIndex < afterLength;) {\n    if (afterMarked[afterIndex]) {\n      afterIndex++;\n      continue;\n    }\n    var index = afterIndex;\n    var howMany = 0;\n    while (afterIndex < afterLength && !afterMarked[afterIndex++]) {\n      howMany++;\n    }\n    var values = after.slice(index, index + howMany);\n    inserts.push(new InsertDiff(index, values));\n  }\n\n  var insertsLength = inserts.length;\n  var removesLength = removes.length;\n  var movesLength = moves.length;\n  var i, j;\n\n  // Offset subsequent removes and moves by removes\n  var count = 0;\n  for (i = 0; i < removesLength; i++) {\n    var remove = removes[i];\n    remove.index -= count;\n    count += remove.howMany;\n    for (j = 0; j < movesLength; j++) {\n      var move = moves[j];\n      if (move.from >= remove.index) move.from -= remove.howMany;\n    }\n  }\n\n  // Offset moves by inserts\n  for (i = insertsLength; i--;) {\n    var insert = inserts[i];\n    var howMany = insert.values.length;\n    for (j = movesLength; j--;) {\n      var move = moves[j];\n      if (move.to >= insert.index) move.to -= howMany;\n    }\n  }\n\n  // Offset the to of moves by later moves\n  for (i = movesLength; i-- > 1;) {\n    var move = moves[i];\n    if (move.to === move.from) continue;\n    for (j = i; j--;) {\n      var earlier = moves[j];\n      if (earlier.to >= move.to) earlier.to -= move.howMany;\n      if (earlier.to >= move.from) earlier.to += move.howMany;\n    }\n  }\n\n  // Only output moves that end up having an effect after offsetting\n  var outputMoves = [];\n\n  // Offset the from of moves by earlier moves\n  for (i = 0; i < movesLength; i++) {\n    var move = moves[i];\n    if (move.to === move.from) continue;\n    outputMoves.push(move);\n    for (j = i + 1; j < movesLength; j++) {\n      var later = moves[j];\n      if (later.from >= move.from) later.from -= move.howMany;\n      if (later.from >= move.to) later.from += move.howMany;\n    }\n  }\n\n  return removes.concat(outputMoves, inserts);\n}\n","var arrayDiff = require('arraydiff-papandreou');\n\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i += 1) {\n        var source = arguments[i];\n        Object.keys(source).forEach(function (key) {\n            target[key] = source[key];\n        });\n    }\n    return target;\n}\n\nmodule.exports = function arrayChanges(actual, expected, equal, similar, includeNonNumericalProperties) {\n    var mutatedArray = new Array(actual.length);\n\n    for (var k = 0; k < actual.length; k += 1) {\n        mutatedArray[k] = {\n            type: 'similar',\n            value: actual[k],\n            actualIndex: k\n        };\n    }\n\n    equal = equal || function (a, b) {\n        return a === b;\n    };\n\n    similar = similar || function (a, b) {\n        return false;\n    };\n\n    var itemsDiff = arrayDiff(Array.prototype.slice.call(actual), Array.prototype.slice.call(expected), function (a, b, aIndex, bIndex) {\n        return equal(a, b, aIndex, bIndex) || similar(a, b, aIndex, bIndex);\n    });\n\n    function offsetIndex(index) {\n        var offsetIndex = 0;\n        var i;\n        for (i = 0; i < mutatedArray.length && offsetIndex < index; i += 1) {\n            if (mutatedArray[i].type !== 'remove' && mutatedArray[i].type !== 'moveSource') {\n                offsetIndex++;\n            }\n        }\n\n        return i;\n    }\n\n    var removes = itemsDiff.filter(function (diffItem) {\n        return diffItem.type === 'remove';\n    });\n\n    var removedItems = 0;\n    removes.forEach(function (diffItem) {\n        var removeIndex = removedItems + diffItem.index;\n        mutatedArray.slice(removeIndex, diffItem.howMany + removeIndex).forEach(function (v) {\n            v.type = 'remove';\n        });\n        removedItems += diffItem.howMany;\n    });\n\n    var moves = itemsDiff.filter(function (diffItem) {\n        return diffItem.type === 'move';\n    });\n\n\n    moves.forEach(function (diffItem) {\n        var moveFromIndex = offsetIndex(diffItem.from + 1) - 1;\n        var removed = mutatedArray.slice(moveFromIndex, diffItem.howMany + moveFromIndex);\n        var added = removed.map(function (v) {\n            return extend({}, v, { last: false, type: 'moveTarget' });\n        });\n        removed.forEach(function (v) {\n            v.type = 'moveSource';\n        });\n        var insertIndex = offsetIndex(diffItem.to);\n        Array.prototype.splice.apply(mutatedArray, [insertIndex, 0].concat(added));\n    });\n\n\n    var inserts = itemsDiff.filter(function (diffItem) {\n        return diffItem.type === 'insert';\n    });\n\n    inserts.forEach(function (diffItem) {\n        var added = new Array(diffItem.values.length);\n        for (var i = 0 ; i < diffItem.values.length ; i += 1) {\n            added[i] = {\n                type: 'insert',\n                value: diffItem.values[i],\n                expectedIndex: diffItem.index\n            };\n        }\n        var insertIndex = offsetIndex(diffItem.index);\n        Array.prototype.splice.apply(mutatedArray, [insertIndex, 0].concat(added));\n    });\n\n    var offset = 0;\n    mutatedArray.forEach(function (diffItem, index) {\n        var type = diffItem.type;\n        if (type === 'remove' || type === 'moveSource') {\n            offset -= 1;\n        } else if (type === 'similar') {\n            diffItem.expected = expected[offset + index];\n            diffItem.expectedIndex = offset + index;\n        }\n    });\n\n    var conflicts = mutatedArray.reduce(function (conflicts, item) {\n        return item.type === 'similar' || item.type === 'moveSource' || item.type === 'moveTarget' ? conflicts : conflicts + 1;\n    }, 0);\n\n    var c, i;\n    for (i = 0, c = 0; i < Math.max(actual.length, expected.length) && c <= conflicts; i += 1) {\n        if (\n            i >= actual.length || i >= expected.length || (!equal(actual[i], expected[i], i, i) && !similar(actual[i], expected[i], i, i))\n        ) {\n            c += 1;\n        }\n    }\n\n    if (c <= conflicts) {\n        mutatedArray = [];\n        var j;\n        for (j = 0; j < Math.min(actual.length, expected.length); j += 1) {\n            mutatedArray.push({\n                type: 'similar',\n                value: actual[j],\n                expected: expected[j],\n                actualIndex: j,\n                expectedIndex: j\n            });\n        }\n\n        if (actual.length < expected.length) {\n            for (; j < Math.max(actual.length, expected.length); j += 1) {\n                mutatedArray.push({\n                    type: 'insert',\n                    value: expected[j],\n                    expectedIndex: j\n                });\n            }\n        } else {\n            for (; j < Math.max(actual.length, expected.length); j += 1) {\n                mutatedArray.push({\n                    type: 'remove',\n                    value: actual[j],\n                    actualIndex: j\n                });\n            }\n        }\n    }\n\n    mutatedArray.forEach(function (diffItem) {\n        if (diffItem.type === 'similar' && equal(diffItem.value, diffItem.expected, diffItem.actualIndex, diffItem.expectedIndex)) {\n            diffItem.type = 'equal';\n        }\n    });\n\n    if (includeNonNumericalProperties) {\n        var nonNumericalKeys;\n        if (Array.isArray(includeNonNumericalProperties)) {\n            nonNumericalKeys = includeNonNumericalProperties;\n        } else {\n            var isSeenByNonNumericalKey = {};\n            nonNumericalKeys = [];\n            [actual, expected].forEach(function (obj) {\n                Object.keys(obj).forEach(function (key) {\n                    if (!/^(?:0|[1-9][0-9]*)$/.test(key) && !isSeenByNonNumericalKey[key]) {\n                        isSeenByNonNumericalKey[key] = true;\n                        nonNumericalKeys.push(key);\n                    }\n                });\n                if (Object.getOwnPropertySymbols) {\n                    Object.getOwnPropertySymbols(obj).forEach(function (symbol) {\n                        if (!isSeenByNonNumericalKey[symbol]) {\n                            isSeenByNonNumericalKey[symbol] = true;\n                            nonNumericalKeys.push(symbol);\n                        }\n                    });\n                }\n            });\n        }\n        nonNumericalKeys.forEach(function (key) {\n            if (key in actual) {\n                if (key in expected) {\n                    mutatedArray.push({\n                        type: equal(actual[key], expected[key], key, key) ? 'equal' : 'similar',\n                        expectedIndex: key,\n                        actualIndex: key,\n                        value: actual[key],\n                        expected: expected[key]\n                    });\n                } else {\n                    mutatedArray.push({\n                        type: 'remove',\n                        actualIndex: key,\n                        value: actual[key]\n                    });\n                }\n            } else {\n                mutatedArray.push({\n                    type: 'insert',\n                    expectedIndex: key,\n                    value: expected[key]\n                });\n            }\n        });\n    }\n\n    if (mutatedArray.length > 0) {\n        mutatedArray[mutatedArray.length - 1].last = true;\n    }\n\n    return mutatedArray;\n};\n","'use strict';\nvar repeating = require('repeating');\n\n// detect either spaces or tabs but not both to properly handle tabs\n// for indentation and spaces for alignment\nvar INDENT_RE = /^(?:( )+|\\t+)/;\n\nfunction getMostUsed(indents) {\n\tvar result = 0;\n\tvar maxUsed = 0;\n\tvar maxWeight = 0;\n\n\tfor (var n in indents) {\n\t\tvar indent = indents[n];\n\t\tvar u = indent[0];\n\t\tvar w = indent[1];\n\n\t\tif (u > maxUsed || u === maxUsed && w > maxWeight) {\n\t\t\tmaxUsed = u;\n\t\t\tmaxWeight = w;\n\t\t\tresult = +n;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nmodule.exports = function (str) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\t// used to see if tabs or spaces are the most used\n\tvar tabs = 0;\n\tvar spaces = 0;\n\n\t// remember the size of previous line's indentation\n\tvar prev = 0;\n\n\t// remember how many indents/unindents as occurred for a given size\n\t// and how much lines follow a given indentation\n\t//\n\t// indents = {\n\t//    3: [1, 0],\n\t//    4: [1, 5],\n\t//    5: [1, 0],\n\t//   12: [1, 0],\n\t// }\n\tvar indents = {};\n\n\t// pointer to the array of last used indent\n\tvar current;\n\n\t// whether the last action was an indent (opposed to an unindent)\n\tvar isIndent;\n\n\tstr.split(/\\n/g).forEach(function (line) {\n\t\tif (!line) {\n\t\t\t// ignore empty lines\n\t\t\treturn;\n\t\t}\n\n\t\tvar indent;\n\t\tvar matches = line.match(INDENT_RE);\n\n\t\tif (!matches) {\n\t\t\tindent = 0;\n\t\t} else {\n\t\t\tindent = matches[0].length;\n\n\t\t\tif (matches[1]) {\n\t\t\t\tspaces++;\n\t\t\t} else {\n\t\t\t\ttabs++;\n\t\t\t}\n\t\t}\n\n\t\tvar diff = indent - prev;\n\t\tprev = indent;\n\n\t\tif (diff) {\n\t\t\t// an indent or unindent has been detected\n\n\t\t\tisIndent = diff > 0;\n\n\t\t\tcurrent = indents[isIndent ? diff : -diff];\n\n\t\t\tif (current) {\n\t\t\t\tcurrent[0]++;\n\t\t\t} else {\n\t\t\t\tcurrent = indents[diff] = [1, 0];\n\t\t\t}\n\t\t} else if (current) {\n\t\t\t// if the last action was an indent, increment the weight\n\t\t\tcurrent[1] += +isIndent;\n\t\t}\n\t});\n\n\tvar amount = getMostUsed(indents);\n\n\tvar type;\n\tvar actual;\n\tif (!amount) {\n\t\ttype = null;\n\t\tactual = '';\n\t} else if (spaces >= tabs) {\n\t\ttype = 'space';\n\t\tactual = repeating(' ', amount);\n\t} else {\n\t\ttype = 'tab';\n\t\tactual = repeating('\\t', amount);\n\t}\n\n\treturn {\n\t\tamount: amount,\n\t\ttype: type,\n\t\tindent: actual\n\t};\n};\n","\nmodule.exports = arrayDiff;\n\nvar MAX_STACK_DEPTH = 1000;\n\n// Based on some rough benchmarking, this algorithm is about O(2n) worst case,\n// and it can compute diffs on random arrays of length 1024 in about 34ms,\n// though just a few changes on an array of length 1024 takes about 0.5ms\n\narrayDiff.InsertDiff = InsertDiff;\narrayDiff.RemoveDiff = RemoveDiff;\narrayDiff.MoveDiff = MoveDiff;\n\nfunction InsertDiff(index, values) {\n    this.index = index;\n    this.values = values;\n}\nInsertDiff.prototype.type = 'insert';\nInsertDiff.prototype.toJSON = function() {\n    return {\n        type: this.type\n        , index: this.index\n        , values: this.values\n    };\n};\n\nfunction RemoveDiff(index, howMany) {\n    this.index = index;\n    this.howMany = howMany;\n}\nRemoveDiff.prototype.type = 'remove';\nRemoveDiff.prototype.toJSON = function() {\n    return {\n        type: this.type\n        , index: this.index\n        , howMany: this.howMany\n    };\n};\n\nfunction MoveDiff(from, to, howMany) {\n    this.from = from;\n    this.to = to;\n    this.howMany = howMany;\n}\nMoveDiff.prototype.type = 'move';\nMoveDiff.prototype.toJSON = function() {\n    return {\n        type: this.type\n        , from: this.from\n        , to: this.to\n        , howMany: this.howMany\n    };\n};\n\nfunction strictEqual(a, b, indexA, indexB, callback) {\n    return callback(a === b);\n}\n\n\nfunction arrayDiff(before, after, equalFn, callback) {\n    if (!equalFn) equalFn = strictEqual;\n\n    // Find all items in both the before and after array, and represent them\n    // as moves. Many of these \"moves\" may end up being discarded in the last\n    // pass if they are from an index to the same index, but we don't know this\n    // up front, since we haven't yet offset the indices.\n    //\n    // Also keep a map of all the indices accounted for in the before and after\n    // arrays. These maps are used next to create insert and remove diffs.\n    var beforeLength = before.length;\n    var afterLength = after.length;\n    var moves = [];\n    var beforeMarked = {};\n    var afterMarked = {};\n\n    function findMatching(beforeIndex, afterIndex, howMany, callback) {\n\n        beforeMarked[beforeIndex++] = afterMarked[afterIndex++] = true;\n        howMany++;\n\n        if (beforeIndex < beforeLength &&\n            afterIndex < afterLength &&\n            !afterMarked[afterIndex]) {\n\n            equalFn(before[beforeIndex], after[afterIndex], beforeIndex, afterIndex, function (areEqual) {\n                if (areEqual) {\n                    setTimeout(function () {\n                        findMatching(beforeIndex, afterIndex, howMany, callback);\n                    }, 0);\n                } else {\n                    callback(beforeIndex, afterIndex, howMany);\n                }\n            });\n        } else {\n            callback(beforeIndex, afterIndex, howMany);\n        }\n\n\n    }\n\n    function compare(beforeIndex, afterIndex, stackDepthRemaining, callback) {\n        if (afterIndex >= afterLength) {\n            beforeIndex++;\n            afterIndex = 0;\n        }\n        if (beforeIndex >= beforeLength) {\n            callback();\n            return;\n        }\n\n        if (!afterMarked[afterIndex]) {\n            equalFn(before[beforeIndex], after[afterIndex], beforeIndex, afterIndex, function (areEqual) {\n                if (areEqual) {\n\n                    var from = beforeIndex;\n                    var to = afterIndex;\n                    findMatching(beforeIndex, afterIndex, 0, function (newBeforeIndex, newAfterIndex, howMany) {\n\n                        moves.push(new MoveDiff(from, to, howMany));\n                        if (stackDepthRemaining) {\n                            compare(newBeforeIndex, 0, stackDepthRemaining - 1, callback);\n                        } else {\n                            setTimeout(function () {\n                                compare(newBeforeIndex, 0, MAX_STACK_DEPTH, callback);\n                            }, 0);\n                        }\n                    });\n                } else {\n                    if (stackDepthRemaining) {\n                        compare(beforeIndex, afterIndex + 1, stackDepthRemaining - 1, callback);\n                    } else {\n                        setTimeout(function () {\n                            compare(beforeIndex, afterIndex + 1, MAX_STACK_DEPTH, callback);\n                        }, 0);\n                    }\n                }\n            });\n        } else {\n            if (stackDepthRemaining) {\n                compare(beforeIndex, afterIndex + 1, stackDepthRemaining - 1, callback);\n            } else {\n                setTimeout(function () {\n                    compare(beforeIndex, afterIndex + 1, MAX_STACK_DEPTH, callback);\n                }, 0);\n            }\n        }\n    }\n\n    compare(0, 0, MAX_STACK_DEPTH, function () {\n\n        // Create a remove for all of the items in the before array that were\n        // not marked as being matched in the after array as well\n        var removes = [];\n        for (var beforeIndex = 0; beforeIndex < beforeLength;) {\n            if (beforeMarked[beforeIndex]) {\n                beforeIndex++;\n                continue;\n            }\n            var index = beforeIndex;\n            var howMany = 0;\n            while (beforeIndex < beforeLength && !beforeMarked[beforeIndex++]) {\n                howMany++;\n            }\n            removes.push(new RemoveDiff(index, howMany));\n        }\n\n        // Create an insert for all of the items in the after array that were\n        // not marked as being matched in the before array as well\n        var inserts = [];\n        for (var afterIndex = 0; afterIndex < afterLength;) {\n            if (afterMarked[afterIndex]) {\n                afterIndex++;\n                continue;\n            }\n            var index = afterIndex;\n            var howMany = 0;\n            while (afterIndex < afterLength && !afterMarked[afterIndex++]) {\n                howMany++;\n            }\n            var values = after.slice(index, index + howMany);\n            inserts.push(new InsertDiff(index, values));\n        }\n\n        var insertsLength = inserts.length;\n        var removesLength = removes.length;\n        var movesLength = moves.length;\n        var i, j;\n\n        // Offset subsequent removes and moves by removes\n        var count = 0;\n        for (i = 0; i < removesLength; i++) {\n            var remove = removes[i];\n            remove.index -= count;\n            count += remove.howMany;\n            for (j = 0; j < movesLength; j++) {\n                var move = moves[j];\n                if (move.from >= remove.index) move.from -= remove.howMany;\n            }\n        }\n\n        // Offset moves by inserts\n        for (i = insertsLength; i--;) {\n            var insert = inserts[i];\n            var howMany = insert.values.length;\n            for (j = movesLength; j--;) {\n                var move = moves[j];\n                if (move.to >= insert.index) move.to -= howMany;\n            }\n        }\n\n        // Offset the to of moves by later moves\n        for (i = movesLength; i-- > 1;) {\n            var move = moves[i];\n            if (move.to === move.from) continue;\n            for (j = i; j--;) {\n                var earlier = moves[j];\n                if (earlier.to >= move.to) earlier.to -= move.howMany;\n                if (earlier.to >= move.from) earlier.to += move.howMany;\n            }\n        }\n\n        // Only output moves that end up having an effect after offsetting\n        var outputMoves = [];\n\n        // Offset the from of moves by earlier moves\n        for (i = 0; i < movesLength; i++) {\n            var move = moves[i];\n            if (move.to === move.from) continue;\n            outputMoves.push(move);\n            for (j = i + 1; j < movesLength; j++) {\n                var later = moves[j];\n                if (later.from >= move.from) later.from -= move.howMany;\n                if (later.from >= move.to) later.from += move.howMany;\n            }\n        }\n\n        callback(removes.concat(outputMoves, inserts));\n    });\n}\n","/*global setTimeout */\nvar arrayDiff = require('arraydiff-async');\nvar MAX_STACK_DEPTH = 1000;\n\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i += 1) {\n        var source = arguments[i];\n        Object.keys(source).forEach(function (key) {\n            target[key] = source[key];\n        });\n    }\n    return target;\n}\n\nmodule.exports = function arrayChanges(actual, expected, equal, similar, includeNonNumericalProperties, arrayChangesCallback) {\n    if (typeof includeNonNumericalProperties === 'function') {\n        arrayChangesCallback = includeNonNumericalProperties;\n        includeNonNumericalProperties = false;\n    }\n    var mutatedArray = new Array(actual.length);\n\n    for (var k = 0; k < actual.length; k += 1) {\n        mutatedArray[k] = {\n            type: 'similar',\n            actualIndex: k,\n            value: actual[k]\n        };\n    }\n\n    similar = similar || function (a, b, aIndex, bIndex, callback) {\n            return callback(false);\n        };\n\n    arrayDiff([].concat(actual), [].concat(expected), function (a, b, aIndex, bIndex, callback) {\n        equal(a, b, aIndex, bIndex, function (isEqual) {\n            if (isEqual) {\n                return callback(true);\n            }\n            similar(a, b, aIndex, bIndex, function (isSimilar) {\n                return callback(isSimilar);\n            });\n        });\n    }, function (itemsDiff) {\n\n        function offsetIndex(index) {\n            var offsetIndex = 0;\n            var i;\n            for (i = 0; i < mutatedArray.length && offsetIndex < index; i += 1) {\n                if (mutatedArray[i].type !== 'remove' && mutatedArray[i].type !== 'moveSource') {\n                    offsetIndex++;\n                }\n            }\n\n            return i;\n        }\n\n        var removes = itemsDiff.filter(function (diffItem) {\n            return diffItem.type === 'remove';\n        });\n\n        var removedItems = 0;\n        removes.forEach(function (diffItem) {\n            var removeIndex = removedItems + diffItem.index;\n            mutatedArray.slice(removeIndex, diffItem.howMany + removeIndex).forEach(function (v) {\n                v.type = 'remove';\n            });\n            removedItems += diffItem.howMany;\n        });\n\n        var moves = itemsDiff.filter(function (diffItem) {\n            return diffItem.type === 'move';\n        });\n\n        moves.forEach(function (diffItem) {\n            var moveFromIndex = offsetIndex(diffItem.from + 1) - 1;\n            var removed = mutatedArray.slice(moveFromIndex, diffItem.howMany + moveFromIndex);\n            var added = removed.map(function (v) {\n                return extend({}, v, { last: false, type: 'moveTarget' });\n            });\n            removed.forEach(function (v) {\n                v.type = 'moveSource';\n            });\n            var insertIndex = offsetIndex(diffItem.to);\n            Array.prototype.splice.apply(mutatedArray, [insertIndex, 0].concat(added));\n        });\n\n        var inserts = itemsDiff.filter(function (diffItem) {\n            return diffItem.type === 'insert';\n        });\n\n        inserts.forEach(function (diffItem) {\n            var added = new Array(diffItem.values.length);\n            for (var i = 0 ; i < diffItem.values.length ; i += 1) {\n                added[i] = {\n                    type: 'insert',\n                    value: diffItem.values[i]\n                };\n            }\n            Array.prototype.splice.apply(mutatedArray, [offsetIndex(diffItem.index), 0].concat(added));\n        });\n\n        var offset = 0;\n        mutatedArray.forEach(function (diffItem, index) {\n            var type = diffItem.type;\n            if (type === 'remove' || type === 'moveSource') {\n                offset -= 1;\n            } else if (type === 'similar') {\n                diffItem.expected = expected[offset + index];\n                diffItem.expectedIndex = offset + index;\n            }\n        });\n\n        var conflicts = mutatedArray.reduce(function (conflicts, item) {\n            return item.type === 'similar' || item.type === 'moveSource' || item.type === 'moveTarget' ? conflicts : conflicts + 1;\n        }, 0);\n\n        var end = Math.max(actual.length, expected.length);\n\n        var countConflicts = function (i, c, stackCallsRemaining, callback) {\n\n            if (i >= end || c > conflicts) {\n                // Do a setTimeout to let the stack unwind\n                return setTimeout(function () {\n                    callback(c);\n                }, 0);\n            }\n\n            similar(actual[i], expected[i], i, i, function (areSimilar) {\n                if (!areSimilar) {\n                    c += 1;\n                    if (stackCallsRemaining === 0) {\n                        return setTimeout(function () {\n                            countConflicts(i + 1, c, MAX_STACK_DEPTH, callback);\n                        });\n                    }\n                    return countConflicts(i + 1, c, stackCallsRemaining - 1, callback);\n                }\n                equal(actual[i], expected[i], i, i, function (areEqual) {\n                    if (!areEqual) {\n                        c += 1;\n                    }\n                    if (stackCallsRemaining === 0) {\n                        return setTimeout(function () {\n                            countConflicts(i + 1, c, MAX_STACK_DEPTH, callback);\n                        });\n                    }\n                    return countConflicts(i + 1, c, stackCallsRemaining - 1, callback);\n                });\n            });\n        };\n\n        countConflicts(0, 0, MAX_STACK_DEPTH, function (c) {\n            if (c <= conflicts) {\n                mutatedArray = [];\n                var j;\n                for (j = 0; j < Math.min(actual.length, expected.length); j += 1) {\n                    mutatedArray.push({\n                        type: 'similar',\n                        actualIndex: j,\n                        expectedIndex: j,\n                        value: actual[j],\n                        expected: expected[j]\n                    });\n                }\n\n                if (actual.length < expected.length) {\n                    for (; j < Math.max(actual.length, expected.length); j += 1) {\n                        mutatedArray.push({\n                            type: 'insert',\n                            value: expected[j]\n                        });\n                    }\n                } else {\n                    for (; j < Math.max(actual.length, expected.length); j += 1) {\n                        mutatedArray.push({\n                            type: 'remove',\n                            value: actual[j]\n                        });\n                    }\n                }\n            }\n\n            var setEqual = function (i, stackCallsRemaining, callback) {\n                if (i >= mutatedArray.length) {\n                    return callback();\n                }\n                var diffItem = mutatedArray[i];\n                if (diffItem.type === 'similar') {\n                    return equal(diffItem.value, diffItem.expected, diffItem.actualIndex, diffItem.expectedIndex, function (areEqual) {\n                        if (areEqual) {\n                            mutatedArray[i].type = 'equal';\n                        }\n                        if (stackCallsRemaining === 0) {\n                            return setTimeout(function () {\n                                setEqual(i + 1, MAX_STACK_DEPTH, callback);\n                            });\n                        }\n                        setEqual(i + 1, stackCallsRemaining - 1, callback);\n                    });\n                }\n                if (stackCallsRemaining === 0) {\n                    return setTimeout(function () {\n                        setEqual(i + 1, MAX_STACK_DEPTH, callback);\n                    });\n                }\n                return setEqual(i + 1, stackCallsRemaining - 1, callback);\n            };\n\n            if (includeNonNumericalProperties) {\n                var nonNumericalKeys;\n                if (Array.isArray(includeNonNumericalProperties)) {\n                    nonNumericalKeys = includeNonNumericalProperties;\n                } else {\n                    var isSeenByNonNumericalKey = {};\n                    nonNumericalKeys = [];\n                    [actual, expected].forEach(function (obj) {\n                        Object.keys(obj).forEach(function (key) {\n                            if (!/^(?:0|[1-9][0-9]*)$/.test(key) && !isSeenByNonNumericalKey[key]) {\n                                isSeenByNonNumericalKey[key] = true;\n                                nonNumericalKeys.push(key);\n                            }\n                        });\n                        if (Object.getOwnPropertySymbols) {\n                            Object.getOwnPropertySymbols(obj).forEach(function (symbol) {\n                                if (!isSeenByNonNumericalKey[symbol]) {\n                                    isSeenByNonNumericalKey[symbol] = true;\n                                    nonNumericalKeys.push(symbol);\n                                }\n                            });\n                        }\n                    });\n                }\n                nonNumericalKeys.forEach(function (key) {\n                    if (key in actual) {\n                        if (key in expected) {\n                            mutatedArray.push({\n                                type: 'similar',\n                                expectedIndex: key,\n                                actualIndex: key,\n                                value: actual[key],\n                                expected: expected[key]\n                            });\n                        } else {\n                            mutatedArray.push({\n                                type: 'remove',\n                                actualIndex: key,\n                                value: actual[key]\n                            });\n                        }\n                    } else {\n                        mutatedArray.push({\n                            type: 'insert',\n                            expectedIndex: key,\n                            value: expected[key]\n                        });\n                    }\n                });\n            }\n\n            setEqual(0, MAX_STACK_DEPTH, function () {\n                if (mutatedArray.length > 0) {\n                    mutatedArray[mutatedArray.length - 1].last = true;\n                }\n\n                arrayChangesCallback(mutatedArray);\n            });\n        });\n    });\n};\n","module.exports = function AssertionString(text) {\n    this.text = text;\n};\n","var AssertionString = require('./AssertionString');\n\nmodule.exports = function createStandardErrorMessage(output, subject, testDescription, args, options) {\n    options = options || {};\n    var preamble = 'expected';\n\n    var subjectOutput = output.clone();\n    if (subject) {\n        subject.call(subjectOutput, subjectOutput);\n    }\n\n    var argsOutput = output.clone();\n    if (typeof args === 'function') {\n        args.call(argsOutput, argsOutput);\n    } else {\n        if (args.length > 0) {\n            var previousWasAssertion = false;\n            args.forEach(function (arg, index) {\n                var isAssertion = arg && typeof arg === 'object' && arg instanceof AssertionString;\n                if (0 < index) {\n                    if (!isAssertion && !previousWasAssertion) {\n                        argsOutput.text(',');\n                    }\n                    argsOutput.sp();\n                }\n                if (isAssertion) {\n                    argsOutput.error(arg.text);\n                } else {\n                    arg.call(argsOutput, argsOutput);\n                }\n                previousWasAssertion = isAssertion;\n            });\n        }\n    }\n\n    var subjectSize = subjectOutput.size();\n    var argsSize = argsOutput.size();\n    var width = preamble.length + subjectSize.width + argsSize.width + testDescription.length;\n    var height = Math.max(subjectSize.height, argsSize.height);\n\n    if ('omitSubject' in output && output.omitSubject === options.subject) {\n        var matchTestDescription = /^(not )?to (.*)/.exec(testDescription);\n        if (matchTestDescription) {\n            output.error('should ');\n            if (matchTestDescription[1]) {\n                output.error('not ');\n            }\n            testDescription = matchTestDescription[2];\n        } else {\n            testDescription = 'expected: ' + testDescription;\n        }\n    } else if (options.compact && options.compactSubject && (subjectSize.height > 1 || subjectSize.width > (options.compactWidth || 35))) {\n        output.error('expected').sp();\n        options.compactSubject.call(output, output);\n        output.sp();\n    } else {\n        output.error(preamble);\n        if (subjectSize.height > 1) {\n            output.nl();\n        } else {\n            output.sp();\n        }\n        output.append(subjectOutput);\n        if (subjectSize.height > 1 || (height === 1 && width > output.preferredWidth)) {\n            output.nl();\n        } else {\n            output.sp();\n        }\n    }\n\n    output.error(testDescription);\n\n    if (argsSize.height > 1) {\n        output.nl();\n    } else if (argsSize.width > 0) {\n        output.sp();\n    }\n\n    output.append(argsOutput);\n\n    return output;\n};\n","var intersection = {\n    intersects: function intersects(x, y) {\n        return (x.start < y.end && y.start < x.end) || x.start === y.start;\n    },\n\n    intersectsWithSome: function intersectsWithSome(intervals, interval) {\n        function intersectWithInterval(other) {\n            return intersection.intersects(interval, other);\n        }\n        return intervals.some(intersectWithInterval);\n    }\n};\n\nmodule.exports = intersection;\n","module.exports = function (a, b) {\n    var c = b.start - a.start;\n    if (c !== 0) { return c; }\n    return (a.end - a.start) - (b.end - b.start);\n};\n","var intersectsWithSome = require('./intersection').intersectsWithSome;\nvar byDescStartAndLength = require('./byDescStartAndLength');\n\nmodule.exports = function greedyIntervalPacker(intervals, options) {\n    options = options || {};\n\n    if (!Array.isArray(intervals)) {\n        throw new Error('The interval packer requires an array of objects with start and end properties.');\n    }\n\n    if (intervals.length === 0) {\n        return [];\n    }\n\n    intervals.forEach(function (interval) {\n        if (\n            typeof interval !== 'object' ||\n            typeof interval.start !== 'number' ||\n            typeof interval.end !== 'number' ||\n            interval.end <= interval.start\n        ) {\n            throw new Error('Intervals must be objects with integer properties start and end where start < end.');\n        }\n    });\n\n    intervals = [].concat(intervals).sort(byDescStartAndLength);\n\n    var currentPartition;\n    var partitions = [];\n    var currentPartitionEnd = -Infinity;\n\n    while (intervals.length > 0) {\n        var interval = intervals.pop();\n\n        if (currentPartitionEnd <= interval.start) {\n            currentPartition = [[]];\n            partitions.push(currentPartition);\n        }\n\n        var i = 0;\n\n        while (\n            i < currentPartition.length &&\n            intersectsWithSome(currentPartition[i], interval)\n        ) {\n            i += 1;\n        }\n        (currentPartition[i] = currentPartition[i] || []).push(interval);\n        currentPartitionEnd = Math.max(currentPartitionEnd, interval.end);\n    }\n\n    if (!options.groupPartitions) {\n        return partitions.reduce(function (result, partition) {\n            partition.forEach(function (partitionGroup, i) {\n                result[i] = result[i] || [];\n                Array.prototype.push.apply(result[i], partitionGroup);\n                return result;\n            });\n            return result;\n        }, []);\n    } else {\n        return partitions;\n    }\n};\n","/* eslint-disable no-proto */\nvar canSetPrototype = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array);\nvar greedyIntervalPacker = require('greedy-interval-packer');\n\nvar setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(obj, proto) {\n    obj.__proto__ = proto;\n    return obj;\n};\n/* eslint-enable no-proto */\n\nvar utils = module.exports = {\n    objectIs: Object.is || function (a, b) {\n        // Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n        if (a === 0 && b === 0) {\n            return 1 / a === 1 / b;\n        }\n        if (a !== a) {\n            return b !== b;\n        }\n        return a === b;\n    },\n\n    isArray: function (ar) {\n        return Object.prototype.toString.call(ar) === '[object Array]';\n    },\n\n    isRegExp: function (re) {\n        return (Object.prototype.toString.call(re) === '[object RegExp]');\n    },\n\n    isError: function (err) {\n        return typeof err === 'object' && (Object.prototype.toString.call(err) === '[object Error]' || err instanceof Error);\n    },\n\n    extend: function (target) {\n        for (var i = 1; i < arguments.length; i += 1) {\n            var source = arguments[i];\n            if (source) {\n                Object.keys(source).forEach(function (key) {\n                    target[key] = source[key];\n                });\n            }\n        }\n        return target;\n    },\n\n    findFirst: function (arr, predicate) {\n        for (var i = 0 ; i < arr.length ; i += 1) {\n            if (predicate(arr[i])) {\n                return arr[i];\n            }\n        }\n        return null;\n    },\n\n    leftPad: function (str, width, ch) {\n        ch = ch || ' ';\n        while (str.length < width) {\n            str = ch + str;\n        }\n        return str;\n    },\n\n    escapeRegExpMetaChars: function (str) {\n        return str.replace(/[[\\]{}()*+?.\\\\^$|]/g, '\\\\$&');\n    },\n\n    escapeChar: function (ch) {\n        if (ch === '\\t') {\n            return '\\\\t';\n        } else if (ch === '\\r') {\n            return '\\\\r';\n        } else {\n            var charCode = ch.charCodeAt(0);\n            var hexChars = charCode.toString(16).toUpperCase();\n            if (charCode < 256) {\n                return '\\\\x' + utils.leftPad(hexChars, 2, '0');\n            } else {\n                return '\\\\u' + utils.leftPad(hexChars, 4, '0');\n            }\n        }\n    },\n\n    getFunctionName: function (f) {\n        if (typeof f.name === 'string') {\n            return f.name;\n        }\n        var matchFunctionName = Function.prototype.toString.call(f).match(/function ([^\\(]+)/);\n        if (matchFunctionName) {\n            return matchFunctionName[1];\n        }\n\n        if (f === Object) {\n            return 'Object';\n        }\n        if (f === Function) {\n            return 'Function';\n        }\n        return '';\n    },\n\n    wrapConstructorNameAroundOutput: function (output, obj) {\n        var constructor = obj.constructor;\n        var constructorName = constructor && constructor !== Object && utils.getFunctionName(constructor);\n        if (constructorName && constructorName !== 'Object') {\n            return output.clone().text(constructorName + '(').append(output).text(')');\n        } else {\n            return output;\n        }\n    },\n\n    setPrototypeOfOrExtend: canSetPrototype ? setPrototypeOf : function extend(target, source) {\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n        return target;\n    },\n\n    uniqueStringsAndSymbols: function () { // [filterFn], item1, item2...\n        var filterFn;\n        if (typeof arguments[0] === 'function') {\n            filterFn = arguments[0];\n        }\n        var index = {};\n        var uniqueStringsAndSymbols = [];\n\n        function visit(item) {\n            if (Array.isArray(item)) {\n                item.forEach(visit);\n            } else if (!Object.prototype.hasOwnProperty.call(index, item) && (!filterFn || filterFn(item))) {\n                index[item] = true;\n                uniqueStringsAndSymbols.push(item);\n            }\n        }\n\n        for (var i = filterFn ? 1 : 0 ; i < arguments.length ; i += 1) {\n            visit(arguments[i]);\n        }\n        return uniqueStringsAndSymbols;\n    },\n\n    uniqueNonNumericalStringsAndSymbols: function () { // ...\n        return utils.uniqueStringsAndSymbols(function (stringOrSymbol) {\n            return typeof stringOrSymbol === 'symbol' || !utils.numericalRegExp.test(stringOrSymbol);\n        }, Array.prototype.slice.call(arguments));\n    },\n\n    forwardFlags: function (testDescriptionString, flags) {\n        return testDescriptionString.replace(/\\[(!?)([^\\]]+)\\] ?/g, function (match, negate, flag) {\n            return Boolean(flags[flag]) !== Boolean(negate) ? flag + ' ' : '';\n        }).trim();\n    },\n\n    numericalRegExp: /^(?:0|[1-9][0-9]*)$/,\n\n    packArrows: function (changes) {\n        var moveSourceAndTargetByActualIndex = {};\n        changes.forEach(function (diffItem, index) {\n            if (diffItem.type === 'moveSource') {\n                diffItem.changeIndex = index;\n                (moveSourceAndTargetByActualIndex[diffItem.actualIndex] = moveSourceAndTargetByActualIndex[diffItem.actualIndex] || {}).source = diffItem;\n            } else if (diffItem.type === 'moveTarget') {\n                diffItem.changeIndex = index;\n                (moveSourceAndTargetByActualIndex[diffItem.actualIndex] = moveSourceAndTargetByActualIndex[diffItem.actualIndex] || {}).target = diffItem;\n            }\n        });\n        var moveIndices = Object.keys(moveSourceAndTargetByActualIndex);\n        if (moveIndices.length > 0) {\n            var arrowSpecs = [];\n            moveIndices.sort(function (a, b) {\n                // Order by distance between change indices descending\n                return Math.abs(moveSourceAndTargetByActualIndex[b].source.changeIndex - moveSourceAndTargetByActualIndex[b].target.changeIndex) - Math.abs(moveSourceAndTargetByActualIndex[a].source.changeIndex - moveSourceAndTargetByActualIndex[a].target.changeIndex);\n            }).forEach(function (actualIndex, i, keys) {\n                var moveSourceAndMoveTarget = moveSourceAndTargetByActualIndex[actualIndex];\n                var firstChangeIndex = Math.min(moveSourceAndMoveTarget.source.changeIndex, moveSourceAndMoveTarget.target.changeIndex);\n                var lastChangeIndex = Math.max(moveSourceAndMoveTarget.source.changeIndex, moveSourceAndMoveTarget.target.changeIndex);\n\n                arrowSpecs.push({\n                    start: firstChangeIndex,\n                    end: lastChangeIndex,\n                    direction: moveSourceAndMoveTarget.source.changeIndex < moveSourceAndMoveTarget.target.changeIndex ? 'down' : 'up'\n                });\n            });\n\n            var packing = greedyIntervalPacker(arrowSpecs);\n            while (packing.length > 3) {\n                // The arrow packing takes up too many lanes. Turn the moveSource/moveTarget items into inserts and removes\n                packing.shift().forEach(function (entry) {\n                    changes[entry.direction === 'up' ? entry.start : entry.end].type = 'insert';\n                    changes[entry.direction === 'up' ? entry.end : entry.start].type = 'remove';\n                });\n            }\n            return packing;\n        }\n    }\n};\n","export default typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {}\n","export var browser = true;\n","var utils = {\n    extend: function (target) {\n        for (var i = 1; i < arguments.length; i += 1) {\n            var source = arguments[i];\n            Object.keys(source).forEach(function (key) {\n                target[key] = source[key];\n            });\n        }\n        return target;\n    },\n\n    calculateOutputEntrySize: function (outputEntry) {\n        if (outputEntry.size) {\n            return outputEntry.size;\n        }\n\n        var size;\n        switch (outputEntry.style) {\n        case 'text':\n            size = { width: String(outputEntry.args.content).length, height: 1 };\n            break;\n        case 'block':\n            size = utils.calculateSize(outputEntry.args);\n            break;\n        case 'raw':\n            var arg = outputEntry.args;\n            size = { width: arg.width, height: arg.height };\n            break;\n        default: size = { width: 0, height: 0 };\n        }\n\n        outputEntry.size = size;\n        return size;\n    },\n\n    calculateLineSize: function (line) {\n        var size = { height: 1, width: 0 };\n        line.forEach(function (outputEntry) {\n            var outputEntrySize = utils.calculateOutputEntrySize(outputEntry);\n            size.width += outputEntrySize.width;\n            size.height = Math.max(outputEntrySize.height, size.height);\n        });\n        return size;\n    },\n\n    calculateSize: function (lines) {\n        var size = { height: 0, width: 0 };\n        lines.forEach(function (line) {\n            var lineSize = utils.calculateLineSize(line);\n            size.height += lineSize.height;\n            size.width = Math.max(size.width, lineSize.width);\n        });\n        return size;\n    },\n\n    arrayEquals: function (a, b) {\n        if (a === b) {\n            return true;\n        }\n\n        if (!a || a.length !== b.length) {\n            return false;\n        }\n\n        for (var i = 0; i < a.length; i += 1) {\n            if (a[i] !== b[i]) {\n                return false;\n            }\n        }\n\n        return true;\n\n    },\n\n    escapeRegExp: function (text){\n        return text.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n    },\n\n    findFirst: function (arr, predicate, thisObj) {\n        var scope = thisObj || null;\n        for (var i = 0 ; i < arr.length ; i += 1) {\n            if (predicate.call(scope, arr[i], i, arr)) {\n                return arr[i];\n            }\n        }\n        return null;\n    },\n\n    getFunctionName: function (f) {\n        if (typeof f.name === 'string') {\n            return f.name;\n        }\n        var matchFunctionName = Function.prototype.toString.call(f).match(/function ([^\\(]+)/);\n        if (matchFunctionName) {\n            return matchFunctionName[1];\n        }\n\n        if (f === Object) {\n            return 'Object';\n        }\n        if (f === Function) {\n            return 'Function';\n        }\n    }\n};\n\nmodule.exports = utils;\n","module.exports =  /^(?:bg)?#(?:[0-9a-f]{3}|[0-9a-f]{6})$/i;\n","var cssStyles = {\n    bold: 'font-weight: bold',\n    dim: 'opacity: 0.7',\n    italic: 'font-style: italic',\n    underline: 'text-decoration: underline',\n    inverse: '-webkit-filter: invert(%100); filter: invert(100%)',\n    hidden: 'visibility: hidden',\n    strikeThrough: 'text-decoration: line-through',\n\n    black: 'color: black',\n    red: 'color: red',\n    green: 'color: green',\n    yellow: 'color: yellow',\n    blue: 'color: blue',\n    magenta: 'color: magenta',\n    cyan: 'color: cyan',\n    white: 'color: white',\n    gray: 'color: gray',\n\n    bgBlack: 'background-color: black',\n    bgRed: 'background-color: red',\n    bgGreen: 'background-color: green',\n    bgYellow: 'background-color: yellow',\n    bgBlue: 'background-color: blue',\n    bgMagenta: 'background-color: magenta',\n    bgCyan: 'background-color: cyan',\n    bgWhite: 'background-color: white'\n};\n\nObject.keys(cssStyles).forEach(function (styleName) {\n    cssStyles[styleName.toLowerCase()] = cssStyles[styleName];\n});\n\nmodule.exports = cssStyles;\n","'use strict';\nvar argv = process.argv;\n\nmodule.exports = (function () {\n\tif (argv.indexOf('--no-color') !== -1 ||\n\t\targv.indexOf('--no-colors') !== -1 ||\n\t\targv.indexOf('--color=false') !== -1) {\n\t\treturn false;\n\t}\n\n\tif (argv.indexOf('--color') !== -1 ||\n\t\targv.indexOf('--colors') !== -1 ||\n\t\targv.indexOf('--color=true') !== -1 ||\n\t\targv.indexOf('--color=always') !== -1) {\n\t\treturn true;\n\t}\n\n\tif (process.stdout && !process.stdout.isTTY) {\n\t\treturn false;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\treturn true;\n\t}\n\n\tif ('COLORTERM' in process.env) {\n\t\treturn true;\n\t}\n\n\tif (process.env.TERM === 'dumb') {\n\t\treturn false;\n\t}\n\n\tif (/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)) {\n\t\treturn true;\n\t}\n\n\treturn false;\n})();\n","module.exports = function (theme, styles) {\n    if (styles.length === 1) {\n        var count = 0;\n        var stack = [];\n        var themeMapping = styles[0];\n        var themeStyles = theme.styles || {};\n        while(typeof themeMapping === 'string' && themeStyles[themeMapping]) {\n            themeMapping = themeStyles[themeMapping];\n            count += 1;\n            if (100 < count) {\n                var index = stack.indexOf(themeMapping);\n                stack.push(themeMapping);\n                if (index !== -1) {\n                    throw new Error('Your theme contains a loop: ' + stack.slice(index).join(' -> '));\n                }\n            }\n        }\n\n        return Array.isArray(themeMapping) ? themeMapping : [themeMapping];\n    }\n\n    return styles;\n};\n","'use strict';\n\nvar diff = require('./diff');\nvar convert = require('./convert');\nvar palette = require('./palette');\n\nvar color = module.exports = {};\n\ncolor.diff             = diff.ciede2000;\ncolor.rgb_to_lab       = convert.rgb_to_lab;\ncolor.map_palette      = palette.map_palette;\ncolor.palette_map_key  = palette.palette_map_key;\n\ncolor.closest = function(target, relative) {\n    var key = color.palette_map_key(target);\n\n    var result = color.map_palette([target], relative, 'closest');\n\n    return result[key];\n};\n\ncolor.furthest = function(target, relative) {\n    var key = color.palette_map_key(target);\n\n    var result = color.map_palette([target], relative, 'furthest');\n\n    return result[key];\n};\n","'use strict';\n\nvar styles = module.exports = {\n\tmodifiers: {\n\t\treset: [0, 0],\n\t\tbold: [1, 22], // 21 isn't widely supported and 22 does the same thing\n\t\tdim: [2, 22],\n\t\titalic: [3, 23],\n\t\tunderline: [4, 24],\n\t\tinverse: [7, 27],\n\t\thidden: [8, 28],\n\t\tstrikethrough: [9, 29]\n\t},\n\tcolors: {\n\t\tblack: [30, 39],\n\t\tred: [31, 39],\n\t\tgreen: [32, 39],\n\t\tyellow: [33, 39],\n\t\tblue: [34, 39],\n\t\tmagenta: [35, 39],\n\t\tcyan: [36, 39],\n\t\twhite: [37, 39],\n\t\tgray: [90, 39]\n\t},\n\tbgColors: {\n\t\tbgBlack: [40, 49],\n\t\tbgRed: [41, 49],\n\t\tbgGreen: [42, 49],\n\t\tbgYellow: [43, 49],\n\t\tbgBlue: [44, 49],\n\t\tbgMagenta: [45, 49],\n\t\tbgCyan: [46, 49],\n\t\tbgWhite: [47, 49]\n\t}\n};\n\n// fix humans\nstyles.colors.grey = styles.colors.gray;\n\nObject.keys(styles).forEach(function (groupName) {\n\tvar group = styles[groupName];\n\n\tObject.keys(group).forEach(function (styleName) {\n\t\tvar style = group[styleName];\n\n\t\tstyles[styleName] = group[styleName] = {\n\t\t\topen: '\\u001b[' + style[0] + 'm',\n\t\t\tclose: '\\u001b[' + style[1] + 'm'\n\t\t};\n\t});\n\n\tObject.defineProperty(styles, groupName, {\n\t\tvalue: group,\n\t\tenumerable: false\n\t});\n});\n","/*global window*/\nvar utils = require('./utils');\nvar extend = utils.extend;\nvar duplicateText = require('./duplicateText');\nvar rgbRegexp = require('./rgbRegexp');\nvar cssStyles = require('./cssStyles');\n\nvar builtInStyleNames = [\n    'bold', 'dim', 'italic', 'underline', 'inverse', 'hidden',\n    'strikeThrough', 'black', 'red', 'green', 'yellow', 'blue',\n    'magenta', 'cyan', 'white', 'gray', 'bgBlack', 'bgRed',\n    'bgGreen', 'bgYellow', 'bgBlue', 'bgMagenta', 'bgCyan',\n    'bgWhite'\n];\n\nfunction MagicPen(options) {\n    if (!(this instanceof MagicPen)) {\n        return new MagicPen(options);\n    }\n\n    options = options || {};\n\n    if (typeof options === \"string\") {\n        options = {format: options };\n    }\n\n    var indentationWidth = 'indentationWidth' in options ?\n        options.indentationWidth : 2;\n    this.indentationWidth = Math.max(indentationWidth, 0);\n\n    this.indentationLevel = 0;\n    this.output = [[]];\n    this.styles = Object.create(null);\n    this.installedPlugins = [];\n    // Ready to be cloned individually:\n    this._themes = {};\n    Object.keys(MagicPen.serializers).forEach(function (serializerName) {\n        this._themes[serializerName] = { styles: {} };\n    }, this);\n    this.preferredWidth = (!process.browser && process.stdout.columns) || 80;\n    if (options.format) {\n        this.format = options.format;\n    }\n}\n\nif (typeof exports === 'object' && typeof exports.nodeName !== 'string' && require('supports-color')) {\n    MagicPen.defaultFormat = 'ansi'; // colored console\n} else if (typeof window !== 'undefined' && typeof window.navigator !== 'undefined') {\n    if (window._phantom || window.mochaPhantomJS || (window.__karma__ && window.__karma__.config.captureConsole)) {\n        MagicPen.defaultFormat = 'ansi'; // colored console\n    } else {\n        MagicPen.defaultFormat = 'html'; // Browser\n    }\n} else {\n    MagicPen.defaultFormat = 'text'; // Plain text\n}\n\nMagicPen.prototype.newline = MagicPen.prototype.nl = function (count) {\n    if (typeof count === 'undefined') {\n        count = 1;\n    }\n\n    if (count === 0) {\n        return this;\n    }\n\n    for (var i = 0; i < count; i += 1) {\n        this.output.push([]);\n    }\n    return this;\n};\n\nMagicPen.serializers = {};\n[\n    require('./TextSerializer'),\n    require('./HtmlSerializer'),\n    require('./AnsiSerializer'),\n    require('./ColoredConsoleSerializer')\n].forEach(function (serializer) {\n    MagicPen.serializers[serializer.prototype.format] = serializer;\n});\n\nfunction hasSameTextStyling(a, b) {\n    if (!a || !b || a.style !== 'text' || b.style !== 'text') {\n        return false;\n    }\n\n    return utils.arrayEquals(a.args.styles, b.args.styles);\n}\n\nfunction normalizeLine(line) {\n    if (line.length === 0) {\n        return line;\n    }\n\n    var result = [line[0]];\n    for (var i = 1; i < line.length; i += 1) {\n        var lastEntry = result[result.length - 1];\n        var entry = line[i];\n        if (entry.style === 'text' && entry.args.content === '') {\n            continue;\n        }\n\n        if (hasSameTextStyling(lastEntry, entry)) {\n            result[result.length - 1] = {\n                style: lastEntry.style,\n                args: {\n                    content: lastEntry.args.content + entry.args.content,\n                    styles: lastEntry.args.styles\n                }\n            };\n        } else {\n            result.push(entry);\n        }\n    }\n\n    return result;\n}\n\nMagicPen.prototype.write = function (options) {\n    if (this.styles[options.style]) {\n        this.styles[options.style].apply(this, options.args);\n        return this;\n    }\n    var lastLine = this.output[this.output.length - 1];\n    var lastEntry = lastLine[lastLine.length - 1];\n    if (hasSameTextStyling(lastEntry, options)) {\n        lastLine[lastLine.length - 1] = {\n            style: lastEntry.style,\n            args: {\n                content: lastEntry.args.content + options.args.content,\n                styles: lastEntry.args.styles\n            }\n        };\n    } else {\n        lastLine.push(options);\n    }\n\n    return this;\n};\n\nMagicPen.prototype.indentLines = function () {\n    this.indentationLevel += 1;\n    return this;\n};\n\nMagicPen.prototype.indent = MagicPen.prototype.i = function () {\n    for (var i = 0; i < this.indentationLevel; i += 1) {\n        this.space(this.indentationWidth);\n    }\n    return this;\n};\n\nMagicPen.prototype.outdentLines = function () {\n    this.indentationLevel = Math.max(0, this.indentationLevel - 1);\n    return this;\n};\n\nMagicPen.prototype.addStyle = function (style, handler, allowRedefinition) {\n    if (this[style] === false || ((this.hasOwnProperty(style) || MagicPen.prototype[style]) && !Object.prototype.hasOwnProperty.call(this.styles, style) && builtInStyleNames.indexOf(style) === -1)) {\n        throw new Error('\"' + style + '\" style cannot be defined, it clashes with a built-in attribute');\n    }\n\n    // Refuse to redefine a built-in style or a style already defined directly on this pen unless allowRedefinition is true:\n    if (this.hasOwnProperty(style) || builtInStyleNames.indexOf(style) !== -1) {\n        var existingType = typeof this[style];\n        if (existingType === 'function') {\n            if (!allowRedefinition) {\n                throw new Error('\"' + style + '\" style is already defined, set 3rd arg (allowRedefinition) to true to define it anyway');\n            }\n        }\n    }\n    if (this._stylesHaveNotBeenClonedYet) {\n        this.styles = Object.create(this.styles);\n        this._stylesHaveNotBeenClonedYet = false;\n    }\n\n    this.styles[style] = handler;\n    this[style] = function () {\n        handler.apply(this, arguments);\n        return this;\n    };\n    return this;\n};\n\nMagicPen.prototype.toString = function (format) {\n    if (format && this.format && format !== this.format) {\n        throw new Error('A pen with format: ' + this.format + ' cannot be serialized to: ' + format);\n    }\n\n    format = this.format || format || 'text';\n    if (format === 'auto') {\n        format = MagicPen.defaultFormat;\n    }\n    var theme = this._themes[format] || {};\n    var serializer = new MagicPen.serializers[format](theme);\n    return serializer.serialize(this.output);\n};\n\nMagicPen.prototype.text = function () {\n    var content = arguments[0];\n    if (content === '') {\n        return this;\n    }\n\n    var styles = new Array(arguments.length - 1);\n    for (var i = 1; i < arguments.length; i += 1) {\n        styles[i - 1] = arguments[i];\n    }\n\n    content = String(content);\n    if (content.indexOf('\\n') !== -1) {\n        var lines = content.split(/\\n/);\n        lines.forEach(function (lineContent, index) {\n            if (lineContent.length) {\n                this.write({\n                    style: 'text',\n                    args: { content: lineContent, styles: styles }\n                });\n            }\n            if (index < lines.length - 1) {\n                this.nl();\n            }\n        }, this);\n        return this;\n    } else {\n        return this.write({\n            style: 'text',\n            args: { content: content, styles: styles }\n        });\n    }\n};\n\nMagicPen.prototype.removeFormatting = function () {\n    var result = this.clone();\n    this.output.forEach(function (line, index) {\n        result.output[index] = normalizeLine(line.map(function (outputEntry) {\n            return outputEntry.style === 'text' ?\n                { style: 'text', args: { content: outputEntry.args.content, styles: [] } } :\n                outputEntry;\n        }));\n    });\n    result.indentationLevel = this.indentationLevel;\n    return result;\n};\n\nMagicPen.prototype.getContentFromArguments = function (args) {\n    var clone;\n    if (args[0].isMagicPen) {\n        this.ensureCompatibleFormat(args[0].format);\n        return args[0];\n    } else if (typeof args[0] === 'function') {\n        clone = this.clone();\n        args[0].call(clone, clone);\n        return clone;\n    } else if (typeof args[0] === 'string' && args.length === 1) {\n        clone = this.clone();\n        clone.text(args[0]);\n        return clone;\n    } else if (typeof args[0] === 'string') {\n        clone = this.clone();\n        clone[args[0]].apply(clone, Array.prototype.slice.call(args, 1));\n        return clone;\n    } else {\n        throw new Error('Requires the arguments to be:\\n' +\n                        'a pen or\\n' +\n                        'a callback appending content to a pen or\\n' +\n                        'a style and arguments for that style or\\n' +\n                        'just a string.');\n    }\n};\n\nMagicPen.prototype.isMultiline = function () {\n    return this.output.length > 1 || this.size().height > 1;\n};\n\nMagicPen.prototype.isAtStartOfLine = function () {\n    return this.output.length === 0 || this.output[this.output.length - 1].length === 0;\n};\n\nMagicPen.prototype.isBlock = function () {\n    return this.output.length === 1 &&\n        this.output[0].length === 1 &&\n        this.output[0][0].style === 'block';\n};\n\nMagicPen.prototype.ensureCompatibleFormat = function (format) {\n    if (format && this.format && format !== this.format) {\n        throw new Error('This pen is only compatible with the format: ' + this.format);\n    }\n};\n\nMagicPen.prototype.block = function () {\n    var pen = this.getContentFromArguments(arguments);\n\n    var blockOutput = pen.output.map(function (line) {\n        return [].concat(line);\n    });\n    return this.write({ style: 'block', args: blockOutput });\n};\nfunction isRawOutput(options) {\n    return options &&\n        typeof options === 'object' &&\n        typeof options.width === 'number' &&\n        typeof options.height === 'number' && (\n            typeof options.content === 'function' ||\n                typeof options.content === 'string'\n        );\n}\n\nMagicPen.prototype.alt = function (options) {\n    var format = this.format;\n    if (!format) {\n        throw new Error('The alt method is only supported on pen where the format has already been set');\n    }\n\n    var outputProperty = options[format];\n\n    if (typeof outputProperty === 'undefined') {\n        if (options.fallback) {\n            return this.append(options.fallback);\n        } else {\n            // Nothing to do for this format, just NOOP:\n            return this;\n        }\n    }\n\n    if (typeof outputProperty === 'string' || isRawOutput(outputProperty)) {\n        return this.raw(outputProperty);\n    } else {\n        return this.append(outputProperty);\n    }\n};\n\nMagicPen.prototype.raw = function (options) {\n    var format = this.format;\n    if (!format) {\n        throw new Error('The alt method is only supported on pen where the format has already been set');\n    }\n\n    if (typeof options === 'string') {\n        return this.write({ style: 'raw', args: {\n            height: 0,\n            width: 0,\n            content: function () {\n                return options;\n            }\n        }});\n    }\n\n    if (isRawOutput(options)) {\n        if (typeof options.content === 'string') {\n            options = extend({}, options);\n            var content = options.content;\n            options.content = function () {\n                return content;\n            };\n        }\n\n        return this.write({ style: 'raw', args: options });\n    }\n\n    throw new Error('Raw ' + this.format + ' content needs to adhere to one of the following forms:\\n' +\n                    'a string of raw content\\n' +\n                    'a function returning a string of raw content or\\n' +\n                    'an object with the following form { width: <number>, height: <number>, content: <string function() {}|string> }');\n};\n\nfunction amend(output, pen) {\n    var lastLine = output[output.length - 1].slice();\n    var newOutput = output.slice(0, -1);\n    var lastEntry = lastLine[lastLine.length - 1];\n    if (lastEntry && lastEntry.style === 'block') {\n        lastLine[lastLine.length - 1] = {\n            style: 'block',\n            args: amend(lastEntry.args, pen)\n        };\n        newOutput[output.length - 1] = lastLine;\n    } else {\n        Array.prototype.push.apply(lastLine, pen.output[0]);\n        newOutput[output.length - 1] = normalizeLine(lastLine);\n        newOutput.push.apply(newOutput, pen.output.slice(1));\n    }\n\n    return newOutput;\n}\n\nMagicPen.prototype.amend = function () {\n    var pen = this.getContentFromArguments(arguments);\n\n    if (pen.isEmpty()) {\n        return this;\n    }\n\n    this.output = amend(this.output, pen);\n\n    return this;\n};\n\nMagicPen.prototype.append = function () {\n    var pen = this.getContentFromArguments(arguments);\n\n    if (pen.isEmpty()) {\n        return this;\n    }\n\n    var lastLine = this.output[this.output.length - 1];\n    Array.prototype.push.apply(lastLine, pen.output[0]);\n    this.output[this.output.length - 1] = normalizeLine(lastLine);\n\n    this.output.push.apply(this.output, pen.output.slice(1));\n\n    return this;\n};\n\nMagicPen.prototype.prependLinesWith = function () {\n    var pen = this.getContentFromArguments(arguments);\n\n    if (pen.isEmpty()) {\n        return this;\n    }\n\n    if (pen.output.length > 1) {\n        throw new Error('PrependLinesWith only supports a pen with single line content');\n    }\n\n    var height = this.size().height;\n    var output = this.clone();\n    output.block(function () {\n        for (var i = 0; i < height; i += 1) {\n            if (0 < i) {\n                this.nl();\n            }\n            this.append(pen);\n        }\n    });\n    output.block(this);\n\n    this.output = output.output;\n    return this;\n};\n\nMagicPen.prototype.space = MagicPen.prototype.sp = function (count) {\n    if (count === 0) {\n        return this;\n    }\n\n    if (typeof count === 'undefined') {\n        count = 1;\n    }\n\n    return this.text(duplicateText(' ', count));\n};\n\nbuiltInStyleNames.forEach(function (textStyle) {\n    MagicPen.prototype[textStyle] = MagicPen.prototype[textStyle.toLowerCase()] = function (content) {\n        return this.text(content, textStyle);\n    };\n});\n\nMagicPen.prototype.clone = function (format) {\n    if (!this.isEmpty()) {\n        this.ensureCompatibleFormat(format);\n    }\n\n    function MagicPenClone() {}\n    MagicPenClone.prototype = this;\n    var clonedPen = new MagicPenClone();\n    clonedPen.styles = this.styles;\n    clonedPen._stylesHaveNotBeenClonedYet = true;\n    clonedPen.indentationLevel = 0;\n    clonedPen.output = [[]];\n    clonedPen.installedPlugins = [];\n    clonedPen._themes = this._themes;\n    clonedPen._themesHaveNotBeenClonedYet = true;\n    clonedPen.format = format || this.format;\n    clonedPen.parent = this;\n    return clonedPen;\n};\n\nMagicPen.prototype.isMagicPen = true;\n\nMagicPen.prototype.size = function () {\n    return utils.calculateSize(this.output);\n};\n\nMagicPen.prototype.use = function (plugin) {\n    var existingPlugin = utils.findFirst(this.installedPlugins, function (installedPlugin) {\n        if (installedPlugin === plugin) {\n            return true;\n        } else if (typeof plugin === 'function' && typeof installedPlugin === 'function') {\n            var pluginName = utils.getFunctionName(plugin);\n            return pluginName !== '' && pluginName === utils.getFunctionName(installedPlugin);\n        } else {\n            return installedPlugin.name === plugin.name;\n        }\n    });\n\n    if (existingPlugin) {\n        if (existingPlugin === plugin || (typeof plugin.version !== 'undefined' && plugin.version === existingPlugin.version)) {\n            // No-op\n            return this;\n        } else {\n            throw new Error(\"Another instance of the plugin '\" + plugin.name + \"' \" +\n                            \"is already installed\" +\n                            (typeof existingPlugin.version !== 'undefined' ?\n                                ' (version ' + existingPlugin.version +\n                                (typeof plugin.version !== 'undefined' ?\n                                    ', trying to install ' + plugin.version : '') +\n                                ')' : '') +\n                            \". Please check your node_modules folder for unmet peerDependencies.\");\n        }\n    }\n\n    if ((typeof plugin !== 'function' && (typeof plugin !== 'object' || typeof plugin.installInto !== 'function')) ||\n        (typeof plugin.name !== 'undefined' && typeof plugin.name !== 'string') ||\n        (typeof plugin.dependencies !== 'undefined' && !Array.isArray(plugin.dependencies))) {\n        throw new Error('Plugins must be functions or adhere to the following interface\\n' +\n                        '{\\n' +\n                        '  name: <an optional plugin name>,\\n' +\n                        '  version: <an optional semver version string>,\\n' +\n                        '  dependencies: <an optional list of dependencies>,\\n' +\n                        '  installInto: <a function that will update the given magicpen instance>\\n' +\n                        '}');\n    }\n\n    if (plugin.dependencies) {\n        var instance = this;\n        var thisAndParents = [];\n        do {\n            thisAndParents.push(instance);\n            instance = instance.parent;\n        } while (instance);\n        var unfulfilledDependencies = plugin.dependencies.filter(function (dependency) {\n            return !thisAndParents.some(function (instance) {\n                return instance.installedPlugins.some(function (plugin) {\n                    return plugin.name === dependency;\n                });\n            });\n        });\n\n        if (unfulfilledDependencies.length === 1) {\n            throw new Error(plugin.name + ' requires plugin ' + unfulfilledDependencies[0]);\n        } else if (unfulfilledDependencies.length > 1) {\n            throw new Error(plugin.name + ' requires plugins ' +\n                            unfulfilledDependencies.slice(0, -1).join(', ') +\n                            ' and ' + unfulfilledDependencies[unfulfilledDependencies.length - 1]);\n        }\n    }\n\n    this.installedPlugins.push(plugin);\n    if (typeof plugin === 'function') {\n        plugin(this);\n    } else {\n        plugin.installInto(this);\n    }\n\n    return this; // for chaining\n};\n\nMagicPen.prototype.installPlugin = MagicPen.prototype.use; // Legacy alias\n\nfunction replaceText(output, outputArray, regexp, cb) {\n    var replacedOutput = output;\n    outputArray.forEach(function (line, i) {\n        if (0 < i) {\n            replacedOutput.nl();\n        }\n\n        line.forEach(function (outputEntry, j) {\n            if (outputEntry.style === 'block') {\n                return replacedOutput.output[replacedOutput.output.length - 1].push({\n                    style: 'block',\n                    args: replaceText(output.clone(), outputEntry.args, regexp, cb)\n                });\n            } else if (outputEntry.style !== 'text') {\n                return replacedOutput.output[replacedOutput.output.length - 1].push(outputEntry);\n            }\n\n            if (regexp.global) {\n                regexp.lastIndex = 0;\n            }\n            var m;\n            var first = true;\n            var lastIndex = 0;\n            var text = outputEntry.args.content;\n            var styles = outputEntry.args.styles;\n            while ((m = regexp.exec(text)) !== null && (regexp.global || first)) {\n                if (lastIndex < m.index) {\n                    replacedOutput.text.apply(replacedOutput, [text.substring(lastIndex, m.index)].concat(styles));\n                }\n\n                cb.apply(replacedOutput, [styles].concat(m));\n                first = false;\n                lastIndex = m.index + m[0].length;\n            }\n\n            if (lastIndex === 0) {\n                var lastLine;\n                if (replacedOutput.output.length === 0) {\n                    lastLine = replacedOutput.output[0] = [];\n                } else {\n                    lastLine = replacedOutput.output[replacedOutput.output.length - 1];\n                }\n\n                lastLine.push(outputEntry);\n            } else if (lastIndex < text.length) {\n                replacedOutput.text.apply(replacedOutput, [text.substring(lastIndex, text.length)].concat(styles));\n            }\n        }, this);\n    }, this);\n\n    return replacedOutput.output.map(normalizeLine);\n}\n\nMagicPen.prototype.isEmpty = function () {\n    return this.output.length === 1 && this.output[0].length === 0;\n};\n\nMagicPen.prototype.replaceText = function (regexp, cb) {\n    if (this.isEmpty()) {\n        return this;\n    }\n\n    if (typeof regexp === 'string') {\n        regexp = new RegExp(utils.escapeRegExp(regexp), 'g');\n    }\n\n    if (typeof cb === 'string') {\n        var text = cb;\n        cb = function (styles, _) {\n            var args = [text].concat(styles);\n            this.text.apply(this, args);\n        };\n    }\n\n\n    if (arguments.length === 1) {\n        cb = regexp;\n        regexp = /.*/;\n    }\n\n    this.output = replaceText(this.clone(), this.output, regexp, cb);\n\n    return this;\n};\n\nMagicPen.prototype.theme = function (format) {\n    format = format || this.format;\n    if (!format) {\n        throw new Error(\"Could not detect which format you want to retrieve \" +\n                        \"theme information for. Set the format of the pen or \" +\n                        \"provide it as an argument to the theme method.\");\n    }\n\n    return this._themes[format];\n};\n\nMagicPen.prototype.installTheme = function (formats, theme) {\n    var that = this;\n    if (arguments.length === 1) {\n        theme = formats;\n        formats = Object.keys(MagicPen.serializers);\n    }\n\n    if (typeof formats === 'string') {\n        formats = [formats];\n    }\n\n    if (\n        typeof theme !== 'object' ||\n        !Array.isArray(formats) ||\n        formats.some(function (format) {\n            return typeof format !== 'string';\n        })\n    ) {\n        throw new Error(\"Themes must be installed the following way:\\n\" +\n                        \"Install theme for all formats: pen.installTheme({ comment: 'gray' })\\n\" +\n                        \"Install theme for a specific format: pen.installTheme('ansi', { comment: 'gray' }) or\\n\" +\n                        \"Install theme for a list of formats: pen.installTheme(['ansi', 'html'], { comment: 'gray' })\");\n    }\n\n    if (!theme.styles || typeof theme.styles !== 'object') {\n        theme = {\n            styles: theme\n        };\n    }\n\n    if (that._themesHaveNotBeenClonedYet) {\n        var clonedThemes = {};\n        Object.keys(that._themes).forEach(function (format) {\n            clonedThemes[format] = Object.create(that._themes[format]);\n        });\n        that._themes = clonedThemes;\n        that._themesHaveNotBeenClonedYet = false;\n    }\n\n    Object.keys(theme.styles).forEach(function (themeKey) {\n        if (rgbRegexp.test(themeKey) || cssStyles[themeKey]) {\n            throw new Error(\"Invalid theme key: '\" + themeKey + \"' you can't map build styles.\");\n        }\n\n        if (!that[themeKey]) {\n            that.addStyle(themeKey, function (content) {\n                this.text(content, themeKey);\n            });\n        }\n    });\n\n    formats.forEach(function (format) {\n        var baseTheme = that._themes[format] || { styles: {} };\n        var extendedTheme = extend({}, baseTheme, theme);\n        extendedTheme.styles = extend({}, baseTheme.styles, theme.styles);\n        that._themes[format] = extendedTheme;\n    });\n\n\n    return this;\n};\n\nmodule.exports = MagicPen;\n","/* eslint-disable no-nested-ternary */\n'use strict';\nvar arr = [];\nvar charCodeCache = [];\n\nmodule.exports = function (a, b) {\n\tif (a === b) {\n\t\treturn 0;\n\t}\n\n\tvar aLen = a.length;\n\tvar bLen = b.length;\n\n\tif (aLen === 0) {\n\t\treturn bLen;\n\t}\n\n\tif (bLen === 0) {\n\t\treturn aLen;\n\t}\n\n\tvar bCharCode;\n\tvar ret;\n\tvar tmp;\n\tvar tmp2;\n\tvar i = 0;\n\tvar j = 0;\n\n\twhile (i < aLen) {\n\t\tcharCodeCache[i] = a.charCodeAt(i);\n\t\tarr[i] = ++i;\n\t}\n\n\twhile (j < bLen) {\n\t\tbCharCode = b.charCodeAt(j);\n\t\ttmp = j++;\n\t\tret = j;\n\n\t\tfor (i = 0; i < aLen; i++) {\n\t\t\ttmp2 = bCharCode === charCodeCache[i] ? tmp : tmp + 1;\n\t\t\ttmp = arr[i];\n\t\t\tret = arr[i] = tmp > ret ? tmp2 > ret ? ret + 1 : tmp2 : tmp2 > tmp ? tmp + 1 : tmp2;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","var isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n","\"use strict\";\nvar schedule;\nvar util = require(\"./util\");\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n};\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            window.navigator.standalone)) {\n    schedule = function(fn) {\n        var div = document.createElement(\"div\");\n        var observer = new MutationObserver(fn);\n        observer.observe(div, {attributes: true});\n        return function() { div.classList.toggle(\"foo\"); };\n    };\n    schedule.isStatic = true;\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util.js\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) {\n            return obj;\n        }\n        else if (isAnyBluebirdPromise(obj)) {\n            var ret = new Promise(INTERNAL);\n            obj._then(\n                ret._fulfillUnchecked,\n                ret._rejectUncheckedCheckError,\n                ret._progressUnchecked,\n                ret,\n                null\n            );\n            return ret;\n        }\n        var then = util.tryCatch(getThen)(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction getThen(obj) {\n    return obj.then;\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    return hasProp.call(obj, \"_promise0\");\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x,\n                                        resolveFromThenable,\n                                        rejectFromThenable,\n                                        progressFromThenable);\n    synchronous = false;\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolveFromThenable(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function rejectFromThenable(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n\n    function progressFromThenable(value) {\n        if (!promise) return;\n        if (typeof promise._progress === \"function\") {\n            promise._progress(value);\n        }\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection) {\nvar util = require(\"./util.js\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    var parent;\n    if (values instanceof Promise) {\n        parent = values;\n        promise._propagateFrom(parent, 1 | 4);\n    }\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        this._values = values;\n        if (values._isFulfilled()) {\n            values = values._value();\n            if (!isArray(values)) {\n                var err = new Promise.TypeError(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\");\n                this.__hardReject__(err);\n                return;\n            }\n        } else if (values._isPending()) {\n            values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n            return;\n        } else {\n            this._reject(values._reason());\n            return;\n        }\n    } else if (!isArray(values)) {\n        this._promise._reject(apiRejection(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\")._reason());\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var promise = this._promise;\n    for (var i = 0; i < len; ++i) {\n        var isResolved = this._isResolved();\n        var maybePromise = tryConvertToPromise(values[i], promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (isResolved) {\n                maybePromise._ignoreRejections();\n            } else if (maybePromise._isPending()) {\n                maybePromise._proxyPromiseArray(this, i);\n            } else if (maybePromise._isFulfilled()) {\n                this._promiseFulfilled(maybePromise._value(), i);\n            } else {\n                this._promiseRejected(maybePromise._reason(), i);\n            }\n        } else if (!isResolved) {\n            this._promiseFulfilled(maybePromise, i);\n        }\n    }\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype.__hardReject__ =\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false, true);\n};\n\nPromiseArray.prototype._promiseProgressed = function (progressValue, index) {\n    this._promise._progress({\n        index: index,\n        value: progressValue\n    });\n};\n\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n    }\n};\n\nPromiseArray.prototype._promiseRejected = function (reason, index) {\n    this._totalResolved++;\n    this._reject(reason);\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n","\"use strict\";\nmodule.exports = function() {\nvar async = require(\"./async.js\");\nvar util = require(\"./util.js\");\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](main|debug|zalgo|instrumented)/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar warn;\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.parent = function() {\n    return this._parent;\n};\n\nCapturedTrace.prototype.hasParent = function() {\n    return this._parent !== undefined;\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = CapturedTrace.parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = stackFramePattern.test(line) ||\n            \"    (No stack trace)\" === line;\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0) {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nCapturedTrace.parseStackAndMessage = function(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: cleanStack(stack)\n    };\n};\n\nCapturedTrace.formatAndLogError = function(error, title) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (typeof error === \"object\" || typeof error === \"function\") {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof warn === \"function\") {\n            warn(message);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n};\n\nCapturedTrace.unhandledRejection = function (reason) {\n    CapturedTrace.formatAndLogError(reason, \"^--- With additional stack trace: \");\n};\n\nCapturedTrace.isSupported = function () {\n    return typeof captureStackTrace === \"function\";\n};\n\nCapturedTrace.fireRejectionEvent =\nfunction(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent(name, reason, promise);\n    } catch (e) {\n        globalEventFired = true;\n        async.throwLater(e);\n    }\n\n    var domEventFired = false;\n    if (fireDomEvent) {\n        try {\n            domEventFired = fireDomEvent(name.toLowerCase(), {\n                reason: reason,\n                promise: promise\n            });\n        } catch (e) {\n            domEventFired = true;\n            async.throwLater(e);\n        }\n    }\n\n    if (!globalEventFired && !localEventFired && !domEventFired &&\n        name === \"unhandledRejection\") {\n        CapturedTrace.formatAndLogError(reason, \"Unhandled rejection \");\n    }\n};\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj.toString();\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\nCapturedTrace.setBounds = function(firstLineError, lastLineError) {\n    if (!CapturedTrace.isSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit = Error.stackTraceLimit + 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit = Error.stackTraceLimit + 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit = Error.stackTraceLimit - 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit = Error.stackTraceLimit + 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit = Error.stackTraceLimit - 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nvar fireDomEvent;\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function(name, reason, promise) {\n            if (name === \"rejectionHandled\") {\n                return process.emit(name, promise);\n            } else {\n                return process.emit(name, reason, promise);\n            }\n        };\n    } else {\n        var customEventWorks = false;\n        var anyEventWorks = true;\n        try {\n            var ev = new self.CustomEvent(\"test\");\n            customEventWorks = ev instanceof CustomEvent;\n        } catch (e) {}\n        if (!customEventWorks) {\n            try {\n                var event = document.createEvent(\"CustomEvent\");\n                event.initCustomEvent(\"testingtheevent\", false, true, {});\n                self.dispatchEvent(event);\n            } catch (e) {\n                anyEventWorks = false;\n            }\n        }\n        if (anyEventWorks) {\n            fireDomEvent = function(type, detail) {\n                var event;\n                if (customEventWorks) {\n                    event = new self.CustomEvent(type, {\n                        detail: detail,\n                        bubbles: false,\n                        cancelable: true\n                    });\n                } else if (self.dispatchEvent) {\n                    event = document.createEvent(\"CustomEvent\");\n                    event.initCustomEvent(type, false, true, detail);\n                }\n\n                return event ? !self.dispatchEvent(event) : false;\n            };\n        }\n\n        var toWindowMethodNameMap = {};\n        toWindowMethodNameMap[\"unhandledRejection\"] = (\"on\" +\n            \"unhandledRejection\").toLowerCase();\n        toWindowMethodNameMap[\"rejectionHandled\"] = (\"on\" +\n            \"rejectionHandled\").toLowerCase();\n\n        return function(name, reason, promise) {\n            var methodName = toWindowMethodNameMap[name];\n            var method = self[methodName];\n            if (!method) return false;\n            if (name === \"rejectionHandled\") {\n                method.call(self, promise);\n            } else {\n                method.call(self, reason, promise);\n            }\n            return true;\n        };\n    }\n})();\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    warn = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        warn = function(message) {\n            process.stderr.write(\"\\u001b[31m\" + message + \"\\u001b[39m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        warn = function(message) {\n            console.warn(\"%c\" + message, \"color: red\");\n        };\n    }\n}\n\nreturn CapturedTrace;\n};\n","\"use strict\";\nmodule.exports = function(Promise, CapturedTrace) {\nvar getDomain = Promise._getDomain;\nvar async = require(\"./async.js\");\nvar Warning = require(\"./errors.js\").Warning;\nvar util = require(\"./util.js\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar debugging = false || (util.isNode &&\n                    (!!process.env[\"BLUEBIRD_DEBUG\"] ||\n                     process.env[\"NODE_ENV\"] === \"development\"));\n\nif (debugging) {\n    async.disableTrampolineIfNecessary();\n}\n\nPromise.prototype._ignoreRejections = function() {\n    this._unsetRejectionIsUnhandled();\n    this._bitField = this._bitField | 16777216;\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 16777216) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    CapturedTrace.fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._getCarriedStackTrace() || this._settledValue;\n        this._setUnhandledRejectionIsNotified();\n        CapturedTrace.fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 524288;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~524288);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 524288) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 2097152;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~2097152);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 2097152) > 0;\n};\n\nPromise.prototype._setCarriedStackTrace = function (capturedTrace) {\n    this._bitField = this._bitField | 1048576;\n    this._fulfillmentHandler0 = capturedTrace;\n};\n\nPromise.prototype._isCarryingStackTrace = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._getCarriedStackTrace = function () {\n    return this._isCarryingStackTrace()\n        ? this._fulfillmentHandler0\n        : undefined;\n};\n\nPromise.prototype._captureStackTrace = function (force) {\n    if (debugging || (force && CapturedTrace.isSupported())) {\n        this._traceForced = force;\n        this._trace = new CapturedTrace(this._peekContext());\n    }\n    return this;\n};\n\nPromise.prototype._attachExtraTrace = function (error, ignoreSelf) {\n    if ((debugging || this._traceForced) && canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = CapturedTrace.parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n};\n\nPromise.prototype._warn = function(message) {\n    var warning = new Warning(message);\n    var ctx = this._peekContext();\n    if (ctx) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = CapturedTrace.parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n    CapturedTrace.formatAndLogError(warning, \"\");\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() &&\n        debugging === false\n   ) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/DT1qyG\\u000a\");\n    }\n    debugging = CapturedTrace.isSupported();\n    if (debugging) {\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return debugging && CapturedTrace.isSupported();\n};\n\nif (!CapturedTrace.isSupported()) {\n    Promise.longStackTraces = function(){};\n    debugging = false;\n}\n\nreturn function() {\n    return debugging;\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, CapturedTrace, isDebugging) {\nvar contextStack = [];\nfunction Context() {\n    this._trace = new CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.pop();\n    }\n};\n\nfunction createContext() {\n    if (isDebugging()) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\n\nPromise.prototype._peekContext = peekContext;\nPromise.prototype._pushContext = Context.prototype._pushContext;\nPromise.prototype._popContext = Context.prototype._popContext;\n\nreturn createContext;\n};\n","\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util.js\");\nvar errors = require(\"./errors.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar keys = require(\"./es5.js\").keys;\nvar TypeError = errors.TypeError;\n\nfunction CatchFilter(instances, callback, promise) {\n    this._instances = instances;\n    this._callback = callback;\n    this._promise = promise;\n}\n\nfunction safePredicate(predicate, e) {\n    var safeObject = {};\n    var retfilter = tryCatch(predicate).call(safeObject, e);\n\n    if (retfilter === errorObj) return retfilter;\n\n    var safeKeys = keys(safeObject);\n    if (safeKeys.length) {\n        errorObj.e = new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\");\n        return errorObj;\n    }\n    return retfilter;\n}\n\nCatchFilter.prototype.doFilter = function (e) {\n    var cb = this._callback;\n    var promise = this._promise;\n    var boundTo = promise._boundValue();\n    for (var i = 0, len = this._instances.length; i < len; ++i) {\n        var item = this._instances[i];\n        var itemIsErrorType = item === Error ||\n            (item != null && item.prototype instanceof Error);\n\n        if (itemIsErrorType && e instanceof item) {\n            var ret = tryCatch(cb).call(boundTo, e);\n            if (ret === errorObj) {\n                NEXT_FILTER.e = ret.e;\n                return NEXT_FILTER;\n            }\n            return ret;\n        } else if (typeof item === \"function\" && !itemIsErrorType) {\n            var shouldHandle = safePredicate(item, e);\n            if (shouldHandle === errorObj) {\n                e = errorObj.e;\n                break;\n            } else if (shouldHandle) {\n                var ret = tryCatch(cb).call(boundTo, e);\n                if (ret === errorObj) {\n                    NEXT_FILTER.e = ret.e;\n                    return NEXT_FILTER;\n                }\n                return ret;\n            }\n        }\n    }\n    NEXT_FILTER.e = e;\n    return NEXT_FILTER;\n};\n\nreturn CatchFilter;\n};\n","\"use strict\";\nmodule.exports = function(Promise, PromiseArray) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nPromise.prototype.progressed = function (handler) {\n    return this._then(undefined, undefined, handler, undefined, undefined);\n};\n\nPromise.prototype._progress = function (progressValue) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._target()._progressUnchecked(progressValue);\n\n};\n\nPromise.prototype._progressHandlerAt = function (index) {\n    return index === 0\n        ? this._progressHandler0\n        : this[(index << 2) + index - 5 + 2];\n};\n\nPromise.prototype._doProgressWith = function (progression) {\n    var progressValue = progression.value;\n    var handler = progression.handler;\n    var promise = progression.promise;\n    var receiver = progression.receiver;\n\n    var ret = tryCatch(handler).call(receiver, progressValue);\n    if (ret === errorObj) {\n        if (ret.e != null &&\n            ret.e.name !== \"StopProgressPropagation\") {\n            var trace = util.canAttachTrace(ret.e)\n                ? ret.e : new Error(util.toString(ret.e));\n            promise._attachExtraTrace(trace);\n            promise._progress(ret.e);\n        }\n    } else if (ret instanceof Promise) {\n        ret._then(promise._progress, null, null, promise, undefined);\n    } else {\n        promise._progress(ret);\n    }\n};\n\n\nPromise.prototype._progressUnchecked = function (progressValue) {\n    var len = this._length();\n    var progress = this._progress;\n    for (var i = 0; i < len; i++) {\n        var handler = this._progressHandlerAt(i);\n        var promise = this._promiseAt(i);\n        if (!(promise instanceof Promise)) {\n            var receiver = this._receiverAt(i);\n            if (typeof handler === \"function\") {\n                handler.call(receiver, progressValue, promise);\n            } else if (receiver instanceof PromiseArray &&\n                       !receiver._isResolved()) {\n                receiver._promiseProgressed(progressValue, promise);\n            }\n            continue;\n        }\n\n        if (typeof handler === \"function\") {\n            async.invoke(this._doProgressWith, this, {\n                handler: handler,\n                promise: promise,\n                receiver: this._receiverAt(i),\n                value: progressValue\n            });\n        } else {\n            async.invoke(progress, promise, progressValue);\n        }\n    }\n};\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util.js\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        ret._popContext();\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn, args, ctx) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value = util.isArray(args)\n        ? tryCatch(fn).apply(ctx, args)\n        : tryCatch(fn).call(ctx, args);\n    ret._popContext();\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false, true);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise) {\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (this._isPending()) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, ret._progress, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, ret._progress, ret, context);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 131072;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~131072);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 131072) === 131072;\n};\n\nPromise.bind = function (thisArg, value) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        maybePromise._then(function() {\n            ret._resolveCallback(value);\n        }, ret._reject, ret._progress, ret, null);\n    } else {\n        ret._resolveCallback(value);\n    }\n    return ret;\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, NEXT_FILTER, tryConvertToPromise) {\nvar util = require(\"./util.js\");\nvar isPrimitive = util.isPrimitive;\nvar thrower = util.thrower;\n\nfunction returnThis() {\n    return this;\n}\nfunction throwThis() {\n    throw this;\n}\nfunction return$(r) {\n    return function() {\n        return r;\n    };\n}\nfunction throw$(r) {\n    return function() {\n        throw r;\n    };\n}\nfunction promisedFinally(ret, reasonOrValue, isFulfilled) {\n    var then;\n    if (isPrimitive(reasonOrValue)) {\n        then = isFulfilled ? return$(reasonOrValue) : throw$(reasonOrValue);\n    } else {\n        then = isFulfilled ? returnThis : throwThis;\n    }\n    return ret._then(then, thrower, undefined, reasonOrValue, undefined);\n}\n\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    var ret = promise._isBound()\n                    ? handler.call(promise._boundValue())\n                    : handler();\n\n    if (ret !== undefined) {\n        var maybePromise = tryConvertToPromise(ret, promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            return promisedFinally(maybePromise, reasonOrValue,\n                                    promise.isFulfilled());\n        }\n    }\n\n    if (promise.isRejected()) {\n        NEXT_FILTER.e = reasonOrValue;\n        return NEXT_FILTER;\n    } else {\n        return reasonOrValue;\n    }\n}\n\nfunction tapHandler(value) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    var ret = promise._isBound()\n                    ? handler.call(promise._boundValue(), value)\n                    : handler(value);\n\n    if (ret !== undefined) {\n        var maybePromise = tryConvertToPromise(ret, promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            return promisedFinally(maybePromise, value, true);\n        }\n    }\n    return value;\n}\n\nPromise.prototype._passThroughHandler = function (handler, isFinally) {\n    if (typeof handler !== \"function\") return this.then();\n\n    var promiseAndHandler = {\n        promise: this,\n        handler: handler\n    };\n\n    return this._then(\n            isFinally ? finallyHandler : tapHandler,\n            isFinally ? finallyHandler : undefined, undefined,\n            promiseAndHandler, undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThroughHandler(handler, true);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThroughHandler(handler, false);\n};\n};\n","\"use strict\";\nvar util = require(\"./util.js\");\nvar isPrimitive = util.isPrimitive;\n\nmodule.exports = function(Promise) {\nvar returner = function () {\n    return this;\n};\nvar thrower = function () {\n    throw this;\n};\nvar returnUndefined = function() {};\nvar throwUndefined = function() {\n    throw undefined;\n};\n\nvar wrapper = function (value, action) {\n    if (action === 1) {\n        return function () {\n            throw value;\n        };\n    } else if (action === 2) {\n        return function () {\n            return value;\n        };\n    }\n};\n\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value === undefined) return this.then(returnUndefined);\n\n    if (isPrimitive(value)) {\n        return this._then(\n            wrapper(value, 2),\n            undefined,\n            undefined,\n            undefined,\n            undefined\n       );\n    }\n    return this._then(returner, undefined, undefined, value, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    if (reason === undefined) return this.then(throwUndefined);\n\n    if (isPrimitive(reason)) {\n        return this._then(\n            wrapper(reason, 1),\n            undefined,\n            undefined,\n            undefined,\n            undefined\n       );\n    }\n    return this._then(thrower, undefined, undefined, reason, undefined);\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValue = promise._settledValue;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValue = undefined;\n    }\n}\n\nPromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/hc1DLj\\u000a\");\n    }\n    return this._settledValue;\n};\n\nPromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/hPuiwB\\u000a\");\n    }\n    return this._settledValue;\n};\n\nPromiseInspection.prototype.isFulfilled =\nPromise.prototype._isFulfilled = function () {\n    return (this._bitField & 268435456) > 0;\n};\n\nPromiseInspection.prototype.isRejected =\nPromise.prototype._isRejected = function () {\n    return (this._bitField & 134217728) > 0;\n};\n\nPromiseInspection.prototype.isPending =\nPromise.prototype._isPending = function () {\n    return (this._bitField & 402653184) === 0;\n};\n\nPromiseInspection.prototype.isResolved =\nPromise.prototype._isResolved = function () {\n    return (this._bitField & 402653184) > 0;\n};\n\nPromise.prototype.isPending = function() {\n    return this._target()._isPending();\n};\n\nPromise.prototype.isRejected = function() {\n    return this._target()._isRejected();\n};\n\nPromise.prototype.isFulfilled = function() {\n    return this._target()._isFulfilled();\n};\n\nPromise.prototype.isResolved = function() {\n    return this._target()._isResolved();\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue;\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue;\n};\n\nPromise.prototype.value = function() {\n    var target = this._target();\n    if (!target.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/hc1DLj\\u000a\");\n    }\n    return target._settledValue;\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    if (!target.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/hPuiwB\\u000a\");\n    }\n    target._unsetRejectionIsUnhandled();\n    return target._settledValue;\n};\n\n\nPromise.PromiseInspection = PromiseInspection;\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL) {\nvar util = require(\"./util.js\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!false) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var caller = function(count) {\n        var values = [];\n        for (var i = 1; i <= count; ++i) values.push(\"holder.p\" + i);\n        return new Function(\"holder\", \"                                      \\n\\\n            'use strict';                                                    \\n\\\n            var callback = holder.fn;                                        \\n\\\n            return callback(values);                                         \\n\\\n            \".replace(/values/g, values.join(\", \")));\n    };\n    var thenCallbacks = [];\n    var callers = [undefined];\n    for (var i = 1; i <= 5; ++i) {\n        thenCallbacks.push(thenCallback(i));\n        callers.push(caller(i));\n    }\n\n    var Holder = function(total, fn) {\n        this.p1 = this.p2 = this.p3 = this.p4 = this.p5 = null;\n        this.fn = fn;\n        this.total = total;\n        this.now = 0;\n    };\n\n    Holder.prototype.callers = callers;\n    Holder.prototype.checkFulfillment = function(promise) {\n        var now = this.now;\n        now++;\n        var total = this.total;\n        if (now >= total) {\n            var handler = this.callers[total];\n            promise._pushContext();\n            var ret = tryCatch(handler)(this);\n            promise._popContext();\n            if (ret === errorObj) {\n                promise._rejectCallback(ret.e, false, true);\n            } else {\n                promise._resolveCallback(ret);\n            }\n        } else {\n            this.now = now;\n        }\n    };\n\n    var reject = function (reason) {\n        this._reject(reason);\n    };\n}\n}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!false) {\n            if (last < 6 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var holder = new Holder(last, fn);\n                var callbacks = thenCallbacks;\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        if (maybePromise._isPending()) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                        } else if (maybePromise._isFulfilled()) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else {\n                            ret._reject(maybePromise._reason());\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];}\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL) {\nvar getDomain = Promise._getDomain;\nvar async = require(\"./async.js\");\nvar util = require(\"./util.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar PENDING = {};\nvar EMPTY_ARRAY = [];\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : domain.bind(fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = limit >= 1 ? [] : EMPTY_ARRAY;\n    async.invoke(init, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\nfunction init() {this._init$(undefined, -2);}\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n    if (values[index] === PENDING) {\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var callback = this._callback;\n        var receiver = this._promise._boundValue();\n        this._promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        this._promise._popContext();\n        if (ret === errorObj) return this._reject(ret.e);\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (maybePromise._isPending()) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = PENDING;\n                return maybePromise._proxyPromiseArray(this, index);\n            } else if (maybePromise._isFulfilled()) {\n                ret = maybePromise._value();\n            } else {\n                return this._reject(maybePromise._reason());\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n\n    }\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    var limit = typeof options === \"object\" && options !== null\n        ? options.concurrency\n        : 0;\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter);\n}\n\nPromise.prototype.map = function (fn, options) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n\n    return map(this, fn, options, null).promise();\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    return map(promises, fn, options, _filter).promise();\n};\n\n\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar errors = require(\"./errors.js\");\nvar async = require(\"./async.js\");\nvar CancellationError = errors.CancellationError;\n\nPromise.prototype._cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    var parent;\n    var promiseToReject = this;\n    while ((parent = promiseToReject._cancellationParent) !== undefined &&\n        parent.isCancellable()) {\n        promiseToReject = parent;\n    }\n    this._unsetCancellable();\n    promiseToReject._target()._rejectCallback(reason, false, true);\n};\n\nPromise.prototype.cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    if (reason === undefined) reason = new CancellationError();\n    async.invokeLater(this._cancel, this, reason);\n    return this;\n};\n\nPromise.prototype.cancellable = function () {\n    if (this._cancellable()) return this;\n    async.enableTrampoline();\n    this._setCancellable();\n    this._cancellationParent = undefined;\n    return this;\n};\n\nPromise.prototype.uncancellable = function () {\n    var ret = this.then();\n    ret._unsetCancellable();\n    return ret;\n};\n\nPromise.prototype.fork = function (didFulfill, didReject, didProgress) {\n    var ret = this._then(didFulfill, didReject, didProgress,\n                         undefined, undefined);\n\n    ret._setCancellable();\n    ret._cancellationParent = undefined;\n    return ret;\n};\n};\n","\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext) {\n    var TypeError = require(\"./errors.js\").TypeError;\n    var inherits = require(\"./util.js\").inherits;\n    var PromiseInspection = Promise.PromiseInspection;\n\n    function inspectionMapper(inspections) {\n        var len = inspections.length;\n        for (var i = 0; i < len; ++i) {\n            var inspection = inspections[i];\n            if (inspection.isRejected()) {\n                return Promise.reject(inspection.error());\n            }\n            inspections[i] = inspection._settledValue;\n        }\n        return inspections;\n    }\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = Promise.defer();\n        function iterator() {\n            if (i >= len) return ret.resolve();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret.promise;\n    }\n\n    function disposerSuccess(value) {\n        var inspection = new PromiseInspection();\n        inspection._settledValue = value;\n        inspection._bitField = 268435456;\n        return dispose(this, inspection).thenReturn(value);\n    }\n\n    function disposerFail(reason) {\n        var inspection = new PromiseInspection();\n        inspection._settledValue = reason;\n        inspection._bitField = 134217728;\n        return dispose(this, inspection).thenThrow(reason);\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return null;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== null\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n        len--;\n        var resources = new Array(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = arguments[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var promise = Promise.settle(resources)\n            .then(inspectionMapper)\n            .then(function(vals) {\n                promise._pushContext();\n                var ret;\n                try {\n                    ret = fn.apply(undefined, vals);\n                } finally {\n                    promise._popContext();\n                }\n                return ret;\n            })\n            ._then(\n                disposerSuccess, disposerFail, undefined, resources, undefined);\n        resources.promise = promise;\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 262144;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 262144) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~262144);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise) {\nvar errors = require(\"./errors.js\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util.js\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    var promise = this._promise = new Promise(INTERNAL);\n    promise._captureStackTrace();\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n}\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._next(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    if (result === errorObj) {\n        return this._promise._rejectCallback(result.e, false, true);\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._promise._resolveCallback(value);\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._throw(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/4Y4pDk\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise._then(\n            this._next,\n            this._throw,\n            undefined,\n            this,\n            null\n       );\n    }\n};\n\nPromiseSpawn.prototype._throw = function (reason) {\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._next = function (value) {\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        spawn._generator = generator;\n        spawn._next(undefined);\n        return spawn.promise();\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var target = promise._target();\n        var newReason = target._getCarriedStackTrace();\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback =\nPromise.prototype.nodeify = function (nodeback, options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n","\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = require(\"./util.js\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!false) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}\n    if (!false) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n","\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util.js\");\nvar isObject = util.isObject;\nvar es5 = require(\"./es5.js\");\n\nfunction PropertiesPromiseArray(obj) {\n    var keys = es5.keys(obj);\n    var len = keys.length;\n    var values = new Array(len * 2);\n    for (var i = 0; i < len; ++i) {\n        var key = keys[i];\n        values[i] = obj[key];\n        values[i + len] = key;\n    }\n    this.constructor$(values);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {\n    this._init$(undefined, -3) ;\n};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val = {};\n        var keyOffset = this.length();\n        for (var i = 0, len = this.length(); i < len; ++i) {\n            val[this._values[i + keyOffset]] = this._values[i];\n        }\n        this._resolve(val);\n    }\n};\n\nPropertiesPromiseArray.prototype._promiseProgressed = function (value, index) {\n    this._promise._progress({\n        key: this._values[index + this.length()],\n        value: value\n    });\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/OsFKC8\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 4);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n","\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar isArray = require(\"./util.js\").isArray;\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else if (!isArray(promises)) {\n        return apiRejection(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\");\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 4 | 1);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL) {\nvar getDomain = Promise._getDomain;\nvar async = require(\"./async.js\");\nvar util = require(\"./util.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nfunction ReductionPromiseArray(promises, fn, accum, _each) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    this._preservedValues = _each === INTERNAL ? [] : null;\n    this._zerothIsAccum = (accum === undefined);\n    this._gotAccum = false;\n    this._reducingIndex = (this._zerothIsAccum ? 1 : 0);\n    this._valuesPhase = undefined;\n    var maybePromise = tryConvertToPromise(accum, this._promise);\n    var rejected = false;\n    var isPromise = maybePromise instanceof Promise;\n    if (isPromise) {\n        maybePromise = maybePromise._target();\n        if (maybePromise._isPending()) {\n            maybePromise._proxyPromiseArray(this, -1);\n        } else if (maybePromise._isFulfilled()) {\n            accum = maybePromise._value();\n            this._gotAccum = true;\n        } else {\n            this._reject(maybePromise._reason());\n            rejected = true;\n        }\n    }\n    if (!(isPromise || this._zerothIsAccum)) this._gotAccum = true;\n    var domain = getDomain();\n    this._callback = domain === null ? fn : domain.bind(fn);\n    this._accum = accum;\n    if (!rejected) async.invoke(init, this, undefined);\n}\nfunction init() {\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._init = function () {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function () {\n    if (this._gotAccum || this._zerothIsAccum) {\n        this._resolve(this._preservedValues !== null\n                        ? [] : this._accum);\n    }\n};\n\nReductionPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    values[index] = value;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var isEach = preservedValues !== null;\n    var gotAccum = this._gotAccum;\n    var valuesPhase = this._valuesPhase;\n    var valuesPhaseIndex;\n    if (!valuesPhase) {\n        valuesPhase = this._valuesPhase = new Array(length);\n        for (valuesPhaseIndex=0; valuesPhaseIndex<length; ++valuesPhaseIndex) {\n            valuesPhase[valuesPhaseIndex] = 0;\n        }\n    }\n    valuesPhaseIndex = valuesPhase[index];\n\n    if (index === 0 && this._zerothIsAccum) {\n        this._accum = value;\n        this._gotAccum = gotAccum = true;\n        valuesPhase[index] = ((valuesPhaseIndex === 0)\n            ? 1 : 2);\n    } else if (index === -1) {\n        this._accum = value;\n        this._gotAccum = gotAccum = true;\n    } else {\n        if (valuesPhaseIndex === 0) {\n            valuesPhase[index] = 1;\n        } else {\n            valuesPhase[index] = 2;\n            this._accum = value;\n        }\n    }\n    if (!gotAccum) return;\n\n    var callback = this._callback;\n    var receiver = this._promise._boundValue();\n    var ret;\n\n    for (var i = this._reducingIndex; i < length; ++i) {\n        valuesPhaseIndex = valuesPhase[i];\n        if (valuesPhaseIndex === 2) {\n            this._reducingIndex = i + 1;\n            continue;\n        }\n        if (valuesPhaseIndex !== 1) return;\n        value = values[i];\n        this._promise._pushContext();\n        if (isEach) {\n            preservedValues.push(value);\n            ret = tryCatch(callback).call(receiver, value, i, length);\n        }\n        else {\n            ret = tryCatch(callback)\n                .call(receiver, this._accum, value, i, length);\n        }\n        this._promise._popContext();\n\n        if (ret === errorObj) return this._reject(ret.e);\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (maybePromise._isPending()) {\n                valuesPhase[i] = 4;\n                return maybePromise._proxyPromiseArray(this, i);\n            } else if (maybePromise._isFulfilled()) {\n                ret = maybePromise._value();\n            } else {\n                return this._reject(maybePromise._reason());\n            }\n        }\n\n        this._reducingIndex = i + 1;\n        this._accum = ret;\n    }\n\n    this._resolve(isEach ? preservedValues : this._accum);\n};\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n};\n","\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = require(\"./util.js\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n    }\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 268435456;\n    ret._settledValue = value;\n    this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 134217728;\n    ret._settledValue = reason;\n    this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return new SettledPromiseArray(this).promise();\n};\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util.js\");\nvar RangeError = require(\"./errors.js\").RangeError;\nvar AggregateError = require(\"./errors.js\").AggregateError;\nvar isArray = util.isArray;\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n    }\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            e.push(this._values[i]);\n        }\n        this._reject(e);\n    }\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/1wAmHx\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = require(\"./util.js\");\nvar nodebackForPromise = require(\"./promise_resolver.js\")\n    ._nodebackForPromise;\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = require(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/iWrZbw\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!false) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\"'use strict';                            \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise);                      \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n        \"\n        .replace(\"Parameters\", parameterDeclaration(newParameterCount))\n        .replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode))(\n            Promise,\n            fn,\n            receiver,\n            withAppended,\n            maybeWrapAsError,\n            nodebackForPromise,\n            util.tryCatch,\n            util.errorObj,\n            util.notEnumerableProp,\n            INTERNAL\n        );\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        obj[promisifiedKey] = promisifier === makeNodePromisified\n                ? makeNodePromisified(key, THIS, key, fn, suffix)\n                : promisifier(fn, function() {\n                    return makeNodePromisified(key, THIS, key, fn, suffix);\n                });\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver) {\n    return makeNodePromisified(callback, receiver, undefined, callback);\n}\n\nPromise.promisify = function (fn, receiver) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    var ret = promisify(fn, arguments.length < 2 ? THIS : receiver);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/9ITlV0\\u000a\");\n    }\n    options = Object(options);\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/8FZo5V\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier);\n            promisifyAll(value, suffix, filter, promisifier);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier);\n};\n};\n\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, null, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, null, INTERNAL);\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util.js\");\nvar TimeoutError = Promise.TimeoutError;\n\nvar afterTimeout = function (promise, message) {\n    if (!promise.isPending()) return;\n    if (typeof message !== \"string\") {\n        message = \"operation timed out\";\n    }\n    var err = new TimeoutError(message);\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._cancel(err);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (value, ms) {\n    if (ms === undefined) {\n        ms = value;\n        value = undefined;\n        var ret = new Promise(INTERNAL);\n        setTimeout(function() { ret._fulfill(); }, ms);\n        return ret;\n    }\n    ms = +ms;\n    return Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(this, ms);\n};\n\nfunction successClear(value) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret = this.then().cancellable();\n    ret._cancellationParent = this;\n    var handle = setTimeout(function timeoutTimeout() {\n        afterTimeout(ret, message);\n    }, ms);\n    return ret._then(successClear, failureClear, undefined, handle, undefined);\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n","\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/LhFpo0\\u000a\");\n};\nvar reflect = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\n\nvar util = require(\"./util.js\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar async = require(\"./async.js\");\nvar errors = require(\"./errors.js\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nPromise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {e: null};\nvar tryConvertToPromise = require(\"./thenables.js\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array.js\")(Promise, INTERNAL,\n                                    tryConvertToPromise, apiRejection);\nvar CapturedTrace = require(\"./captured_trace.js\")();\nvar isDebugging = require(\"./debuggability.js\")(Promise, CapturedTrace);\n /*jshint unused:false*/\nvar createContext =\n    require(\"./context.js\")(Promise, CapturedTrace, isDebugging);\nvar CatchFilter = require(\"./catch_filter.js\")(NEXT_FILTER);\nvar PromiseResolver = require(\"./promise_resolver.js\");\nvar nodebackForPromise = PromiseResolver._nodebackForPromise;\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction Promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"the promise constructor requires a resolver function\\u000a\\u000a    See http://goo.gl/EC22Yn\\u000a\");\n    }\n    if (this.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/KsIlge\\u000a\");\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._progressHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settledValue = undefined;\n    if (resolver !== INTERNAL) this._resolveFromResolver(resolver);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (typeof item === \"function\") {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(\n                    new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\"));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        var catchFilter = new CatchFilter(catchInstances, fn, this);\n        return this._then(undefined, catchFilter.doFilter, undefined,\n            catchFilter, undefined);\n    }\n    return this._then(undefined, fn, undefined, undefined, undefined);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflect, reflect, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject, didProgress) {\n    if (isDebugging() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject, didProgress) {\n    var promise = this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (didFulfill, didReject) {\n    return this.all()._then(didFulfill, didReject, undefined, APPLY, undefined);\n};\n\nPromise.prototype.isCancellable = function () {\n    return !this.isResolved() &&\n        this._cancellable();\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = function(fn) {\n    var ret = new Promise(INTERNAL);\n    var result = tryCatch(fn)(nodebackForPromise(ret));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true, true);\n    }\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.defer = Promise.pending = function () {\n    var promise = new Promise(INTERNAL);\n    return new PromiseResolver(promise);\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        var val = ret;\n        ret = new Promise(INTERNAL);\n        ret._fulfillUnchecked(val);\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    var prev = async._schedule;\n    async._schedule = fn;\n    return prev;\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    didProgress,\n    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var ret = haveInternalData ? internalData : new Promise(INTERNAL);\n\n    if (!haveInternalData) {\n        ret._propagateFrom(this, 4 | 1);\n        ret._captureStackTrace();\n    }\n\n    var target = this._target();\n    if (target !== this) {\n        if (receiver === undefined) receiver = this._boundTo;\n        if (!haveInternalData) ret._setIsMigrated();\n    }\n\n    var callbackIndex = target._addCallbacks(didFulfill,\n                                             didReject,\n                                             didProgress,\n                                             ret,\n                                             receiver,\n                                             getDomain());\n\n    if (target._isResolved() && !target._isSettlePromisesQueued()) {\n        async.invoke(\n            target._settlePromiseAtPostResolution, target, callbackIndex);\n    }\n\n    return ret;\n};\n\nPromise.prototype._settlePromiseAtPostResolution = function (index) {\n    if (this._isRejectionUnhandled()) this._unsetRejectionIsUnhandled();\n    this._settlePromiseAt(index);\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 131071;\n};\n\nPromise.prototype._isFollowingOrFulfilledOrRejected = function () {\n    return (this._bitField & 939524096) > 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 536870912) === 536870912;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -131072) |\n        (len & 131071);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 536870912;\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 33554432;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 33554432) > 0;\n};\n\nPromise.prototype._cancellable = function () {\n    return (this._bitField & 67108864) > 0;\n};\n\nPromise.prototype._setCancellable = function () {\n    this._bitField = this._bitField | 67108864;\n};\n\nPromise.prototype._unsetCancellable = function () {\n    this._bitField = this._bitField & (~67108864);\n};\n\nPromise.prototype._setIsMigrated = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._unsetIsMigrated = function () {\n    this._bitField = this._bitField & (~4194304);\n};\n\nPromise.prototype._isMigrated = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0\n        ? this._receiver0\n        : this[\n            index * 5 - 5 + 4];\n    if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return index === 0\n        ? this._promise0\n        : this[index * 5 - 5 + 3];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return index === 0\n        ? this._fulfillmentHandler0\n        : this[index * 5 - 5 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return index === 0\n        ? this._rejectionHandler0\n        : this[index * 5 - 5 + 1];\n};\n\nPromise.prototype._boundValue = function() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n};\n\nPromise.prototype._migrateCallbacks = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var progress = follower._progressHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (promise instanceof Promise) promise._setIsMigrated();\n    this._addCallbacks(fulfill, reject, progress, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    progress,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        if (receiver !== undefined) this._receiver0 = receiver;\n        if (typeof fulfill === \"function\" && !this._isCarryingStackTrace()) {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : domain.bind(fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : domain.bind(reject);\n        }\n        if (typeof progress === \"function\") {\n            this._progressHandler0 =\n                domain === null ? progress : domain.bind(progress);\n        }\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promise;\n        this[base + 4] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : domain.bind(fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : domain.bind(reject);\n        }\n        if (typeof progress === \"function\") {\n            this[base + 2] =\n                domain === null ? progress : domain.bind(progress);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._setProxyHandlers = function (receiver, promiseSlotValue) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n    if (index === 0) {\n        this._promise0 = promiseSlotValue;\n        this._receiver0 = receiver;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promiseSlotValue;\n        this[base + 4] = receiver;\n    }\n    this._setLength(index + 1);\n};\n\nPromise.prototype._proxyPromiseArray = function (promiseArray, index) {\n    this._setProxyHandlers(promiseArray, index);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false, true);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    var propagationFlags = 1 | (shouldBind ? 4 : 0);\n    this._propagateFrom(maybePromise, propagationFlags);\n    var promise = maybePromise._target();\n    if (promise._isPending()) {\n        var len = this._length();\n        for (var i = 0; i < len; ++i) {\n            promise._migrateCallbacks(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (promise._isFulfilled()) {\n        this._fulfillUnchecked(promise._value());\n    } else {\n        this._rejectUnchecked(promise._reason(),\n            promise._getCarriedStackTrace());\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, shouldNotMarkOriginatingFromRejection) {\n    if (!shouldNotMarkOriginatingFromRejection) {\n        util.markAsOriginatingFromRejection(reason);\n    }\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason, hasStack ? undefined : trace);\n};\n\nPromise.prototype._resolveFromResolver = function (resolver) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = tryCatch(resolver)(function(value) {\n        if (promise === null) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }, function (reason) {\n        if (promise === null) return;\n        promise._rejectCallback(reason, synchronous);\n        promise = null;\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined && r === errorObj && promise !== null) {\n        promise._rejectCallback(r.e, true, true);\n        promise = null;\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    if (promise._isRejected()) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY && !this._isRejected()) {\n        x = tryCatch(handler).apply(this._boundValue(), value);\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    promise._popContext();\n\n    if (x === errorObj || x === promise || x === NEXT_FILTER) {\n        var err = x === promise ? makeSelfResolutionError() : x.e;\n        promise._rejectCallback(err, false, true);\n    } else {\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._cleanValues = function () {\n    if (this._cancellable()) {\n        this._cancellationParent = undefined;\n    }\n};\n\nPromise.prototype._propagateFrom = function (parent, flags) {\n    if ((flags & 1) > 0 && parent._cancellable()) {\n        this._setCancellable();\n        this._cancellationParent = parent;\n    }\n    if ((flags & 4) > 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n};\n\nPromise.prototype._fulfill = function (value) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._fulfillUnchecked(value);\n};\n\nPromise.prototype._reject = function (reason, carriedStackTrace) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._rejectUnchecked(reason, carriedStackTrace);\n};\n\nPromise.prototype._settlePromiseAt = function (index) {\n    var promise = this._promiseAt(index);\n    var isPromise = promise instanceof Promise;\n\n    if (isPromise && promise._isMigrated()) {\n        promise._unsetIsMigrated();\n        return async.invoke(this._settlePromiseAt, this, index);\n    }\n    var handler = this._isFulfilled()\n        ? this._fulfillmentHandlerAt(index)\n        : this._rejectionHandlerAt(index);\n\n    var carriedStackTrace =\n        this._isCarryingStackTrace() ? this._getCarriedStackTrace() : undefined;\n    var value = this._settledValue;\n    var receiver = this._receiverAt(index);\n    this._clearCallbackDataAtIndex(index);\n\n    if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof PromiseArray) {\n        if (!receiver._isResolved()) {\n            if (this._isFulfilled()) {\n                receiver._promiseFulfilled(value, promise);\n            }\n            else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (this._isFulfilled()) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value, carriedStackTrace);\n        }\n    }\n\n    if (index >= 4 && (index & 31) === 4)\n        async.invokeLater(this._setLength, this, 0);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    if (index === 0) {\n        if (!this._isCarryingStackTrace()) {\n            this._fulfillmentHandler0 = undefined;\n        }\n        this._rejectionHandler0 =\n        this._progressHandler0 =\n        this._receiver0 =\n        this._promise0 = undefined;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] =\n        this[base + 4] =\n        this[base + 0] =\n        this[base + 1] =\n        this[base + 2] = undefined;\n    }\n};\n\nPromise.prototype._isSettlePromisesQueued = function () {\n    return (this._bitField &\n            -1073741824) === -1073741824;\n};\n\nPromise.prototype._setSettlePromisesQueued = function () {\n    this._bitField = this._bitField | -1073741824;\n};\n\nPromise.prototype._unsetSettlePromisesQueued = function () {\n    this._bitField = this._bitField & (~-1073741824);\n};\n\nPromise.prototype._queueSettlePromises = function() {\n    async.settlePromises(this);\n    this._setSettlePromisesQueued();\n};\n\nPromise.prototype._fulfillUnchecked = function (value) {\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err, undefined);\n    }\n    this._setFulfilled();\n    this._settledValue = value;\n    this._cleanValues();\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    }\n};\n\nPromise.prototype._rejectUncheckedCheckError = function (reason) {\n    var trace = util.ensureErrorObject(reason);\n    this._rejectUnchecked(reason, trace === reason ? undefined : trace);\n};\n\nPromise.prototype._rejectUnchecked = function (reason, trace) {\n    if (reason === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err);\n    }\n    this._setRejected();\n    this._settledValue = reason;\n    this._cleanValues();\n\n    if (this._isFinal()) {\n        async.throwLater(function(e) {\n            if (\"stack\" in e) {\n                async.invokeFirst(\n                    CapturedTrace.unhandledRejection, undefined, e);\n            }\n            throw e;\n        }, trace === undefined ? reason : trace);\n        return;\n    }\n\n    if (trace !== undefined && trace !== reason) {\n        this._setCarriedStackTrace(trace);\n    }\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    this._unsetSettlePromisesQueued();\n    var len = this._length();\n    for (var i = 0; i < len; i++) {\n        this._settlePromiseAt(i);\n    }\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./progress.js\")(Promise, PromiseArray);\nrequire(\"./method.js\")(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire(\"./bind.js\")(Promise, INTERNAL, tryConvertToPromise);\nrequire(\"./finally.js\")(Promise, NEXT_FILTER, tryConvertToPromise);\nrequire(\"./direct_resolve.js\")(Promise);\nrequire(\"./synchronous_inspection.js\")(Promise);\nrequire(\"./join.js\")(Promise, PromiseArray, tryConvertToPromise, INTERNAL);\nPromise.Promise = Promise;\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\nrequire('./cancel.js')(Promise);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise);\nrequire('./nodeify.js')(Promise);\nrequire('./call_get.js')(Promise);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\nrequire('./settle.js')(Promise, PromiseArray);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./any.js')(Promise);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./timers.js')(Promise, INTERNAL);\nrequire('./filter.js')(Promise, INTERNAL);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._progressHandler0 = value;                                         \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n        p._settledValue = value;                                             \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    CapturedTrace.setBounds(async.firstLineError, util.lastLineError);       \n    return Promise;                                                          \n\n};\n","var Promise = require('unexpected-bluebird');\n\nvar workQueue = {\n    queue: [],\n    drain: function () {\n        this.queue.forEach(function (fn) {\n            fn();\n        });\n        this.queue = [];\n    }\n};\n\nvar scheduler = Promise.setScheduler(function (fn) {\n    workQueue.queue.push(fn);\n    scheduler(function () {\n        workQueue.drain();\n    });\n});\n\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    var that = this;\n    scheduler(function () {\n        if (that._isRejectionUnhandled()) {\n            if (workQueue.onUnhandledRejection) { // for testing\n                workQueue.onUnhandledRejection(that.reason());\n            } else {\n                throw that.reason();\n            }\n        }\n    });\n};\n\nmodule.exports = workQueue;\n","/*global window*/\nvar Promise = require('unexpected-bluebird');\nvar useFullStackTrace = false;\nif (typeof window !== 'undefined' && typeof window.location !== 'undefined') {\n    useFullStackTrace = !!window.location.search.match(/[?&]full-trace=true(?:$|&)/);\n}\n\nif (typeof process !== 'undefined' && process.env && process.env.UNEXPECTED_FULL_TRACE) {\n    Promise.longStackTraces();\n    useFullStackTrace = true;\n}\nmodule.exports = useFullStackTrace;\n","var workQueue = require('./workQueue');\nvar Promise = require('unexpected-bluebird');\nvar useFullStackTrace = require('./useFullStackTrace');\n\nmodule.exports = function oathbreaker(value) {\n    if (!value || typeof value.then !== 'function') {\n        return value;\n    }\n\n    if (!value.isRejected) {\n        // this is not a bluebird promise\n        return value;\n    }\n\n    if (value.isFulfilled()) {\n        return value;\n    }\n\n\n    if (value.isRejected()) {\n        value.caught(function () {\n            // Ignore - already handled\n        });\n\n        throw value.reason();\n    }\n\n    var onResolve = function () {};\n    var onReject = function () {};\n\n    var evaluated = false;\n    var error;\n    value.then(function (obj) {\n        evaluated = true;\n        onResolve(value);\n    }, function (err) {\n        evaluated = true;\n        error = err;\n        onReject(err);\n    });\n\n    workQueue.drain();\n\n    if (evaluated && error) {\n        if (error._isUnexpected && Error.captureStackTrace) {\n            Error.captureStackTrace(error);\n        }\n        throw error;\n    } else if (evaluated) {\n        return value;\n    } else if (value._captureStackTrace && !useFullStackTrace) {\n        value._captureStackTrace(true);\n    }\n\n    return new Promise(function (resolve, reject) {\n        onResolve = resolve;\n        onReject = reject;\n    });\n};\n","module.exports = function throwIfNonUnexpectedError(err) {\n    if (err && err.message === 'aggregate error') {\n        for (var i = 0 ; i < err.length ; i += 1) {\n            throwIfNonUnexpectedError(err[i]);\n        }\n    } else if (!err || !err._isUnexpected) {\n        throw err;\n    }\n};\n","module.exports = function addAdditionalPromiseMethods(promise, expect, subject) {\n    promise.and = function () { // ...\n        var args = Array.prototype.slice.call(arguments);\n        function executeAnd() {\n            if (expect.findTypeOf(args[0]).is('expect.it')) {\n                return addAdditionalPromiseMethods(args[0](subject), expect, subject);\n            } else {\n                return expect.apply(expect, [subject].concat(args));\n            }\n        }\n\n        if (this.isFulfilled()) {\n            return executeAnd();\n        } else {\n            return addAdditionalPromiseMethods(this.then(executeAnd), expect, subject);\n        }\n    };\n\n    return promise;\n};\n","module.exports = function isPendingPromise(obj) {\n    return obj && typeof obj.then === 'function' && typeof obj.isPending === 'function' && obj.isPending();\n};\n","/*global window*/\nvar defaultDepth = 3;\nvar matchDepthParameter =\n    typeof window !== 'undefined' &&\n    typeof window.location !== 'undefined' &&\n    window.location.search.match(/[?&]depth=(\\d+)(?:$|&)/);\n\nif (matchDepthParameter) {\n    defaultDepth = parseInt(matchDepthParameter[1], 10);\n} else if (typeof process !== 'undefined' && process.env.UNEXPECTED_DEPTH) {\n    defaultDepth = parseInt(process.env.UNEXPECTED_DEPTH, 10);\n}\nmodule.exports = defaultDepth;\n","module.exports = function makeDiffResultBackwardsCompatible(diff) {\n    if (diff) {\n        if (diff.isMagicPen) {\n            // New format: { [MagicPen], inline: <boolean> }\n            // Make backwards compatible by adding a 'diff' property that points\n            // to the instance itself.\n            diff.diff = diff;\n        } else {\n            // Old format: { inline: <boolean>, diff: <magicpen> }\n            // Upgrade to the new format by moving the inline property to\n            // the magicpen instance, and remain backwards compatibly by adding\n            // the diff property pointing to the instance itself.\n            diff.diff.inline = diff.inline;\n            diff = diff.diff;\n            diff.diff = diff;\n        }\n    }\n    return diff;\n};\n","/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIS:\n * JsDiff.diffChars: Character by character diff\n * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * JsDiff.diffLines: Line based diff\n *\n * JsDiff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\n(function(global, undefined) {\n  var JsDiff = (function() {\n    /*jshint maxparams: 5*/\n    function map(arr, mapper, that) {\n      if (Array.prototype.map) {\n        return Array.prototype.map.call(arr, mapper, that);\n      }\n\n      var other = new Array(arr.length);\n\n      for (var i = 0, n = arr.length; i < n; i++) {\n        other[i] = mapper.call(that, arr[i], i, arr);\n      }\n      return other;\n    }\n    function clonePath(path) {\n      return { newPos: path.newPos, components: path.components.slice(0) };\n    }\n    function removeEmpty(array) {\n      var ret = [];\n      for (var i = 0; i < array.length; i++) {\n        if (array[i]) {\n          ret.push(array[i]);\n        }\n      }\n      return ret;\n    }\n    function escapeHTML(s) {\n      var n = s;\n      n = n.replace(/&/g, '&amp;');\n      n = n.replace(/</g, '&lt;');\n      n = n.replace(/>/g, '&gt;');\n      n = n.replace(/\"/g, '&quot;');\n\n      return n;\n    }\n\n    var Diff = function(ignoreWhitespace) {\n      this.ignoreWhitespace = ignoreWhitespace;\n    };\n    Diff.prototype = {\n        diff: function(oldString, newString) {\n          // Handle the identity case (this is due to unrolling editLength == 0\n          if (newString === oldString) {\n            return [{ value: newString }];\n          }\n          if (!newString) {\n            return [{ value: oldString, removed: true }];\n          }\n          if (!oldString) {\n            return [{ value: newString, added: true }];\n          }\n\n          newString = this.tokenize(newString);\n          oldString = this.tokenize(oldString);\n\n          var newLen = newString.length, oldLen = oldString.length;\n          var maxEditLength = newLen + oldLen;\n          var bestPath = [{ newPos: -1, components: [] }];\n\n          // Seed editLength = 0\n          var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n          if (bestPath[0].newPos+1 >= newLen && oldPos+1 >= oldLen) {\n            return bestPath[0].components;\n          }\n\n          for (var editLength = 1; editLength <= maxEditLength; editLength++) {\n            for (var diagonalPath = -1*editLength; diagonalPath <= editLength; diagonalPath+=2) {\n              var basePath;\n              var addPath = bestPath[diagonalPath-1],\n                  removePath = bestPath[diagonalPath+1];\n              oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n              if (addPath) {\n                // No one else is going to attempt to use this value, clear it\n                bestPath[diagonalPath-1] = undefined;\n              }\n\n              var canAdd = addPath && addPath.newPos+1 < newLen;\n              var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n              if (!canAdd && !canRemove) {\n                bestPath[diagonalPath] = undefined;\n                continue;\n              }\n\n              // Select the diagonal that we want to branch from. We select the prior\n              // path whose position in the new string is the farthest from the origin\n              // and does not pass the bounds of the diff graph\n              if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n                basePath = clonePath(removePath);\n                this.pushComponent(basePath.components, oldString[oldPos], undefined, true);\n              } else {\n                basePath = clonePath(addPath);\n                basePath.newPos++;\n                this.pushComponent(basePath.components, newString[basePath.newPos], true, undefined);\n              }\n\n              var oldPos = this.extractCommon(basePath, newString, oldString, diagonalPath);\n\n              if (basePath.newPos+1 >= newLen && oldPos+1 >= oldLen) {\n                return basePath.components;\n              } else {\n                bestPath[diagonalPath] = basePath;\n              }\n            }\n          }\n        },\n\n        pushComponent: function(components, value, added, removed) {\n          var last = components[components.length-1];\n          if (last && last.added === added && last.removed === removed) {\n            // We need to clone here as the component clone operation is just\n            // as shallow array clone\n            components[components.length-1] =\n              {value: this.join(last.value, value), added: added, removed: removed };\n          } else {\n            components.push({value: value, added: added, removed: removed });\n          }\n        },\n        extractCommon: function(basePath, newString, oldString, diagonalPath) {\n          var newLen = newString.length,\n              oldLen = oldString.length,\n              newPos = basePath.newPos,\n              oldPos = newPos - diagonalPath;\n          while (newPos+1 < newLen && oldPos+1 < oldLen && this.equals(newString[newPos+1], oldString[oldPos+1])) {\n            newPos++;\n            oldPos++;\n\n            this.pushComponent(basePath.components, newString[newPos], undefined, undefined);\n          }\n          basePath.newPos = newPos;\n          return oldPos;\n        },\n\n        equals: function(left, right) {\n          var reWhitespace = /\\S/;\n          if (this.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right)) {\n            return true;\n          } else {\n            return left === right;\n          }\n        },\n        join: function(left, right) {\n          return left + right;\n        },\n        tokenize: function(value) {\n          return value;\n        }\n    };\n\n    var CharDiff = new Diff();\n\n    var WordDiff = new Diff(true);\n    var WordWithSpaceDiff = new Diff();\n    WordDiff.tokenize = WordWithSpaceDiff.tokenize = function(value) {\n      return removeEmpty(value.split(/(\\s+|\\b)/));\n    };\n\n    var CssDiff = new Diff(true);\n    CssDiff.tokenize = function(value) {\n      return removeEmpty(value.split(/([{}:;,]|\\s+)/));\n    };\n\n    var LineDiff = new Diff();\n    LineDiff.tokenize = function(value) {\n      var retLines = [],\n          lines = value.split(/^/m);\n\n      for(var i = 0; i < lines.length; i++) {\n        var line = lines[i],\n            lastLine = lines[i - 1];\n\n        // Merge lines that may contain windows new lines\n        if (line == '\\n' && lastLine && lastLine[lastLine.length - 1] === '\\r') {\n          retLines[retLines.length - 1] += '\\n';\n        } else if (line) {\n          retLines.push(line);\n        }\n      }\n\n      return retLines;\n    };\n\n    return {\n      Diff: Diff,\n\n      diffChars: function(oldStr, newStr) { return CharDiff.diff(oldStr, newStr); },\n      diffWords: function(oldStr, newStr) { return WordDiff.diff(oldStr, newStr); },\n      diffWordsWithSpace: function(oldStr, newStr) { return WordWithSpaceDiff.diff(oldStr, newStr); },\n      diffLines: function(oldStr, newStr) { return LineDiff.diff(oldStr, newStr); },\n\n      diffCss: function(oldStr, newStr) { return CssDiff.diff(oldStr, newStr); },\n\n      createPatch: function(fileName, oldStr, newStr, oldHeader, newHeader) {\n        var ret = [];\n\n        ret.push('Index: ' + fileName);\n        ret.push('===================================================================');\n        ret.push('--- ' + fileName + (typeof oldHeader === 'undefined' ? '' : '\\t' + oldHeader));\n        ret.push('+++ ' + fileName + (typeof newHeader === 'undefined' ? '' : '\\t' + newHeader));\n\n        var diff = LineDiff.diff(oldStr, newStr);\n        if (!diff[diff.length-1].value) {\n          diff.pop();   // Remove trailing newline add\n        }\n        diff.push({value: '', lines: []});   // Append an empty value to make cleanup easier\n\n        function contextLines(lines) {\n          return map(lines, function(entry) { return ' ' + entry; });\n        }\n        function eofNL(curRange, i, current) {\n          var last = diff[diff.length-2],\n              isLast = i === diff.length-2,\n              isLastOfType = i === diff.length-3 && (current.added !== last.added || current.removed !== last.removed);\n\n          // Figure out if this is the last line for the given file and missing NL\n          if (!/\\n$/.test(current.value) && (isLast || isLastOfType)) {\n            curRange.push('\\\\ No newline at end of file');\n          }\n        }\n\n        var oldRangeStart = 0, newRangeStart = 0, curRange = [],\n            oldLine = 1, newLine = 1;\n        for (var i = 0; i < diff.length; i++) {\n          var current = diff[i],\n              lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n          current.lines = lines;\n\n          if (current.added || current.removed) {\n            if (!oldRangeStart) {\n              var prev = diff[i-1];\n              oldRangeStart = oldLine;\n              newRangeStart = newLine;\n\n              if (prev) {\n                curRange = contextLines(prev.lines.slice(-4));\n                oldRangeStart -= curRange.length;\n                newRangeStart -= curRange.length;\n              }\n            }\n            curRange.push.apply(curRange, map(lines, function(entry) { return (current.added?'+':'-') + entry; }));\n            eofNL(curRange, i, current);\n\n            if (current.added) {\n              newLine += lines.length;\n            } else {\n              oldLine += lines.length;\n            }\n          } else {\n            if (oldRangeStart) {\n              // Close out any changes that have been output (or join overlapping)\n              if (lines.length <= 8 && i < diff.length-2) {\n                // Overlapping\n                curRange.push.apply(curRange, contextLines(lines));\n              } else {\n                // end the range and output\n                var contextSize = Math.min(lines.length, 4);\n                ret.push(\n                    '@@ -' + oldRangeStart + ',' + (oldLine-oldRangeStart+contextSize)\n                    + ' +' + newRangeStart + ',' + (newLine-newRangeStart+contextSize)\n                    + ' @@');\n                ret.push.apply(ret, curRange);\n                ret.push.apply(ret, contextLines(lines.slice(0, contextSize)));\n                if (lines.length <= 4) {\n                  eofNL(ret, i, current);\n                }\n\n                oldRangeStart = 0;  newRangeStart = 0; curRange = [];\n              }\n            }\n            oldLine += lines.length;\n            newLine += lines.length;\n          }\n        }\n\n        return ret.join('\\n') + '\\n';\n      },\n\n      applyPatch: function(oldStr, uniDiff) {\n        var diffstr = uniDiff.split('\\n');\n        var diff = [];\n        var remEOFNL = false,\n            addEOFNL = false;\n\n        for (var i = (diffstr[0][0]==='I'?4:0); i < diffstr.length; i++) {\n          if(diffstr[i][0] === '@') {\n            var meh = diffstr[i].split(/@@ -(\\d+),(\\d+) \\+(\\d+),(\\d+) @@/);\n            diff.unshift({\n              start:meh[3],\n              oldlength:meh[2],\n              oldlines:[],\n              newlength:meh[4],\n              newlines:[]\n            });\n          } else if(diffstr[i][0] === '+') {\n            diff[0].newlines.push(diffstr[i].substr(1));\n          } else if(diffstr[i][0] === '-') {\n            diff[0].oldlines.push(diffstr[i].substr(1));\n          } else if(diffstr[i][0] === ' ') {\n            diff[0].newlines.push(diffstr[i].substr(1));\n            diff[0].oldlines.push(diffstr[i].substr(1));\n          } else if(diffstr[i][0] === '\\\\') {\n            if (diffstr[i-1][0] === '+') {\n              remEOFNL = true;\n            } else if(diffstr[i-1][0] === '-') {\n              addEOFNL = true;\n            }\n          }\n        }\n\n        var str = oldStr.split('\\n');\n        for (var i = diff.length - 1; i >= 0; i--) {\n          var d = diff[i];\n          for (var j = 0; j < d.oldlength; j++) {\n            if(str[d.start-1+j] !== d.oldlines[j]) {\n              return false;\n            }\n          }\n          Array.prototype.splice.apply(str,[d.start-1,+d.oldlength].concat(d.newlines));\n        }\n\n        if (remEOFNL) {\n          while (!str[str.length-1]) {\n            str.pop();\n          }\n        } else if (addEOFNL) {\n          str.push('');\n        }\n        return str.join('\\n');\n      },\n\n      convertChangesToXML: function(changes){\n        var ret = [];\n        for ( var i = 0; i < changes.length; i++) {\n          var change = changes[i];\n          if (change.added) {\n            ret.push('<ins>');\n          } else if (change.removed) {\n            ret.push('<del>');\n          }\n\n          ret.push(escapeHTML(change.value));\n\n          if (change.added) {\n            ret.push('</ins>');\n          } else if (change.removed) {\n            ret.push('</del>');\n          }\n        }\n        return ret.join('');\n      },\n\n      // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n      convertChangesToDMP: function(changes){\n        var ret = [], change;\n        for ( var i = 0; i < changes.length; i++) {\n          change = changes[i];\n          ret.push([(change.added ? 1 : change.removed ? -1 : 0), change.value]);\n        }\n        return ret;\n      }\n    };\n  })();\n\n  if (typeof module !== 'undefined') {\n      module.exports = JsDiff;\n  }\n  else if (typeof define === 'function') {\n    define([], function() { return JsDiff; });\n  }\n  else if (typeof global.JsDiff === 'undefined') {\n    global.JsDiff = JsDiff;\n  }\n})(this);\n","module.exports = /([\\x00-\\x09\\x0B-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BA-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF])/g;\n","var utils = require('./utils');\nvar stringDiff = require('diff');\nvar specialCharRegExp = require('./specialCharRegExp');\n\nmodule.exports = function (expect) {\n    expect.installTheme({ styles: {\n        jsBoolean: 'jsPrimitive',\n        jsNumber: 'jsPrimitive',\n        error: ['red', 'bold'],\n        success: ['green', 'bold'],\n        diffAddedLine: 'green',\n        diffAddedHighlight: ['bgGreen', 'white'],\n        diffAddedSpecialChar: ['bgGreen', 'cyan', 'bold'],\n        diffRemovedLine: 'red',\n        diffRemovedHighlight: ['bgRed', 'white'],\n        diffRemovedSpecialChar: ['bgRed', 'cyan', 'bold'],\n        partialMatchHighlight: ['bgYellow']\n    }});\n\n    expect.installTheme('html', {\n        palette: [\n            '#993333', '#669933', '#314575', '#337777', '#710071', '#319916',\n            '#BB1A53', '#999933', '#4311C2', '#996633', '#993399', '#333399',\n            '#228842', '#C24747', '#336699', '#663399'\n        ],\n        styles: {\n            jsComment: '#969896',\n            jsFunctionName: '#795da3',\n            jsKeyword: '#a71d5d',\n            jsPrimitive: '#0086b3',\n            jsRegexp: '#183691',\n            jsString: '#df5000',\n            jsKey: '#555'\n        }\n    });\n\n    expect.installTheme('ansi', {\n        palette: [\n            '#FF1A53', '#E494FF', '#1A53FF', '#FF1AC6', '#1AFF53', '#D557FF',\n            '#81FF57', '#C6FF1A', '#531AFF', '#AFFF94', '#C61AFF', '#53FF1A',\n            '#FF531A', '#1AFFC6', '#FFC61A', '#1AC6FF'\n        ],\n        styles: {\n            jsComment: 'gray',\n            jsFunctionName: 'jsKeyword',\n            jsKeyword: 'magenta',\n            jsNumber: [],\n            jsPrimitive: 'cyan',\n            jsRegexp: 'green',\n            jsString: 'cyan',\n            jsKey: '#666',\n            diffAddedHighlight: ['bgGreen', 'black'],\n            diffRemovedHighlight: ['bgRed', 'black'],\n            partialMatchHighlight: ['bgYellow', 'black']\n        }\n    });\n\n    expect.addStyle('colorByIndex', function (content, index) {\n        var palette = this.theme().palette;\n        if (palette) {\n            var color = palette[index % palette.length];\n            this.text(content, color);\n        } else {\n            this.text(content);\n        }\n    });\n\n    expect.addStyle('singleQuotedString', function (content) {\n        content = String(content);\n        this.jsString(\"'\")\n            .jsString(content.replace(/[\\\\\\x00-\\x1f']/g, function ($0) {\n                if ($0 === '\\n') {\n                    return '\\\\n';\n                } else if ($0 === '\\r') {\n                    return '\\\\r';\n                } else if ($0 === \"'\") {\n                    return \"\\\\'\";\n                } else if ($0 === '\\\\') {\n                    return '\\\\\\\\';\n                } else if ($0 === '\\t') {\n                    return '\\\\t';\n                } else if ($0 === '\\b') {\n                    return '\\\\b';\n                } else if ($0 === '\\f') {\n                    return '\\\\f';\n                } else {\n                    var charCode = $0.charCodeAt(0);\n                    return '\\\\x' + (charCode < 16 ? '0' : '') + charCode.toString(16);\n                }\n            }))\n            .jsString(\"'\");\n    });\n\n    expect.addStyle('property', function (key, inspectedValue, isArrayLike) {\n        var keyOmitted = false;\n        var isSymbol;\n        isSymbol = typeof key === 'symbol';\n        if (isSymbol) {\n            this.text('[').sp().appendInspected(key).sp().text(']').text(':');\n        } else {\n            key = String(key);\n            if (/^[a-z\\$\\_][a-z0-9\\$\\_]*$/i.test(key)) {\n                this.text(key, 'jsKey').text(':');\n            } else if (/^(?:0|[1-9][0-9]*)$/.test(key)) {\n                if (isArrayLike) {\n                    keyOmitted = true;\n                } else {\n                    this.jsNumber(key).text(':');\n                }\n            } else {\n                this.singleQuotedString(key).text(':');\n            }\n        }\n\n        if (!inspectedValue.isEmpty()) {\n            if (!keyOmitted) {\n                if (key.length > 5 && inspectedValue.isBlock() && inspectedValue.isMultiline()) {\n                    this.indentLines();\n                    this.nl().i();\n                } else {\n                    this.sp();\n                }\n            }\n            this.append(inspectedValue);\n        }\n    });\n\n    // Intended to be redefined by a plugin that offers syntax highlighting:\n    expect.addStyle('code', function (content, language) {\n        this.text(content);\n    });\n\n    expect.addStyle('annotationBlock', function () {\n        var pen = this.getContentFromArguments(arguments);\n        var height = pen.size().height;\n\n        this.block(function () {\n            for (var i = 0; i < height; i += 1) {\n                if (0 < i) {\n                    this.nl();\n                }\n                this.error('//');\n            }\n        });\n        this.sp().block(pen);\n    });\n\n    expect.addStyle('commentBlock', function () {\n        var pen = this.getContentFromArguments(arguments);\n        var height = pen.size().height;\n\n        this.block(function () {\n            for (var i = 0; i < height; i += 1) {\n                if (0 < i) {\n                    this.nl();\n                }\n                this.jsComment('//');\n            }\n        });\n        this.sp().block(pen);\n    });\n\n    expect.addStyle('removedHighlight', function (content) {\n        this.alt({\n            text: function () {\n                content.split(/(\\n)/).forEach(function (fragment) {\n                    if (fragment === '\\n') {\n                        this.nl();\n                    } else {\n                        this.block(function () {\n                            this.text(fragment).nl().text(fragment.replace(/[\\s\\S]/g, '^'));\n                        });\n                    }\n                }, this);\n            },\n            fallback: function () {\n                this.diffRemovedHighlight(content);\n            }\n        });\n    });\n\n    expect.addStyle('match', function (content) {\n        this.alt({\n            text: function () {\n                content.split(/(\\n)/).forEach(function (fragment) {\n                    if (fragment === '\\n') {\n                        this.nl();\n                    } else {\n                        this.block(function () {\n                            this.text(fragment).nl().text(fragment.replace(/[\\s\\S]/g, '^'));\n                        });\n                    }\n                }, this);\n            },\n            fallback: function () {\n                this.diffAddedHighlight(content);\n            }\n        });\n    });\n\n    expect.addStyle('partialMatch', function (content) {\n        this.alt({\n            text: function () {\n                // We haven't yet come up with a good styling for partial matches in text mode\n                this.match(content);\n            },\n            fallback: function () {\n                this.partialMatchHighlight(content);\n            }\n        });\n    });\n\n    expect.addStyle('shouldEqualError', function (expected) {\n        this.error(typeof expected === 'undefined' ? 'should be' : 'should equal').sp().block(function () {\n            this.appendInspected(expected);\n        });\n    });\n\n    expect.addStyle('errorName', function (error) {\n        if (typeof error.name === 'string' && error.name !== 'Error') {\n            this.text(error.name);\n        } else if (error.constructor && typeof error.constructor.name === 'string') {\n            this.text(error.constructor.name);\n        } else {\n            this.text('Error');\n        }\n    });\n\n    expect.addStyle('appendErrorMessage', function (error, options) {\n        if (error && error.isUnexpected) {\n            this.append(error.getErrorMessage(utils.extend({ output: this }, options)));\n        } else {\n            this.appendInspected(error);\n        }\n    });\n\n    expect.addStyle('appendItems', function (items, separator) {\n        var that = this;\n        separator = separator || '';\n        items.forEach(function (item, index) {\n            if (0 < index) {\n                that.append(separator);\n            }\n            that.appendInspected(item);\n        });\n    });\n\n    expect.addStyle('stringDiffFragment', function (ch, text, baseStyle, markUpSpecialCharacters) {\n        text.split(/\\n/).forEach(function (line, i, lines) {\n            if (this.isAtStartOfLine()) {\n                this.alt({\n                    text: ch,\n                    fallback: function () {\n                        if (line === '' && ch !== ' ' && (i === 0 || i !== lines.length - 1)) {\n                            this[ch === '+' ? 'diffAddedSpecialChar' : 'diffRemovedSpecialChar']('\\\\n');\n                        }\n                    }\n                });\n            }\n            var matchTrailingSpace = line.match(/^(.*[^ ])?( +)$/);\n            if (matchTrailingSpace) {\n                line = matchTrailingSpace[1] || '';\n            }\n\n            if (markUpSpecialCharacters) {\n                line.split(specialCharRegExp).forEach(function (part) {\n                    if (specialCharRegExp.test(part)) {\n                        this[{'+': 'diffAddedSpecialChar', '-': 'diffRemovedSpecialChar'}[ch] || baseStyle](utils.escapeChar(part));\n                    } else {\n                        this[baseStyle](part);\n                    }\n                }, this);\n            } else {\n                this[baseStyle](line);\n            }\n            if (matchTrailingSpace) {\n                this[{'+': 'diffAddedHighlight', '-': 'diffRemovedHighlight'}[ch] || baseStyle](matchTrailingSpace[2]);\n            }\n            if (i !== lines.length - 1) {\n                this.nl();\n            }\n        }, this);\n    });\n\n    expect.addStyle('stringDiff', function (actual, expected, options) {\n        options = options || {};\n        var type = options.type || 'WordsWithSpace';\n        var diffLines = [];\n        var lastPart;\n        stringDiff.diffLines(actual, expected).forEach(function (part) {\n            if (lastPart && lastPart.added && part.removed) {\n                diffLines.push({\n                    oldValue: part.value,\n                    newValue: lastPart.value,\n                    replaced: true\n                });\n                lastPart = null;\n            } else {\n                if (lastPart) {\n                    diffLines.push(lastPart);\n                }\n                lastPart = part;\n            }\n        });\n        if (lastPart) {\n            diffLines.push(lastPart);\n        }\n\n        diffLines.forEach(function (part, index) {\n            if (part.replaced) {\n                var oldValue = part.oldValue;\n                var newValue = part.newValue;\n                var newLine = this.clone();\n                var oldEndsWithNewline = oldValue.slice(-1) === '\\n';\n                var newEndsWithNewline = newValue.slice(-1) === '\\n';\n                if (oldEndsWithNewline) {\n                    oldValue = oldValue.slice(0, -1);\n                }\n                if (newEndsWithNewline) {\n                    newValue = newValue.slice(0, -1);\n                }\n                stringDiff['diff' + type](oldValue, newValue).forEach(function (part) {\n                    if (part.added) {\n                        newLine.stringDiffFragment('+', part.value, 'diffAddedHighlight', options.markUpSpecialCharacters);\n                    } else if (part.removed) {\n                        this.stringDiffFragment('-', part.value, 'diffRemovedHighlight', options.markUpSpecialCharacters);\n                    } else {\n                        newLine.stringDiffFragment('+', part.value, 'diffAddedLine');\n                        this.stringDiffFragment('-', part.value, 'diffRemovedLine');\n                    }\n                }, this);\n                if (newEndsWithNewline && !oldEndsWithNewline) {\n                    newLine.diffAddedSpecialChar('\\\\n');\n                }\n\n                if (oldEndsWithNewline && !newEndsWithNewline) {\n                    this.diffRemovedSpecialChar('\\\\n');\n                }\n                this.nl().append(newLine).nl(oldEndsWithNewline && index < diffLines.length - 1 ? 1 : 0);\n            } else {\n                var endsWithNewline = /\\n$/.test(part.value);\n                var value = endsWithNewline ?\n                    part.value.slice(0, -1) :\n                    part.value;\n                if (part.added) {\n                    this.stringDiffFragment('+', value, 'diffAddedLine', options.markUpSpecialCharacters);\n                } else if (part.removed) {\n                    this.stringDiffFragment('-', value, 'diffRemovedLine', options.markUpSpecialCharacters);\n                } else {\n                    this.stringDiffFragment(' ', value, 'text');\n                }\n                if (endsWithNewline) {\n                    this.nl();\n                }\n            }\n        }, this);\n    });\n\n    expect.addStyle('arrow', function (options) {\n        options = options || {};\n        var styles = options.styles || [];\n        var i;\n        this.nl(options.top || 0).sp(options.left || 0).text('┌', styles);\n        for (i = 1 ; i < options.width ; i += 1) {\n            this.text(i === options.width - 1 && options.direction === 'up' ? '▷' : '─', styles);\n        }\n        this.nl();\n        for (i = 1 ; i < options.height - 1 ; i += 1) {\n            this.sp(options.left || 0).text('│', styles).nl();\n        }\n        this.sp(options.left || 0).text('└', styles);\n        for (i = 1 ; i < options.width ; i += 1) {\n            this.text(i === options.width - 1 && options.direction === 'down' ? '▷' : '─', styles);\n        }\n    });\n\n    var flattenBlocksInLines = require('magicpen/lib/flattenBlocksInLines');\n    expect.addStyle('merge', function (pens) {\n        var flattenedPens = pens.map(function (pen) {\n            return flattenBlocksInLines(pen.output);\n        }).reverse();\n        var maxHeight = flattenedPens.reduce(function (maxHeight, pen) {\n            return Math.max(maxHeight, pen.length);\n        }, 0);\n        var blockNumbers = new Array(flattenedPens.length);\n        var blockOffsets = new Array(flattenedPens.length);\n        // As long as there's at least one pen with a line left:\n        for (var lineNumber = 0 ; lineNumber < maxHeight ; lineNumber += 1) {\n            if (lineNumber > 0) {\n                this.nl();\n            }\n            var i;\n            for (i = 0 ; i < blockNumbers.length ; i += 1) {\n                blockNumbers[i] = 0;\n                blockOffsets[i] = 0;\n            }\n            var contentLeft;\n            do {\n                contentLeft = false;\n                var hasOutputChar = false;\n                for (i = 0 ; i < flattenedPens.length ; i += 1) {\n                    var currentLine = flattenedPens[i][lineNumber];\n                    if (currentLine) {\n                        while (currentLine[blockNumbers[i]] && blockOffsets[i] >= currentLine[blockNumbers[i]].args.content.length) {\n                            blockNumbers[i] += 1;\n                            blockOffsets[i] = 0;\n                        }\n                        var currentBlock = currentLine[blockNumbers[i]];\n                        if (currentBlock) {\n                            contentLeft = true;\n                            if (!hasOutputChar) {\n                                var ch = currentBlock.args.content.charAt(blockOffsets[i]);\n                                if (ch !== ' ') {\n                                    this.text(ch, currentBlock.args.styles);\n                                    hasOutputChar = true;\n                                }\n                            }\n                            blockOffsets[i] += 1;\n                        }\n                    }\n                }\n                if (!hasOutputChar && contentLeft) {\n                    this.sp();\n                }\n            } while (contentLeft);\n        }\n    });\n\n    expect.addStyle('arrowsAlongsideChangeOutputs', function (packing, changeOutputs) {\n        if (packing) {\n            var topByChangeNumber = {};\n            var top = 0;\n            changeOutputs.forEach(function (changeOutput, index) {\n                topByChangeNumber[index] = top;\n                top += changeOutput.size().height;\n            });\n            var that = this;\n\n            var arrows = [];\n            packing.forEach(function (columnSet, i, packing) {\n                columnSet.forEach(function (entry) {\n                    arrows.push(that.clone().arrow({\n                        left: i * 2,\n                        top: topByChangeNumber[entry.start],\n                        width: 1 + (packing.length - i) * 2,\n                        height: topByChangeNumber[entry.end] - topByChangeNumber[entry.start] + 1,\n                        direction: entry.direction\n                    }));\n                });\n            });\n\n            if (arrows.length === 1) {\n                this.block(arrows[0]);\n            } else if (arrows.length > 1) {\n                this.block(function () {\n                    this.merge(arrows);\n                });\n            }\n        } else {\n            this.i();\n        }\n\n        this.block(function () {\n            changeOutputs.forEach(function (changeOutput, index) {\n                this.nl(index > 0 ? 1 : 0);\n                if (!changeOutput.isEmpty()) {\n                    this.sp(packing ? 1 : 0).append(changeOutput);\n                }\n            }, this);\n        });\n    });\n};\n","var toString = {}.toString;\n\nexport default Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\nmodule.exports = Number.isNaN || function (x) {\n\treturn x !== x;\n};\n","'use strict';\nvar numberIsNan = require('number-is-nan');\n\nmodule.exports = Number.isFinite || function (val) {\n\treturn !(typeof val !== 'number' || numberIsNan(val) || val === Infinity || val === -Infinity);\n};\n","'use strict';\nvar isFinite = require('is-finite');\n\nmodule.exports = function (str, n) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string as the first argument');\n\t}\n\n\tif (n < 0 || !isFinite(n)) {\n\t\tthrow new TypeError('Expected a finite positive number');\n\t}\n\n\tvar ret = '';\n\n\tdo {\n\t\tif (n & 1) {\n\t\t\tret += str;\n\t\t}\n\n\t\tstr += str;\n\t} while (n = n >> 1);\n\n\treturn ret;\n};\n","var utils = require('./utils');\nvar isRegExp = utils.isRegExp;\nvar leftPad = utils.leftPad;\nvar arrayChanges = require('array-changes');\nvar leven = require('leven');\nvar detectIndent = require('detect-indent');\nvar defaultDepth = require('./defaultDepth');\nvar AssertionString = require('./AssertionString');\n\nmodule.exports = function (expect) {\n    expect.addType({\n        name: 'wrapperObject',\n        identify: false,\n        equal: function (a, b, equal) {\n            return a === b || equal(this.unwrap(a), this.unwrap(b));\n        },\n        inspect: function (value, depth, output, inspect) {\n            output.append(this.prefix(output.clone(), value));\n            output.append(inspect(this.unwrap(value), depth));\n            output.append(this.suffix(output.clone(), value));\n            return output;\n        },\n        diff: function (actual, expected, output, diff, inspect) {\n            output.inline = true;\n            actual = this.unwrap(actual);\n            expected = this.unwrap(expected);\n            var comparison = diff(actual, expected);\n            var prefixOutput = this.prefix(output.clone(), actual);\n            var suffixOutput = this.suffix(output.clone(), actual);\n            if (comparison && comparison.inline) {\n                return output.append(prefixOutput).append(comparison).append(suffixOutput);\n            } else {\n                return output.append(prefixOutput).nl()\n                    .indentLines()\n                    .i().block(function () {\n                        this.append(inspect(actual)).sp().annotationBlock(function () {\n                            this.shouldEqualError(expected, inspect);\n                            if (comparison) {\n                                this.nl(2).append(comparison);\n                            }\n                        });\n\n                    }).nl()\n                    .outdentLines()\n                    .append(suffixOutput);\n            }\n        }\n    });\n\n    if (typeof Symbol === 'function') {\n        expect.addType({\n            name: 'Symbol',\n            identify: function (obj) {\n                return typeof obj === 'symbol';\n            },\n            inspect: function (obj, depth, output, inspect) {\n                return output\n                    .jsKeyword('Symbol')\n                    .text('(')\n                    .singleQuotedString(obj.toString().replace(/^Symbol\\(|\\)$/g, ''))\n                    .text(')');\n            }\n        });\n    }\n\n    // If Symbol support is not detected, default to passing undefined to\n    // Array.prototype.sort, which means \"natural\" (asciibetical) sort.\n    var keyComparator;\n    if (typeof Symbol === 'function') {\n        // Comparator that puts symbols last:\n        keyComparator = function (a, b) {\n            var aIsSymbol, bIsSymbol;\n            var aString = a;\n            var bString = b;\n            aIsSymbol = typeof a === 'symbol';\n            bIsSymbol = typeof b === 'symbol';\n            if (aIsSymbol) {\n                if (bIsSymbol) {\n                    aString = a.toString();\n                    bString = b.toString();\n                } else {\n                    return 1;\n                }\n            } else if (bIsSymbol) {\n                return -1;\n            }\n\n            if (aString < bString) {\n                return -1;\n            } else if (aString > bString) {\n                return 1;\n            }\n\n            return 0;\n        };\n    }\n\n    expect.addType({\n        name: 'object',\n        indent: true,\n        forceMultipleLines: false,\n        identify: function (obj) {\n            return obj && typeof obj === 'object';\n        },\n        prefix: function (output, obj) {\n            var constructor = obj.constructor;\n            var constructorName = constructor && typeof constructor === 'function' && constructor !== Object && utils.getFunctionName(constructor);\n            if (constructorName && constructorName !== 'Object') {\n                output.text(constructorName + '(');\n            }\n            return output.text('{');\n        },\n        suffix: function (output, obj) {\n            output.text('}');\n            var constructor = obj.constructor;\n            var constructorName = constructor && typeof constructor === 'function' && constructor !== Object && utils.getFunctionName(constructor);\n            if (constructorName && constructorName !== 'Object') {\n                output.text(')');\n            }\n            return output;\n        },\n        delimiter: function (output, i, length) {\n            if (i < length - 1) {\n                output.text(',');\n            }\n            return output;\n        },\n        getKeys: Object.getOwnPropertySymbols ? function (obj) {\n            var keys = Object.keys(obj);\n            var symbols = Object.getOwnPropertySymbols(obj);\n            if (symbols.length > 0) {\n                return keys.concat(symbols);\n            } else {\n                return keys;\n            }\n        } : Object.keys,\n        equal: function (a, b, equal) {\n            if (a === b) {\n                return true;\n            }\n\n            if (b.constructor !== a.constructor) {\n                return false;\n            }\n\n            var actualKeys = this.getKeys(a).filter(function (key) {\n                    return typeof a[key] !== 'undefined';\n                }),\n                expectedKeys = this.getKeys(b).filter(function (key) {\n                    return typeof b[key] !== 'undefined';\n                });\n\n            // having the same number of owned properties (keys incorporates hasOwnProperty)\n            if (actualKeys.length !== expectedKeys.length) {\n                return false;\n            }\n            //the same set of keys (although not necessarily the same order),\n            actualKeys.sort(keyComparator);\n            expectedKeys.sort(keyComparator);\n            // cheap key test\n            for (var i = 0; i < actualKeys.length; i += 1) {\n                if (actualKeys[i] !== expectedKeys[i]) {\n                    return false;\n                }\n            }\n\n            //equivalent values for every corresponding key, and\n            // possibly expensive deep test\n            for (var j = 0; j < actualKeys.length; j += 1) {\n                var key = actualKeys[j];\n                if (!equal(a[key], b[key])) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        inspect: function (obj, depth, output, inspect) {\n            var keys = this.getKeys(obj);\n            if (keys.length === 0) {\n                this.prefix(output, obj);\n                this.suffix(output, obj);\n                return output;\n            }\n            var type = this;\n            var inspectedItems = keys.map(function (key, index) {\n                var propertyDescriptor = Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(obj, key);\n                var hasGetter = propertyDescriptor && propertyDescriptor.get;\n                var hasSetter = propertyDescriptor && propertyDescriptor.set;\n                var propertyOutput = output.clone();\n                if (hasSetter && !hasGetter) {\n                    propertyOutput.text('set').sp();\n                }\n                // Inspect the setter function if there's no getter:\n                var value = (hasSetter && !hasGetter) ? hasSetter : obj[key];\n\n                var inspectedValue = inspect(value);\n                if (value && value._expectIt) {\n                    inspectedValue = output.clone().block(inspectedValue);\n                }\n                propertyOutput.property(key, inspectedValue);\n\n                propertyOutput.amend(type.delimiter(output.clone(), index, keys.length));\n\n                if (hasGetter && hasSetter) {\n                    propertyOutput.sp().jsComment('/* getter/setter */');\n                } else if (hasGetter) {\n                    propertyOutput.sp().jsComment('/* getter */');\n                }\n\n                return propertyOutput;\n            });\n\n            var maxLineLength = output.preferredWidth - (depth === Infinity ? 0 : depth) * 2 - 2;\n            var width = 0;\n            var compact = inspectedItems.length > 5 || inspectedItems.every(function (inspectedItem) {\n                if (inspectedItem.isMultiline()) {\n                    return false;\n                }\n                width += inspectedItem.size().width;\n                return width < maxLineLength;\n            });\n\n            var itemsOutput = output.clone();\n            if (compact) {\n                var currentLineLength = 0;\n                inspectedItems.forEach(function (inspectedItem, index) {\n                    var size = inspectedItem.size();\n                    currentLineLength += size.width + 1;\n                    if (index > 0) {\n                        if (size.height === 1 && currentLineLength < maxLineLength) {\n                            itemsOutput.sp();\n                        } else {\n                            itemsOutput.nl();\n                            currentLineLength = size.width;\n                        }\n\n                        if (size.height > 1) {\n                            // Make sure that we don't append more to this line\n                            currentLineLength = maxLineLength;\n                        }\n                    }\n                    itemsOutput.append(inspectedItem);\n                });\n            } else {\n                inspectedItems.forEach(function (inspectedItem, index) {\n                    if (index > 0) {\n                        itemsOutput.nl();\n                    }\n                    itemsOutput.append(inspectedItem);\n                });\n            }\n\n            var prefixOutput = this.prefix(output.clone(), obj);\n            var suffixOutput = this.suffix(output.clone(), obj);\n            output.append(prefixOutput);\n            if (this.forceMultipleLines || itemsOutput.isMultiline()) {\n                if (!prefixOutput.isEmpty()) {\n                    output.nl();\n                }\n                if (this.indent) {\n                    output.indentLines().i();\n                }\n                output.block(itemsOutput);\n                if (this.indent) {\n                    output.outdentLines();\n                }\n                if (!suffixOutput.isEmpty()) {\n                    output.nl();\n                }\n            } else {\n                output\n                    .sp(prefixOutput.isEmpty() ? 0 : 1)\n                    .append(itemsOutput)\n                    .sp(suffixOutput.isEmpty() ? 0 : 1);\n            }\n            return output.append(suffixOutput);\n        },\n        diff: function (actual, expected, output, diff, inspect, equal) {\n            if (actual.constructor !== expected.constructor) {\n                return output.text('Mismatching constructors ')\n                    .text(actual.constructor && utils.getFunctionName(actual.constructor) || actual.constructor)\n                    .text(' should be ').text(expected.constructor && utils.getFunctionName(expected.constructor) || expected.constructor);\n            }\n\n            output.inline = true;\n            var actualKeys = this.getKeys(actual);\n            var keys = utils.uniqueStringsAndSymbols(actualKeys, this.getKeys(expected));\n            var prefixOutput = this.prefix(output.clone(), actual);\n            output\n                .append(prefixOutput)\n                .nl(prefixOutput.isEmpty() ? 0 : 1);\n\n            if (this.indent) {\n                output.indentLines();\n            }\n            var type = this;\n            keys.forEach(function (key, index) {\n                output.nl(index > 0 ? 1 : 0).i().block(function () {\n                    var valueOutput;\n                    var annotation = output.clone();\n                    var conflicting = !equal(actual[key], expected[key]);\n                    var isInlineDiff = false;\n                    if (conflicting) {\n                        if (!(key in expected)) {\n                            annotation.error('should be removed');\n                            isInlineDiff = true;\n                        } else if (!(key in actual)) {\n                            this.error('// missing').sp();\n                            valueOutput = output.clone().appendInspected(expected[key]);\n                            isInlineDiff = true;\n                        } else {\n                            var keyDiff = diff(actual[key], expected[key]);\n                            if (!keyDiff || (keyDiff && !keyDiff.inline)) {\n                                annotation.shouldEqualError(expected[key]);\n                                if (keyDiff) {\n                                    annotation.nl(2).append(keyDiff);\n                                }\n                            } else {\n                                isInlineDiff = true;\n                                valueOutput = keyDiff;\n                            }\n                        }\n                    } else {\n                        isInlineDiff = true;\n                    }\n\n                    if (!valueOutput) {\n                        valueOutput = inspect(actual[key], conflicting ? Infinity : null);\n                    }\n\n                    valueOutput.amend(type.delimiter(output.clone(), index, actualKeys.length));\n                    if (!isInlineDiff) {\n                        valueOutput = output.clone().block(valueOutput);\n                    }\n                    this.property(key, valueOutput);\n                    if (!annotation.isEmpty()) {\n                        this.sp().annotationBlock(annotation);\n                    }\n                });\n            });\n\n            if (this.indent) {\n                output.outdentLines();\n            }\n            var suffixOutput = this.suffix(output.clone(), actual);\n            return output\n                .nl(suffixOutput.isEmpty() ? 0 : 1)\n                .append(suffixOutput);\n        },\n\n        similar: function (a, b) {\n            if (a === null || b === null) {\n                return false;\n            }\n\n            var typeA = typeof a;\n            var typeB = typeof b;\n\n            if (typeA !== typeB) {\n                return false;\n            }\n\n            if (typeA === 'string') {\n                return leven(a, b) < a.length / 2;\n            }\n\n            if (typeA !== 'object' || !a) {\n                return false;\n            }\n\n            if (utils.isArray(a) && utils.isArray(b)) {\n                return true;\n            }\n\n            var aKeys = this.getKeys(a);\n            var bKeys = this.getKeys(b);\n            var numberOfSimilarKeys = 0;\n            var requiredSimilarKeys = Math.round(Math.max(aKeys.length, bKeys.length) / 2);\n            return aKeys.concat(bKeys).some(function (key) {\n                if (key in a && key in b) {\n                    numberOfSimilarKeys += 1;\n                }\n                return numberOfSimilarKeys >= requiredSimilarKeys;\n            });\n        }\n    });\n\n    expect.addType({\n        name: 'type',\n        base: 'object',\n        identify: function (value) {\n            return value && value._unexpectedType;\n        },\n        inspect: function (value, depth, output) {\n            return output.text('type: ').jsKeyword(value.name);\n        }\n    });\n\n    expect.addType({\n        name: 'array-like',\n        base: 'object',\n        identify: false,\n        numericalPropertiesOnly: true,\n        getKeys: function (obj) {\n            var keys = new Array(obj.length);\n            for (var i = 0 ; i < obj.length ; i += 1) {\n                keys[i] = i;\n            }\n            if (!this.numericalPropertiesOnly) {\n                Object.keys(obj).forEach(function (key) {\n                    if (!utils.numericalRegExp.test(key)) {\n                        keys.push(key);\n                    }\n                });\n            }\n            return keys;\n        },\n        equal: function (a, b, equal) {\n            if (a === b) {\n                return true;\n            } else if (a.constructor === b.constructor && a.length === b.length) {\n                var i;\n                if (this.numericalPropertiesOnly) {\n                    for (i = 0; i < a.length; i += 1) {\n                        if (!equal(a[i], b[i])) {\n                            return false;\n                        }\n                    }\n                } else {\n                    var aKeys = this.getKeys(a);\n                    var bKeys = this.getKeys(b);\n                    if (aKeys.length !== bKeys.length) {\n                        return false;\n                    }\n                    for (i = 0; i < aKeys.length; i += 1) {\n                        if (!equal(a[aKeys[i]], b[aKeys[i]])) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            } else {\n                return false;\n            }\n        },\n        prefix: function (output) {\n            return output.text('[');\n        },\n        suffix: function (output) {\n            return output.text(']');\n        },\n        inspect: function (arr, depth, output, inspect) {\n            var prefixOutput = this.prefix(output.clone(), arr);\n            var suffixOutput = this.suffix(output.clone(), arr);\n            var keys = this.getKeys(arr);\n            if (keys.length === 0) {\n                return output.append(prefixOutput).append(suffixOutput);\n            }\n\n            if (depth === 1 && arr.length > 10) {\n                return output.append(prefixOutput).text('...').append(suffixOutput);\n            }\n\n            var inspectedItems = keys.map(function (key) {\n                var inspectedValue;\n                if (key in arr) {\n                    inspectedValue = inspect(arr[key]);\n                } else if (utils.numericalRegExp.test(key)) {\n                    // Sparse array entry\n                    inspectedValue = output.clone();\n                } else {\n                    // Not present non-numerical property returned by getKeys\n                    inspectedValue = inspect(undefined);\n                }\n                return output.clone().property(key, inspectedValue, true);\n            });\n\n            var currentDepth = defaultDepth - Math.min(defaultDepth, depth);\n            var maxLineLength = (output.preferredWidth - 20) - currentDepth * output.indentationWidth - 2;\n            var width = 0;\n            var multipleLines = this.forceMultipleLines || inspectedItems.some(function (o) {\n                if (o.isMultiline()) {\n                    return true;\n                }\n\n                var size = o.size();\n                width += size.width;\n                return width > maxLineLength;\n            });\n            var type = this;\n            inspectedItems.forEach(function (inspectedItem, index) {\n                inspectedItem.amend(type.delimiter(output.clone(), index, keys.length));\n            });\n            if (multipleLines) {\n                output.append(prefixOutput);\n                if (!prefixOutput.isEmpty()) {\n                    output.nl();\n                }\n                if (this.indent) {\n                    output.indentLines();\n                }\n                inspectedItems.forEach(function (inspectedItem, index) {\n                    output.nl(index > 0 ? 1 : 0).i().block(inspectedItem);\n                });\n\n                if (this.indent) {\n                    output.outdentLines();\n                }\n\n                if (!suffixOutput.isEmpty()) {\n                    output.nl();\n                }\n\n                return output.append(suffixOutput);\n            } else {\n                output\n                    .append(prefixOutput)\n                    .sp(prefixOutput.isEmpty() ? 0 : 1);\n                inspectedItems.forEach(function (inspectedItem, index) {\n                    output.append(inspectedItem);\n                    var lastIndex = index === inspectedItems.length - 1;\n                    if (!lastIndex) {\n                        output.sp();\n                    }\n                });\n                return output\n                    .sp(suffixOutput.isEmpty() ? 0 : 1)\n                    .append(suffixOutput);\n            }\n        },\n        diffLimit: 512,\n        diff: function (actual, expected, output, diff, inspect, equal) {\n            output.inline = true;\n\n            if (Math.max(actual.length, expected.length) > this.diffLimit) {\n                output.jsComment('Diff suppressed due to size > ' + this.diffLimit);\n                return output;\n            }\n\n            if (actual.constructor !== expected.constructor) {\n                return this.baseType.diff(actual, expected, output);\n            }\n\n            var prefixOutput = this.prefix(output.clone(), actual);\n            output\n                .append(prefixOutput)\n                .nl(prefixOutput.isEmpty() ? 0 : 1);\n\n            if (this.indent) {\n                output.indentLines();\n            }\n\n            var type = this;\n\n            var changes = arrayChanges(actual, expected, equal, function (a, b) {\n                return type.similar(a, b);\n            }, !type.numericalPropertiesOnly && utils.uniqueNonNumericalStringsAndSymbols(this.getKeys(actual), this.getKeys(expected)));\n            var indexOfLastNonInsert = changes.reduce(function (previousValue, diffItem, index) {\n                return (diffItem.type === 'insert') ? previousValue : index;\n            }, -1);\n            var packing = utils.packArrows(changes); // NOTE: Will have side effects in changes if the packing results in too many arrow lanes\n            output.arrowsAlongsideChangeOutputs(packing, changes.map(function (diffItem, index) {\n                var delimiterOutput = type.delimiter(output.clone(), index, indexOfLastNonInsert + 1);\n                if (diffItem.type === 'moveTarget') {\n                    return output.clone();\n                } else {\n                    return output.clone().block(function () {\n                        if (diffItem.type === 'moveSource') {\n                            this.property(diffItem.actualIndex, inspect(diffItem.value), true)\n                                .amend(delimiterOutput.sp()).error('// should be moved');\n                        } else if (diffItem.type === 'insert') {\n                            this.annotationBlock(function () {\n                                this.error('missing ').block(function () {\n                                    var index = typeof diffItem.actualIndex !== 'undefined' ? diffItem.actualIndex : diffItem.expectedIndex;\n                                    this.property(index, inspect(diffItem.value), true);\n                                });\n                            });\n                        } else if (diffItem.type === 'remove') {\n                            this.block(function () {\n                                this.property(diffItem.actualIndex, inspect(diffItem.value), true)\n                                    .amend(delimiterOutput.sp()).error('// should be removed');\n                            });\n                        } else if (diffItem.type === 'equal') {\n                            this.block(function () {\n                                this.property(diffItem.actualIndex, inspect(diffItem.value), true)\n                                    .amend(delimiterOutput);\n                            });\n                        } else {\n                            this.block(function () {\n                                var valueDiff = diff(diffItem.value, diffItem.expected);\n                                this.property(diffItem.actualIndex, output.clone().block(function () {\n                                    if (valueDiff && valueDiff.inline) {\n                                        this.append(valueDiff.amend(delimiterOutput));\n                                    } else if (valueDiff) {\n                                        this.append(inspect(diffItem.value).amend(delimiterOutput.sp())).annotationBlock(function () {\n                                            this.shouldEqualError(diffItem.expected, inspect).nl(2).append(valueDiff);\n                                        });\n                                    } else {\n                                        this.append(inspect(diffItem.value).amend(delimiterOutput.sp())).annotationBlock(function () {\n                                            this.shouldEqualError(diffItem.expected, inspect);\n                                        });\n                                    }\n                                }), true);\n                            });\n                        }\n                    });\n                }\n            }));\n\n            if (this.indent) {\n                output.outdentLines();\n            }\n\n            var suffixOutput = this.suffix(output.clone(), actual);\n            return output\n                .nl(suffixOutput.isEmpty() ? 0 : 1)\n                .append(suffixOutput);\n        }\n    });\n\n    expect.addType({\n        name: 'array',\n        base: 'array-like',\n        numericalPropertiesOnly: false,\n        identify: function (arr) {\n            return utils.isArray(arr);\n        }\n    });\n\n    expect.addType({\n        name: 'arguments',\n        base: 'array-like',\n        prefix: function (output) {\n            return output.text('arguments(', 'cyan');\n        },\n        suffix: function (output) {\n            return output.text(')', 'cyan');\n        },\n        identify: function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Arguments]';\n        }\n    });\n\n    var errorMethodBlacklist = ['message', 'name', 'description', 'line', 'column', 'sourceId', 'sourceURL', 'stack', 'stackArray'].reduce(function (result, prop) {\n        result[prop] = true;\n        return result;\n    }, {});\n\n    expect.addType({\n        base: 'object',\n        name: 'Error',\n        identify: function (value) {\n            return utils.isError(value);\n        },\n        getKeys: function (value) {\n            var keys = this.baseType.getKeys(value).filter(function (key) {\n                return !errorMethodBlacklist[key];\n            });\n            keys.unshift('message');\n            return keys;\n        },\n        unwrap: function (value) {\n            return this.getKeys(value).reduce(function (result, key) {\n                result[key] = value[key];\n                return result;\n            }, {});\n        },\n        equal: function (a, b, equal) {\n            return a === b ||\n                (equal(a.message, b.message) && this.baseType.equal(a, b));\n        },\n        inspect: function (value, depth, output, inspect) {\n            output.errorName(value).text('(');\n            var keys = this.getKeys(value);\n            if (keys.length === 1 && keys[0] === 'message') {\n                if (value.message !== '') {\n                    output.append(inspect(value.message));\n                }\n            } else {\n                output.append(inspect(this.unwrap(value), depth));\n            }\n            return output.text(')');\n        },\n        diff: function (actual, expected, output, diff) {\n            if (actual.constructor !== expected.constructor) {\n                return output.text('Mismatching constructors ')\n                    .errorName(actual)\n                    .text(' should be ').errorName(expected);\n            }\n\n            output = diff(this.unwrap(actual), this.unwrap(expected));\n            if (output) {\n                output = output.clone().errorName(actual).text('(').append(output).text(')');\n                output.inline = false;\n            }\n            return output;\n        }\n    });\n\n    var unexpectedErrorMethodBlacklist = ['output', '_isUnexpected', 'htmlMessage', '_hasSerializedErrorMessage', 'expect', 'assertion', 'originalError'].reduce(function (result, prop) {\n        result[prop] = true;\n        return result;\n    }, {});\n    expect.addType({\n        base: 'Error',\n        name: 'UnexpectedError',\n        identify: function (value) {\n            return value && typeof value === 'object' &&\n                value._isUnexpected && this.baseType.identify(value);\n        },\n        getKeys: function (value) {\n            return this.baseType.getKeys(value).filter(function (key) {\n                return !unexpectedErrorMethodBlacklist[key];\n            });\n        },\n        inspect: function (value, depth, output) {\n            output.jsFunctionName(this.name).text('(');\n            var errorMessage = value.getErrorMessage(output);\n            if (errorMessage.isMultiline()) {\n                output.nl().indentLines().i().block(errorMessage).nl();\n            } else {\n                output.append(errorMessage);\n            }\n            return output.text(')');\n        }\n    });\n\n    expect.addType({\n        name: 'date',\n        identify: function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Date]';\n        },\n        equal: function (a, b) {\n            return a.getTime() === b.getTime();\n        },\n        inspect: function (date, depth, output, inspect) {\n            // TODO: Inspect \"new\" as an operator and Date as a built-in once we have the styles defined:\n            var dateStr = date.toUTCString().replace(/UTC/, 'GMT');\n            var milliseconds = date.getUTCMilliseconds();\n            if (milliseconds > 0) {\n                var millisecondsStr = String(milliseconds);\n                while (millisecondsStr.length < 3) {\n                    millisecondsStr = '0' + millisecondsStr;\n                }\n                dateStr = dateStr.replace(' GMT', '.' + millisecondsStr + ' GMT');\n            }\n\n            return output.jsKeyword('new').sp().text('Date(').append(inspect(dateStr).text(')'));\n        }\n    });\n\n    expect.addType({\n        base: 'any',\n        name: 'function',\n        identify: function (f) {\n            return typeof f === 'function';\n        },\n        getKeys: Object.keys,\n        equal: function (a, b) {\n            return a === b;\n        },\n        inspect: function (f, depth, output, inspect) {\n            var source = f.toString().replace(/\\r\\n?|\\n\\r?/g, '\\n');\n            var name = utils.getFunctionName(f) || '';\n            var preamble;\n            var body;\n            var bodyIndent;\n            var matchSource = source.match(/^\\s*((?:async )?\\s*(?:\\S+\\s*=>|\\([^\\)]*\\)\\s*=>|function \\w*?\\s*\\([^\\)]*\\)))([\\s\\S]*)$/);\n            if (matchSource) {\n                preamble = matchSource[1];\n                if (preamble === 'function ()' && name) {\n                    // fn.bind() doesn't seem to include the name in the .toString() output:\n                    preamble = 'function ' + name + '()';\n                }\n                body = matchSource[2];\n                var matchBodyAndIndent = body.match(/^(\\s*\\{)([\\s\\S]*?)([ ]*)\\}\\s*$/);\n                var openingBrace;\n                var closingBrace = '}';\n                if (matchBodyAndIndent) {\n                    openingBrace = matchBodyAndIndent[1];\n                    body = matchBodyAndIndent[2];\n                    bodyIndent = matchBodyAndIndent[3] || '';\n                    if (bodyIndent.length === 1) {\n                        closingBrace = ' }';\n                    }\n                }\n\n                // Remove leading indentation unless the function is a one-liner or it uses multiline string literals\n                if (/\\n/.test(body) && !/\\\\\\n/.test(body)) {\n                    body = body.replace(new RegExp('^ {' + bodyIndent.length + '}', 'mg'), '');\n                    var indent = detectIndent(body);\n                    body = body.replace(new RegExp('^(?:' + indent.indent + ')+', 'mg'), function ($0) {\n                        return utils.leftPad('', ($0.length / indent.amount) * output.indentationWidth, ' ');\n                    });\n                }\n                if (!name || name === 'anonymous') {\n                    name = '';\n                }\n                if (/^\\s*\\[native code\\]\\s*$/.test(body)) {\n                    body = ' /* native code */ ';\n                    closingBrace = '}';\n                } else if (/^\\s*$/.test(body)) {\n                    body = '';\n                } else if (/^\\s*[^\\r\\n]{1,30}\\s*$/.test(body) && body.indexOf('//') === -1) {\n                    body = ' ' + body.trim() + ' ';\n                    closingBrace = '}';\n                } else {\n                    body = body.replace(/^((?:.*\\n){3}( *).*\\n)[\\s\\S]*?\\n[\\s\\S]*?\\n((?:.*\\n){3})$/, '$1$2// ... lines removed ...\\n$3');\n                }\n                if (matchBodyAndIndent) {\n                    body = openingBrace + body + closingBrace;\n                } else {\n                    // Strip trailing space from arrow function body\n                    body = body.replace(/[ ]*$/, '');\n                }\n            } else {\n                preamble = 'function ' + name + '( /*...*/ ) ';\n                body = '{ /*...*/ }';\n            }\n            return output.code(preamble + body, 'javascript');\n        }\n    });\n\n    expect.addType({\n        base: 'function',\n        name: 'expect.it',\n        identify: function (f) {\n            return typeof f === 'function' && f._expectIt;\n        },\n        inspect: function (f, depth, output, inspect) {\n            output.text('expect.it(');\n            var orBranch = false;\n            f._expectations.forEach(function (expectation, index) {\n                if (expectation === f._OR) {\n                    orBranch = true;\n                    return;\n                }\n\n                if (orBranch) {\n                    output.text(')\\n      .or(');\n                } else if (0 < index) {\n                    output.text(')\\n        .and(');\n                }\n\n                var args = Array.prototype.slice.call(expectation);\n                args.forEach(function (arg, i) {\n                    if (0 < i) {\n                        output.text(', ');\n                    }\n                    output.append(inspect(arg));\n                });\n                orBranch = false;\n            });\n\n            return output.amend(')');\n        }\n    });\n\n    expect.addType({\n        name: 'Promise',\n        base: 'object',\n        identify: function (obj) {\n            return obj && this.baseType.identify(obj) && typeof obj.then === 'function';\n        },\n        inspect: function (promise, depth, output, inspect) {\n            output.jsFunctionName('Promise');\n            if (promise.isPending && promise.isPending()) {\n                output.sp().yellow('(pending)');\n            } else if (promise.isFulfilled && promise.isFulfilled()) {\n                output.sp().green('(fulfilled)');\n                if (promise.value) {\n                    var value = promise.value();\n                    if (typeof value !== 'undefined') {\n                        output.sp().text('=>').sp().append(inspect(value));\n                    }\n                }\n            } else if (promise.isRejected && promise.isRejected()) {\n                output.sp().red('(rejected)');\n                var reason = promise.reason();\n                if (typeof reason !== 'undefined') {\n                    output.sp().text('=>').sp().append(inspect(promise.reason()));\n                }\n            }\n            return output;\n        }\n    });\n\n    expect.addType({\n        name: 'regexp',\n        base: 'object',\n        identify: isRegExp,\n        equal: function (a, b) {\n            return a === b || (\n                a.source === b.source &&\n                    a.global === b.global &&\n                    a.ignoreCase === b.ignoreCase &&\n                    a.multiline === b.multiline\n            );\n        },\n        inspect: function (regExp, depth, output) {\n            return output.jsRegexp(regExp);\n        },\n        diff: function (actual, expected, output, diff, inspect) {\n            output.inline = false;\n            return output.stringDiff(String(actual), String(expected), {type: 'Chars', markUpSpecialCharacters: true});\n        }\n    });\n\n    expect.addType({\n        name: 'binaryArray',\n        base: 'array-like',\n        digitWidth: 2,\n        hexDumpWidth: 16,\n        identify: false,\n        prefix: function (output) {\n            return output.code(this.name + '([', 'javascript');\n        },\n        suffix: function (output) {\n            return output.code('])', 'javascript');\n        },\n        equal: function (a, b) {\n            if (a === b) {\n                return true;\n            }\n\n            if (a.length !== b.length) { return false; }\n\n            for (var i = 0; i < a.length; i += 1) {\n                if (a[i] !== b[i]) { return false; }\n            }\n\n            return true;\n        },\n        hexDump: function (obj, maxLength) {\n            var hexDump = '';\n            if (typeof maxLength !== 'number' || maxLength === 0) {\n                maxLength = obj.length;\n            }\n            for (var i = 0 ; i < maxLength ; i += this.hexDumpWidth) {\n                if (hexDump.length > 0) {\n                    hexDump += '\\n';\n                }\n                var hexChars = '',\n                    asciiChars = ' │';\n\n                for (var j = 0 ; j < this.hexDumpWidth ; j += 1) {\n                    if (i + j < maxLength) {\n                        var octet = obj[i + j];\n                        hexChars += leftPad(octet.toString(16).toUpperCase(), this.digitWidth, '0') + ' ';\n                        asciiChars += String.fromCharCode(octet).replace(/\\n/g, '␊').replace(/\\r/g, '␍');\n                    } else if (this.digitWidth === 2) {\n                        hexChars += '   ';\n                    }\n                }\n\n                if (this.digitWidth === 2) {\n                    hexDump += hexChars + asciiChars + '│';\n                } else {\n                    hexDump += hexChars.replace(/\\s+$/, '');\n                }\n            }\n            return hexDump;\n        },\n        inspect: function (obj, depth, output) {\n            this.prefix(output, obj);\n            var codeStr = '';\n            for (var i = 0 ; i < Math.min(this.hexDumpWidth, obj.length) ; i += 1) {\n                if (i > 0) {\n                    codeStr += ', ';\n                }\n                var octet = obj[i];\n                codeStr += '0x' + leftPad(octet.toString(16).toUpperCase(), this.digitWidth, '0');\n            }\n            if (obj.length > this.hexDumpWidth) {\n                codeStr += ' /* ' + (obj.length - this.hexDumpWidth) + ' more */ ';\n            }\n            output.code(codeStr, 'javascript');\n            this.suffix(output, obj);\n            return output;\n        },\n        diffLimit: 512,\n        diff: function (actual, expected, output, diff, inspect) {\n            output.inline = false;\n            if (Math.max(actual.length, expected.length) > this.diffLimit) {\n                output.jsComment('Diff suppressed due to size > ' + this.diffLimit);\n            } else {\n                output.stringDiff(this.hexDump(actual), this.hexDump(expected), {type: 'Chars', markUpSpecialCharacters: false})\n                    .replaceText(/[\\x00-\\x1f\\x7f-\\xff␊␍]/g, '.').replaceText(/[│ ]/g, function (styles, content) {\n                        this.text(content);\n                    });\n            }\n            return output;\n        }\n    });\n\n    [8, 16, 32].forEach(function (numBits) {\n        ['Int', 'Uint'].forEach(function (intOrUint) {\n            var constructorName = intOrUint + numBits + 'Array',\n                Constructor = global[constructorName];\n            if (typeof Constructor !== 'undefined') {\n                expect.addType({\n                    name: constructorName,\n                    base: 'binaryArray',\n                    hexDumpWidth: 128 / numBits,\n                    digitWidth: numBits / 4,\n                    identify: function (obj) {\n                        return obj instanceof Constructor;\n                    }\n                });\n            }\n        }, this);\n    }, this);\n\n    if (typeof Buffer !== 'undefined') {\n        expect.addType({\n            name: 'Buffer',\n            base: 'binaryArray',\n            identify: Buffer.isBuffer\n        });\n    }\n\n    expect.addType({\n        name: 'string',\n        identify: function (value) {\n            return typeof value === 'string';\n        },\n        inspect: function (value, depth, output) {\n            return output.singleQuotedString(value);\n        },\n        diffLimit: 4096,\n        diff: function (actual, expected, output, diff, inspect) {\n            if (Math.max(actual.length, expected.length) > this.diffLimit) {\n                output.jsComment('Diff suppressed due to size > ' + this.diffLimit);\n                return output;\n            }\n            output.stringDiff(actual, expected, {type: 'WordsWithSpace', markUpSpecialCharacters: true});\n            output.inline = false;\n            return output;\n        }\n    });\n\n    expect.addType({\n        name: 'number',\n        identify: function (value) {\n            return typeof value === 'number' && !isNaN(value);\n        },\n        inspect: function (value, depth, output) {\n            if (value === 0 && 1 / value === -Infinity) {\n                value = '-0';\n            } else {\n                value = String(value);\n            }\n            return output.jsNumber(String(value));\n        }\n    });\n\n    expect.addType({\n        name: 'NaN',\n        identify: function (value) {\n            return typeof value === 'number' && isNaN(value);\n        },\n        inspect: function (value, depth, output) {\n            return output.jsPrimitive(value);\n        }\n    });\n\n    expect.addType({\n        name: 'boolean',\n        identify: function (value) {\n            return typeof value === 'boolean';\n        },\n        inspect: function (value, depth, output) {\n            return output.jsPrimitive(value);\n        }\n    });\n\n    expect.addType({\n        name: 'undefined',\n        identify: function (value) {\n            return typeof value === 'undefined';\n        },\n        inspect: function (value, depth, output) {\n            return output.jsPrimitive(value);\n        }\n    });\n\n    expect.addType({\n        name: 'null',\n        identify: function (value) {\n            return value === null;\n        },\n        inspect: function (value, depth, output) {\n            return output.jsPrimitive(value);\n        }\n    });\n\n    expect.addType({\n        name: 'assertion',\n        identify: function (value) {\n            return value instanceof AssertionString;\n        }\n    });\n};\n","/*global setTimeout*/\nvar utils = require('./utils');\nvar arrayChanges = require('array-changes');\nvar arrayChangesAsync = require('array-changes-async');\nvar throwIfNonUnexpectedError = require('./throwIfNonUnexpectedError');\nvar objectIs = utils.objectIs;\nvar isRegExp = utils.isRegExp;\nvar extend = utils.extend;\n\nmodule.exports = function (expect) {\n    expect.addAssertion('<any> [not] to be (ok|truthy)', function (expect, subject) {\n        var not = !!expect.flags.not;\n        var condition = !!subject;\n        if (condition === not) {\n            expect.fail();\n        }\n    });\n\n    expect.addAssertion('<any> [not] to be (ok|truthy) <string>', function (expect, subject, message) {\n        var not = !!expect.flags.not;\n        var condition = !!subject;\n        if (condition === not) {\n            expect.fail({\n                errorMode: 'bubble',\n                message: message\n            });\n        }\n    });\n\n    expect.addAssertion('<any> [not] to be <any>', function (expect, subject, value) {\n        expect(objectIs(subject, value), '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be <string>', function (expect, subject, value) {\n        expect(subject, '[not] to equal', value);\n    });\n\n    expect.addAssertion('<boolean> [not] to be true', function (expect, subject) {\n        expect(subject, '[not] to be', true);\n    });\n\n    expect.addAssertion('<boolean> [not] to be false', function (expect, subject) {\n        expect(subject, '[not] to be', false);\n    });\n\n    expect.addAssertion('<any> [not] to be falsy', function (expect, subject) {\n        expect(subject, '[!not] to be truthy');\n    });\n\n    expect.addAssertion('<any> [not] to be falsy <string>', function (expect, subject, message) {\n        var not = !!expect.flags.not;\n        var condition = !!subject;\n        if (condition !== not) {\n            expect.fail({\n                errorMode: 'bubble',\n                message: message\n            });\n        }\n    });\n\n    expect.addAssertion('<any> [not] to be null', function (expect, subject) {\n        expect(subject, '[not] to be', null);\n    });\n\n    expect.addAssertion('<any> [not] to be undefined', function (expect, subject) {\n        expect(typeof subject === 'undefined', '[not] to be truthy');\n    });\n\n    expect.addAssertion('<any> to be defined', function (expect, subject) {\n        expect(subject, 'not to be undefined');\n    });\n\n    expect.addAssertion('<number|NaN> [not] to be NaN', function (expect, subject) {\n        expect(isNaN(subject), '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be close to <number> <number?>', function (expect, subject, value, epsilon) {\n        expect.errorMode = 'bubble';\n        if (typeof epsilon !== 'number') {\n            epsilon = 1e-9;\n        }\n\n        expect.withError(function () {\n            expect(Math.abs(subject - value), '[not] to be less than or equal to', epsilon);\n        }, function (e) {\n            expect.fail(function (output) {\n                output.error('expected ')\n                    .appendInspected(subject).sp()\n                    .error(expect.testDescription).sp()\n                    .appendInspected(value).sp()\n                    .text('(epsilon: ')\n                    .jsNumber(epsilon.toExponential())\n                    .text(')');\n            });\n        });\n    });\n\n    expect.addAssertion('<any> [not] to be (a|an) <type>', function (expect, subject, type) {\n        expect.argsOutput[0] = function (output) {\n            output.text(type.name);\n        };\n        expect(type.identify(subject), '[not] to be true');\n    });\n\n    expect.addAssertion('<any> [not] to be (a|an) <string>', function (expect, subject, typeName) {\n        typeName = /^reg(?:exp?|ular expression)$/.test(typeName) ? 'regexp' : typeName;\n        expect.argsOutput[0] = function (output) {\n            output.jsString(typeName);\n        };\n        if (!expect.getType(typeName)) {\n            expect.errorMode = 'nested';\n            expect.fail(function (output) {\n                output.error('Unknown type:').sp().jsString(typeName);\n            });\n        }\n        expect(expect.subjectType.is(typeName), '[not] to be truthy');\n    });\n\n    expect.addAssertion('<any> [not] to be (a|an) <function>', function (expect, subject, Constructor) {\n        var className = utils.getFunctionName(Constructor);\n        if (className) {\n            expect.argsOutput[0] = function (output) {\n                output.text(className);\n            };\n        }\n        expect(subject instanceof Constructor, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<any> [not] to be one of <array>', function (expect, subject, superset) {\n        var found = false;\n\n        for (var i = 0; i < superset.length; i += 1) {\n            found = found || objectIs(subject, superset[i]);\n        }\n\n        if (found === expect.flags.not) { expect.fail(); }\n    });\n\n    // Alias for common '[not] to be (a|an)' assertions\n    expect.addAssertion('<any> [not] to be an (object|array)', function (expect, subject) {\n        expect(subject, '[not] to be an', expect.alternations[0]);\n    });\n\n    expect.addAssertion('<any> [not] to be a (boolean|number|string|function|regexp|regex|regular expression|date)', function (expect, subject) {\n        expect(subject, '[not] to be a', expect.alternations[0]);\n    });\n\n    expect.addAssertion('<string> to be (the empty|an empty|a non-empty) string', function (expect, subject) {\n        expect(subject, expect.alternations[0] === 'a non-empty' ? 'not to be empty' : 'to be empty');\n    });\n\n    expect.addAssertion('<array-like> to be (the empty|an empty|a non-empty) array', function (expect, subject) {\n        expect(subject, expect.alternations[0] === 'a non-empty' ? 'not to be empty' : 'to be empty');\n    });\n\n    expect.addAssertion('<string> to match <regexp>', function (expect, subject, regexp) {\n        return expect.withError(function () {\n            var captures = subject.match(regexp);\n            expect(captures, 'to be truthy');\n            return captures;\n        }, function (e) {\n            e.label = 'should match';\n            expect.fail(e);\n        });\n    });\n\n    expect.addAssertion('<string> not to match <regexp>', function (expect, subject, regexp) {\n        return expect.withError(function () {\n            expect(regexp.test(subject), 'to be false');\n        }, function (e) {\n            expect.fail({\n                label: 'should not match',\n                diff: function (output) {\n                    output.inline = false;\n                    var lastIndex = 0;\n                    function flushUntilIndex(i) {\n                        if (i > lastIndex) {\n                            output.text(subject.substring(lastIndex, i));\n                            lastIndex = i;\n                        }\n                    }\n                    subject.replace(new RegExp(regexp.source, 'g'), function ($0, index) {\n                        flushUntilIndex(index);\n                        lastIndex += $0.length;\n                        output.removedHighlight($0);\n                    });\n                    flushUntilIndex(subject.length);\n                    return output;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<object|function> [not] to have own property <string>', function (expect, subject, key) {\n        expect(subject.hasOwnProperty(key), '[not] to be truthy');\n        return subject[key];\n    });\n\n    expect.addAssertion('<object|function> [not] to have (enumerable|configurable|writable) property <string>', function (expect, subject, key) {\n        var descriptor = expect.alternations[0];\n        expect(Object.getOwnPropertyDescriptor(subject, key)[descriptor], '[not] to be truthy');\n        return subject[key];\n    });\n\n    expect.addAssertion('<object|function> [not] to have property <string>', function (expect, subject, key) {\n        expect(subject[key], '[!not] to be undefined');\n        return subject[key];\n    });\n\n    expect.addAssertion('<object|function> to have [own] property <string> <any>', function (expect, subject, key, expectedPropertyValue) {\n        return expect(subject, 'to have [own] property', key).then(function (actualPropertyValue) {\n            expect.argsOutput = function () {\n                this.appendInspected(key).sp().error('with a value of').sp().appendInspected(expectedPropertyValue);\n            };\n            expect(actualPropertyValue, 'to equal', expectedPropertyValue);\n            return actualPropertyValue;\n        });\n    });\n\n    expect.addAssertion('<object|function> [not] to have [own] properties <array>', function (expect, subject, properties) {\n        properties.forEach(function (property) {\n            expect(subject, '[not] to have [own] property', property);\n        });\n    });\n\n    expect.addAssertion('<object|function> to have [own] properties <object>', function (expect, subject, properties) {\n        expect.withError(function () {\n            Object.keys(properties).forEach(function (property) {\n                var value = properties[property];\n                if (typeof value === 'undefined') {\n                    expect(subject, 'not to have [own] property', property);\n                } else {\n                    expect(subject, 'to have [own] property', property, value);\n                }\n            });\n        }, function (e) {\n            expect.fail({\n                diff: function (output, diff) {\n                    output.inline = false;\n                    var expected = extend({}, properties);\n                    var actual = {};\n                    var propertyNames = expect.findTypeOf(subject).getKeys(subject);\n                    // Might put duplicates into propertyNames, but that does not matter:\n                    for (var propertyName in subject) {\n                        if (!subject.hasOwnProperty(propertyName)) {\n                            propertyNames.push(propertyName);\n                        }\n                    }\n                    propertyNames.forEach(function (propertyName) {\n                        if ((!expect.flags.own || subject.hasOwnProperty(propertyName)) && !(propertyName in properties)) {\n                            expected[propertyName] = subject[propertyName];\n                        }\n                        if ((!expect.flags.own || subject.hasOwnProperty(propertyName)) && !(propertyName in actual)) {\n                            actual[propertyName] = subject[propertyName];\n                        }\n                    });\n                    return utils.wrapConstructorNameAroundOutput(diff(actual, expected), subject);\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<string|array-like> [not] to have length <number>', function (expect, subject, length) {\n        if (!expect.flags.not) {\n            expect.errorMode = 'nested';\n        }\n        expect(subject.length, '[not] to be', length);\n    });\n\n    expect.addAssertion('<string|array-like> [not] to be empty', function (expect, subject) {\n        expect(subject, '[not] to have length', 0);\n    });\n\n    expect.addAssertion('<string|array-like|object> to be non-empty', function (expect, subject) {\n        expect(subject, 'not to be empty');\n    });\n\n    expect.addAssertion('<object> to [not] [only] have keys <array>', function (expect, subject, keys) {\n        var keysInSubject = {};\n        var subjectKeys = expect.findTypeOf(subject).getKeys(subject);\n        subjectKeys.forEach(function (key) {\n            keysInSubject[key] = true;\n        });\n\n        if (expect.flags.not && keys.length === 0) {\n            return;\n        }\n\n        var hasKeys = keys.every(function (key) {\n            return keysInSubject[key];\n        });\n\n        if (expect.flags.only) {\n            expect(hasKeys, 'to be truthy');\n            expect.withError(function () {\n                expect(subjectKeys.length === keys.length, '[not] to be truthy');\n            }, function (err) {\n                expect.fail({\n                    diff: !expect.flags.not && function (output, diff, inspect, equal) {\n                        output.inline = true;\n                        var keyInValue = {};\n                        keys.forEach(function (key) {\n                            keyInValue[key] = true;\n                        });\n                        var subjectType = expect.findTypeOf(subject);\n                        var subjectIsArrayLike = subjectType.is('array-like');\n\n                        subjectType.prefix(output, subject);\n                        output.nl().indentLines();\n\n                        subjectKeys.forEach(function (key, index) {\n                            output.i().block(function () {\n                                this.property(key, inspect(subject[key]), subjectIsArrayLike);\n                                subjectType.delimiter(this, index, subjectKeys.length);\n                                if (!keyInValue[key]) {\n                                    this.sp().annotationBlock(function () {\n                                        this.error('should be removed');\n                                    });\n                                }\n                            }).nl();\n                        });\n\n                        output.outdentLines();\n                        subjectType.suffix(output, subject);\n\n                        return output;\n                    }\n                });\n            });\n        } else {\n            expect(hasKeys, '[not] to be truthy');\n        }\n    });\n\n    expect.addAssertion('<object> [not] to be empty', function (expect, subject) {\n        if (expect.flags.not && !expect.findTypeOf(subject).getKeys(subject).length) {\n            return expect.fail();\n        }\n        expect(subject, 'to [not] only have keys', []);\n    });\n\n    expect.addAssertion('<object> not to have keys <array>', function (expect, subject, keys) {\n        expect(subject, 'to not have keys', keys);\n    });\n\n    expect.addAssertion('<object> not to have key <string>', function (expect, subject, value) {\n        expect(subject, 'to not have keys', [ value ]);\n    });\n\n    expect.addAssertion('<object> not to have keys <string+>', function (expect, subject, value) {\n        expect(subject, 'to not have keys', Array.prototype.slice.call(arguments, 2));\n    });\n\n    expect.addAssertion('<object> to [not] [only] have key <string>', function (expect, subject, value) {\n        expect(subject, 'to [not] [only] have keys', [ value ]);\n    });\n\n    expect.addAssertion('<object> to [not] [only] have keys <string+>', function (expect, subject) {\n        expect(subject, 'to [not] [only] have keys', Array.prototype.slice.call(arguments, 2));\n    });\n\n    expect.addAssertion('<string> [not] to contain <string+>', function (expect, subject) {\n        var args = Array.prototype.slice.call(arguments, 2);\n        args.forEach(function (arg) {\n            if (arg === '') {\n                throw new Error(\"The '\" + expect.testDescription + \"' assertion does not support the empty string\");\n            }\n        });\n        expect.withError(function () {\n            args.forEach(function (arg) {\n                expect(subject.indexOf(arg) !== -1, '[not] to be truthy');\n            });\n        }, function (e) {\n            expect.fail({\n                diff: function (output) {\n                    output.inline = false;\n                    var lastIndex = 0;\n                    function flushUntilIndex(i) {\n                        if (i > lastIndex) {\n                            output.text(subject.substring(lastIndex, i));\n                            lastIndex = i;\n                        }\n                    }\n                    if (expect.flags.not) {\n                        subject.replace(new RegExp(args.map(function (arg) {\n                            return utils.escapeRegExpMetaChars(arg);\n                        }).join('|'), 'g'), function ($0, index) {\n                            flushUntilIndex(index);\n                            lastIndex += $0.length;\n                            output.removedHighlight($0);\n                        });\n                        flushUntilIndex(subject.length);\n                    } else {\n                        var ranges = [];\n                        args.forEach(function (arg) {\n                            var needle = arg;\n                            var partial = false;\n                            while (needle.length > 1) {\n                                var found = false;\n                                lastIndex = -1;\n                                var index;\n                                do {\n                                    index = subject.indexOf(needle, lastIndex + 1);\n                                    if (index !== -1) {\n                                        found = true;\n                                        ranges.push({\n                                            startIndex: index,\n                                            endIndex: index + needle.length,\n                                            partial: partial\n                                        });\n                                    }\n                                    lastIndex = index;\n                                } while (lastIndex !== -1);\n                                if (found) {\n                                    break;\n                                }\n                                needle = arg.substr(0, needle.length - 1);\n                                partial = true;\n                            }\n                        });\n                        lastIndex = 0;\n                        ranges.sort(function (a, b) {\n                            return a.startIndex - b.startIndex;\n                        }).forEach(function (range) {\n                            flushUntilIndex(range.startIndex);\n                            var firstUncoveredIndex = Math.max(range.startIndex, lastIndex);\n                            if (range.endIndex > firstUncoveredIndex) {\n                                if (range.partial) {\n                                    output.partialMatch(subject.substring(firstUncoveredIndex, range.endIndex));\n                                } else {\n                                    output.match(subject.substring(firstUncoveredIndex, range.endIndex));\n                                }\n                                lastIndex = range.endIndex;\n                            }\n                        });\n                        flushUntilIndex(subject.length);\n                    }\n                    return output;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<array-like> [not] to contain <any+>', function (expect, subject) {\n        var args = Array.prototype.slice.call(arguments, 2);\n        expect.withError(function () {\n            args.forEach(function (arg) {\n                expect(subject && Array.prototype.some.call(subject, function (item) {\n                    return expect.equal(item, arg);\n                }), '[not] to be truthy');\n            });\n        }, function (e) {\n            expect.fail({\n                diff: expect.flags.not && function (output, diff, inspect, equal) {\n                    return diff(subject, Array.prototype.filter.call(subject, function (item) {\n                        return !args.some(function (arg) {\n                            return equal(item, arg);\n                        });\n                    }));\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<string> [not] to begin with <string>', function (expect, subject, value) {\n        if (value === '') {\n            throw new Error(\"The '\" + expect.testDescription + \"' assertion does not support a prefix of the empty string\");\n        }\n        expect.withError(function () {\n            expect(subject.substr(0, value.length), '[not] to equal', value);\n        }, function (err) {\n            expect.fail({\n                diff: function (output) {\n                    output.inline = false;\n                    if (expect.flags.not) {\n                        output.removedHighlight(value).text(subject.substr(value.length));\n                    } else {\n                        var i = 0;\n                        while (subject[i] === value[i]) {\n                            i += 1;\n                        }\n                        if (i === 0) {\n                            // No common prefix, omit diff\n                            return null;\n                        } else {\n                            output\n                                .partialMatch(subject.substr(0, i))\n                                .text(subject.substr(i));\n                        }\n                    }\n                    return output;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<string> [not] to end with <string>', function (expect, subject, value) {\n        if (value === '') {\n            throw new Error(\"The '\" + expect.testDescription + \"' assertion does not support a suffix of the empty string\");\n        }\n        expect.withError(function () {\n            expect(subject.substr(-value.length), '[not] to equal', value);\n        }, function (err) {\n            expect.fail({\n                diff: function (output) {\n                    output.inline = false;\n                    if (expect.flags.not) {\n                        output.text(subject.substr(0, subject.length - value.length)).removedHighlight(value);\n                    } else {\n                        var i = 0;\n                        while (subject[subject.length - 1 - i] === value[value.length - 1 - i]) {\n                            i += 1;\n                        }\n                        if (i === 0) {\n                            // No common suffix, omit diff\n                            return null;\n                        }\n                        output\n                            .text(subject.substr(0, subject.length - i))\n                            .partialMatch(subject.substr(subject.length - i, subject.length));\n                    }\n                    return output;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<number> [not] to be finite', function (expect, subject) {\n        expect(isFinite(subject), '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be infinite', function (expect, subject) {\n        expect(!isNaN(subject) && !isFinite(subject), '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be within <number> <number>', function (expect, subject, start, finish) {\n        expect.argsOutput = function (output) {\n            output.appendInspected(start).text('..').appendInspected(finish);\n        };\n        expect(subject >= start && subject <= finish, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be within <string> <string>', function (expect, subject, start, finish) {\n        expect.argsOutput = function (output) {\n            output.appendInspected(start).text('..').appendInspected(finish);\n        };\n        expect(subject >= start && subject <= finish, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be (less than|below) <number>', function (expect, subject, value) {\n        expect(subject < value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be (less than|below) <string>', function (expect, subject, value) {\n        expect(subject < value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be less than or equal to <number>', function (expect, subject, value) {\n        expect(subject <= value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be less than or equal to <string>', function (expect, subject, value) {\n        expect(subject <= value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be (greater than|above) <number>', function (expect, subject, value) {\n        expect(subject > value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be (greater than|above) <string>', function (expect, subject, value) {\n        expect(subject > value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be greater than or equal to <number>', function (expect, subject, value) {\n        expect(subject >= value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<string> [not] to be greater than or equal to <string>', function (expect, subject, value) {\n        expect(subject >= value, '[not] to be truthy');\n    });\n\n    expect.addAssertion('<number> [not] to be positive', function (expect, subject) {\n        expect(subject, '[not] to be greater than', 0);\n    });\n\n    expect.addAssertion('<number> [not] to be negative', function (expect, subject) {\n        expect(subject, '[not] to be less than', 0);\n    });\n\n    expect.addAssertion('<any> to equal <any>', function (expect, subject, value) {\n        expect.withError(function () {\n            expect(expect.equal(value, subject), 'to be truthy');\n        }, function (e) {\n            expect.fail({\n                label: 'should equal',\n                diff: function (output, diff) {\n                    return diff(subject, value);\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<any> not to equal <any>', function (expect, subject, value) {\n        expect(expect.equal(value, subject), 'to be falsy');\n    });\n\n    expect.addAssertion('<function> to error', function (expect, subject) {\n        return expect.promise(function () {\n            return subject();\n        }).then(function () {\n            expect.fail();\n        }, function (error) {\n            return error;\n        });\n    });\n\n    expect.addAssertion('<function> to error [with] <any>', function (expect, subject, arg) {\n        return expect(subject, 'to error').then(function (error) {\n            expect.errorMode = 'nested';\n            return expect.withError(function () {\n                if (error.isUnexpected && (typeof arg === 'string' || isRegExp(arg))) {\n                    return expect(error, 'to have message', arg);\n                } else {\n                    return expect(error, 'to satisfy', arg);\n                }\n            }, function (e) {\n                e.originalError = error;\n                throw e;\n            });\n        });\n    });\n\n    expect.addAssertion('<function> not to error', function (expect, subject) {\n        var threw = false;\n        return expect.promise(function () {\n            try {\n                return subject();\n            } catch (e) {\n                threw = true;\n                throw e;\n            }\n        }).caught(function (error) {\n            expect.errorMode = 'nested';\n            expect.fail({\n                output: function (output) {\n                    output.error(threw ? 'threw' : 'returned promise rejected with').error(': ')\n                        .appendErrorMessage(error);\n                },\n                originalError: error\n            });\n        });\n    });\n\n    expect.addAssertion('<function> not to throw', function (expect, subject) {\n        var threw = false;\n        var error;\n\n        try {\n            subject();\n        } catch (e) {\n            error = e;\n            threw = true;\n        }\n\n        if (threw) {\n            expect.errorMode = 'nested';\n            expect.fail({\n                output: function (output) {\n                    output.error('threw: ').appendErrorMessage(error);\n                },\n                originalError: error\n            });\n        }\n    });\n\n    expect.addAssertion('<function> to (throw|throw error|throw exception)', function (expect, subject) {\n        try {\n            subject();\n        } catch (e) {\n            return e;\n        }\n        expect.errorMode = 'nested';\n        expect.fail('did not throw');\n    });\n\n    expect.addAssertion('<function> to throw (a|an) <function>', function (expect, subject, value) {\n        var constructorName = utils.getFunctionName(value);\n        if (constructorName) {\n            expect.argsOutput[0] = function (output) {\n                output.jsFunctionName(constructorName);\n            };\n        }\n        expect.errorMode = 'nested';\n        return expect(subject, 'to throw').then(function (error) {\n            expect(error, 'to be a', value);\n        });\n    });\n\n    expect.addAssertion('<function> to (throw|throw error|throw exception) <any>', function (expect, subject, arg) {\n        expect.errorMode = 'nested';\n        return expect(subject, 'to throw').then(function (error) {\n            var isUnexpected = error && error._isUnexpected;\n            // in the presence of a matcher an error must have been thrown.\n\n            expect.errorMode = 'nested';\n            return expect.withError(function () {\n                if (isUnexpected && (typeof arg === 'string' || isRegExp(arg))) {\n                    return expect(error.getErrorMessage('text').toString(), 'to satisfy', arg);\n                } else {\n                    return expect(error, 'to satisfy', arg);\n                }\n            }, function (err) {\n                err.originalError = error;\n                throw err;\n            });\n        });\n    });\n\n    expect.addAssertion('<function> to have arity <number>', function (expect, subject, value) {\n        expect(subject.length, 'to equal', value);\n    });\n\n    expect.addAssertion([\n        '<object> to have values [exhaustively] satisfying <any>',\n        '<object> to have values [exhaustively] satisfying <assertion>',\n        '<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <any>',\n        '<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <assertion>'\n    ], function (expect, subject, nextArg) {\n        expect.errorMode = 'nested';\n        expect(subject, 'not to be empty');\n        expect.errorMode = 'bubble';\n\n        var keys = expect.subjectType.getKeys(subject);\n        var expected = {};\n        keys.forEach(function (key, index) {\n            if (typeof nextArg === 'string') {\n                expected[key] = function (s) {\n                    return expect.shift(s);\n                };\n            } else if (typeof nextArg === 'function') {\n                expected[key] = function (s) {\n                    return nextArg._expectIt\n                      ? nextArg(s, expect.context)\n                      : nextArg(s, index);\n                };\n            } else {\n                expected[key] = nextArg;\n            }\n        });\n        return expect.withError(function () {\n            return expect(subject, 'to [exhaustively] satisfy', expected);\n        }, function (err) {\n            expect.fail({\n                message: function (output) {\n                    output.append(expect.standardErrorMessage(output.clone(), { compact: true }));\n                },\n                diff: function (output) {\n                    var diff = err.getDiff({ output: output });\n                    diff.inline = true;\n                    return diff;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion([\n        '<array-like> to have items [exhaustively] satisfying <any>',\n        '<array-like> to have items [exhaustively] satisfying <assertion>',\n        '<array-like> to be an array whose items [exhaustively] satisfy <any>',\n        '<array-like> to be an array whose items [exhaustively] satisfy <assertion>'\n    ], function (expect, subject) { // ...\n        var extraArgs = Array.prototype.slice.call(arguments, 2);\n        expect.errorMode = 'nested';\n        expect(subject, 'not to be empty');\n        expect.errorMode = 'bubble';\n\n        return expect.withError(function () {\n            return expect.apply(expect, [subject, 'to have values [exhaustively] satisfying'].concat(extraArgs));\n        }, function (err) {\n            expect.fail({\n                message: function (output) {\n                    output.append(expect.standardErrorMessage(output.clone(), { compact: true }));\n                },\n                diff: function (output) {\n                    var diff = err.getDiff({ output: output });\n                    diff.inline = true;\n                    return diff;\n                }\n            });\n        });\n    });\n\n    expect.addAssertion([\n        '<object> to have keys satisfying <any>',\n        '<object> to have keys satisfying <assertion>',\n        '<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <any>',\n        '<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <assertion>'\n    ], function (expect, subject) {\n        expect.errorMode = 'nested';\n        expect(subject, 'not to be empty');\n        expect.errorMode = 'default';\n\n        var keys = expect.subjectType.getKeys(subject);\n        var extraArgs = Array.prototype.slice.call(arguments, 2);\n        return expect.apply(expect, [keys, 'to have items satisfying'].concat(extraArgs));\n    });\n\n    expect.addAssertion([\n        '<object> to have a value [exhaustively] satisfying <any>',\n        '<object> to have a value [exhaustively] satisfying <assertion>'\n    ], function (expect, subject, nextArg) {\n        expect.errorMode = 'nested';\n        expect(subject, 'not to be empty');\n        expect.errorMode = 'bubble';\n\n        var keys = expect.subjectType.getKeys(subject);\n        return expect.promise.any(keys.map(function (key, index) {\n            var expected;\n            if (typeof nextArg === 'string') {\n                expected = function (s) {\n                    return expect.shift(s);\n                };\n            } else if (typeof nextArg === 'function') {\n                expected = function (s) {\n                    return nextArg(s, index);\n                };\n            } else {\n                expected = nextArg;\n            }\n            return expect.promise(function () {\n                return expect(subject[key], 'to [exhaustively] satisfy', expected);\n            });\n        })).catch(function (e) {\n            return expect.fail(function (output) {\n                output.append(expect.standardErrorMessage(output.clone(), { compact: true }));\n            });\n        });\n    });\n\n    expect.addAssertion([\n        '<array-like> to have an item [exhaustively] satisfying <any>',\n        '<array-like> to have an item [exhaustively] satisfying <assertion>'\n    ], function (expect, subject) { // ...\n        expect.errorMode = 'nested';\n        expect(subject, 'not to be empty');\n        expect.errorMode = 'bubble';\n\n        var extraArgs = Array.prototype.slice.call(arguments, 2);\n        return expect.withError(function () {\n            return expect.apply(expect, [subject, 'to have a value [exhaustively] satisfying'].concat(extraArgs));\n        }, function (err) {\n            expect.fail(function (output) {\n                output.append(expect.standardErrorMessage(output.clone(), { compact: true }));\n            });\n        });\n    });\n\n    expect.addAssertion('<object> to be canonical', function (expect, subject) {\n        var stack = [];\n\n        (function traverse(obj) {\n            var i;\n            for (i = 0 ; i < stack.length ; i += 1) {\n                if (stack[i] === obj) {\n                    return;\n                }\n            }\n            if (obj && typeof obj === 'object') {\n                var keys = Object.keys(obj);\n                for (i = 0 ; i < keys.length - 1 ; i += 1) {\n                    expect(keys[i], 'to be less than', keys[i + 1]);\n                }\n                stack.push(obj);\n                keys.forEach(function (key) {\n                    traverse(obj[key]);\n                });\n                stack.pop();\n            }\n        }(subject));\n    });\n\n    expect.addAssertion('<Error> to have message <any>', function (expect, subject, value) {\n        expect.errorMode = 'nested';\n        return expect(subject.isUnexpected ? subject.getErrorMessage('text').toString() : subject.message, 'to satisfy', value);\n    });\n\n    expect.addAssertion('<Error> to [exhaustively] satisfy <Error>', function (expect, subject, value) {\n        expect(subject.constructor, 'to be', value.constructor);\n\n        var unwrappedValue = expect.argTypes[0].unwrap(value);\n        return expect.withError(function () {\n            return expect(subject, 'to [exhaustively] satisfy', unwrappedValue);\n        }, function (e) {\n            expect.fail({\n                diff: function (output, diff) {\n                    output.inline = false;\n                    var unwrappedSubject = expect.subjectType.unwrap(subject);\n                    return utils.wrapConstructorNameAroundOutput(\n                        diff(unwrappedSubject, unwrappedValue),\n                        subject\n                    );\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<Error> to [exhaustively] satisfy <object>', function (expect, subject, value) {\n        var valueType = expect.argTypes[0];\n        var subjectKeys = expect.subjectType.getKeys(subject);\n        var valueKeys = valueType.getKeys(value);\n        var convertedSubject = {};\n        subjectKeys.concat(valueKeys).forEach(function (key) {\n            convertedSubject[key] = subject[key];\n        });\n        return expect(convertedSubject, 'to [exhaustively] satisfy', value);\n    });\n\n    expect.addAssertion('<Error> to [exhaustively] satisfy <regexp|string>', function (expect, subject, value) {\n        return expect(subject.message, 'to [exhaustively] satisfy', value);\n    });\n\n    expect.addAssertion('<Error> to [exhaustively] satisfy <any>', function (expect, subject, value) {\n        return expect(subject.message, 'to [exhaustively] satisfy', value);\n    });\n\n    expect.addAssertion('<binaryArray> to [exhaustively] satisfy <expect.it>', function (expect, subject, value) {\n        return expect.withError(function () {\n            return value(subject, expect.context);\n        }, function (e) {\n            expect.fail({\n                diff: function (output, diff, inspect, equal) {\n                    output.inline = false;\n                    return output.appendErrorMessage(e);\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<UnexpectedError> to [exhaustively] satisfy <function>', function (expect, subject, value) {\n        return expect.promise(function () {\n            subject.serializeMessage(expect.outputFormat());\n            return value(subject);\n        });\n    });\n\n    expect.addAssertion('<any|Error> to [exhaustively] satisfy <function>', function (expect, subject, value) {\n        return expect.promise(function () {\n            return value(subject);\n        });\n    });\n\n    if (typeof Buffer !== 'undefined') {\n        expect.addAssertion('<Buffer> [when] decoded as <string> <assertion?>', function (expect, subject, value) {\n            return expect.shift(subject.toString(value));\n        });\n    }\n\n    expect.addAssertion('<any> not to [exhaustively] satisfy [assertion] <any>', function (expect, subject, value) {\n        return expect.promise(function (resolve, reject) {\n            return expect.promise(function () {\n                return expect(subject, 'to [exhaustively] satisfy [assertion]', value);\n            }).then(function () {\n                try {\n                    expect.fail();\n                } catch (e) {\n                    reject(e);\n                }\n            }).caught(function (e) {\n                if (!e || !e._isUnexpected) {\n                    reject(e);\n                } else {\n                    resolve();\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<any> to [exhaustively] satisfy assertion <any>', function (expect, subject, value) {\n        expect.errorMode = 'bubble'; // to satisfy assertion 'to be a number' => to be a number\n        return expect(subject, 'to [exhaustively] satisfy', value);\n    });\n\n    expect.addAssertion('<any> to [exhaustively] satisfy assertion <assertion>', function (expect, subject) {\n        expect.errorMode = 'bubble'; // to satisfy assertion 'to be a number' => to be a number\n        return expect.shift();\n    });\n\n    expect.addAssertion('<any> to [exhaustively] satisfy [assertion] <expect.it>', function (expect, subject, value) {\n        return expect.withError(function () {\n            return value(subject, expect.context);\n        }, function (e) {\n            expect.fail({\n                diff: function (output) {\n                    output.inline = false;\n                    return output.appendErrorMessage(e);\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<regexp> to [exhaustively] satisfy <regexp>', function (expect, subject, value) {\n        expect(subject, 'to equal', value);\n    });\n\n    expect.addAssertion('<string> to [exhaustively] satisfy <regexp>', function (expect, subject, value) {\n        expect.errorMode = 'bubble';\n        return expect(subject, 'to match', value);\n    });\n\n    expect.addAssertion('<function> to [exhaustively] satisfy <function>', function (expect, subject, value) {\n        expect.errorMode = 'bubble';\n        expect(subject, 'to equal', value);\n    });\n\n    expect.addAssertion('<binaryArray> to [exhaustively] satisfy <binaryArray>', function (expect, subject, value) {\n        expect.errorMode = 'bubble';\n        expect(subject, 'to equal', value);\n    });\n\n    expect.addAssertion('<any> to [exhaustively] satisfy <any>', function (expect, subject, value) {\n        expect.errorMode = 'bubble';\n        expect(subject, 'to equal', value);\n    });\n\n    expect.addAssertion('<array-like> to [exhaustively] satisfy <array-like>', function (expect, subject, value) {\n        expect.errorMode = 'bubble';\n        var i;\n        var valueType = expect.argTypes[0];\n        var valueKeys = valueType.getKeys(value);\n        var keyPromises = {};\n        valueKeys.forEach(function (valueKey) {\n            keyPromises[valueKey] = expect.promise(function () {\n                var valueKeyType = expect.findTypeOf(value[valueKey]);\n                if (valueKeyType.is('function')) {\n                    return value[valueKey](subject[valueKey]);\n                } else {\n                    return expect(subject[valueKey], 'to [exhaustively] satisfy', value[valueKey]);\n                }\n            });\n        });\n        return expect.promise.all([\n            expect.promise(function () {\n                expect(subject, 'to only have keys', valueKeys);\n            }),\n            expect.promise.all(keyPromises)\n        ]).caught(function () {\n            var subjectType = expect.subjectType;\n            return expect.promise.settle(keyPromises).then(function () {\n                var toSatisfyMatrix = new Array(subject.length);\n                for (i = 0 ; i < subject.length ; i += 1) {\n                    toSatisfyMatrix[i] = new Array(value.length);\n                    if (i < value.length) {\n                        toSatisfyMatrix[i][i] = keyPromises[i].isFulfilled() || keyPromises[i].reason();\n                    }\n                }\n                if (subject.length > 10 || value.length > 10) {\n                    var indexByIndexChanges = [];\n                    for (i = 0 ; i < subject.length ; i += 1) {\n                        var promise = keyPromises[i];\n                        if (i < value.length) {\n                            indexByIndexChanges.push({\n                                type: promise.isFulfilled() ? 'equal' : 'similar',\n                                value: subject[i],\n                                expected: value[i],\n                                actualIndex: i,\n                                expectedIndex: i,\n                                last: i === Math.max(subject.length, value.length) - 1\n                            });\n                        } else {\n                            indexByIndexChanges.push({\n                                type: 'remove',\n                                value: subject[i],\n                                actualIndex: i,\n                                last: i === subject.length - 1\n                            });\n                        }\n                    }\n                    for (i = subject.length ; i < value.length ; i += 1) {\n                        indexByIndexChanges.push({\n                            type: 'insert',\n                            value: value[i],\n                            expectedIndex: i\n                        });\n                    }\n                    return failWithChanges(indexByIndexChanges);\n                }\n\n                var isAsync = false;\n                var nonNumericalKeysAndSymbols = !subjectType.numericalPropertiesOnly &&\n                    utils.uniqueNonNumericalStringsAndSymbols(subjectType.getKeys(subject), valueType.getKeys(value));\n\n                var changes = arrayChanges(subject, value, function equal(a, b, aIndex, bIndex) {\n                    toSatisfyMatrix[aIndex] = toSatisfyMatrix[aIndex] || [];\n                    var existingResult = toSatisfyMatrix[aIndex][bIndex];\n                    if (typeof existingResult !== 'undefined') {\n                        return existingResult === true;\n                    }\n                    var result;\n                    try {\n                        result = expect(a, 'to [exhaustively] satisfy', b);\n                    } catch (err) {\n                        throwIfNonUnexpectedError(err);\n                        toSatisfyMatrix[aIndex][bIndex] = err;\n                        return false;\n                    }\n                    result.then(function () {}, function () {});\n                    if (result.isPending()) {\n                        isAsync = true;\n                        return false;\n                    }\n                    toSatisfyMatrix[aIndex][bIndex] = true;\n                    return true;\n                }, function (a, b) {\n                    return subjectType.similar(a, b);\n                }, nonNumericalKeysAndSymbols);\n                if (isAsync) {\n                    return expect.promise(function (resolve, reject) {\n                        arrayChangesAsync(subject, value, function equal(a, b, aIndex, bIndex, cb) {\n                            toSatisfyMatrix[aIndex] = toSatisfyMatrix[aIndex] || [];\n                            var existingResult = toSatisfyMatrix[aIndex][bIndex];\n                            if (typeof existingResult !== 'undefined') {\n                                return cb(existingResult === true);\n                            }\n                            expect.promise(function () {\n                                return expect(a, 'to [exhaustively] satisfy', b);\n                            }).then(function () {\n                                toSatisfyMatrix[aIndex][bIndex] = true;\n                                cb(true);\n                            }, function (err) {\n                                toSatisfyMatrix[aIndex][bIndex] = err;\n                                cb(false);\n                            });\n                        }, function (a, b, aIndex, bIndex, cb) {\n                            cb(subjectType.similar(a, b));\n                        }, nonNumericalKeysAndSymbols, resolve);\n                    }).then(failWithChanges);\n                } else {\n                    return failWithChanges(changes);\n                }\n\n                function failWithChanges(changes) {\n                    expect.errorMode = 'default';\n                    expect.fail({\n                        diff: function (output, diff, inspect, equal) {\n                            output.inline = true;\n                            var indexOfLastNonInsert = changes.reduce(function (previousValue, diffItem, index) {\n                                return (diffItem.type === 'insert') ? previousValue : index;\n                            }, -1);\n                            var prefixOutput = subjectType.prefix(output.clone(), subject);\n                            output\n                                .append(prefixOutput)\n                                .nl(prefixOutput.isEmpty() ? 0 : 1);\n\n                            if (subjectType.indent) {\n                                output.indentLines();\n                            }\n                            var packing = utils.packArrows(changes); // NOTE: Will have side effects in changes if the packing results in too many arrow lanes\n                            output.arrowsAlongsideChangeOutputs(packing, changes.map(function (diffItem, index) {\n                                var delimiterOutput = subjectType.delimiter(output.clone(), index, indexOfLastNonInsert + 1);\n                                var type = diffItem.type;\n                                if (type === 'moveTarget') {\n                                    return output.clone();\n                                } else {\n                                    return output.clone().block(function () {\n                                        if (type === 'moveSource') {\n                                            this.property(diffItem.actualIndex, inspect(diffItem.value), true)\n                                                .amend(delimiterOutput.sp()).error('// should be moved');\n                                        } else if (type === 'insert') {\n                                            this.annotationBlock(function () {\n                                                var index = typeof diffItem.actualIndex !== 'undefined' ? diffItem.actualIndex : diffItem.expectedIndex;\n                                                if (expect.findTypeOf(diffItem.value).is('function')) {\n                                                    this.error('missing: ')\n                                                        .property(index, output.clone().block(function () {\n                                                            this.omitSubject = undefined;\n                                                            var promise = keyPromises[diffItem.expectedIndex];\n                                                            if (promise.isRejected()) {\n                                                                this.appendErrorMessage(promise.reason());\n                                                            } else {\n                                                                this.appendInspected(diffItem.value);\n                                                            }\n                                                        }), true);\n                                                } else {\n                                                    this.error('missing ').property(index, inspect(diffItem.value), true);\n                                                }\n                                            });\n                                        } else {\n                                            this.property(diffItem.actualIndex, output.clone().block(function () {\n                                                if (type === 'remove') {\n                                                    this.append(inspect(diffItem.value).amend(delimiterOutput.sp()).error('// should be removed'));\n                                                } else if (type === 'equal') {\n                                                    this.append(inspect(diffItem.value).amend(delimiterOutput));\n                                                } else {\n                                                    var toSatisfyResult = toSatisfyMatrix[diffItem.actualIndex][diffItem.expectedIndex];\n                                                    var valueDiff = toSatisfyResult && toSatisfyResult !== true && toSatisfyResult.getDiff({ output: output.clone() });\n                                                    if (valueDiff && valueDiff.inline) {\n                                                        this.append(valueDiff.amend(delimiterOutput));\n                                                    } else {\n                                                        this.append(inspect(diffItem.value).amend(delimiterOutput)).sp().annotationBlock(function () {\n                                                            this.omitSubject = diffItem.value;\n                                                            var label = toSatisfyResult.getLabel();\n                                                            if (label) {\n                                                                this.error(label).sp()\n                                                                    .block(inspect(diffItem.expected));\n                                                                if (valueDiff) {\n                                                                    this.nl(2).append(valueDiff);\n                                                                }\n                                                            } else {\n                                                                this.appendErrorMessage(toSatisfyResult);\n                                                            }\n                                                        });\n                                                    }\n                                                }\n                                            }), true);\n                                        }\n                                    });\n                                }\n                            }));\n\n                            if (subjectType.indent) {\n                                output.outdentLines();\n                            }\n                            var suffixOutput = subjectType.suffix(output.clone(), subject);\n                            output\n                                .nl(suffixOutput.isEmpty() ? 0 : 1)\n                                .append(suffixOutput);\n\n                            return output;\n                        }\n                    });\n                }\n            });\n        });\n    });\n\n    expect.addAssertion('<object> to [exhaustively] satisfy <object>', function (expect, subject, value) {\n        var valueType = expect.argTypes[0];\n        var subjectType = expect.subjectType;\n        var subjectIsArrayLike = subjectType.is('array-like');\n        if (subject === value) {\n            return;\n        }\n        if (valueType.is('array-like') && !subjectIsArrayLike) {\n            expect.fail();\n        }\n        var promiseByKey = {};\n        var keys = valueType.getKeys(value);\n        var subjectKeys = subjectType.getKeys(subject);\n\n        if (!subjectIsArrayLike) {\n            // Find all non-enumerable subject keys present in value, but not returned by subjectType.getKeys:\n            keys.forEach(function (key) {\n                if (Object.prototype.hasOwnProperty.call(subject, key) && subjectKeys.indexOf(key) === -1) {\n                    subjectKeys.push(key);\n                }\n            });\n        }\n\n        keys.forEach(function (key, index) {\n            promiseByKey[key] = expect.promise(function () {\n                var valueKeyType = expect.findTypeOf(value[key]);\n                if (valueKeyType.is('expect.it')) {\n                    expect.context.thisObject = subject;\n                    return value[key](subject[key], expect.context);\n                } else if (valueKeyType.is('function')) {\n                    return value[key](subject[key]);\n                } else {\n                    return expect(subject[key], 'to [exhaustively] satisfy', value[key]);\n                }\n            });\n        });\n\n        return expect.promise.all([\n            expect.promise(function () {\n                if (expect.flags.exhaustively) {\n                    var nonOwnKeysWithDefinedValues = keys.filter(function (key) {\n                        return !Object.prototype.hasOwnProperty.call(subject, key) && typeof subject[key] !== 'undefined';\n                    });\n                    var valueKeysWithDefinedValues = keys.filter(function (key) {\n                        return typeof value[key] !== 'undefined';\n                    });\n                    var subjectKeysWithDefinedValues = subjectKeys.filter(function (key) {\n                        return typeof subject[key] !== 'undefined';\n                    });\n                    expect(valueKeysWithDefinedValues.length - nonOwnKeysWithDefinedValues.length, 'to equal', subjectKeysWithDefinedValues.length);\n                }\n            }),\n            expect.promise.all(promiseByKey)\n        ]).caught(function () {\n            return expect.promise.settle(promiseByKey).then(function () {\n                expect.fail({\n                    diff: function (output, diff, inspect, equal) {\n                        output.inline = true;\n                        var subjectIsArrayLike = subjectType.is('array-like');\n                        var keys = utils.uniqueStringsAndSymbols(subjectKeys, valueType.getKeys(value)).filter(function (key) {\n                            // Skip missing keys expected to be missing so they don't get rendered in the diff\n                            return key in subject || typeof value[key] !== 'undefined';\n                        });\n                        var prefixOutput = subjectType.prefix(output.clone(), subject);\n                        output\n                            .append(prefixOutput)\n                            .nl(prefixOutput.isEmpty() ? 0 : 1);\n\n                        if (subjectType.indent) {\n                            output.indentLines();\n                        }\n                        keys.forEach(function (key, index) {\n                            output.nl(index > 0 ? 1 : 0).i().block(function () {\n                                var valueOutput;\n                                var annotation = output.clone();\n                                var conflicting;\n\n                                if (Object.prototype.hasOwnProperty.call(promiseByKey, key) && promiseByKey[key].isRejected()) {\n                                    conflicting = promiseByKey[key].reason();\n                                }\n\n                                var missingArrayIndex = subjectType.is('array-like') && !(key in subject);\n\n                                var isInlineDiff = true;\n\n                                output.omitSubject = subject[key];\n                                if (!(key in value)) {\n                                    if (expect.flags.exhaustively) {\n                                        annotation.error('should be removed');\n                                    } else {\n                                        conflicting = null;\n                                    }\n                                } else if (!(key in subject)) {\n                                    if (expect.findTypeOf(value[key]).is('function')) {\n                                        if (promiseByKey[key].isRejected()) {\n                                            output.error('// missing:').sp();\n                                            valueOutput = output.clone().appendErrorMessage(promiseByKey[key].reason());\n                                        } else {\n                                            output.error('// missing').sp();\n                                            valueOutput = output.clone().error('should satisfy').sp().block(inspect(value[key]));\n                                        }\n                                    } else {\n                                        output.error('// missing').sp();\n                                        valueOutput = inspect(value[key]);\n                                    }\n                                } else if (conflicting || missingArrayIndex) {\n                                    var keyDiff = conflicting && conflicting.getDiff({ output: output });\n                                    isInlineDiff = !keyDiff || keyDiff.inline ;\n                                    if (missingArrayIndex) {\n                                        output.error('// missing').sp();\n                                    }\n                                    if (keyDiff && keyDiff.inline) {\n                                        valueOutput = keyDiff;\n                                    } else if (typeof value[key] === 'function') {\n                                        isInlineDiff = false;\n                                        annotation.appendErrorMessage(conflicting);\n                                    } else if (!keyDiff || (keyDiff && !keyDiff.inline)) {\n                                        annotation.error((conflicting && conflicting.getLabel()) || 'should satisfy').sp()\n                                            .block(inspect(value[key]));\n\n                                        if (keyDiff) {\n                                            annotation.nl(2).append(keyDiff);\n                                        }\n                                    } else {\n                                        valueOutput = keyDiff;\n                                    }\n                                }\n\n                                if (!valueOutput) {\n                                    if (missingArrayIndex || !(key in subject)) {\n                                        valueOutput = output.clone();\n                                    } else {\n                                        valueOutput = inspect(subject[key]);\n                                    }\n                                }\n\n                                var omitDelimiter =\n                                    missingArrayIndex ||\n                                    index >= subjectKeys.length - 1;\n\n                                if (!omitDelimiter) {\n                                    valueOutput.amend(subjectType.delimiter(output.clone(), index, keys.length));\n                                }\n\n                                var annotationOnNextLine = !isInlineDiff &&\n                                    output.preferredWidth < this.size().width + valueOutput.size().width + annotation.size().width;\n\n                                if (!annotation.isEmpty()) {\n                                    if (!valueOutput.isEmpty()) {\n                                        if (annotationOnNextLine) {\n                                            valueOutput.nl();\n                                        } else {\n                                            valueOutput.sp();\n                                        }\n                                    }\n\n                                    valueOutput.annotationBlock(function () {\n                                        this.append(annotation);\n                                    });\n                                }\n\n                                if (!isInlineDiff) {\n                                    valueOutput = output.clone().block(valueOutput);\n                                }\n\n                                this.property(key, valueOutput, subjectIsArrayLike);\n                            });\n                        });\n\n                        if (subjectType.indent) {\n                            output.outdentLines();\n                        }\n                        var suffixOutput = subjectType.suffix(output.clone(), subject);\n                        return output\n                            .nl(suffixOutput.isEmpty() ? 0 : 1)\n                            .append(suffixOutput);\n                    }\n                });\n            });\n        });\n    });\n\n    function wrapDiffWithTypePrefixAndSuffix(e, type, subject) {\n        var createDiff = e.getDiffMethod();\n        if (createDiff) {\n            return function (output) { // ...\n                type.prefix.call(type, output, subject);\n                var result = createDiff.apply(this, arguments);\n                type.suffix.call(type, output, subject);\n                return result;\n            };\n        }\n    }\n\n    expect.addAssertion('<wrapperObject> to [exhaustively] satisfy <wrapperObject>', function (expect, subject, value) {\n        var type = expect.findCommonType(subject, value);\n        expect(type.is('wrapperObject'), 'to be truthy');\n        return expect.withError(function () {\n            return expect(type.unwrap(subject), 'to [exhaustively] satisfy', type.unwrap(value));\n        }, function (e) {\n            expect.fail({\n                label: e.getLabel(),\n                diff: wrapDiffWithTypePrefixAndSuffix(e, type, subject)\n            });\n        });\n    });\n\n    expect.addAssertion('<wrapperObject> to [exhaustively] satisfy <any>', function (expect, subject, value) {\n        var subjectType = expect.subjectType;\n\n        return expect.withError(function () {\n            return expect(subjectType.unwrap(subject), 'to [exhaustively] satisfy', value);\n        }, function (e) {\n            expect.fail({\n                label: e.getLabel(),\n                diff: wrapDiffWithTypePrefixAndSuffix(e, subjectType, subject)\n            });\n        });\n    });\n\n    expect.addAssertion('<function> [when] called with <array-like> <assertion?>', function (expect, subject, args) { // ...\n        expect.errorMode = 'nested';\n        expect.argsOutput[0] = function (output) {\n            output.appendItems(args, ', ');\n        };\n\n        var thisObject = expect.context.thisObject || null;\n\n        return expect.shift(subject.apply(thisObject, args));\n    });\n\n    expect.addAssertion('<function> [when] called <assertion?>', function (expect, subject) {\n        expect.errorMode = 'nested';\n\n        var thisObject = expect.context.thisObject || null;\n\n        return expect.shift(subject.call(thisObject));\n    });\n\n    function instantiate(Constructor, args) {\n        function ProxyConstructor() {\n            return Constructor.apply(this, args);\n        }\n        ProxyConstructor.prototype = Constructor.prototype;\n        return new ProxyConstructor();\n    }\n\n    expect.addAssertion([\n        '<array-like> [when] passed as parameters to [async] <function> <assertion?>',\n        '<array-like> [when] passed as parameters to [constructor] <function> <assertion?>'\n    ], function (expect, subject, fn) { // ...\n        expect.errorMode = 'nested';\n        var args = subject;\n        if (expect.flags.async) {\n            return expect.promise(function (run) {\n                args = [].concat(args);\n                args.push(run(function (err, result) {\n                    expect(err, 'to be falsy');\n                    return expect.shift(result);\n                }));\n                fn.apply(null, args);\n            });\n        } else {\n            return expect.shift(expect.flags.constructor ? instantiate(fn, args) : fn.apply(fn, args));\n        }\n    });\n\n    expect.addAssertion([\n        '<any> [when] passed as parameter to [async] <function> <assertion?>',\n        '<any> [when] passed as parameter to [constructor] <function> <assertion?>'\n    ], function (expect, subject, fn) { // ...\n        expect.errorMode = 'nested';\n        var args = [subject];\n        if (expect.flags.async) {\n            return expect.promise(function (run) {\n                args = [].concat(args);\n                args.push(run(function (err, result) {\n                    expect(err, 'to be falsy');\n                    return expect.shift(result);\n                }));\n                fn.apply(null, args);\n            });\n        } else {\n            return expect.shift(expect.flags.constructor ? instantiate(fn, args) : fn.apply(fn, args));\n        }\n    });\n\n    expect.addAssertion([\n        '<array-like> [when] sorted [numerically] <assertion?>',\n        '<array-like> [when] sorted by <function> <assertion?>'\n    ], function (expect, subject, compareFunction) {\n        if (expect.flags.numerically) {\n            compareFunction = function (a, b) {\n                return a - b;\n            };\n        }\n        return expect.shift(Array.prototype.slice.call(subject).sort(compareFunction));\n    });\n\n    expect.addAssertion('<Promise> to be rejected', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect.promise(function () {\n            return subject;\n        }).then(function (obj) {\n            expect.fail(function (output) {\n                output.appendInspected(subject).sp().text('unexpectedly fulfilled');\n                if (typeof obj !== 'undefined') {\n                    output.sp().text('with').sp().appendInspected(obj);\n                }\n            });\n        }, function (err) {\n            return err;\n        });\n    });\n\n    expect.addAssertion('<function> to be rejected', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect(expect.promise(function () {\n            return subject();\n        }), 'to be rejected');\n    });\n\n    expect.addAssertion([\n        '<Promise> to be rejected with <any>',\n        '<Promise> to be rejected with error [exhaustively] satisfying <any>'\n    ], function (expect, subject, value) {\n        expect.errorMode = 'nested';\n        return expect(subject, 'to be rejected').tap(function (err) {\n            return expect.withError(function () {\n                if (err && err._isUnexpected && (typeof value === 'string' || isRegExp(value))) {\n                    return expect(err, 'to have message', value);\n                } else {\n                    return expect(err, 'to [exhaustively] satisfy', value);\n                }\n            }, function (e) {\n                e.originalError = err;\n                throw e;\n            });\n        });\n    });\n\n    expect.addAssertion([\n        '<function> to be rejected with <any>',\n        '<function> to be rejected with error [exhaustively] satisfying <any>'\n    ], function (expect, subject, value) {\n        expect.errorMode = 'nested';\n        return expect(expect.promise(function () {\n            return subject();\n        }), 'to be rejected with error [exhaustively] satisfying', value);\n    });\n\n    expect.addAssertion('<Promise> to be fulfilled', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect.promise(function () {\n            return subject;\n        }).caught(function (err) {\n            expect.fail({\n                output: function (output) {\n                    output.appendInspected(subject).sp().text('unexpectedly rejected');\n                    if (typeof err !== 'undefined') {\n                        output.sp().text('with').sp().appendInspected(err);\n                    }\n                },\n                originalError: err\n            });\n        });\n    });\n\n    expect.addAssertion('<function> to be fulfilled', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect(expect.promise(function () {\n            return subject();\n        }), 'to be fulfilled');\n    });\n\n    expect.addAssertion([\n        '<Promise> to be fulfilled with <any>',\n        '<Promise> to be fulfilled with value [exhaustively] satisfying <any>'\n    ], function (expect, subject, value) {\n        expect.errorMode = 'nested';\n        return expect(subject, 'to be fulfilled').tap(function (fulfillmentValue) {\n            return expect(fulfillmentValue, 'to [exhaustively] satisfy', value);\n        });\n    });\n\n    expect.addAssertion([\n        '<function> to be fulfilled with <any>',\n        '<function> to be fulfilled with value [exhaustively] satisfying <any>'\n    ], function (expect, subject, value) {\n        expect.errorMode = 'nested';\n        return expect(expect.promise(function () {\n            return subject();\n        }), 'to be fulfilled with value [exhaustively] satisfying', value);\n    });\n\n    expect.addAssertion('<Promise> when rejected <assertion>', function (expect, subject, nextAssertion) {\n        expect.errorMode = 'nested';\n        return expect.promise(function () {\n            return subject;\n        }).then(function (fulfillmentValue) {\n            if (typeof nextAssertion === 'string') {\n                expect.argsOutput = function (output) {\n                    output.error(nextAssertion);\n                    var rest = expect.args.slice(1);\n                    if (rest.length > 0) {\n                        output.sp().appendItems(rest, ', ');\n                    }\n                };\n            }\n            expect.fail(function (output) {\n                output.appendInspected(subject).sp().text('unexpectedly fulfilled');\n                if (typeof fulfillmentValue !== 'undefined') {\n                    output.sp().text('with').sp().appendInspected(fulfillmentValue);\n                }\n            });\n        }, function (err) {\n            return expect.withError(function () {\n                return expect.shift(err);\n            }, function (e) {\n                e.originalError = err;\n                throw e;\n            });\n        });\n    });\n\n    expect.addAssertion('<function> when rejected <assertion>', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect.apply(expect, [expect.promise(function () {\n            return subject();\n        }), 'when rejected'].concat(Array.prototype.slice.call(arguments, 2)));\n    });\n\n    expect.addAssertion('<Promise> when fulfilled <assertion>', function (expect, subject, nextAssertion) {\n        expect.errorMode = 'nested';\n        return expect.promise(function () {\n            return subject;\n        }).then(function (fulfillmentValue) {\n            return expect.shift(fulfillmentValue);\n        }, function (err) {\n            // typeof nextAssertion === 'string' because expect.it is handled by the above (and shift only supports those two):\n            expect.argsOutput = function (output) {\n                output.error(nextAssertion);\n                var rest = expect.args.slice(1);\n                if (rest.length > 0) {\n                    output.sp().appendItems(rest, ', ');\n                }\n            };\n            expect.fail({\n                output: function (output) {\n                    output.appendInspected(subject).sp().text('unexpectedly rejected');\n                    if (typeof err !== 'undefined') {\n                        output.sp().text('with').sp().appendInspected(err);\n                    }\n                },\n                originalError: err\n            });\n        });\n    });\n\n    expect.addAssertion('<function> when fulfilled <assertion>', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect.apply(expect, [expect.promise(function () {\n            return subject();\n        }), 'when fulfilled'].concat(Array.prototype.slice.call(arguments, 2)));\n    });\n\n    expect.addAssertion('<function> to call the callback', function (expect, subject) {\n        expect.errorMode = 'nested';\n        return expect.promise(function (run) {\n            var async = false;\n            var calledTwice = false;\n            var callbackArgs;\n            function cb() {\n                if (callbackArgs) {\n                    calledTwice = true;\n                } else {\n                    callbackArgs = Array.prototype.slice.call(arguments);\n                }\n                if (async) {\n                    setTimeout(assert, 0);\n                }\n            }\n\n            var assert = run(function () {\n                if (calledTwice) {\n                    expect.fail(function () {\n                        this.error('The callback was called twice');\n                    });\n                }\n                return callbackArgs;\n            });\n\n            subject(cb);\n            async = true;\n            if (callbackArgs) {\n                return assert();\n            }\n        });\n    });\n\n    expect.addAssertion('<function> to call the callback without error', function (expect, subject) {\n        return expect(subject, 'to call the callback').then(function (callbackArgs) {\n            var err = callbackArgs[0];\n            if (err) {\n                expect.errorMode = 'nested';\n                expect.fail({\n                    message: function (output) {\n                        output.error('called the callback with: ');\n                        if (err.getErrorMessage) {\n                            output.appendErrorMessage(err);\n                        } else {\n                            output.appendInspected(err);\n                        }\n                    }\n                });\n            } else {\n                return callbackArgs.slice(1);\n            }\n        });\n    });\n\n    expect.addAssertion('<function> to call the callback with error', function (expect, subject) {\n        return expect(subject, 'to call the callback').spread(function (err) {\n            expect(err, 'to be truthy');\n            return err;\n        });\n    });\n\n    expect.addAssertion('<function> to call the callback with error <any>', function (expect, subject, value) {\n        return expect(subject, 'to call the callback with error').tap(function (err) {\n            expect.errorMode = 'nested';\n            if (err && err._isUnexpected && (typeof value === 'string' || isRegExp(value))) {\n                return expect(err, 'to have message', value);\n            } else {\n                return expect(err, 'to satisfy', value);\n            }\n        });\n    });\n};\n","module.exports = require('./Unexpected').create()\n    .use(require('./styles'))\n    .use(require('./types'))\n    .use(require('./assertions'));\n\n// Add an inspect method to all the promises we return that will make the REPL, console.log, and util.inspect render it nicely in node.js:\nrequire('unexpected-bluebird').prototype.inspect = function () {\n    return module.exports.createOutput(require('magicpen').defaultFormat).appendInspected(this).toString();\n};\n"],"names":["defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","e","call","this","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","length","queue","concat","queueIndex","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","noop","binding","name","cwd","chdir","dir","umask","hrtime","previousTimestamp","clocktime","performanceNow","performance","seconds","Math","floor","nanoseconds","uptime","Date","startTime","duplicateText","content","times","result","whitespaceCacheLength","whitespaceCache","segment","numberOfSegments","j","createPadding","style","styles","lineContainsBlocks","line","some","outputEntry","String","indexOf","flattenBlocksInOutputEntry","split","map","flattenBlocksInLines","flattenBlocksInLine","linesLengths","startIndex","forEach","blockIndex","blockLines","blockLinesLengths","utils","calculateLineSize","width","longestLineLength","max","apply","blockLine","index","resultLine","paddingLength","prototype","lines","TextSerializer","HtmlSerializer","theme","ciede2000","c1","c2","L1","L","a1","a","b1","b","L2","a2","b2","C1","sqrt","pow","C2","a_C1_C2","G","a1p","a2p","C1p","C2p","hp_f","x","y","tmphp","degrees","atan2","h1p","h2p","dLp","dCp","dhp","abs","dHp","sin","radians","a_L","a_Cp","a_hp","T","cos","d_ro","exp","RC","SL","SC","SH","RT","n","PI","rgb_to_lab","c","xyz_to_lab","rgb_to_xyz","R","B","X","Y","Z","palette_map_key","map_palette","type","idx1","color1","best_color","undefined","best_color_diff","idx2","color2","current_color_diff","diff","color_convert","color_diff","AnsiSerializer","convertColorToObject","color","replace","hexMatch","match","parseInt","toHexColor","colorObject","hexString","round","toString","substr","firstUp","text","substring","toUpperCase","registerNext256PaletteEntry","obj","diffPalettes","colorPalettes","nextAnsiColorNumber","ColoredConsoleSerializer","tryCatcher","target","tryCatchTarget","errorObj","tryCatch","fn","isPrimitive","val","isObject","value","maybeWrapAsError","maybeError","safeToString","withAppended","appendee","ret","getDataPropertyOrDefault","key","defaultValue","es5","isES5","hasOwnProperty","desc","Object","getOwnPropertyDescriptor","get","set","notEnumerableProp","descriptor","configurable","enumerable","writable","defineProperty","thrower","r","isClass","keys","names","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","test","toFastProperties","f","l","isIdentifier","str","rident","filledRange","count","prefix","suffix","markAsOriginatingFromRejection","ignore","originatesFromRejection","OperationalError","canAttachTrace","propertyIsWritable","classString","copyDescriptors","from","to","filter","getDescriptor","arrayMove","src","srcIndex","dst","dstIndex","Queue","capacity","_capacity","_length","_front","Async","_isTickUsed","_lateQueue","_normalQueue","_trampolineEnabled","self","drainQueues","_drainQueues","_schedule","schedule","isStatic","AsyncInvokeLater","receiver","arg","_queueTick","AsyncInvoke","AsyncSettlePromises","promise","_pushOne","subError","nameProperty","defaultMessage","SubError","message","captureStackTrace","constructor","inherits","cause","stack","isUntypedError","getPrototypeOf","wrapAsOperationalError","rErrorKey","util","nodebackForPromise","err","wrapped","_attachExtraTrace","_reject","$_len","$_i","_fulfill","noConflict","Promise","bluebird","old","makePromise","body","TypeError","resolve","reject","fulfillIfDone","outerFunctionHasReturned","runningTasks","resolvedValue","noteResolvedValue","oathbreaker","cb","isPromise","then","extractPromisesFromObject","promises","UnexpectedError","expect","parent","errorMode","base","findStackStart","isPendingOrHasUnhandledRejection","isPending","isRejected","reason","uncaught","registerAfterEachHook","afterEach","afterEachRegistered","error","testPassed","pendingPromisesForTheCurrentTest","displayName","currentTest","state","title","currentSpec","failedExpectations","fullName","isAssertionArg","is","lookupAssertionsInParentChain","assertionString","unexpected","assertions","instance","findSuffixAssertions","straightforwardAssertions","tokens","suffixAssertions","slice","join","Context","level","Unexpected","options","typeByName","any","anyType","types","output","magicpen","inline","_outputFormat","format","defaultFormat","installedPlugins","that","getType","typeName","findTypeOf","findFirst","identify","findTypeOfWithParentType","requiredParentType","findCommonType","aAncestorIndex","current","baseType","_wrappedExpectProto","createWrappedExpectProto","getOrGroups","expectations","orGroups","expectation","OR","evaluateGroup","context","subject","orGroup","unshift","_expect","child","writeGroupEvaluationsToOutput","groupEvaluations","hasOrClauses","hasAndClauses","groupEvaluation","nl","sp","jsComment","groupFailed","evaluation","block","append","getErrorMessage","success","argsOutput","appendInspected","testDescription","createStandardErrorMessage","createExpectIt","expectIt","evaluations","settle","every","isFulfilled","fail","_expectIt","_expectations","_OR","and","copiedExpectations","or","compareSpecificities","min","calculateAssertionSpecificity","assertion","argRequirement","minimum","maximum","getPluginName","plugin","getFunctionName","installExpectMethods","it","bind","equal","inspect","_isUnexpected","setErrorMessage","createOutput","async","withError","addAssertion","addStyle","installTheme","addType","clone","use","installPlugin","outputFormat","notifyPendingPromise","hook","parseAssertion","calculateLimits","items","reduce","item","makeExpectFunction","ensureValidUseOfParenthesesOrBrackets","pattern","counts","[","]","(",")","charAt","init","inited","code","lookup","revLookup","charCodeAt","toByteArray","b64","tmp","placeHolders","arr","Arr","tripletToBase64","num","encodeChunk","uint8","start","end","fromByteArray","extraBytes","parts","len2","read","buffer","offset","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","d","s","NaN","Infinity","write","rt","isNaN","log","LN2","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","Uint8Array","__proto__","encodingOrOffset","allocUnsafe","ArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","size","alloc","fill","encoding","checked","string","isEncoding","byteLength","actual","fromArrayLike","byteOffset","internalIsBuffer","copy","isnan","isArray","data","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","buf","indexSize","readUInt16BE","arrLength","valLength","foundIndex","found","hexWrite","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","base64.fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754.write","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","trim","units","leadSurrogate","byteArray","hi","lo","base64.toByteArray","isBuffer","isFastBuffer","isSlowBuffer","readFloatLE","InsertDiff","values","RemoveDiff","howMany","MoveDiff","strictEqual","arrayDiff","before","after","equalFn","beforeLength","afterLength","moves","beforeMarked","afterMarked","beforeIndex","beforeItem","afterIndex","removes","inserts","insertsLength","removesLength","movesLength","remove","move","insert","earlier","outputMoves","later","extend","source","getMostUsed","indents","maxUsed","maxWeight","indent","u","w","indexA","indexB","callback","findMatching","areEqual","compare","stackDepthRemaining","MAX_STACK_DEPTH","newBeforeIndex","newAfterIndex","subjectOutput","previousWasAssertion","isAssertion","AssertionString","subjectSize","argsSize","height","omitSubject","matchTestDescription","exec","compact","compactSubject","compactWidth","preferredWidth","intersection","intersects","intersectsWithSome","intervals","interval","other","require$$0","sort","byDescStartAndLength","currentPartition","partitions","currentPartitionEnd","pop","groupPartitions","partition","partitionGroup","canSetPrototype","setPrototypeOf","proto","module","objectIs","ar","isRegExp","re","isError","predicate","leftPad","ch","escapeRegExpMetaChars","escapeChar","charCode","hexChars","matchFunctionName","Function","wrapConstructorNameAroundOutput","constructorName","setPrototypeOfOrExtend","prop","uniqueStringsAndSymbols","visit","filterFn","uniqueNonNumericalStringsAndSymbols","stringOrSymbol","numericalRegExp","forwardFlags","testDescriptionString","flags","negate","flag","Boolean","packArrows","changes","moveSourceAndTargetByActualIndex","diffItem","changeIndex","actualIndex","moveIndices","arrowSpecs","moveSourceAndMoveTarget","firstChangeIndex","lastChangeIndex","direction","packing","greedyIntervalPacker","shift","entry","global","window","platform","browser","env","argv","version","versions","release","config","on","addListener","once","off","removeListener","removeAllListeners","emit","now","mozNow","msNow","oNow","webkitNow","getTime","calculateOutputEntrySize","calculateSize","outputEntrySize","lineSize","arrayEquals","escapeRegExp","thisObj","scope","cssStyles","bold","dim","italic","underline","inverse","hidden","strikeThrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","styleName","process","stdout","isTTY","TERM","serialize","serializeLine","raw","themeMapping","themeStyles","serializeLines","themeMapper","styleProperties","rgbRegexp","convert","palette","closest","relative","furthest","modifiers","reset","strikethrough","colors","bgColors","grey","groupName","group","open","close","cacheSize","maxColorCacheSize","ansiStyles","16","#000000","#ff0000","#00ff00","#ffff00","#0000ff","#ff00ff","#00ffff","#ffffff","#808080","256","g","originalStyleName","isBackgroundColor","colorName","color16Hex","colorDiff","closestColor16","color256Hex","closest256ColorIndex","formatString","styleStrings","MagicPen","indentationWidth","indentationLevel","create","_themes","serializers","serializerName","process.browser","columns","hasSameTextStyling","normalizeLine","lastEntry","isRawOutput","amend","pen","lastLine","newOutput","replaceText","outputArray","regexp","replacedOutput","lastIndex","first","builtInStyleNames","exports","nodeName","navigator","_phantom","mochaPhantomJS","__karma__","captureConsole","newline","require$$1","require$$2","require$$3","require$$4","serializer","indentLines","space","outdentLines","handler","allowRedefinition","_stylesHaveNotBeenClonedYet","lineContent","removeFormatting","getContentFromArguments","isMagicPen","ensureCompatibleFormat","isMultiline","isAtStartOfLine","isBlock","blockOutput","alt","outputProperty","fallback","isEmpty","prependLinesWith","textStyle","MagicPenClone","clonedPen","_themesHaveNotBeenClonedYet","existingPlugin","installedPlugin","pluginName","installInto","dependencies","thisAndParents","unfulfilledDependencies","dependency","RegExp","_","formats","clonedThemes","themeKey","baseTheme","extendedTheme","charCodeCache","aLen","bLen","bCharCode","tmp2","freeze","getOwnPropertyNames","has","ObjectKeys","o","canEvaluate","haveGetters","Child","Parent","constructor$","propertyName","hasProp","inheritedDataKeys","excludedPrototypes","isExcludedProto","getKeys","visitedKeys","enumeration","ensureErrorObject","hasDevTools","chrome","loadTimes","isNode","isRecentNode","node","lastLineError","noAsyncScheduler","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","process.nextTick","standalone","div","document","createElement","observe","attributes","classList","toggle","_willBeOverCapacity","_checkCapacity","_unshiftOne","wrapMask","front","_resizeTo","oldCapacity","firstLineError","disableTrampolineIfNecessary","enableTrampoline","haveItemsQueued","throwLater","invokeLater","invoke","settlePromises","_settlePromises","invokeFirst","_drainQueue","_reset","_TypeError","_RangeError","Warning","CancellationError","TimeoutError","AggregateError","methods","errorTypes","Objectfreeze","RejectionError","INTERNAL","getThen","isAnyBluebirdPromise","doThenable","_pushContext","_captureStackTrace","_popContext","synchronous","_resolveCallback","_rejectCallback","_progress","_then","_fulfillUnchecked","_rejectUncheckedCheckError","_progressUnchecked","tryConvertToPromise","apiRejection","toResolutionValue","PromiseArray","_promise","_propagateFrom","_values","_totalResolved","_init","resolveValueIfEmpty","_target","_isFulfilled","_isPending","_reason","_value","__hardReject__","getActualLength","shouldCopyValues","isResolved","_isResolved","maybePromise","_ignoreRejections","_proxyPromiseArray","_promiseFulfilled","_promiseRejected","_resolveEmptyArray","_resolve","_promiseProgressed","progressValue","CapturedTrace","_parent","uncycle","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","prev","currentLastIndex","currentLastLine","commonRootMeetPoint","cleanStack","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","stackFramesAsArray","formatNonError","JSON","stringify","snip","maxChars","parseLineInfo","matches","parseLineInfoRegex","fileName","warn","bluebirdFramePattern","formatStack","nodes","stackToIndex","cycleEdgeNode","currentChildLength","hasParent","attachExtraTrace","__stackCleaned__","parseStackAndMessage","trace","formatAndLogError","console","unhandledRejection","isSupported","fireRejectionEvent","localHandler","localEventFired","globalEventFired","fireGlobalEvent","domEventFired","fireDomEvent","setBounds","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","info","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","customEventWorks","anyEventWorks","ev","CustomEvent","event","createEvent","initCustomEvent","dispatchEvent","detail","bubbles","cancelable","toWindowMethodNameMap","methodName","method","stderr","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","_unsetRejectionIsUnhandled","_bitField","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_isRejectionUnhandled","_getCarriedStackTrace","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_setCarriedStackTrace","capturedTrace","_fulfillmentHandler0","_isCarryingStackTrace","force","_traceForced","_trace","_peekContext","ignoreSelf","_warn","warning","ctx","onPossiblyUnhandledRejection","domain","onUnhandledRejectionHandled","longStackTraces","hasLongStackTraces","isDebugging","peekContext","contextStack","NEXT_FILTER","CatchFilter","instances","_instances","_callback","safePredicate","safeObject","retfilter","errors","doFilter","boundTo","_boundValue","itemIsErrorType","shouldHandle","PromiseResolver","asCallback","_nodebackForPromise","fulfill","progress","cancel","toJSON","progressed","_isFollowingOrFulfilledOrRejected","_progressHandlerAt","_progressHandler0","_doProgressWith","progression","_promiseAt","_receiverAt","_resolveFromSyncValue","attempt","rejectThis","targetRejected","promiseRejectionQueued","bindingPromise","bindingResolved","thisArg","bindingRejected","_setBoundTo","_boundTo","_isBound","returnThis","throwThis","return$","throw$","promisedFinally","reasonOrValue","finallyHandler","tapHandler","_passThroughHandler","isFinally","promiseAndHandler","lastly","tap","returner","returnUndefined","throwUndefined","wrapper","action","thenReturn","thenThrow","PromiseInspection","_isRejected","thenCallbacks","callers","Holder","total","p1","p2","p3","p4","p5","checkFulfillment","last","holder","callbacks","spread","MappingPromiseArray","limit","_filter","_preservedValues","_limit","_inFlight","_queue","EMPTY_ARRAY","_init$","concurrency","isFinite","PENDING","preservedValues","booleans","_cancel","isCancellable","promiseToReject","_cancellationParent","_unsetCancellable","cancellable","_cancellable","_setCancellable","uncancellable","fork","didFulfill","didReject","didProgress","createContext","inspectionMapper","inspections","inspection","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","defer","disposerSuccess","disposerFail","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","resource","doDispose","_unsetDisposable","using","disposer","vals","_disposer","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_run","_next","_continue","done","_throw","next","coroutine","PromiseSpawn$","generator","spawn","addYieldHandler","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","nodeify","adapter","cr","callerCache","getterCache","ensureMethod","caller","namedGetter","indexedGetter","getMethodCaller","getGetter","makeMethodCaller","makeGetter","getCompiled","compiler","cache","maybeCaller","getter","maybeGetter","PropertiesPromiseArray","props","castValue","keyOffset","race","raceLater","cast","ReductionPromiseArray","accum","_each","_zerothIsAccum","_gotAccum","_reducingIndex","_valuesPhase","rejected","_accum","initialValue","valuesPhaseIndex","isEach","gotAccum","valuesPhase","SettledPromiseArray","_promiseResolved","SomePromiseArray","_howMany","_unwrap","_initialized","setHowMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","setUnwrap","_addFulfilled","_fulfilled","_addRejected","_rejected","_SomePromiseArray","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","passesDefaultFilter","defaultFilter","promisifyAll","promisifier","escapeIdentRegex","makeNodePromisified","THIS","promisify","makeNodePromisifiedEval","noCopyProps","switchCaseArgumentOrder","likelyArgumentCount","argumentSequence","argumentCount","parameterDeclaration","parameterCount","originalName","generateCallForArgumentCount","comma","shouldProxyThis","newParameterCount","argumentOrder","getFunctionCode","promisified","defaultThis","PromiseReduce","each","successClear","handle","failureClear","afterTimeout","afterValue","delay","ms","PromiseMap","resolver","_rejectionHandler0","_promise0","_receiver0","_resolveFromResolver","fillTypes","p","makeSelfResolutionError","reflect","msg","APPLY","require$$5","require$$6","require$$7","require$$8","require$$9","caught","catchInstances","catchFilter","_setIsFinal","all","fulfillmentValue","rejectionReason","fromNode","pending","fulfilled","setScheduler","internalData","haveInternalData","_setIsMigrated","callbackIndex","_addCallbacks","_isSettlePromisesQueued","_settlePromiseAtPostResolution","_settlePromiseAt","_isFollowing","_setLength","_setFulfilled","_setRejected","_setFollowing","_isFinal","_unsetIsMigrated","_isMigrated","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallbacks","follower","_setProxyHandlers","promiseSlotValue","promiseArray","shouldBind","propagationFlags","_setFollowee","_rejectUnchecked","shouldNotMarkOriginatingFromRejection","hasStack","_settlePromiseFromHandler","_followee","_cleanValues","carriedStackTrace","_clearCallbackDataAtIndex","_setSettlePromisesQueued","_unsetSettlePromisesQueued","_queueSettlePromises","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","require$$21","require$$22","require$$23","require$$24","require$$25","require$$26","require$$27","require$$28","require$$29","require$$30","require$$31","require$$32","workQueue","drain","scheduler","onUnhandledRejection","useFullStackTrace","location","search","UNEXPECTED_FULL_TRACE","onResolve","onReject","evaluated","throwIfNonUnexpectedError","staticMethodName","addAdditionalPromiseMethods","executeAnd","defaultDepth","matchDepthParameter","UNEXPECTED_DEPTH","errorMethodBlacklist","missingOutputMessage","outputFromOptions","isUnexpected","buildDiff","createDiff","makeDiffResultBackwardsCompatible","expected","v","depth","getDefaultErrorMessage","standardErrorMessage","errorWithDiff","comparison","getNestedErrorMessage","getErrorMode","getDefaultOrNestedMessage","hasDiff","getDiffMethod","getDiff","getDiffMessage","errorWithBubbleThrough","serializeMessage","_hasSerializedErrorMessage","htmlFormat","htmlMessage","originalError","newStack","removedFrames","stackStart","indentation","newError","getLabel","currentError","label","getParents","getAllErrors","__defineGetter__","jasmine","getEnv","addReporter","specStarted","spec","specDone","wrappedExpectProto","callInNestedContext","jsFunctionName","subjectType","isPendingPromise","wrappedError","execute","assertionIndex","assertionRule","rest","nextArgumentType","_getSubjectType","_getArgTypes","_getAssertionIndices","_assertionIndices","assertionIndices","currentAssertionRule","OUTER","_unexpectedType","typeEqualityCache","typeOrTypeName","cachedValue","seen","outputOrFormat","printOutput","currentDepth","objType","childDepth","expandTypeAlternations","createPermutations","tails","tail","subjectRequirement","parseTypeToken","typeToken","typeDeclaration","matchNameAndOperator","SyntaxError","operator","hasVarargs","nextIndex","$0","$1","$2","argRequirements","lastArgRequirements","assertionRequirements","placeholderSplitRegexp","placeholderRegexp","childOutput","placeholderArgs","token","placeholderArg","patternOrPatterns","childUnexpected","maxArguments","errorMessage","patterns","defaultValueByFlag","assertionHandlers","maxNumberOfArgs","assertionDeclaration","expandAssertion","expandedAssertion","previous","argDefinition","alternations","declaration","specificity","extendedBaseType","extendedType","originalInspect","originalDiff","throwAssertionNotFoundError","compareAssertions","aAssertion","lookupAssertionRule","bAssertion","candidateHandlers","appendItems","assertionsWithScore","assertionStrings","score","leven","bestMatch","jsString","requireAssertionSuffix","cachedTypes","assertionType","relaxed","matchesHandler","requireArgumentsLength","lastRequirement","handlers","instanceHandlers","executeExpect","remainingTokens","argsWithAssertionPrepended","wrappedExpect","argRule","argTypes","asyncMisusage","_isAsync","recursions","declarations","clonedAssertions","childExpect","exportAssertion","exportType","exportStyle","isFlag","isAlternation","removeEmptyStrings","texts","alternation","splitRegex","permutations","permutation","JsDiff","mapper","clonePath","path","newPos","components","removeEmpty","escapeHTML","Diff","ignoreWhitespace","oldString","newString","removed","added","tokenize","newLen","oldLen","maxEditLength","bestPath","oldPos","extractCommon","editLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","pushComponent","equals","left","right","reWhitespace","CharDiff","WordDiff","WordWithSpaceDiff","CssDiff","LineDiff","retLines","diffChars","oldStr","newStr","diffWords","diffWordsWithSpace","diffLines","diffCss","createPatch","oldHeader","newHeader","contextLines","eofNL","curRange","isLast","isLastOfType","oldRangeStart","newRangeStart","oldLine","newLine","contextSize","applyPatch","uniDiff","diffstr","remEOFNL","addEOFNL","meh","oldlength","oldlines","newlength","newlines","convertChangesToXML","change","convertChangesToDMP","jsBoolean","jsNumber","diffAddedLine","diffAddedHighlight","diffAddedSpecialChar","diffRemovedLine","diffRemovedHighlight","diffRemovedSpecialChar","partialMatchHighlight","jsKeyword","jsPrimitive","jsRegexp","jsKey","inspectedValue","isArrayLike","keyOmitted","singleQuotedString","language","fragment","separator","baseStyle","markUpSpecialCharacters","matchTrailingSpace","specialCharRegExp","part","+","-","lastPart","stringDiff","oldValue","newValue","replaced","oldEndsWithNewline","newEndsWithNewline","stringDiffFragment","endsWithNewline","top","pens","flattenedPens","reverse","maxHeight","blockNumbers","blockOffsets","lineNumber","contentLeft","hasOutputChar","currentLine","currentBlock","changeOutputs","topByChangeNumber","changeOutput","arrows","columnSet","arrow","merge","INSPECT_MAX_BYTES","poolSize","_augment","Symbol","species","allocUnsafeSlow","list","pos","swap16","swap32","swap64","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","ieee754.read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","similar","includeNonNumericalProperties","offsetIndex","mutatedArray","k","itemsDiff","aIndex","bIndex","removedItems","removeIndex","moveFromIndex","insertIndex","expectedIndex","conflicts","nonNumericalKeys","isSeenByNonNumericalKey","getOwnPropertySymbols","symbol","numberIsNan","INDENT_RE","isIndent","tabs","spaces","amount","repeating","unwrap","prefixOutput","suffixOutput","annotationBlock","shouldEqualError","keyComparator","aIsSymbol","bIsSymbol","aString","bString","forceMultipleLines","delimiter","symbols","actualKeys","expectedKeys","inspectedItems","propertyDescriptor","hasGetter","hasSetter","propertyOutput","property","maxLineLength","inspectedItem","itemsOutput","currentLineLength","valueOutput","annotation","conflicting","isInlineDiff","keyDiff","typeA","aKeys","bKeys","numberOfSimilarKeys","requiredSimilarKeys","numericalPropertiesOnly","multipleLines","diffLimit","arrayChanges","indexOfLastNonInsert","previousValue","arrowsAlongsideChangeOutputs","delimiterOutput","valueDiff","errorName","unexpectedErrorMethodBlacklist","date","dateStr","toUTCString","milliseconds","getUTCMilliseconds","millisecondsStr","preamble","bodyIndent","matchSource","openingBrace","matchBodyAndIndent","closingBrace","detectIndent","orBranch","ignoreCase","multiline","regExp","digitWidth","hexDumpWidth","hexDump","maxLength","asciiChars","octet","codeStr","numBits","intOrUint","Constructor","Buffer.isBuffer","arrayChangesCallback","isEqual","isSimilar","countConflicts","stackCallsRemaining","areSimilar","setEqual","wrapDiffWithTypePrefixAndSuffix","instantiate","ProxyConstructor","not","epsilon","toExponential","className","superset","captures","flushUntilIndex","removedHighlight","expectedPropertyValue","actualPropertyValue","properties","propertyNames","own","keysInSubject","subjectKeys","hasKeys","only","keyInValue","subjectIsArrayLike","ranges","needle","partial","endIndex","range","firstUncoveredIndex","partialMatch","finish","threw","appendErrorMessage","nextArg","extraArgs","catch","traverse","unwrappedValue","unwrappedSubject","valueType","valueKeys","convertedSubject","keyPromises","valueKey","failWithChanges","toSatisfyResult","toSatisfyMatrix","indexByIndexChanges","isAsync","nonNumericalKeysAndSymbols","existingResult","arrayChangesAsync","promiseByKey","valueKeyType","thisObject","exhaustively","nonOwnKeysWithDefinedValues","valueKeysWithDefinedValues","subjectKeysWithDefinedValues","missingArrayIndex","annotationOnNextLine","compareFunction","numerically","nextAssertion","callbackArgs","calledTwice","assert"],"mappings":"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"}